{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T16:06:21.695Z",
    "slug": "7spade-azure-role-selector",
    "source_url": "https://github.com/7Spade/ng-dragon/tree/main/.github/skills/azure-role-selector",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1ca826476f1f03d332d947f91eb8d4d01d597207412c01f1d07643d34c4d779f",
    "tree_hash": "bca827180e8143a19363170a651c95b891cc11462dacb6bd5cf4fb2fe72ffb8f"
  },
  "skill": {
    "name": "azure-role-selector",
    "description": "When user is asking for guidance for which role to assign to an identity given desired permissions, this agent helps them understand the role that will meet the requirements with least privilege access and how to apply that role.",
    "summary": "Helps identify the minimal Azure RBAC role for given permissions using Azure MCP tools.",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "7Spade",
    "license": "MIT",
    "category": "security",
    "tags": [
      "azure",
      "rbac",
      "security",
      "permissions",
      "iam"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Static analyzer flagged 16 patterns including C2 keywords and cryptographic terms, but all findings are false positives. The skill contains only declarative YAML configuration that references Azure MCP tools for documentation queries. No executable code, network access, or file operations present. Safe for publication.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 223,
    "audit_model": "claude",
    "audited_at": "2026-01-21T16:06:21.695Z"
  },
  "content": {
    "user_title": "Find Minimal Azure RBAC Roles for Your Permissions",
    "value_statement": "Selecting the right Azure role with appropriate permissions is complex and error-prone. This skill queries Azure documentation through MCP tools to identify the minimal built-in role that matches your requirements or generates custom role definitions following least privilege principles.",
    "seo_keywords": [
      "Claude",
      "Claude Code",
      "Codex",
      "Azure",
      "RBAC",
      "role-based access control",
      "permissions",
      "IAM",
      "security",
      "least privilege"
    ],
    "actual_capabilities": [
      "Query Azure documentation to find built-in roles matching desired permissions",
      "Generate custom role definitions when no built-in role matches requirements",
      "Provide Azure CLI commands for role assignment to identities",
      "Generate Bicep code snippets for role assignments following best practices",
      "Recommend minimal roles following least privilege principle",
      "Access Azure best practices documentation for role assignments"
    ],
    "limitations": [
      "Requires Azure MCP server to be installed and configured",
      "Only provides guidance and code snippets, does not execute Azure commands",
      "Limited to Azure RBAC roles and permissions, not applicable to other cloud providers",
      "Depends on Azure MCP tools availability and functionality"
    ],
    "use_cases": [
      {
        "title": "DevOps Engineer Setting Up CI/CD",
        "description": "A DevOps engineer needs to assign permissions to a service principal for automated deployments. The skill identifies the minimal built-in role or generates a custom role, then provides CLI commands and Bicep code for the role assignment.",
        "target_user": "DevOps Engineer"
      },
      {
        "title": "Security Architect Implementing Least Privilege",
        "description": "A security architect auditing permissions needs to find the most restrictive role for a specific set of operations. The skill queries Azure documentation to recommend the role with minimal permissions that still satisfies requirements.",
        "target_user": "Security Architect"
      },
      {
        "title": "Cloud Administrator Managing User Access",
        "description": "A cloud administrator needs to grant specific Azure permissions to a team member. The skill helps identify the appropriate built-in role and provides both CLI and Infrastructure-as-Code options for implementation.",
        "target_user": "Cloud Administrator"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Role Lookup",
        "prompt": "I need to give a user read access to storage accounts. What Azure role should I use?",
        "scenario": "Finding a built-in role for common permissions"
      },
      {
        "title": "Service Principal Permissions",
        "prompt": "My service principal needs to deploy resources to a resource group. Find the minimal role and show me how to assign it.",
        "scenario": "Identifying least privilege role with assignment instructions"
      },
      {
        "title": "Custom Role Creation",
        "prompt": "I need a role that can read secrets from Key Vault but cannot delete them. Generate a custom role definition.",
        "scenario": "Creating custom role when built-in roles are too permissive"
      },
      {
        "title": "Infrastructure as Code Implementation",
        "prompt": "I want to assign the Contributor role to a managed identity at subscription scope. Show me the Bicep code following Azure best practices.",
        "scenario": "Generating Bicep templates for role assignments"
      }
    ],
    "output_examples": [
      {
        "input": "What role should I use to allow a user to restart virtual machines?",
        "output": "Based on Azure documentation, the Virtual Machine Contributor role provides the minimal permissions to restart VMs. This role allows start, restart, and deallocate operations without granting full resource modification rights. Here is the CLI command to assign it: az role assignment create --assignee user@domain.com --role 'Virtual Machine Contributor' --scope /subscriptions/your-subscription-id/resourceGroups/your-rg"
      },
      {
        "input": "Generate a custom role for reading storage blobs but not deleting them",
        "output": "I have generated a custom role definition with these permissions: Microsoft.Storage/storageAccounts/blobServices/containers/read and Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read. The role excludes delete actions. Here is the JSON definition and CLI command to create it in your subscription."
      }
    ],
    "best_practices": [
      "Always specify the narrowest scope when assigning roles (resource level preferred over subscription level)",
      "Review the generated role permissions before applying them to production environments",
      "Use managed identities instead of service principals when possible for better security"
    ],
    "anti_patterns": [
      "Assigning Owner or Contributor roles when more restrictive built-in roles exist",
      "Applying role assignments at subscription scope when resource group scope is sufficient",
      "Creating custom roles without first checking if built-in roles meet requirements"
    ],
    "faq": [
      {
        "question": "Does this skill execute Azure commands automatically?",
        "answer": "No, this skill only provides guidance and generates CLI commands or Bicep code. You must review and execute the commands yourself in your Azure environment."
      },
      {
        "question": "What is the Azure MCP server requirement?",
        "answer": "This skill requires the Azure MCP (Model Context Protocol) server to be installed and configured. The MCP server provides access to Azure documentation and schema information."
      },
      {
        "question": "Can this skill work with other cloud providers like AWS or GCP?",
        "answer": "No, this skill is specifically designed for Azure RBAC. It uses Azure-specific MCP tools and documentation."
      },
      {
        "question": "How does this skill ensure least privilege access?",
        "answer": "The skill queries Azure documentation to find the most restrictive built-in role that satisfies your requirements. When generating custom roles, it includes only the specific permissions you request."
      },
      {
        "question": "Can I use this skill to audit existing role assignments?",
        "answer": "This skill focuses on identifying and assigning new roles. For auditing existing assignments, you should use Azure CLI or Azure Portal directly."
      },
      {
        "question": "What if no built-in role matches my exact requirements?",
        "answer": "The skill will use the Azure MCP extension to generate a custom role definition with only the permissions you need. It provides both the JSON definition and CLI commands to create the custom role."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 6
    }
  ]
}
