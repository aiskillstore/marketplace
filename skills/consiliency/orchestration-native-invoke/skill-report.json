{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T22:22:58.091Z",
    "slug": "consiliency-orchestration-native-invoke",
    "source_url": "https://github.com/Consiliency/treesitter-chunker/tree/main/.ai-dev-kit/skills/orchestration/native-invoke",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "806da2316c0c7ab1ce5308ec158105afdad04977edae42574dcaf744de514964",
    "tree_hash": "ea9e0a56b75632e21e3773894bad0f844e104e3f61f2e499c651a3e7c38d50a7"
  },
  "skill": {
    "name": "orchestration-native-invoke",
    "description": "Invoke external AI CLIs via native Task agents (Claude, Codex, Gemini, Cursor). Primary mode for multi-provider orchestration with fork-terminal fallback for auth.",
    "summary": "Invoke external AI CLIs via native Task agents (Claude, Codex, Gemini, Cursor). Primary mode for mul...",
    "icon": "ðŸ”„",
    "version": "1.0.0",
    "author": "Consiliency",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "orchestration",
      "multi-provider",
      "ai-agents",
      "task-execution",
      "routing"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing markdown guides with no executable code. All 113 static findings are false positives: markdown code block fences were misidentified as Ruby backtick execution, SHA-256 hashes were flagged as weak crypto, and relative path references were misclassified as path traversal. The previous audit correctly assessed this as safe.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 7,
            "line_end": 23
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 23,
            "line_end": 40
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 40,
            "line_end": 49
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 49,
            "line_end": 53
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 53,
            "line_end": 73
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 73,
            "line_end": 80
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 80,
            "line_end": 82
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 82,
            "line_end": 85
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 85,
            "line_end": 87
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 87,
            "line_end": 90
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 90,
            "line_end": 92
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 92,
            "line_end": 95
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 95,
            "line_end": 97
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 97,
            "line_end": 102
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 102,
            "line_end": 104
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 104,
            "line_end": 107
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 107,
            "line_end": 109
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 109,
            "line_end": 112
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 112,
            "line_end": 114
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 114,
            "line_end": 120
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 120,
            "line_end": 137
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 137,
            "line_end": 153
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 153,
            "line_end": 161
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 161,
            "line_end": 173
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 173,
            "line_end": 178
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 178,
            "line_end": 183
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 183,
            "line_end": 188
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 188,
            "line_end": 190
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 190,
            "line_end": 193
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 193,
            "line_end": 195
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 195,
            "line_end": 198
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 198,
            "line_end": 200
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 200,
            "line_end": 204
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 204,
            "line_end": 206
          },
          {
            "file": "cookbook/provider-routing.md",
            "line_start": 206,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 11,
            "line_end": 11
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 37,
            "line_end": 47
          },
          {
            "file": "SKILL.md",
            "line_start": 47,
            "line_end": 49
          },
          {
            "file": "SKILL.md",
            "line_start": 49,
            "line_end": 67
          },
          {
            "file": "SKILL.md",
            "line_start": 67,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 82
          },
          {
            "file": "SKILL.md",
            "line_start": 82,
            "line_end": 83
          },
          {
            "file": "SKILL.md",
            "line_start": 83,
            "line_end": 84
          },
          {
            "file": "SKILL.md",
            "line_start": 84,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 96
          },
          {
            "file": "SKILL.md",
            "line_start": 96,
            "line_end": 110
          },
          {
            "file": "SKILL.md",
            "line_start": 110,
            "line_end": 110
          },
          {
            "file": "SKILL.md",
            "line_start": 110,
            "line_end": 111
          },
          {
            "file": "SKILL.md",
            "line_start": 111,
            "line_end": 111
          },
          {
            "file": "SKILL.md",
            "line_start": 111,
            "line_end": 112
          },
          {
            "file": "SKILL.md",
            "line_start": 112,
            "line_end": 112
          },
          {
            "file": "SKILL.md",
            "line_start": 112,
            "line_end": 117
          },
          {
            "file": "SKILL.md",
            "line_start": 117,
            "line_end": 120
          },
          {
            "file": "SKILL.md",
            "line_start": 120,
            "line_end": 126
          },
          {
            "file": "SKILL.md",
            "line_start": 126,
            "line_end": 144
          },
          {
            "file": "SKILL.md",
            "line_start": 144,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 171
          },
          {
            "file": "SKILL.md",
            "line_start": 171,
            "line_end": 179
          },
          {
            "file": "SKILL.md",
            "line_start": 179,
            "line_end": 185
          },
          {
            "file": "SKILL.md",
            "line_start": 185,
            "line_end": 187
          },
          {
            "file": "SKILL.md",
            "line_start": 187,
            "line_end": 189
          },
          {
            "file": "SKILL.md",
            "line_start": 189,
            "line_end": 191
          },
          {
            "file": "SKILL.md",
            "line_start": 191,
            "line_end": 193
          },
          {
            "file": "SKILL.md",
            "line_start": 193,
            "line_end": 195
          },
          {
            "file": "SKILL.md",
            "line_start": 195,
            "line_end": 199
          },
          {
            "file": "SKILL.md",
            "line_start": 199,
            "line_end": 201
          },
          {
            "file": "SKILL.md",
            "line_start": 201,
            "line_end": 203
          },
          {
            "file": "SKILL.md",
            "line_start": 203,
            "line_end": 205
          },
          {
            "file": "SKILL.md",
            "line_start": 205,
            "line_end": 207
          },
          {
            "file": "SKILL.md",
            "line_start": 207,
            "line_end": 208
          },
          {
            "file": "SKILL.md",
            "line_start": 208,
            "line_end": 209
          },
          {
            "file": "SKILL.md",
            "line_start": 209,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 213,
            "line_end": 215
          },
          {
            "file": "SKILL.md",
            "line_start": 215,
            "line_end": 217
          },
          {
            "file": "SKILL.md",
            "line_start": 217,
            "line_end": 219
          },
          {
            "file": "SKILL.md",
            "line_start": 219,
            "line_end": 221
          },
          {
            "file": "SKILL.md",
            "line_start": 221,
            "line_end": 223
          },
          {
            "file": "SKILL.md",
            "line_start": 223,
            "line_end": 234
          },
          {
            "file": "SKILL.md",
            "line_start": 234,
            "line_end": 248
          },
          {
            "file": "SKILL.md",
            "line_start": 248,
            "line_end": 254
          },
          {
            "file": "SKILL.md",
            "line_start": 254,
            "line_end": 259
          },
          {
            "file": "SKILL.md",
            "line_start": 259,
            "line_end": 262
          },
          {
            "file": "SKILL.md",
            "line_start": 262,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 265,
            "line_end": 273
          },
          {
            "file": "SKILL.md",
            "line_start": 273,
            "line_end": 274
          },
          {
            "file": "SKILL.md",
            "line_start": 274,
            "line_end": 275
          },
          {
            "file": "SKILL.md",
            "line_start": 275,
            "line_end": 279
          },
          {
            "file": "SKILL.md",
            "line_start": 279,
            "line_end": 285
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 67,
            "line_end": 67
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 185,
            "line_end": 185
          },
          {
            "file": "SKILL.md",
            "line_start": 199,
            "line_end": 199
          },
          {
            "file": "SKILL.md",
            "line_start": 213,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 128,
            "line_end": 128
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 142,
            "line_end": 142
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 704,
    "audit_model": "claude",
    "audited_at": "2026-01-16T22:22:58.091Z"
  },
  "content": {
    "user_title": "Route AI tasks to external providers",
    "value_statement": "Users need guidance on invoking external AI coding tools. This skill provides documented patterns and workflows for using Claude Code Task agents to call Codex, Gemini, and Cursor with proper authentication and read-only controls.",
    "seo_keywords": [
      "Claude Code native invoke",
      "AI provider orchestration",
      "multi-agent routing",
      "Claude Codex Gemini Cursor",
      "Task agent execution",
      "AI CLI integration",
      "provider routing",
      "external AI agents",
      "Claude Code",
      "Claude Code CLI"
    ],
    "actual_capabilities": [
      "Guide Task agent configuration for external AI providers including Codex, Gemini, and Cursor",
      "Document read-only vs write mode patterns per provider with proper sandbox flags",
      "Explain authentication recovery using fork-terminal fallback for interactive logins",
      "Provide parallel invocation patterns for launching multiple provider agents simultaneously",
      "Show worktree isolation patterns for safe agent file modifications without affecting main codebase"
    ],
    "limitations": [
      "Contains documentation only, does not execute any code itself",
      "Requires Claude Code native Task tool to use these patterns",
      "CLI permissions must be configured separately in .claude/settings.json for each provider"
    ],
    "use_cases": [
      {
        "target_user": "AI engineers",
        "title": "Orchestrate multiple AI providers",
        "description": "Route complex tasks to the best provider based on context size, sandbox needs, or reasoning requirements."
      },
      {
        "target_user": "DevOps teams",
        "title": "Automate external CLI invocations",
        "description": "Set up automated workflows that invoke Codex, Gemini, or Cursor agents via Task tool calls."
      },
      {
        "target_user": "Security-conscious developers",
        "title": "Maintain isolation and audit trails",
        "description": "Use worktree isolation and read-only modes to safely let external agents analyze codebases."
      }
    ],
    "prompt_templates": [
      {
        "title": "Route to Codex",
        "scenario": "Sandboxed execution needed",
        "prompt": "Use orchestration:native-invoke. Invoke Codex in sandboxed read-only mode: codex exec --sandbox read-only --full-auto --model gpt-5.2-codex '<security audit this repository>'"
      },
      {
        "title": "Route to Gemini",
        "scenario": "Large context analysis",
        "prompt": "Use orchestration:native-invoke. Route this 150k token codebase to Gemini: gemini --model gemini-3-pro --sandbox --yolo '<analyze architecture patterns>'"
      },
      {
        "title": "Parallel routing",
        "scenario": "Multi-provider comparison",
        "prompt": "Use orchestration:native-invoke with parallel execution. Launch Task agents for Codex, Gemini, and Cursor simultaneously with the same prompt: '<implement a REST API endpoint>'"
      },
      {
        "title": "IDE-integrated edits",
        "scenario": "Cursor multi-file changes",
        "prompt": "Use orchestration:native-invoke. Invoke Cursor Agent for IDE-integrated refactoring: cursor-agent --model claude-sonnet-4.5 --force -p '<refactor these 5 components>'"
      }
    ],
    "output_examples": [
      {
        "input": "Route this security audit to Codex in sandboxed mode",
        "output": [
          "Codex agent invoked with sandbox read-only flags",
          "Agent executed in background task",
          "Results collected via TaskOutput",
          "No files modified in main workspace"
        ]
      },
      {
        "input": "Analyze a 200k token codebase with Gemini",
        "output": [
          "Gemini 3 Pro selected for large context",
          "Command: gemini --model gemini-3-pro --sandbox --yolo",
          "Analysis completed with full context loaded",
          "Results synthesized from entire codebase"
        ]
      },
      {
        "input": "Compare implementations across three providers",
        "output": [
          "Three Task agents launched in parallel",
          "Each provider returned independent results",
          "Results compared and synthesized",
          "Best approach selected from comparison"
        ]
      }
    ],
    "best_practices": [
      "Always run CLI --help before constructing commands to verify available flags for each provider",
      "Use read-only mode with sandbox flags for analysis tasks to prevent accidental modifications",
      "Configure worktree isolation for write-mode operations to keep changes isolated from main codebase"
    ],
    "anti_patterns": [
      "Skipping the cookbook read step and running CLI commands without flag verification",
      "Using interactive flags in non-interactive contexts where TTY input is unavailable",
      "Running agents without read-only constraints when only analysis is needed"
    ],
    "faq": [
      {
        "question": "Which AI providers are supported?",
        "answer": "OpenAI Codex, Google Gemini, and Cursor Agent. Claude Code orchestrates using native Task agents."
      },
      {
        "question": "What are the context limits per provider?",
        "answer": "Claude Opus: 200k tokens, Gemini 3 Pro: 2M tokens, Codex: 32k tokens. Choose based on codebase size."
      },
      {
        "question": "How do I configure CLI permissions?",
        "answer": "Add Bash permissions in .claude/settings.json for each provider. Run /ai-dev-kit:setup for automatic configuration."
      },
      {
        "question": "Is my data sent to external providers?",
        "answer": "Yes. When using Codex, Gemini, or Cursor, your code and prompts are sent to their respective services per their privacy policies."
      },
      {
        "question": "What happens if authentication fails?",
        "answer": "The skill detects auth errors and triggers fork-terminal fallback. Interactive login runs, then native agent invocation retries."
      },
      {
        "question": "How is this different from fork-terminal?",
        "answer": "Native Task agents support parallel execution and clean result collection via TaskOutput. Fork-terminal handles interactive logins."
      }
    ]
  },
  "file_structure": [
    {
      "name": "cookbook",
      "type": "dir",
      "path": "cookbook",
      "children": [
        {
          "name": "provider-routing.md",
          "type": "file",
          "path": "cookbook/provider-routing.md",
          "lines": 214
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 306
    }
  ]
}
