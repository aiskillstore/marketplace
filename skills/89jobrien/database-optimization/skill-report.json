{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T12:16:08.983Z",
    "slug": "89jobrien-database-optimization",
    "source_url": "https://github.com/89jobrien/steve/tree/main/steve/skills/database-optimization",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1ff5208697832962ac63dd6f97080cd2cc9c6f05feca09b5c8d68dd930cf61c6",
    "tree_hash": "0a195e46b9aad304b0fd02f4ecac03c9f030330cbb2b759d3cbcb812b6db57b1"
  },
  "skill": {
    "name": "database-optimization",
    "description": "SQL query optimization and database performance specialist. Use when optimizing slow queries, fixing N+1 problems, designing indexes, implementing caching, or improving database performance. Works with PostgreSQL, MySQL, and other databases.",
    "summary": "SQL query optimization and database performance specialist. Use when optimizing slow queries, fixing...",
    "icon": "ðŸ—„ï¸",
    "version": "1.0.1",
    "author": "Joseph OBrien",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sql",
      "database",
      "performance",
      "optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill containing only markdown files with SQL and code examples. No executable code, network calls, file system access, or external command execution. All static findings are false positives - the scanner misidentified SQL syntax as security issues. Content is educational guidance for database optimization.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "references/query-patterns.md",
            "line_start": 17,
            "line_end": 20
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 24,
            "line_end": 27
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 27,
            "line_end": 33
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 33,
            "line_end": 39
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 39,
            "line_end": 43
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 43,
            "line_end": 49
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 49,
            "line_end": 53
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 53,
            "line_end": 59
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 59,
            "line_end": 63
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 63,
            "line_end": 70
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 70,
            "line_end": 74
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 74,
            "line_end": 82
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 82,
            "line_end": 88
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 88,
            "line_end": 92
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 92,
            "line_end": 96
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 96,
            "line_end": 100
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 100,
            "line_end": 104
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 104,
            "line_end": 107
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 107,
            "line_end": 115
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 115,
            "line_end": 123
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 123,
            "line_end": 127
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 127,
            "line_end": 135
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 135,
            "line_end": 139
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 139,
            "line_end": 145
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 145,
            "line_end": 151
          },
          {
            "file": "references/query-patterns.md",
            "line_start": 151,
            "line_end": 165
          },
          {
            "file": "SKILL.md",
            "line_start": 40,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 50
          },
          {
            "file": "SKILL.md",
            "line_start": 50,
            "line_end": 52
          },
          {
            "file": "SKILL.md",
            "line_start": 52,
            "line_end": 80
          },
          {
            "file": "SKILL.md",
            "line_start": 80,
            "line_end": 88
          },
          {
            "file": "SKILL.md",
            "line_start": 88,
            "line_end": 98
          },
          {
            "file": "SKILL.md",
            "line_start": 98,
            "line_end": 102
          },
          {
            "file": "SKILL.md",
            "line_start": 102,
            "line_end": 106
          },
          {
            "file": "SKILL.md",
            "line_start": 106,
            "line_end": 115
          },
          {
            "file": "SKILL.md",
            "line_start": 115,
            "line_end": 123
          },
          {
            "file": "SKILL.md",
            "line_start": 123,
            "line_end": 130
          },
          {
            "file": "SKILL.md",
            "line_start": 130,
            "line_end": 144
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 513,
    "audit_model": "claude",
    "audited_at": "2026-01-16T12:16:08.983Z"
  },
  "content": {
    "user_title": "Optimize database queries and performance",
    "value_statement": "Slow database queries and N+1 problems cause application performance issues and user frustration. This skill provides expert guidance on SQL optimization, index design, and caching strategies to improve database performance.",
    "seo_keywords": [
      "database optimization",
      "SQL query optimization",
      "index design",
      "N+1 problem fix",
      "PostgreSQL performance",
      "MySQL optimization",
      "caching strategies",
      "query performance",
      "Claude Code",
      "Claude"
    ],
    "actual_capabilities": [
      "Analyze SQL queries for performance issues",
      "Design and recommend database indexes",
      "Identify and resolve N+1 query problems",
      "Suggest caching strategies using Redis or Memcached",
      "Provide EXPLAIN ANALYZE guidance for query plans",
      "Recommend query patterns to avoid common anti-patterns"
    ],
    "limitations": [
      "Cannot execute queries or modify databases directly",
      "Cannot access user database systems or credentials",
      "Cannot install or configure database software",
      "Cannot generate production-ready migration scripts"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Optimize slow production queries",
        "description": "Analyze existing queries causing performance issues and recommend optimizations with proper index strategies."
      },
      {
        "target_user": "Full-stack developers",
        "title": "Fix N+1 query problems",
        "description": "Identify N+1 patterns in ORM code and recommend eager loading or batch query solutions."
      },
      {
        "target_user": "Database administrators",
        "title": "Design indexing strategies",
        "description": "Review query patterns and design composite or covering indexes for frequently accessed tables."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic query analysis",
        "scenario": "Get started with query optimization",
        "prompt": "Optimize this SQL query and explain how to improve its performance: SELECT * FROM orders WHERE status = 'pending' AND created_at > '2024-01-01';"
      },
      {
        "title": "Index recommendations",
        "scenario": "Design database indexes",
        "prompt": "Analyze these queries and recommend the indexes needed: SELECT * FROM products WHERE category_id = 5 ORDER BY created_at DESC; SELECT * FROM order_items WHERE order_id = 100 AND quantity > 0;"
      },
      {
        "title": "N+1 resolution",
        "scenario": "Fix N+1 query patterns",
        "prompt": "Fix this N+1 problem in Python Django code: users = User.objects.all() for u in users: print(u.posts.all())"
      },
      {
        "title": "Caching strategy",
        "scenario": "Implement Redis caching",
        "prompt": "Design a Redis caching strategy for user profile data that updates when user information changes. Include cache key structure and invalidation logic."
      }
    ],
    "output_examples": [
      {
        "input": "Optimize this slow query: SELECT * FROM products WHERE category = 'electronics' ORDER BY created_at DESC LIMIT 50;",
        "output": [
          "Current issue: Full table scan on products table - no index on category column",
          "Recommended index: CREATE INDEX idx_products_category_created ON products(category, created_at DESC);",
          "Expected improvement: Query time reduced from 800ms to 5-10ms",
          "Additional improvement: Change SELECT * to SELECT id, name, price, created_at to reduce data transfer"
        ]
      },
      {
        "input": "Fix this Ruby N+1 problem: User.all.each { |u| puts u.posts }",
        "output": [
          "Problem: This executes one query per user to fetch posts",
          "Solution: Use eager loading with includes method",
          "Optimized code: User.includes(:posts).each { |u| puts u.posts }",
          "Result: Single query loads all users and their posts"
        ]
      },
      {
        "input": "Create a Redis caching pattern for product data",
        "output": [
          "Cache key structure: product:{id}:{version}",
          "Set cache with TTL: redis.setex(key, 3600, data)",
          "Invalidate on update: Delete key when product modified",
          "Consider versioning for cache consistency during updates"
        ]
      }
    ],
    "best_practices": [
      "Always use EXPLAIN ANALYZE before and after optimizations to measure actual improvements",
      "Create composite indexes with columns in order: equality first, then range, then sort columns",
      "Test index changes on production-size datasets to avoid unexpected performance regressions"
    ],
    "anti_patterns": [
      "Avoid SELECT * - specify only the columns you need to reduce I/O and memory usage",
      "Do not apply functions to indexed columns in WHERE clauses as this prevents index usage",
      "Avoid leading wildcards in LIKE patterns (percent text) as they cannot use indexes efficiently"
    ],
    "faq": [
      {
        "question": "Which databases does this skill support?",
        "answer": "The skill covers PostgreSQL, MySQL, and general SQL patterns applicable to most relational databases including MariaDB and SQLite."
      },
      {
        "question": "What are the limits on query complexity?",
        "answer": "The skill handles single queries, JOIN combinations, and subquery optimization. Very complex multi-database queries may need manual tuning."
      },
      {
        "question": "How does this integrate with my existing tools?",
        "answer": "Provide your SQL or ORM code and the skill will suggest optimizations. You apply changes yourself in your development environment."
      },
      {
        "question": "Is my database data accessed during optimization?",
        "answer": "No. The skill only analyzes query structure you provide. No connection to your database or access to any data occurs."
      },
      {
        "question": "My query still runs slowly after applying suggestions. What now?",
        "answer": "Verify the index was created correctly. Check that your statistics are updated. Consider table partitioning or query rewriting for very large tables."
      },
      {
        "question": "How is this different from database monitoring tools?",
        "answer": "This skill provides expert guidance on query structure and indexing. Monitoring tools identify slow queries but do not suggest optimizations."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "query-patterns.md",
          "type": "file",
          "path": "references/query-patterns.md",
          "lines": 172
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 153
    }
  ]
}
