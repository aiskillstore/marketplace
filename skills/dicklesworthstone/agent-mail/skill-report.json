{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T03:55:42.905Z",
    "slug": "dicklesworthstone-agent-mail",
    "source_url": "https://github.com/Dicklesworthstone/agent_flywheel_clawdbot_skills_and_integrations/tree/main/skills/agent-mail",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "3d7fa466afaed91d245239c747ae83a8ac35e444c0d377dfd9cdd7398077d6e8",
    "tree_hash": "d860311d244af2206532f79f71d07a0bed3dd4355d850a14070875808d8a6821"
  },
  "skill": {
    "name": "agent-mail",
    "description": "MCP Agent Mail - Mail-like coordination layer for multi-agent workflows. Identities, inbox/outbox, file reservations, contact policies, threaded messaging, pre-commit guard, Human Overseer, static exports, disaster recovery. Git+SQLite backed. Python/FastMCP.",
    "summary": "MCP Agent Mail - Mail-like coordination layer for multi-agent workflows. Identities, inbox/outbox, f...",
    "icon": "ðŸ“¬",
    "version": "1.0.0",
    "author": "Dicklesworthstone",
    "license": "MIT",
    "category": "coordination",
    "tags": [
      "multi-agent",
      "coordination",
      "messaging",
      "file-management",
      "workflow"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "external_commands",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill contains only documentation (SKILL.md). The static analyzer flagged patterns that only apply to executable code, not markdown documentation. All findings are false positives: Ed25519 and Age are modern secure cryptography; shell syntax examples are documentation, not code; the install command uses standard secure practices (curl -fsSL from trusted GitHub source).",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 300,
            "line_end": 300
          },
          {
            "file": "SKILL.md",
            "line_start": 383,
            "line_end": 383
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 300,
            "line_end": 300
          },
          {
            "file": "SKILL.md",
            "line_start": 407,
            "line_end": 407
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 33
          },
          {
            "file": "SKILL.md",
            "line_start": 33,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 54
          },
          {
            "file": "SKILL.md",
            "line_start": 54,
            "line_end": 55
          },
          {
            "file": "SKILL.md",
            "line_start": 55,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 73
          },
          {
            "file": "SKILL.md",
            "line_start": 73,
            "line_end": 75
          },
          {
            "file": "SKILL.md",
            "line_start": 75,
            "line_end": 81
          },
          {
            "file": "SKILL.md",
            "line_start": 81,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 98
          },
          {
            "file": "SKILL.md",
            "line_start": 98,
            "line_end": 109
          },
          {
            "file": "SKILL.md",
            "line_start": 109,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 121
          },
          {
            "file": "SKILL.md",
            "line_start": 121,
            "line_end": 124
          },
          {
            "file": "SKILL.md",
            "line_start": 124,
            "line_end": 126
          },
          {
            "file": "SKILL.md",
            "line_start": 126,
            "line_end": 130
          },
          {
            "file": "SKILL.md",
            "line_start": 130,
            "line_end": 135
          },
          {
            "file": "SKILL.md",
            "line_start": 135,
            "line_end": 143
          },
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 144
          },
          {
            "file": "SKILL.md",
            "line_start": 144,
            "line_end": 145
          },
          {
            "file": "SKILL.md",
            "line_start": 145,
            "line_end": 146
          },
          {
            "file": "SKILL.md",
            "line_start": 146,
            "line_end": 152
          },
          {
            "file": "SKILL.md",
            "line_start": 152,
            "line_end": 160
          },
          {
            "file": "SKILL.md",
            "line_start": 160,
            "line_end": 162
          },
          {
            "file": "SKILL.md",
            "line_start": 162,
            "line_end": 163
          },
          {
            "file": "SKILL.md",
            "line_start": 163,
            "line_end": 164
          },
          {
            "file": "SKILL.md",
            "line_start": 164,
            "line_end": 165
          },
          {
            "file": "SKILL.md",
            "line_start": 165,
            "line_end": 174
          },
          {
            "file": "SKILL.md",
            "line_start": 174,
            "line_end": 175
          },
          {
            "file": "SKILL.md",
            "line_start": 175,
            "line_end": 176
          },
          {
            "file": "SKILL.md",
            "line_start": 176,
            "line_end": 177
          },
          {
            "file": "SKILL.md",
            "line_start": 177,
            "line_end": 179
          },
          {
            "file": "SKILL.md",
            "line_start": 179,
            "line_end": 179
          },
          {
            "file": "SKILL.md",
            "line_start": 179,
            "line_end": 186
          },
          {
            "file": "SKILL.md",
            "line_start": 186,
            "line_end": 189
          },
          {
            "file": "SKILL.md",
            "line_start": 189,
            "line_end": 206
          },
          {
            "file": "SKILL.md",
            "line_start": 206,
            "line_end": 212
          },
          {
            "file": "SKILL.md",
            "line_start": 212,
            "line_end": 217
          },
          {
            "file": "SKILL.md",
            "line_start": 217,
            "line_end": 220
          },
          {
            "file": "SKILL.md",
            "line_start": 220,
            "line_end": 225
          },
          {
            "file": "SKILL.md",
            "line_start": 225,
            "line_end": 227
          },
          {
            "file": "SKILL.md",
            "line_start": 227,
            "line_end": 235
          },
          {
            "file": "SKILL.md",
            "line_start": 235,
            "line_end": 236
          },
          {
            "file": "SKILL.md",
            "line_start": 236,
            "line_end": 237
          },
          {
            "file": "SKILL.md",
            "line_start": 237,
            "line_end": 238
          },
          {
            "file": "SKILL.md",
            "line_start": 238,
            "line_end": 244
          },
          {
            "file": "SKILL.md",
            "line_start": 244,
            "line_end": 245
          },
          {
            "file": "SKILL.md",
            "line_start": 245,
            "line_end": 246
          },
          {
            "file": "SKILL.md",
            "line_start": 246,
            "line_end": 247
          },
          {
            "file": "SKILL.md",
            "line_start": 247,
            "line_end": 248
          },
          {
            "file": "SKILL.md",
            "line_start": 248,
            "line_end": 249
          },
          {
            "file": "SKILL.md",
            "line_start": 249,
            "line_end": 250
          },
          {
            "file": "SKILL.md",
            "line_start": 250,
            "line_end": 256
          },
          {
            "file": "SKILL.md",
            "line_start": 256,
            "line_end": 257
          },
          {
            "file": "SKILL.md",
            "line_start": 257,
            "line_end": 258
          },
          {
            "file": "SKILL.md",
            "line_start": 258,
            "line_end": 259
          },
          {
            "file": "SKILL.md",
            "line_start": 259,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 265,
            "line_end": 266
          },
          {
            "file": "SKILL.md",
            "line_start": 266,
            "line_end": 267
          },
          {
            "file": "SKILL.md",
            "line_start": 267,
            "line_end": 268
          },
          {
            "file": "SKILL.md",
            "line_start": 268,
            "line_end": 274
          },
          {
            "file": "SKILL.md",
            "line_start": 274,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 282,
            "line_end": 286
          },
          {
            "file": "SKILL.md",
            "line_start": 286,
            "line_end": 294
          },
          {
            "file": "SKILL.md",
            "line_start": 294,
            "line_end": 296
          },
          {
            "file": "SKILL.md",
            "line_start": 296,
            "line_end": 300
          },
          {
            "file": "SKILL.md",
            "line_start": 300,
            "line_end": 312
          },
          {
            "file": "SKILL.md",
            "line_start": 312,
            "line_end": 320
          },
          {
            "file": "SKILL.md",
            "line_start": 320,
            "line_end": 334
          },
          {
            "file": "SKILL.md",
            "line_start": 334,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 344
          },
          {
            "file": "SKILL.md",
            "line_start": 344,
            "line_end": 353
          },
          {
            "file": "SKILL.md",
            "line_start": 353,
            "line_end": 357
          },
          {
            "file": "SKILL.md",
            "line_start": 357,
            "line_end": 366
          },
          {
            "file": "SKILL.md",
            "line_start": 366,
            "line_end": 374
          },
          {
            "file": "SKILL.md",
            "line_start": 374,
            "line_end": 374
          },
          {
            "file": "SKILL.md",
            "line_start": 374,
            "line_end": 376
          },
          {
            "file": "SKILL.md",
            "line_start": 376,
            "line_end": 377
          },
          {
            "file": "SKILL.md",
            "line_start": 377,
            "line_end": 377
          },
          {
            "file": "SKILL.md",
            "line_start": 377,
            "line_end": 381
          },
          {
            "file": "SKILL.md",
            "line_start": 381,
            "line_end": 390
          },
          {
            "file": "SKILL.md",
            "line_start": 390,
            "line_end": 396
          },
          {
            "file": "SKILL.md",
            "line_start": 396,
            "line_end": 396
          },
          {
            "file": "SKILL.md",
            "line_start": 396,
            "line_end": 397
          },
          {
            "file": "SKILL.md",
            "line_start": 397,
            "line_end": 397
          },
          {
            "file": "SKILL.md",
            "line_start": 397,
            "line_end": 398
          },
          {
            "file": "SKILL.md",
            "line_start": 398,
            "line_end": 399
          },
          {
            "file": "SKILL.md",
            "line_start": 399,
            "line_end": 399
          },
          {
            "file": "SKILL.md",
            "line_start": 399,
            "line_end": 400
          },
          {
            "file": "SKILL.md",
            "line_start": 400,
            "line_end": 400
          },
          {
            "file": "SKILL.md",
            "line_start": 400,
            "line_end": 404
          },
          {
            "file": "SKILL.md",
            "line_start": 404,
            "line_end": 410
          },
          {
            "file": "SKILL.md",
            "line_start": 383,
            "line_end": 383
          },
          {
            "file": "SKILL.md",
            "line_start": 381,
            "line_end": 390
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 396,
            "line_end": 396
          },
          {
            "file": "SKILL.md",
            "line_start": 396,
            "line_end": 396
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 599,
    "audit_model": "claude",
    "audited_at": "2026-01-17T03:55:42.905Z"
  },
  "content": {
    "user_title": "Coordinate Multiple AI Agents with Mail",
    "value_statement": "Multiple AI agents working together often overwrite each other's edits or miss critical context. Agent Mail provides a mail-like coordination layer with file reservations, threaded messaging, and human oversight to keep agents organized and prevent conflicts.",
    "seo_keywords": [
      "agent coordination",
      "multi-agent workflows",
      "Claude Code",
      "Claude",
      "Codex",
      "file reservations",
      "agent messaging",
      "MCP server",
      "team collaboration",
      "Git-backed"
    ],
    "actual_capabilities": [
      "Assign memorable identities to each agent (GreenCastle, BlueLake)",
      "Reserve files with advisory locks before editing to prevent conflicts",
      "Send and receive threaded messages between agents with importance levels",
      "Enforce contact policies to control who can message whom",
      "Install pre-commit guard to block commits that conflict with reservations",
      "Export mail archives with cryptographic signing and encryption"
    ],
    "limitations": [
      "Requires running the MCP server locally (port 8765 by default)",
      "Agents must use the same project_key to coordinate",
      "Contact policies must be respected or bypassed explicitly",
      "File reservations are advisory not mandatory enforcement"
    ],
    "use_cases": [
      {
        "target_user": "Development teams using multiple AI agents",
        "title": "Multi-Agent Codebase Work",
        "description": "Coordinate frontend and backend agents working on the same project without file conflicts"
      },
      {
        "target_user": "AI-assisted code reviewers",
        "title": "Code Review Coordination",
        "description": "Agents announce what files they are editing, preventing overlap and enabling threaded discussions"
      },
      {
        "target_user": "Technical leads managing AI workflows",
        "title": "Human-Override Messaging",
        "description": "Human Overseer feature allows humans to send high-priority messages that bypass contact policies"
      }
    ],
    "prompt_templates": [
      {
        "title": "Start Session",
        "scenario": "Bootstrap a new agent session",
        "prompt": "Start a session using macro_start_session with project_key set to the absolute path of our project, program set to claude-code, model set to opus-4.5, and task_description describing the current work."
      },
      {
        "title": "Reserve Files",
        "scenario": "Before editing files",
        "prompt": "Reserve the files I am about to edit using file_reservation_paths. Use paths like src/**/*.ts, set ttl_seconds to 3600, and exclusive to true. Include the reason for the reservation."
      },
      {
        "title": "Announce Work",
        "scenario": "Notify other agents",
        "prompt": "Send a message to other agents announcing the work I am starting. Use send_message with an appropriate thread_id, include the reservation details, and set ack_required to true if needed."
      },
      {
        "title": "Check Inbox",
        "scenario": "Periodically check for messages",
        "prompt": "Fetch my inbox using fetch_inbox with limit 20, urgent_only false, and include_bodies true. Mark messages as read and acknowledge those requiring response."
      }
    ],
    "output_examples": [
      {
        "input": "Start a session for my claude-code agent working on auth module refactoring",
        "output": [
          "Project: /home/user/project (created)",
          "Agent: CoolPond registered",
          "File reservations: src/auth/**/*.ts (granted, no conflicts)",
          "Inbox: 0 unread messages"
        ]
      },
      {
        "input": "Reserve files and announce work on database schema",
        "output": [
          "Reserved: db/schema/**/*.sql (exclusive, 1 hour TTL)",
          "Conflicts: none",
          "Message sent to team: [bd-456] Starting schema updates",
          "Awaiting acknowledgment from 2 agents"
        ]
      },
      {
        "input": "Check inbox for urgent messages",
        "output": [
          "Urgent: 1 message from RedMountain",
          "Subject: [bd-123] Need help with auth middleware",
          "Action required: reply within 2 hours"
        ]
      }
    ],
    "best_practices": [
      "Always reserve files before editing to prevent conflicts with other agents",
      "Use consistent thread IDs (like bd-123) to link tasks, messages, and reservations",
      "Set appropriate contact policies based on your team size and coordination needs"
    ],
    "anti_patterns": [
      "Skipping file reservations and editing files that other agents may be working on",
      "Sending messages without thread IDs, making it hard to track conversations",
      "Ignoring the pre-commit guard when exclusive reservations are in place"
    ],
    "faq": [
      {
        "question": "Does this work with Claude Code?",
        "answer": "Yes, set program to claude-code in macro_start_session. Claude Code agents can use all messaging and reservation features."
      },
      {
        "question": "How long do file reservations last?",
        "answer": "Default TTL is 1 hour (3600 seconds). Use renew_file_reservations to extend or set ttl_seconds when reserving."
      },
      {
        "question": "Can agents in different repos coordinate?",
        "answer": "Yes, use request_contact and respond_contact to establish cross-project contact links between agents."
      },
      {
        "question": "Is my data safe?",
        "answer": "Data is stored locally in SQLite and Git. Exports can use Ed25519 signing and Age encryption for sharing."
      },
      {
        "question": "Why are messages not being delivered?",
        "answer": "Check contact policies (may require approval), verify agent names match exactly, and check urgent_only or since_ts filters."
      },
      {
        "question": "How does this differ from other agent tools?",
        "answer": "Unlike shared context tools, Agent Mail provides persistent asynchronous messaging, file-level reservations, and human override capabilities."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 422
    }
  ]
}
