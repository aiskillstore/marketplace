{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T17:20:38.255Z",
    "slug": "daisuke897-assume-cloudformation-role",
    "source_url": "https://github.com/Daisuke897/dotfiles/tree/main/.github/skills/assume-cloudformation-role",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1faeb738f363c216e095ee18c51b35333156b5df524563e88d586194538cc347",
    "tree_hash": "15112b7ad0eb98458944a9000398408a49c3ce74978f7739609036eaf0d56641"
  },
  "skill": {
    "name": "assume-cloudformation-role",
    "description": "Assume AWS IAM role for CloudFormation operations and set temporary credentials as environment variables. Use when working with CloudFormation stacks or when authentication setup is needed before AWS CloudFormation operations.",
    "summary": "Automate AWS IAM role assumption for CloudFormation stack operations with temporary credential management.",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "Daisuke897",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "aws",
      "cloudformation",
      "iam",
      "credentials",
      "devops"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill automates AWS IAM role assumption for CloudFormation operations. Static analysis detected 59 potential issues, but upon evaluation, all are false positives or legitimate AWS credential management patterns. The skill uses standard AWS CLI commands to obtain temporary credentials via STS AssumeRole, stores them briefly in /tmp, and sets environment variables. This is a standard DevOps workflow with no malicious intent. Risk level is low due to AWS credential handling, but all operations are legitimate and well-documented.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 66
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 43,
            "line_end": 43
          },
          {
            "file": "SKILL.md",
            "line_start": 72,
            "line_end": 72
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 38,
            "line_end": 40
          },
          {
            "file": "SKILL.md",
            "line_start": 49,
            "line_end": 51
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "AWS Credential Environment Variables",
        "description": "The skill sets AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, and AWS_SESSION_TOKEN environment variables. This is the documented purpose of the skill and follows AWS CLI standard practices for temporary credential management. The credentials are obtained via legitimate AWS STS AssumeRole API and are temporary in nature.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 38,
            "line_end": 40
          }
        ]
      },
      {
        "title": "Temporary File Storage",
        "description": "Credentials are temporarily stored in /tmp/creds.json before being parsed and set as environment variables. The file is properly cleaned up after use. This is a common pattern for credential handling in shell scripts.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 43
          }
        ]
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 728,
    "audit_model": "claude",
    "audited_at": "2026-01-21T17:20:38.255Z"
  },
  "content": {
    "user_title": "Assume AWS CloudFormation IAM Role with Temporary Credentials",
    "value_statement": "Managing AWS CloudFormation stacks requires proper IAM role credentials, which can be complex to configure manually. This skill automates the process of assuming an IAM role via AWS STS, obtaining temporary credentials, and setting them as environment variables for seamless CloudFormation operations.",
    "seo_keywords": [
      "Claude",
      "Claude Code",
      "Codex",
      "AWS CloudFormation",
      "IAM role",
      "AWS credentials",
      "STS AssumeRole",
      "temporary credentials",
      "AWS CLI",
      "DevOps automation"
    ],
    "actual_capabilities": [
      "Assumes AWS IAM roles using AWS STS AssumeRole API with configurable role ARN and session name",
      "Obtains temporary AWS credentials (access key, secret key, session token) for CloudFormation operations",
      "Sets AWS credential environment variables (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_SESSION_TOKEN) automatically",
      "Manages temporary credential files securely with automatic cleanup after processing",
      "Supports AWS CLI profile-based authentication with configurable profile names",
      "Enables immediate CloudFormation stack operations (create, update, delete) after credential setup"
    ],
    "limitations": [
      "Requires AWS CLI and jq to be installed and available in the system PATH",
      "Temporary credentials typically expire after 1 hour and require re-execution of the skill",
      "Requires source AWS profile to have sts:AssumeRole permission for the target IAM role",
      "Environment variables are only set in the current shell session and do not persist across sessions"
    ],
    "use_cases": [
      {
        "title": "DevOps Engineer - CloudFormation Stack Deployment",
        "description": "Automate IAM role assumption before deploying infrastructure updates via CloudFormation, ensuring proper permissions for stack creation and updates without manual credential configuration.",
        "target_user": "DevOps Engineer"
      },
      {
        "title": "Cloud Architect - Multi-Account AWS Management",
        "description": "Quickly switch between different AWS account roles when managing CloudFormation stacks across multiple AWS accounts in an organization, streamlining cross-account infrastructure operations.",
        "target_user": "Cloud Architect"
      },
      {
        "title": "Platform Engineer - Automated Infrastructure Workflows",
        "description": "Integrate IAM role assumption into Claude Code workflows for automated infrastructure provisioning, eliminating manual credential management in CI/CD pipelines.",
        "target_user": "Platform Engineer"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic CloudFormation Role Assumption",
        "prompt": "Assume the CloudFormation write role using the default profile and role ARN",
        "scenario": "Quick credential setup for CloudFormation operations with default configuration"
      },
      {
        "title": "Custom Profile and Role",
        "prompt": "Assume IAM role arn:aws:iam::123456789012:role/CustomCFNRole using the production profile with session name my-deployment",
        "scenario": "Assuming a specific IAM role with custom AWS profile for production deployment"
      },
      {
        "title": "Deploy CloudFormation Stack After Role Assumption",
        "prompt": "Assume the CloudFormation role and then create a new stack named my-infrastructure using template.yaml",
        "scenario": "End-to-end workflow combining role assumption with stack deployment"
      },
      {
        "title": "Update Multiple Stacks with Assumed Role",
        "prompt": "Assume CloudFormation role for profile staging, then update both frontend-stack and backend-stack with their respective templates",
        "scenario": "Advanced multi-stack update workflow with role-based credentials"
      }
    ],
    "output_examples": [
      {
        "input": "Assume the CloudFormation write role using the default profile",
        "output": "Successfully assumed role arn:aws:iam::692859919890:role/CloudFormationWriteRole\nSet environment variables:\n- AWS_ACCESS_KEY_ID\n- AWS_SECRET_ACCESS_KEY\n- AWS_SESSION_TOKEN\n\nYou can now execute CloudFormation commands using the assumed role credentials."
      },
      {
        "input": "Assume role arn:aws:iam::123456789012:role/DeployRole with profile prod and create stack my-app",
        "output": "Assumed role: arn:aws:iam::123456789012:role/DeployRole\nSession: cfn-write\nCredentials obtained and set as environment variables\n\nCreating CloudFormation stack: my-app\nStack creation initiated successfully\nStack ID: arn:aws:cloudformation:us-east-1:123456789012:stack/my-app/abc123"
      }
    ],
    "best_practices": [
      "Always verify that your source AWS profile has sts:AssumeRole permission for the target IAM role before attempting to assume it",
      "Use descriptive role session names that identify the purpose or user of the assumed role session for better AWS CloudTrail auditing",
      "Re-assume the role when credentials expire (typically after 1 hour) rather than extending session duration to maintain security best practices"
    ],
    "anti_patterns": [
      "Do not hardcode sensitive role ARNs or account IDs directly in prompts; use variables or configuration files when possible",
      "Avoid assuming roles with overly broad permissions; use least-privilege IAM roles specific to CloudFormation operations",
      "Do not rely on assumed role credentials for long-running operations that exceed the typical 1-hour session duration without implementing re-assumption logic"
    ],
    "faq": [
      {
        "question": "What happens if my temporary credentials expire during a CloudFormation operation?",
        "answer": "AWS CloudFormation operations initiated with valid credentials will continue even if the credentials expire mid-operation. However, you will need to re-assume the role to perform new operations. It is best practice to assume the role immediately before starting CloudFormation operations."
      },
      {
        "question": "Can I use this skill with AWS organizations and cross-account roles?",
        "answer": "Yes, this skill supports cross-account role assumption. Ensure your source AWS profile has a trust relationship with the target role in the other account, and specify the full role ARN including the account ID."
      },
      {
        "question": "Do I need to install any additional tools besides AWS CLI?",
        "answer": "Yes, you need jq (a JSON processor) installed on your system. The skill uses jq to parse the AWS STS AssumeRole response and extract credentials. Install jq using your system package manager."
      },
      {
        "question": "Are the credentials stored permanently on my system?",
        "answer": "No, credentials are temporarily stored in /tmp/creds.json and are immediately deleted after being parsed and set as environment variables. They only persist in your current shell session until you close it or they expire."
      },
      {
        "question": "Can I customize the session duration for the assumed role?",
        "answer": "The skill uses the default session duration configured in the IAM role's trust policy. To customize duration, you would need to modify the aws sts assume-role command to include the --duration-seconds parameter."
      },
      {
        "question": "What permissions does my source profile need to assume the CloudFormation role?",
        "answer": "Your source AWS profile must have the sts:AssumeRole permission for the specific role ARN. Additionally, the target IAM role must have a trust policy that allows your source account or user to assume it."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 80
    }
  ]
}
