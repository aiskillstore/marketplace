{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T16:34:48.732Z",
    "slug": "andrehogberg-animated-focus",
    "source_url": "https://github.com/AndreHogberg/summit-ui/tree/main/.claude/skills/animated-focus",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "62a45a7e08f0e814ee1d92b992c457fd85e2dfd58e867d802abd6759527053d6",
    "tree_hash": "d7a64056f6281843cc8b2f9920f86889306acf83e1eed2238b74df33afd1df65"
  },
  "skill": {
    "name": "animated-focus",
    "description": "This document captures learnings from fixing keyboard navigation issues when floating components (Select, DropdownMenu, Popover) have CSS open/close animations.",
    "summary": "This document captures learnings from fixing keyboard navigation issues when floating components (Se...",
    "icon": "ðŸŽ¯",
    "version": "1.0.0",
    "author": "AndreHogberg",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "accessibility",
      "CSS animations",
      "focus management",
      "Blazor",
      "keyboard navigation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill is documentation-only (SKILL.md) containing no executable code. All 43 static findings are false positives: backtick characters are markdown code formatting syntax, not shell execution; metadata URL and filesystem fields are configuration, not operations; no cryptographic algorithms or actual code exist in this content.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 23,
            "line_end": 23
          },
          {
            "file": "SKILL.md",
            "line_start": 23,
            "line_end": 23
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 31,
            "line_end": 37
          },
          {
            "file": "SKILL.md",
            "line_start": 37,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 45
          },
          {
            "file": "SKILL.md",
            "line_start": 45,
            "line_end": 69
          },
          {
            "file": "SKILL.md",
            "line_start": 69,
            "line_end": 73
          },
          {
            "file": "SKILL.md",
            "line_start": 73,
            "line_end": 74
          },
          {
            "file": "SKILL.md",
            "line_start": 74,
            "line_end": 77
          },
          {
            "file": "SKILL.md",
            "line_start": 77,
            "line_end": 77
          },
          {
            "file": "SKILL.md",
            "line_start": 77,
            "line_end": 81
          },
          {
            "file": "SKILL.md",
            "line_start": 81,
            "line_end": 82
          },
          {
            "file": "SKILL.md",
            "line_start": 82,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 122
          },
          {
            "file": "SKILL.md",
            "line_start": 122,
            "line_end": 130
          },
          {
            "file": "SKILL.md",
            "line_start": 130,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 132
          },
          {
            "file": "SKILL.md",
            "line_start": 132,
            "line_end": 133
          },
          {
            "file": "SKILL.md",
            "line_start": 133,
            "line_end": 137
          },
          {
            "file": "SKILL.md",
            "line_start": 137,
            "line_end": 139
          },
          {
            "file": "SKILL.md",
            "line_start": 139,
            "line_end": 145
          },
          {
            "file": "SKILL.md",
            "line_start": 145,
            "line_end": 145
          },
          {
            "file": "SKILL.md",
            "line_start": 145,
            "line_end": 145
          },
          {
            "file": "SKILL.md",
            "line_start": 145,
            "line_end": 146
          },
          {
            "file": "SKILL.md",
            "line_start": 146,
            "line_end": 146
          },
          {
            "file": "SKILL.md",
            "line_start": 146,
            "line_end": 147
          },
          {
            "file": "SKILL.md",
            "line_start": 147,
            "line_end": 147
          },
          {
            "file": "SKILL.md",
            "line_start": 147,
            "line_end": 148
          },
          {
            "file": "SKILL.md",
            "line_start": 148,
            "line_end": 155
          },
          {
            "file": "SKILL.md",
            "line_start": 155,
            "line_end": 155
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 345,
    "audit_model": "claude",
    "audited_at": "2026-01-16T16:34:48.732Z"
  },
  "content": {
    "user_title": "Fix Keyboard Focus with CSS Animations",
    "value_statement": "Animated UI components can break keyboard navigation when browsers reject focus calls on invisible elements. This skill provides a retry mechanism pattern that ensures focus succeeds after CSS animations complete, making animated components fully accessible.",
    "seo_keywords": [
      "CSS animation focus fix",
      "keyboard accessibility",
      "Blazor components",
      "focus management",
      "animated UI",
      "WCAG compliance",
      "keyboard navigation",
      "Claude Code",
      "Codex",
      "Claude"
    ],
    "actual_capabilities": [
      "Diagnose keyboard navigation failures in animated floating components",
      "Implement JavaScript focus retry mechanism with requestAnimationFrame",
      "Verify focus works after CSS opacity animations complete",
      "Write Playwright tests for animated component accessibility",
      "Apply solution to Select, DropdownMenu, and Popover components"
    ],
    "limitations": [
      "Skill contains documentation only, requires manual implementation",
      "Assumes familiarity with JavaScript and DOM focus API",
      "Solution focuses on Blazor component context",
      "Does not cover animation performance optimization"
    ],
    "use_cases": [
      {
        "target_user": "UI Component Developer",
        "title": "Fix Animated Select Components",
        "description": "Enable keyboard navigation in animated dropdown select components that fail when opening with arrow keys"
      },
      {
        "target_user": "Accessibility Engineer",
        "title": "Test Focus with Animations",
        "description": "Verify animated UI components pass WCAG focus management requirements using Playwright tests"
      },
      {
        "target_user": "Blazor Developer",
        "title": "Implement Floating Components",
        "description": "Build accessible floating components (Popover, DropdownMenu) with CSS open/close animations"
      }
    ],
    "prompt_templates": [
      {
        "title": "Diagnose Focus Issue",
        "scenario": "Animated dropdown won't focus",
        "prompt": "My dropdown component opens with mouse but keyboard navigation fails when I add animation classes. Arrow keys don't work after opening. How do I fix focus with CSS animations?"
      },
      {
        "title": "Implement Retry Logic",
        "scenario": "Adding focus retry mechanism",
        "prompt": "I need to implement a focusElement function with retry mechanism for animated components. Show me the JavaScript code using requestAnimationFrame and setTimeout with 20ms delays."
      },
      {
        "title": "Write Accessibility Tests",
        "scenario": "Creating Playwright tests",
        "prompt": "Write Playwright tests to verify keyboard navigation works on animated Select, DropdownMenu, and Popover components. Include tests for Enter key open, arrow key navigation, and Escape key close."
      },
      {
        "title": "Apply to Blazor Components",
        "scenario": "Integrating focus fix",
        "prompt": "Show how to integrate the focus retry mechanism into Blazor components. What changes are needed in SelectContent.cs, DropdownMenuContent.cs, and PopoverContent.cs?"
      }
    ],
    "output_examples": [
      {
        "input": "My animated popover doesn't focus after opening with keyboard",
        "output": [
          "Root cause: CSS animations start at opacity:0, browser rejects focus on invisible elements",
          "Solution: Use requestAnimationFrame + retry loop with document.activeElement check",
          "Implementation: focusElement() with 5 attempts at 20ms intervals (100ms max)",
          "Key code pattern: requestAnimationFrame(() => tryFocus(5))",
          "Test with: Playwright tests verifying animated open/close/navigation/close-on-escape"
        ]
      },
      {
        "input": "How do I test that keyboard navigation works on my animated Select component?",
        "output": [
          "Create Playwright test: AnimatedSelect_ShouldOpen_OnEnterKey",
          "Create test: AnimatedSelect_ShouldNavigate_WithArrowKeys",
          "Create test: AnimatedSelect_ShouldSelect_OnEnterKey",
          "Create test: AnimatedSelect_ShouldClose_OnEscape",
          "Run tests with: dotnet run --project tests/SummitUI.Tests.Playwright -- --treenode-filter '/*/*/*/Animated*'"
        ]
      }
    ],
    "best_practices": [
      "Use requestAnimationFrame before attempting focus to ensure CSS has been applied",
      "Verify focus success by checking document.activeElement against target element",
      "Limit retry attempts to prevent infinite loops (5 attempts at 20ms = 100ms max)",
      "Apply focus retry to all focus functions (focusElement and focusElementById)"
    ],
    "anti_patterns": [
      "Calling focus() immediately without waiting for CSS animation to progress",
      "Not checking document.activeElement to verify focus actually succeeded",
      "Using fixed delays without requestAnimationFrame (may not align with CSS rendering)",
      "Applying focus retry to only some components while others remain broken"
    ],
    "faq": [
      {
        "question": "What causes keyboard navigation to fail with CSS animations?",
        "answer": "Animations starting at opacity:0 make elements invisible. Browsers reject focus() calls on invisible elements, causing focus to stay on the trigger."
      },
      {
        "question": "How long should the retry delays be?",
        "answer": "Use 20ms intervals with 5 attempts (100ms total). This allows most animations to progress past opacity:0 without adding noticeable lag."
      },
      {
        "question": "Does this work with all animation types?",
        "answer": "Yes. The retry mechanism works with any animation duration because it checks actual focus success rather than using fixed delays."
      },
      {
        "question": "Is user data collected or transmitted?",
        "answer": "No. This documentation-only skill contains no code that accesses, collects, or transmits user data."
      },
      {
        "question": "Why check document.activeElement instead of focus() return value?",
        "answer": "focus() returns true/false inconsistently across browsers. Checking document.activeElement reliably confirms focus moved to the target element."
      },
      {
        "question": "How does this compare to other UI libraries?",
        "answer": "This pattern is similar to how bits-ui handles animated presence in Svelte. The retry mechanism is a general approach that works across frameworks."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 166
    }
  ]
}
