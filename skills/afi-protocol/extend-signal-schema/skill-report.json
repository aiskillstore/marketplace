{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T15:04:20.894Z",
    "slug": "afi-protocol-extend-signal-schema",
    "source_url": "https://github.com/AFI-Protocol/afi-core/tree/main/.factory/skills/extend-signal-schema",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "49442be6c899aed59139dfdb103ebce5e574ebce9aca3c032cd19ad8ccd7400c",
    "tree_hash": "3ca6b939502df581362aca4feee9e0d7920a4d123ec5191209cacc0cb1ddea21"
  },
  "skill": {
    "name": "extend-signal-schema",
    "description": "Safely extend or refine AFI signal schemas and closely-related validators in afi-core, while preserving determinism, respecting PoI/PoInsight design, and obeying the AFI Droid Charter and AFI Core AGENTS.md boundaries.\n",
    "summary": "Safely extend or refine AFI signal schemas and closely-related validators in afi-core, while preserv...",
    "icon": "ðŸ“¡",
    "version": "1.0.0",
    "author": "AFI-Protocol",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "schema",
      "validation",
      "AFI-protocol",
      "typescript",
      "code-generation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 109 static findings are false positives from pattern matching against documentation and metadata files. The skill contains no executable code, only markdown documentation (SKILL.md) and JSON metadata (skill-report.json). All detected patterns are backtick-wrapped code examples in documentation or JSON string values describing the skill's functionality.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 34,
            "line_end": 34
          },
          {
            "file": "SKILL.md",
            "line_start": 37,
            "line_end": 37
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 89,
            "line_end": 89
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 91,
            "line_end": 91
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 96,
            "line_end": 96
          },
          {
            "file": "SKILL.md",
            "line_start": 97,
            "line_end": 97
          },
          {
            "file": "SKILL.md",
            "line_start": 98,
            "line_end": 98
          },
          {
            "file": "SKILL.md",
            "line_start": 99,
            "line_end": 99
          },
          {
            "file": "SKILL.md",
            "line_start": 110,
            "line_end": 110
          },
          {
            "file": "SKILL.md",
            "line_start": 111,
            "line_end": 111
          },
          {
            "file": "SKILL.md",
            "line_start": 112,
            "line_end": 112
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 126,
            "line_end": 138
          },
          {
            "file": "SKILL.md",
            "line_start": 138,
            "line_end": 148
          },
          {
            "file": "SKILL.md",
            "line_start": 148,
            "line_end": 150
          },
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 153
          },
          {
            "file": "SKILL.md",
            "line_start": 153,
            "line_end": 153
          },
          {
            "file": "SKILL.md",
            "line_start": 153,
            "line_end": 162
          },
          {
            "file": "SKILL.md",
            "line_start": 162,
            "line_end": 163
          },
          {
            "file": "SKILL.md",
            "line_start": 163,
            "line_end": 164
          },
          {
            "file": "SKILL.md",
            "line_start": 164,
            "line_end": 191
          },
          {
            "file": "SKILL.md",
            "line_start": 191,
            "line_end": 192
          },
          {
            "file": "SKILL.md",
            "line_start": 192,
            "line_end": 203
          },
          {
            "file": "SKILL.md",
            "line_start": 203,
            "line_end": 203
          },
          {
            "file": "SKILL.md",
            "line_start": 203,
            "line_end": 207
          },
          {
            "file": "SKILL.md",
            "line_start": 207,
            "line_end": 207
          },
          {
            "file": "SKILL.md",
            "line_start": 207,
            "line_end": 223
          },
          {
            "file": "SKILL.md",
            "line_start": 223,
            "line_end": 223
          },
          {
            "file": "SKILL.md",
            "line_start": 223,
            "line_end": 223
          },
          {
            "file": "SKILL.md",
            "line_start": 223,
            "line_end": 251
          },
          {
            "file": "SKILL.md",
            "line_start": 251,
            "line_end": 278
          },
          {
            "file": "SKILL.md",
            "line_start": 278,
            "line_end": 279
          },
          {
            "file": "SKILL.md",
            "line_start": 279,
            "line_end": 279
          },
          {
            "file": "SKILL.md",
            "line_start": 279,
            "line_end": 279
          },
          {
            "file": "SKILL.md",
            "line_start": 279,
            "line_end": 281
          },
          {
            "file": "SKILL.md",
            "line_start": 281,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 282,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 282,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 282,
            "line_end": 284
          },
          {
            "file": "SKILL.md",
            "line_start": 284,
            "line_end": 287
          },
          {
            "file": "SKILL.md",
            "line_start": 287,
            "line_end": 290
          },
          {
            "file": "SKILL.md",
            "line_start": 290,
            "line_end": 290
          },
          {
            "file": "SKILL.md",
            "line_start": 290,
            "line_end": 290
          },
          {
            "file": "SKILL.md",
            "line_start": 290,
            "line_end": 290
          },
          {
            "file": "SKILL.md",
            "line_start": 290,
            "line_end": 291
          },
          {
            "file": "SKILL.md",
            "line_start": 291,
            "line_end": 291
          },
          {
            "file": "SKILL.md",
            "line_start": 291,
            "line_end": 296
          },
          {
            "file": "SKILL.md",
            "line_start": 296,
            "line_end": 318
          },
          {
            "file": "SKILL.md",
            "line_start": 318,
            "line_end": 325
          },
          {
            "file": "SKILL.md",
            "line_start": 325,
            "line_end": 334
          },
          {
            "file": "SKILL.md",
            "line_start": 334,
            "line_end": 338
          },
          {
            "file": "SKILL.md",
            "line_start": 338,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 340
          },
          {
            "file": "SKILL.md",
            "line_start": 340,
            "line_end": 344
          },
          {
            "file": "SKILL.md",
            "line_start": 344,
            "line_end": 345
          },
          {
            "file": "SKILL.md",
            "line_start": 345,
            "line_end": 354
          },
          {
            "file": "SKILL.md",
            "line_start": 354,
            "line_end": 358
          },
          {
            "file": "SKILL.md",
            "line_start": 358,
            "line_end": 359
          },
          {
            "file": "SKILL.md",
            "line_start": 359,
            "line_end": 360
          },
          {
            "file": "SKILL.md",
            "line_start": 360,
            "line_end": 362
          },
          {
            "file": "SKILL.md",
            "line_start": 362,
            "line_end": 364
          },
          {
            "file": "SKILL.md",
            "line_start": 364,
            "line_end": 365
          },
          {
            "file": "SKILL.md",
            "line_start": 365,
            "line_end": 374
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 558,
    "audit_model": "claude",
    "audited_at": "2026-01-16T15:04:20.894Z"
  },
  "content": {
    "user_title": "Extend AFI Protocol Signal Schemas with Type Safety",
    "value_statement": "Schema evolution in distributed systems requires careful validation and backward compatibility. This skill helps you extend AFI Protocol signal schemas while maintaining type safety and generating proper validation code.",
    "seo_keywords": [
      "AFI Protocol",
      "schema extension",
      "signal validation",
      "TypeScript",
      "Claude Code",
      "code generation",
      "type safety",
      "schema evolution",
      "Claude",
      "API schema"
    ],
    "actual_capabilities": [
      "Extend existing AFI Protocol signal schemas with new fields and types",
      "Generate TypeScript interfaces from schema definitions",
      "Validate schema changes for backward compatibility",
      "Create validation code for extended signal schemas",
      "Document schema evolution and migration paths",
      "Generate test cases for schema validation"
    ],
    "limitations": [
      "Specific to AFI Protocol signal schema format and conventions",
      "Requires existing AFI Protocol codebase structure",
      "Does not handle runtime schema migration or data transformation",
      "Limited to TypeScript code generation"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Add New Signal Fields",
        "description": "Extend existing signal schemas with new optional or required fields while maintaining backward compatibility with consumers"
      },
      {
        "target_user": "API architects",
        "title": "Design Schema Evolution Strategy",
        "description": "Plan and document schema versioning approach with proper deprecation paths for signal interface changes"
      },
      {
        "target_user": "DevOps engineers",
        "title": "Generate Validation Code",
        "description": "Automatically create TypeScript validation functions and type guards for extended signal schemas with test coverage"
      }
    ],
    "prompt_templates": [
      {
        "title": "Add Optional Field",
        "scenario": "Simple schema extension",
        "prompt": "Add an optional timestamp field called lastModified to the UserSignal schema with proper TypeScript typing"
      },
      {
        "title": "Extend with Nested Object",
        "scenario": "Complex type addition",
        "prompt": "Extend the TransactionSignal schema to include a nested metadata object with fields for source, category, and tags array"
      },
      {
        "title": "Validate Breaking Changes",
        "scenario": "Compatibility check",
        "prompt": "Check if adding a required email field to the ContactSignal schema would break existing consumers and suggest migration path"
      },
      {
        "title": "Generate Full Schema Package",
        "scenario": "Complete workflow",
        "prompt": "Create a new OrderStatusSignal schema with status enum, timestamp, orderId, and optional notes field then generate TypeScript interfaces, validators, and unit tests"
      }
    ],
    "output_examples": [
      {
        "input": "Add a priority field to AlertSignal with values low, medium, high",
        "output": [
          "Extended schema definition with priority enum field",
          "Updated TypeScript interface with union type: 'low' | 'medium' | 'high'",
          "Validation function checking priority field against allowed values",
          "Migration guide for existing AlertSignal consumers"
        ]
      },
      {
        "input": "Generate validation code for extended PaymentSignal schema",
        "output": [
          "Type guard function isValidPaymentSignal with all field checks",
          "Runtime validation using Zod or similar library",
          "Unit tests covering valid and invalid schema cases",
          "Error messages for each validation failure scenario"
        ]
      }
    ],
    "best_practices": [
      "Always add new fields as optional initially to maintain backward compatibility with existing signal consumers",
      "Include comprehensive JSDoc comments describing field purpose, constraints, and examples in generated TypeScript interfaces",
      "Generate unit tests for schema validators covering both valid cases and boundary conditions before deployment"
    ],
    "anti_patterns": [
      "Adding required fields to existing schemas without coordinating consumer updates across all services",
      "Changing field types or removing fields without proper deprecation period and migration tooling",
      "Generating validation code without corresponding test coverage and integration validation"
    ],
    "faq": [
      {
        "question": "What is an AFI Protocol signal schema?",
        "answer": "A signal schema defines the structure and validation rules for data messages exchanged between AFI Protocol services using TypeScript types."
      },
      {
        "question": "Can this skill modify existing schema fields?",
        "answer": "Yes, but it will warn about breaking changes and suggest backward-compatible alternatives like deprecation paths and field versioning."
      },
      {
        "question": "Does it work with other schema systems besides AFI Protocol?",
        "answer": "No, this skill is specifically designed for AFI Protocol conventions and project structure. Use generic schema tools for other systems."
      },
      {
        "question": "What validation libraries does it support?",
        "answer": "It generates TypeScript type guards and can integrate with common libraries like Zod, Yup, or io-ts based on project configuration."
      },
      {
        "question": "How does it handle schema versioning?",
        "answer": "It follows AFI Protocol versioning conventions, suggesting version bumps and maintaining compatibility matrices for signal consumers."
      },
      {
        "question": "Can it generate schemas from existing code?",
        "answer": "No, it extends existing schemas or creates new ones from specifications. Use TypeScript extraction tools for reverse engineering."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 376
    }
  ]
}
