{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T10:23:55.677Z",
    "slug": "wshobson-sql-optimization-patterns",
    "source_url": "https://github.com/wshobson/agents/tree/main/plugins/developer-essentials/skills/sql-optimization-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "141c1d5e094c9d24e73cdd795e65b9b818f8d03a9859574640c7a4fd5bd78809",
    "tree_hash": "bc4660819dcedd68b5d8da1e57ac9247be102c2221f911e11af8ef47deebf8b7"
  },
  "skill": {
    "name": "sql-optimization-patterns",
    "description": "Master SQL query optimization, indexing strategies, and EXPLAIN analysis to dramatically improve database performance and eliminate slow queries. Use when debugging slow queries, designing database schemas, or optimizing application performance.",
    "summary": "Master SQL query optimization, indexing strategies, and EXPLAIN analysis to dramatically improve dat...",
    "icon": "âš¡",
    "version": "1.0.0",
    "author": "wshobson",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sql",
      "database-performance",
      "indexing",
      "query-optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "external_commands",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 111 static findings are false positives. The skill contains only instructional SQL documentation. The scanner triggered on: SHA256 hash values (misidentified as C2 keywords), database terminology like 'hash' in Hash Join explanations, markdown code fences (misidentified as backticks), and SQL query examples (misidentified as reconnaissance). No executable code, network calls, or malicious patterns exist.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 95
          },
          {
            "file": "SKILL.md",
            "line_start": 95,
            "line_end": 101
          },
          {
            "file": "SKILL.md",
            "line_start": 101,
            "line_end": 104
          },
          {
            "file": "SKILL.md",
            "line_start": 104,
            "line_end": 115
          },
          {
            "file": "SKILL.md",
            "line_start": 115,
            "line_end": 118
          },
          {
            "file": "SKILL.md",
            "line_start": 118,
            "line_end": 134
          },
          {
            "file": "SKILL.md",
            "line_start": 134,
            "line_end": 141
          },
          {
            "file": "SKILL.md",
            "line_start": 141,
            "line_end": 147
          },
          {
            "file": "SKILL.md",
            "line_start": 147,
            "line_end": 150
          },
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 162
          },
          {
            "file": "SKILL.md",
            "line_start": 162,
            "line_end": 164
          },
          {
            "file": "SKILL.md",
            "line_start": 164,
            "line_end": 185
          },
          {
            "file": "SKILL.md",
            "line_start": 185,
            "line_end": 190
          },
          {
            "file": "SKILL.md",
            "line_start": 190,
            "line_end": 195
          },
          {
            "file": "SKILL.md",
            "line_start": 195,
            "line_end": 198
          },
          {
            "file": "SKILL.md",
            "line_start": 198,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 213,
            "line_end": 218
          },
          {
            "file": "SKILL.md",
            "line_start": 218,
            "line_end": 235
          },
          {
            "file": "SKILL.md",
            "line_start": 235,
            "line_end": 238
          },
          {
            "file": "SKILL.md",
            "line_start": 238,
            "line_end": 254
          },
          {
            "file": "SKILL.md",
            "line_start": 254,
            "line_end": 259
          },
          {
            "file": "SKILL.md",
            "line_start": 259,
            "line_end": 277
          },
          {
            "file": "SKILL.md",
            "line_start": 277,
            "line_end": 280
          },
          {
            "file": "SKILL.md",
            "line_start": 280,
            "line_end": 296
          },
          {
            "file": "SKILL.md",
            "line_start": 296,
            "line_end": 301
          },
          {
            "file": "SKILL.md",
            "line_start": 301,
            "line_end": 315
          },
          {
            "file": "SKILL.md",
            "line_start": 315,
            "line_end": 318
          },
          {
            "file": "SKILL.md",
            "line_start": 318,
            "line_end": 337
          },
          {
            "file": "SKILL.md",
            "line_start": 337,
            "line_end": 345
          },
          {
            "file": "SKILL.md",
            "line_start": 345,
            "line_end": 371
          },
          {
            "file": "SKILL.md",
            "line_start": 371,
            "line_end": 377
          },
          {
            "file": "SKILL.md",
            "line_start": 377,
            "line_end": 397
          },
          {
            "file": "SKILL.md",
            "line_start": 397,
            "line_end": 401
          },
          {
            "file": "SKILL.md",
            "line_start": 401,
            "line_end": 413
          },
          {
            "file": "SKILL.md",
            "line_start": 413,
            "line_end": 426
          },
          {
            "file": "SKILL.md",
            "line_start": 426,
            "line_end": 438
          },
          {
            "file": "SKILL.md",
            "line_start": 438,
            "line_end": 447
          },
          {
            "file": "SKILL.md",
            "line_start": 447,
            "line_end": 452
          },
          {
            "file": "SKILL.md",
            "line_start": 452,
            "line_end": 483
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 314,
            "line_end": 314
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 667,
    "audit_model": "claude",
    "audited_at": "2026-01-17T10:23:55.677Z"
  },
  "content": {
    "user_title": "Optimize SQL queries with proven patterns",
    "value_statement": "Slow queries cause delays and high database costs. This skill provides clear optimization patterns and indexing guidance to improve performance and eliminate bottlenecks.",
    "seo_keywords": [
      "SQL optimization",
      "query performance",
      "indexing strategies",
      "EXPLAIN analysis",
      "PostgreSQL tuning",
      "MySQL optimization",
      "Claude",
      "Codex",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Explain EXPLAIN plan metrics and scan types like Seq Scan and Index Scan",
      "Recommend index types including B-Tree, GIN, and covering indexes",
      "Apply patterns for N+1 query elimination using JOINs and batch loading",
      "Improve pagination with cursor-based queries instead of OFFSET",
      "Optimize aggregates, subqueries, CTEs, and batch operations",
      "Analyze query plans and identify scan and join bottlenecks"
    ],
    "limitations": [
      "Does not run queries or measure actual performance on your database",
      "Requires user to provide schema and workload context for specific advice",
      "Database-specific tuning may need manual adaptation beyond examples"
    ],
    "use_cases": [
      {
        "target_user": "Backend engineer",
        "title": "Fix slow API queries",
        "description": "Diagnose slow endpoints and apply indexing and query rewrite patterns."
      },
      {
        "target_user": "Data engineer",
        "title": "Scale analytics workloads",
        "description": "Improve aggregates, batch operations, and partitioning for large tables."
      },
      {
        "target_user": "DBA",
        "title": "Review query plans",
        "description": "Interpret EXPLAIN output and identify scan and join bottlenecks."
      }
    ],
    "prompt_templates": [
      {
        "title": "Explain slow query",
        "scenario": "Beginner tuning",
        "prompt": "Explain why this SQL query is slow and suggest one indexing fix and one rewrite approach."
      },
      {
        "title": "Index strategy review",
        "scenario": "Intermediate schema design",
        "prompt": "Review my table and query patterns and propose a minimal index set with reasons."
      },
      {
        "title": "Pagination optimization",
        "scenario": "Advanced performance",
        "prompt": "Convert my OFFSET pagination query to cursor-based pagination and list required indexes."
      },
      {
        "title": "Complex plan analysis",
        "scenario": "Expert diagnosis",
        "prompt": "Analyze this EXPLAIN output and prioritize the top three changes to reduce execution time."
      }
    ],
    "output_examples": [
      {
        "input": "Optimize this query that joins users and orders and times out",
        "output": [
          "Identify the join filter that causes a full table scan",
          "Propose a composite index on user_id and status columns",
          "Rewrite the query to filter users before the join",
          "Suggest running EXPLAIN ANALYZE to verify improvements"
        ]
      },
      {
        "input": "Why is my pagination query slow at high page numbers",
        "output": [
          "OFFSET causes the database to scan all preceding rows",
          "Convert to cursor-based pagination using last_seen_id",
          "Create index on (created_at DESC, id) for efficient ordering",
          "Remove ORDER BY on non-indexed columns"
        ]
      },
      {
        "input": "My COUNT query is slow on a large orders table",
        "output": [
          "COUNT(*) scans all matching rows for exact count",
          "Use index-only scan on filtered column if approximate count is acceptable",
          "Consider materialized views for frequently accessed aggregates",
          "Filter before counting to leverage indexes"
        ]
      }
    ],
    "best_practices": [
      "Share table schema, row counts, and query patterns for targeted advice",
      "Include EXPLAIN or EXPLAIN ANALYZE output when possible",
      "Apply changes incrementally and recheck performance after each change"
    ],
    "anti_patterns": [
      "Creating many indexes without measuring write performance impact",
      "Using SELECT * in production queries that fetch unnecessary columns",
      "Filtering with functions like LOWER() that block index usage"
    ],
    "faq": [
      {
        "question": "What databases are supported?",
        "answer": "Focuses on SQL patterns with PostgreSQL and MySQL examples that adapt to other databases."
      },
      {
        "question": "What are the limits of the advice?",
        "answer": "It does not benchmark queries or access your database to confirm optimization results."
      },
      {
        "question": "Can I integrate this with my workflow?",
        "answer": "Use it in code review or performance triage sessions with your query logs."
      },
      {
        "question": "Is my data safe?",
        "answer": "The skill does not request or transmit data and can work with redacted query examples."
      },
      {
        "question": "What if the query is still slow?",
        "answer": "Provide EXPLAIN ANALYZE output and recent statistics for deeper review."
      },
      {
        "question": "How does it compare to generic SQL advice?",
        "answer": "It emphasizes concrete EXPLAIN analysis and index selection patterns for specific bottlenecks."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 494
    }
  ]
}
