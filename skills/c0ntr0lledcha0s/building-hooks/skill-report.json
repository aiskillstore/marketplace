{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T11:48:41.374Z",
    "slug": "c0ntr0lledcha0s-building-hooks",
    "source_url": "https://github.com/C0ntr0lledCha0s/claude-code-plugin-automations/tree/main/agent-builder/skills/building-hooks",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "bc30757bc7f8b9f963bc3666432d37185c2c46b2bce015886b6158374798dcd1",
    "tree_hash": "216da9e1efcf1ac2f16d57b90e0d924fc880d5ad0c5c67af0ef0811b39ddcb04"
  },
  "skill": {
    "name": "building-hooks",
    "description": "Expert at creating and modifying Claude Code event hooks for automation and policy enforcement. Auto-invokes when the user wants to create, update, modify, enhance, validate, or standardize hooks, or when modifying hooks.json configuration, needs help with event-driven automation, or wants to understand hook patterns. Also auto-invokes proactively when Claude is about to write hooks.json files, or implement tasks that involve creating event hook configurations.",
    "summary": "Expert at creating and modifying Claude Code event hooks for automation and policy enforcement. Auto...",
    "icon": "ü™ù",
    "version": "2.0.0",
    "author": "C0ntr0lledCha0s",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "hooks",
      "automation",
      "event-driven",
      "security",
      "validation"
    ],
    "supported_tools": [
      "claude",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Meta-skill for creating Claude Code event hooks. Contains validation scripts and template files for legitimate hook automation. Well-documented security patterns including input validation, command blocking, and defensive scripting practices. Risk is minimal as hooks require explicit user configuration.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/validate-hooks.py",
            "line_start": 1,
            "line_end": 211
          },
          {
            "file": "templates/validation-hook.sh",
            "line_start": 1,
            "line_end": 58
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 57
          },
          {
            "file": "scripts/validate-hooks.py",
            "line_start": 27,
            "line_end": 39
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 170
          },
          {
            "file": "templates/validation-hook.sh",
            "line_start": 38,
            "line_end": 53
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 6,
    "total_lines": 1850,
    "audit_model": "claude",
    "audited_at": "2026-01-10T11:48:41.374Z"
  },
  "content": {
    "user_title": "Create event hooks for Claude Code automation",
    "value_statement": "Claude Code hooks enable event-driven automation and policy enforcement. This skill provides expertise in creating hooks that validate tool usage, enforce security policies, and automate workflows triggered by user prompts and tool invocations.",
    "seo_keywords": [
      "Claude Code hooks",
      "event-driven automation",
      "Claude automation",
      "Claude Code security",
      "PreToolUse PostToolUse hooks",
      "hook configuration",
      "Claude Code plugin",
      "policy enforcement",
      "automation hooks",
      "DevOps automation"
    ],
    "actual_capabilities": [
      "Create hooks.json configurations for PreToolUse, PostToolUse, UserPromptSubmit, and lifecycle events",
      "Write bash validation scripts with input sanitization and security checks",
      "Design matcher patterns to target specific tools or all tools",
      "Implement command and prompt-based hooks for validation and logging",
      "Validate hook configurations against Claude Code schema requirements",
      "Create security policies that block dangerous commands and protect directories"
    ],
    "limitations": [
      "Does not execute hooks directly - creates configurations for Claude Code to run",
      "Requires user to place hooks.json in correct location (.claude/ or plugin directory)",
      "Hook scripts must exist at specified paths and be made executable by user",
      "Does not modify system files or change user permissions outside configured scope"
    ],
    "use_cases": [
      {
        "target_user": "DevOps engineers",
        "title": "Automate security validation",
        "description": "Create PreToolUse hooks that validate bash commands before execution, blocking dangerous operations like rm -rf on critical paths"
      },
      {
        "target_user": "Plugin developers",
        "title": "Build event-driven plugins",
        "description": "Design hooks that trigger formatting, logging, or cleanup actions after Write or Edit tool invocations"
      },
      {
        "target_user": "Team administrators",
        "title": "Enforce coding policies",
        "description": "Implement hooks that audit all tool usage, log actions to external systems, and block non-compliant operations"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic hook creation",
        "scenario": "User wants to validate bash commands",
        "prompt": "Create a PreToolUse hook that validates Bash tool commands before execution. The hook should block dangerous commands like rm -rf /, dd if=, and mkfs commands. Return JSON with decision field set to approve or block."
      },
      {
        "title": "Auto-formatting workflow",
        "scenario": "User wants to format files after writing",
        "prompt": "Create a PostToolUse hook that auto-formats Python files with black and JavaScript files with prettier after Write operations. Include file extension checking and error handling."
      },
      {
        "title": "Protected directories",
        "scenario": "User wants to prevent writing to sensitive paths",
        "prompt": "Create a hook configuration that protects /etc, /usr, /boot, and /sys directories from Write and Edit operations. Block any file modifications in these paths and return a clear system message explaining the restriction."
      },
      {
        "title": "Audit logging hook",
        "scenario": "User wants to log all tool usage",
        "prompt": "Design a PostToolUse hook with matcher: * that logs all tool invocations. The hook should capture tool name, parameters, and timestamp, output structured JSON for external log aggregation."
      }
    ],
    "output_examples": [
      {
        "input": "Create a hook that blocks rm -rf commands before they execute",
        "output": [
          "Created hooks.json with PreToolUse event targeting Bash tool",
          "Validation script blocks destructive commands using grep pattern: rm\\s+-rf\\s+/",
          "Returns decision: block with reason: Dangerous system command detected",
          "Exit code 2 ensures tool is blocked from execution"
        ]
      }
    ],
    "best_practices": [
      "Always validate hook scripts with validate-hooks.py before deployment",
      "Use specific matchers like Write|Edit instead of wildcards when possible",
      "Implement input sanitization with regex validation before using parameters",
      "Test hooks by triggering the expected events before production use"
    ],
    "anti_patterns": [
      "Using eval or command substitution without input validation",
      "Creating hooks with overly broad matchers like * that catch all tools",
      "Blocking operations without providing helpful system messages to users",
      "Forgetting to make hook scripts executable with chmod +x"
    ],
    "faq": [
      {
        "question": "What events can I create hooks for?",
        "answer": "PreToolUse, PostToolUse, UserPromptSubmit, Stop, SessionStart, SessionEnd, Notification, SubagentStop, and PreCompact."
      },
      {
        "question": "Where do I place hooks.json files?",
        "answer": "Project-level: .claude/hooks.json, Plugin-level: plugin-dir/hooks/hooks.json, or Directory-specific: .claude-hooks.json."
      },
      {
        "question": "Can hooks damage my system?",
        "answer": "Hooks only run scripts you explicitly configure. Always validate inputs and test hooks in safe environment before deployment."
      },
      {
        "question": "How do hooks differ from commands?",
        "answer": "Commands run when user invokes them. Hooks run automatically when specific events occur without user triggering."
      },
      {
        "question": "What exit codes do hooks use?",
        "answer": "Exit 0 approves operation and shows stdout. Exit 2 blocks operation and sends stderr to Claude. Other codes trigger warnings."
      },
      {
        "question": "How do I debug hook issues?",
        "answer": "Run validate-hooks.py for schema errors. Check script paths and permissions. Verify matcher patterns match expected tool names."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "hook-checklist.md",
          "type": "file",
          "path": "references/hook-checklist.md"
        },
        {
          "name": "hook-maintenance-guide.md",
          "type": "file",
          "path": "references/hook-maintenance-guide.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "validate-hooks.py",
          "type": "file",
          "path": "scripts/validate-hooks.py"
        }
      ]
    },
    {
      "name": "templates",
      "type": "dir",
      "path": "templates",
      "children": [
        {
          "name": "hooks-template.json",
          "type": "file",
          "path": "templates/hooks-template.json"
        },
        {
          "name": "validation-hook.sh",
          "type": "file",
          "path": "templates/validation-hook.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
