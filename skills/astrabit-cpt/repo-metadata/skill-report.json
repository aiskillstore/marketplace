{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T17:04:00.854Z",
    "slug": "astrabit-cpt-repo-metadata",
    "source_url": "https://github.com/AstraBit-CPT/astrabit-docs/tree/master/.claude/skills/repo-metadata",
    "source_ref": "master",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1f6ab4ba58aabecd038d5abe0081f1ce385101e6fa89b3784c146cda5a22df36",
    "tree_hash": "ab9e35634ed4fc82e1210b27e5b0c95e43981ba8a09b16921bab730620d0d225"
  },
  "skill": {
    "name": "repo-metadata",
    "description": "This skill should be used when the user asks to \"generate repository metadata\", \"create catalog-info.yaml\", \"add repo metadata\", \"document repository structure\", or mentions generating structured metadata for service catalog or architecture documentation.",
    "summary": "This skill should be used when the user asks to \"generate repository metadata\", \"create catalog-info...",
    "icon": "ðŸ“‹",
    "version": "1.0.0",
    "author": "AstraBit-CPT",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "metadata",
      "catalog",
      "service",
      "architecture",
      "documentation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 212 static findings are false positives. The static analyzer misidentifies YAML schema type values (like 'service', 'gateway', 'kafka') as weak cryptographic algorithms and misinterprets markdown backtick formatting as shell command execution. This skill is a legitimate documentation generator that reads local repository files and outputs YAML metadata without network access, credential handling, or code execution beyond Python subprocess calls for git status.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/generate-metadata.py",
            "line_start": 1,
            "line_end": 483
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/generate-metadata.py",
            "line_start": 123,
            "line_end": 134
          },
          {
            "file": "scripts/generate-metadata.py",
            "line_start": 196,
            "line_end": 202
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 1385,
    "audit_model": "claude",
    "audited_at": "2026-01-16T17:04:00.854Z"
  },
  "content": {
    "user_title": "Generate Service Catalog Metadata",
    "value_statement": "Service catalogs require standardized metadata to enable cross-repository architecture analysis and dependency mapping. This skill automatically generates catalog-info.yaml files by analyzing repository structure and code patterns.",
    "seo_keywords": [
      "repo metadata",
      "catalog-info",
      "service catalog",
      "Backstage",
      "architecture documentation",
      "component metadata",
      "repository documentation",
      "Claude Code",
      "Codex",
      "Claude"
    ],
    "actual_capabilities": [
      "Analyze repository structure to detect language, framework, and integrations",
      "Generate catalog-info.yaml following Backstage conventions",
      "Identify service types (gateway, service, worker, library, frontend, database)",
      "Detect dependencies from code patterns and import statements",
      "Scan for Kafka producers and consumers",
      "Extract description from README.md"
    ],
    "limitations": [
      "Requires access to repository files for analysis",
      "Cannot auto-detect domain and owner - requires user input",
      "May miss undocumented dependencies not present in code imports",
      "Service type detection is heuristic-based and may need manual review"
    ],
    "use_cases": [
      {
        "target_user": "Platform Engineers",
        "title": "Service Catalog Setup",
        "description": "Generate catalog-info.yaml files for all microservices in your organization"
      },
      {
        "target_user": "DevOps Teams",
        "title": "Architecture Documentation",
        "description": "Create standardized metadata for dependency graphs and architecture views"
      },
      {
        "target_user": "Documentation Specialists",
        "title": "Repository Onboarding",
        "description": "Automatically generate metadata for new repositories joining the service catalog"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Generation",
        "scenario": "Generate metadata for current repo",
        "prompt": "Generate repository metadata and create a catalog-info.yaml file for this repository"
      },
      {
        "title": "Specific Path",
        "scenario": "Analyze external repository",
        "prompt": "Generate catalog-info.yaml metadata for the repository at /path/to/repo"
      },
      {
        "title": "With Format",
        "scenario": "JSON output for inspection",
        "prompt": "Analyze this repository and output the catalog metadata in JSON format for review before writing the YAML file"
      },
      {
        "title": "Full Analysis",
        "scenario": "Complete architecture scan",
        "prompt": "Perform a full repository analysis including detecting all integration points, dependencies, event producers and consumers, then generate a complete catalog-info.yaml with all detected values"
      }
    ],
    "output_examples": [
      {
        "input": "Generate catalog-info.yaml for my user-service repository",
        "output": [
          "Generated catalog-info.yaml with detected values:",
          "name: user-service (from package.json)",
          "type: service (detected: has HTTP routes)",
          "runtime: nodejs (from package.json)",
          "framework: nestjs (from @nestjs/core dependency)",
          "domain: user (detected from name pattern)",
          "owner: backend-team (detected from name pattern)",
          "dependsOn: auth-service, user-db",
          "providesApis: User Service API (REST)",
          "routes: /api/users/* -> this",
          "Please review and fill in: domain, owner"
        ]
      },
      {
        "input": "Generate catalog metadata for my background worker service",
        "output": [
          "Detected worker characteristics:",
          "type: worker (only event consumers, no HTTP routes)",
          "eventConsumers: order-events from kafka topic order.placed",
          "runtime: python (from pyproject.toml)",
          "framework: fastapi (used for health checks)",
          "No APIs provided, no routes defined",
          "Depends on: kafka message queue"
        ]
      },
      {
        "input": "Create catalog-info.yaml for my API gateway",
        "output": [
          "Detected gateway characteristics:",
          "type: gateway (forwards requests, minimal business logic)",
          "routes: /api/* forwards to unknown services",
          "runtime: nodejs (from package.json)",
          "framework: express",
          "No event producers or consumers",
          "Configure forwardsTo targets for each route"
        ]
      }
    ],
    "best_practices": [
      "Review auto-detected values for accuracy before committing",
      "Fill in domain and owner fields to enable proper team ownership",
      "Keep catalog-info.yaml in sync with actual service architecture"
    ],
    "anti_patterns": [
      "Using auto-detection without reviewing detected dependencies",
      "Leaving domain and owner as unknown values",
      "Generating once and never updating as architecture evolves"
    ],
    "faq": [
      {
        "question": "What languages does this skill support?",
        "answer": "Node.js, Python, Go, Java, Rust, and Ruby. Detection is based on common package and build files."
      },
      {
        "question": "Can I use this with GitHub Actions workflows?",
        "answer": "Yes. The skill can generate metadata that syncs with GitHub Actions for consistent repository information."
      },
      {
        "question": "What service types can it detect?",
        "answer": "gateway, service, worker, library, frontend, and database. Detection is based on code patterns like routes, consumers, and API definitions."
      },
      {
        "question": "Is my repository data safe?",
        "answer": "Yes. The skill only reads files within the repository and outputs metadata. No data is sent anywhere."
      },
      {
        "question": "Why are domain and owner unknown?",
        "answer": "These require organizational knowledge that cannot be auto-detected. The skill marks them for manual input."
      },
      {
        "question": "How accurate is dependency detection?",
        "answer": "Detection finds dependencies through code imports and patterns. Undocumented or dynamically loaded dependencies may be missed."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "catalog-info-gateway.yaml",
          "type": "file",
          "path": "examples/catalog-info-gateway.yaml",
          "lines": 62
        },
        {
          "name": "catalog-info-library.yaml",
          "type": "file",
          "path": "examples/catalog-info-library.yaml",
          "lines": 41
        },
        {
          "name": "catalog-info-template.yaml",
          "type": "file",
          "path": "examples/catalog-info-template.yaml",
          "lines": 98
        },
        {
          "name": "catalog-info-worker.yaml",
          "type": "file",
          "path": "examples/catalog-info-worker.yaml",
          "lines": 60
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "schema.md",
          "type": "file",
          "path": "references/schema.md",
          "lines": 160
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "generate-metadata.py",
          "type": "file",
          "path": "scripts/generate-metadata.py",
          "lines": 483
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 215
    }
  ]
}
