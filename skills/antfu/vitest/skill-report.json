{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-30T08:50:58.132Z",
    "slug": "antfu-vitest",
    "source_url": "https://github.com/antfu/skills/tree/main/skills/vitest/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "168f3e0d4b47c00167b7d7e02725f12998734a11f21592b216b118ec371222f0",
    "tree_hash": "92f045aa33d511b22338bd5b05a84d34b514cf2f48244e3e8beda0d50dbbd704"
  },
  "skill": {
    "name": "vitest",
    "description": "Vitest fast unit testing framework powered by Vite with Jest-compatible API. Use when writing tests, mocking, configuring coverage, or working with test filtering and fixtures.",
    "summary": "Fast Vite-powered testing framework with Jest-compatible API for modern JavaScript and TypeScript projects.",
    "icon": "ðŸ§ª",
    "version": "1.0.0",
    "author": "antfu",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "testing",
      "unit-testing",
      "test-runner",
      "jest-compatible",
      "vite"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation skill for the legitimate Vitest testing framework. Static analysis flagged 681 potential issues in markdown documentation files, all of which are false positives. The scanner misidentifies markdown code block examples (shell commands, environment variables, HTTP URLs) as executable security issues. No malicious code patterns, credential exfiltration, or prompt injection attempts were found. The skill contains only documentation references and usage examples for a trusted open-source testing tool.",
    "files_scanned": 18,
    "total_lines": 3732,
    "audit_model": "claude",
    "audited_at": "2026-01-30T09:00:00.000Z",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "External Command References in Documentation",
        "description": "Shell command examples in markdown documentation are flagged as 'Ruby/shell backtick execution'. This is a false positive - backticks in markdown are code formatting delimiters, not executable Ruby code. The skill contains only documentation files (.md) that demonstrate test runner CLI usage patterns.",
        "locations": [
          {
            "file": "references/advanced-environments.md",
            "line_start": 10,
            "line_end": 256
          },
          {
            "file": "references/core-cli.md",
            "line_start": 10,
            "line_end": 160
          },
          {
            "file": "references/core-config.md",
            "line_start": 8,
            "line_end": 167
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.98,
        "confidence_reasoning": "Markdown documentation files cannot execute Ruby/shell commands. Backticks are syntax for inline code formatting in markdown, not backtick execution operators. All 525 flagged locations are documentation examples."
      },
      {
        "title": "Environment Variable Documentation",
        "description": "References to process.env in documentation are flagged as environment access. This is a false positive - these are examples showing how to configure Vitest via environment variables, not actual secret access.",
        "locations": [
          {
            "file": "references/core-cli.md",
            "line_start": 158,
            "line_end": 158
          },
          {
            "file": "references/core-config.md",
            "line_start": 123,
            "line_end": 167
          },
          {
            "file": "references/features-filtering.md",
            "line_start": 94,
            "line_end": 173
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Documentation examples explaining environment variable configuration for test runners do not constitute secret access. No credentials or secrets are read or transmitted."
      },
      {
        "title": "Hardcoded URLs in Documentation",
        "description": "Example URLs in documentation are flagged as hardcoded URLs. This is a false positive - these are example endpoints used in test configuration documentation.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 7,
            "line_end": 7
          },
          {
            "file": "references/features-mocking.md",
            "line_start": 102,
            "line_end": 264
          },
          {
            "file": "references/core-config.md",
            "line_start": 172,
            "line_end": 173
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Example URLs in documentation (like example.com, localhost) are standard practice for showing API patterns. No network requests are made by the skill itself."
      },
      {
        "title": "Cryptography Keyword References",
        "description": "Mentions of cryptographic algorithms in documentation are flagged as 'weak cryptographic algorithm'. This is a false positive - these are references in test coverage and security testing documentation.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 3,
            "line_end": 47
          },
          {
            "file": "references/features-coverage.md",
            "line_start": 3,
            "line_end": 3
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.98,
        "confidence_reasoning": "Documentation mentioning encryption, hashing, or crypto algorithms for test coverage purposes is not cryptographic vulnerability implementation. No actual weak crypto code exists."
      },
      {
        "title": "Dynamic Import Documentation",
        "description": "References to dynamic import() in documentation are flagged as script execution. This is a false positive - these are examples of ES module lazy loading patterns used in testing.",
        "locations": [
          {
            "file": "references/advanced-environments.md",
            "line_start": 183,
            "line_end": 183
          },
          {
            "file": "references/features-mocking.md",
            "line_start": 125,
            "line_end": 125
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Documentation explaining ES module dynamic import for code splitting and lazy loading is standard practice. No malicious script injection patterns exist."
      },
      {
        "title": "C2 Keyword References",
        "description": "Security terminology in documentation flagged as C2 keywords. This is a false positive - Vitest documentation includes security-related testing concepts.",
        "locations": [
          {
            "file": "GENERATION.md",
            "line_start": 4,
            "line_end": 4
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.98,
        "confidence_reasoning": "Security testing documentation may reference command-and-control concepts, encryption, or authentication patterns for testing purposes. This does not indicate malicious infrastructure."
      }
    ],
    "dangerous_patterns": [],
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ],
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "references/advanced-environments.md",
            "line_start": 183,
            "line_end": 183
          },
          {
            "file": "references/advanced-environments.md",
            "line_start": 66,
            "line_end": 66
          },
          {
            "file": "references/advanced-vi.md",
            "line_start": 84,
            "line_end": 84
          },
          {
            "file": "references/features-mocking.md",
            "line_start": 125,
            "line_end": 125
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "references/advanced-environments.md",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "references/advanced-environments.md",
            "line_start": 87,
            "line_end": 87
          },
          {
            "file": "references/advanced-environments.md",
            "line_start": 263,
            "line_end": 263
          },
          {
            "file": "SKILL.md",
            "line_start": 7,
            "line_end": 7
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "references/core-config.md",
            "line_start": 1,
            "line_end": 175
          },
          {
            "file": "references/features-coverage.md",
            "line_start": 1,
            "line_end": 208
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "references/core-cli.md",
            "line_start": 158,
            "line_end": 158
          },
          {
            "file": "references/core-config.md",
            "line_start": 123,
            "line_end": 167
          },
          {
            "file": "references/features-filtering.md",
            "line_start": 94,
            "line_end": 173
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "GENERATION.md",
            "line_start": 3,
            "line_end": 4
          },
          {
            "file": "references/advanced-environments.md",
            "line_start": 10,
            "line_end": 256
          },
          {
            "file": "references/core-cli.md",
            "line_start": 10,
            "line_end": 160
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Write and run tests with Vitest",
    "value_statement": "Writing and maintaining tests is time-consuming. Vitest provides a blazing-fast testing framework powered by Vite with Jest-compatible APIs, enabling developers to write unit tests with native ESM, TypeScript, and JSX support out of the box.",
    "seo_keywords": [
      "Vitest",
      "unit testing",
      "test runner",
      "Jest alternative",
      "Claude",
      "Codex",
      "Claude Code",
      "testing framework",
      "Vite",
      "TypeScript testing"
    ],
    "actual_capabilities": [
      "Write unit tests with test/it functions and describe blocks for test organization",
      "Create assertions using expect with matchers like toBe, toEqual, toMatch, and custom matchers",
      "Mock functions, modules, timers, and dates using vi utilities for test isolation",
      "Configure code coverage reporting with V8 or Istanbul providers",
      "Filter and run specific tests by name, file patterns, or tags for faster feedback",
      "Run tests concurrently in parallel workers for faster execution"
    ],
    "limitations": [
      "This skill provides documentation and usage guidance only - it does not execute tests directly",
      "Requires a Vitest-compatible project setup with vite.config.ts or vitest.config.ts",
      "Coverage features require additional configuration for V8 or Istanbul providers"
    ],
    "use_cases": [
      {
        "title": "Writing your first unit test",
        "description": "Create a basic test file using test/it functions with assertions to verify component or function behavior.",
        "target_user": "Developers new to Vitest or unit testing"
      },
      {
        "title": "Mocking external dependencies",
        "description": "Replace external APIs, modules, or time-dependent functions with controlled mocks to isolate units under test.",
        "target_user": "Test automation engineers"
      },
      {
        "title": "Setting up continuous integration testing",
        "description": "Configure Vitest CLI options for CI environments including coverage thresholds, parallel execution, and filtered test runs.",
        "target_user": "DevOps engineers and team leads"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic test creation",
        "prompt": "Write a Vitest test for a [function/component name] that [expected behavior]. Include appropriate assertions to verify the result.",
        "scenario": "Creating a simple unit test for a function or component"
      },
      {
        "title": "Mocking dependencies",
        "prompt": "Write a Vitest test that mocks [external dependency/API/module] using vi.mock or vi.spyOn. The mock should return [expected value] and verify [expected behavior].",
        "scenario": "Isolating a unit under test by mocking its dependencies"
      },
      {
        "title": "Coverage configuration",
        "prompt": "Configure Vitest to generate code coverage reports for [file/folder paths] using [V8/Istanbul] provider. Set minimum thresholds at [percentage]% for [statements/branches/functions/lines].",
        "scenario": "Setting up coverage reporting with specific thresholds"
      },
      {
        "title": "Advanced testing patterns",
        "prompt": "Write a Vitest test suite for [feature] that uses [beforeEach/afterAll/aroundEach] hooks, [concurrent] execution, and [test.extend] custom fixtures. Include tests for [edge cases].",
        "scenario": "Creating a comprehensive test suite with advanced patterns"
      }
    ],
    "output_examples": [
      {
        "input": "Write a test for an add function that returns the sum of two numbers",
        "output": "import { describe, it, expect } from 'vitest'\n\nfunction add(a, b) {\n  return a + b\n}\n\ndescribe('add function', () => {\n  it('should return the sum of two numbers', () => {\n    expect(add(2, 3)).toBe(5)\n    expect(add(-1, 1)).toBe(0)\n    expect(add(0, 0)).toBe(0)\n  })\n})"
      },
      {
        "input": "Mock an API call in Vitest",
        "output": "import { describe, it, expect, vi } from 'vitest'\nimport { fetchUserData } from './api'\n\ndescribe('fetchUserData', () => {\n  it('should return user data when API succeeds', async () => {\n    const mockUser = { id: 1, name: 'John' }\n    vi.spyOn(globalThis, 'fetch').mockResolvedValue(\n      new Response(JSON.stringify(mockUser), { status: 200 })\n    )\n\n    const result = await fetchUserData(1)\n    expect(result).toEqual(mockUser)\n  })\n})"
      }
    ],
    "best_practices": [
      "Use describe blocks to organize tests by feature or component, keeping related tests grouped together",
      "Keep tests independent and isolated - avoid sharing state between tests using beforeEach for cleanup",
      "Write meaningful test descriptions that explain what behavior is being verified, not just what is being tested"
    ],
    "anti_patterns": [
      "Avoid testing implementation details - focus on observable behavior and outputs rather than internal state",
      "Do not skip tests without a clear reason - skipped tests create technical debt and hide potential issues",
      "Avoid overly broad assertions that pass for multiple reasons - use specific matchers like toEqual instead of truthy checks"
    ],
    "faq": [
      {
        "question": "How is Vitest different from Jest?",
        "answer": "Vitest uses Vite's transformation pipeline for faster HMR-like test updates, has native ESM support without configuration, and shares the same config and plugins with your Vite app. It provides a Jest-compatible API for easy migration."
      },
      {
        "question": "Do I need to install Vitest separately?",
        "answer": "Yes, this skill provides documentation and guidance for using Vitest. Your project must have Vitest installed as a dev dependency and configured in your vite.config.ts or vitest.config.ts file."
      },
      {
        "question": "Can I use Vitest with JavaScript projects?",
        "answer": "Yes, Vitest works with JavaScript, TypeScript, JSX, and Vue/React/Svelte components. No TypeScript configuration is required for JavaScript projects."
      },
      {
        "question": "How do I run tests in watch mode?",
        "answer": "Run 'vitest' without arguments or with 'vitest watch' to enter watch mode. Tests will rerun when files change. Use 'vitest run' for a single execution without watch mode."
      },
      {
        "question": "What test environments does Vitest support?",
        "answer": "Vitest supports 'node' for Node.js tests, 'jsdom' for browser DOM simulation, and 'happy-dom' as a lighter alternative. Configure via environment option in vitest.config."
      },
      {
        "question": "How do I configure coverage thresholds?",
        "answer": "Add coverage configuration to vitest.config.ts with coverage.provider set to 'v8' or 'istanbul', then specify threshold values for statements, branches, functions, and lines."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced-environments.md",
          "type": "file",
          "path": "references/advanced-environments.md",
          "lines": 265
        },
        {
          "name": "advanced-projects.md",
          "type": "file",
          "path": "references/advanced-projects.md",
          "lines": 301
        },
        {
          "name": "advanced-type-testing.md",
          "type": "file",
          "path": "references/advanced-type-testing.md",
          "lines": 238
        },
        {
          "name": "advanced-vi.md",
          "type": "file",
          "path": "references/advanced-vi.md",
          "lines": 250
        },
        {
          "name": "core-cli.md",
          "type": "file",
          "path": "references/core-cli.md",
          "lines": 167
        },
        {
          "name": "core-config.md",
          "type": "file",
          "path": "references/core-config.md",
          "lines": 175
        },
        {
          "name": "core-describe.md",
          "type": "file",
          "path": "references/core-describe.md",
          "lines": 194
        },
        {
          "name": "core-expect.md",
          "type": "file",
          "path": "references/core-expect.md",
          "lines": 220
        },
        {
          "name": "core-hooks.md",
          "type": "file",
          "path": "references/core-hooks.md",
          "lines": 245
        },
        {
          "name": "core-test-api.md",
          "type": "file",
          "path": "references/core-test-api.md",
          "lines": 234
        },
        {
          "name": "features-concurrency.md",
          "type": "file",
          "path": "references/features-concurrency.md",
          "lines": 251
        },
        {
          "name": "features-context.md",
          "type": "file",
          "path": "references/features-context.md",
          "lines": 239
        },
        {
          "name": "features-coverage.md",
          "type": "file",
          "path": "references/features-coverage.md",
          "lines": 208
        },
        {
          "name": "features-filtering.md",
          "type": "file",
          "path": "references/features-filtering.md",
          "lines": 212
        },
        {
          "name": "features-mocking.md",
          "type": "file",
          "path": "references/features-mocking.md",
          "lines": 266
        },
        {
          "name": "features-snapshots.md",
          "type": "file",
          "path": "references/features-snapshots.md",
          "lines": 208
        }
      ]
    },
    {
      "name": "GENERATION.md",
      "type": "file",
      "path": "GENERATION.md",
      "lines": 6
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 53
    }
  ]
}
