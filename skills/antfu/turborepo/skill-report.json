{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-31T08:39:11.040Z",
    "slug": "antfu-turborepo",
    "source_url": "https://github.com/antfu/skills/tree/main/skills/turborepo/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c3c60e7d19e98b53eafb9b73e8792d687bc4b65ef13a883c253cc790022f16f3",
    "tree_hash": "79b978b3f4d87e28b507c69053d70bed50e62ae91acfbe2af826b9e92c53f07c"
  },
  "skill": {
    "name": "turborepo",
    "description": "Turborepo monorepo build system guidance. Triggers on: turbo.json, task pipelines,\ndependsOn, caching, remote cache, the \"turbo\" CLI, --filter, --affected, CI optimization, environment\nvariables, internal packages, monorepo structure/best practices, and boundaries.\n\nUse when user: configures tasks/workflows/pipelines, creates packages, sets up\nmonorepo, shares code between apps, runs changed/affected packages, debugs cache,\nor has apps/packages directories.\n",
    "summary": "Turborepo monorepo build system guidance. Triggers on: turbo.json, task pipelines,\ndependsOn, cachin...",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "antfu",
    "license": "MIT",
    "tags": [
      "monorepo",
      "build-system",
      "javascript",
      "typescript",
      "caching"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing Turborepo best practices. All static findings are false positives from the scanner misinterpreting markdown code examples as executable code. The skill provides guidance on turbo.json configuration, task pipelines, caching strategies, and monorepo best practices. No actual code execution, network calls, or credential access occurs.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [
      {
        "title": "Documentation Pattern Misidentified as External Commands",
        "description": "Static scanner detected 'Ruby/shell backtick execution' in 1101 locations. These are markdown code blocks containing CLI command examples like `turbo run build`, not actual shell command execution. The skill contains only documentation files.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 25,
            "line_end": 27
          },
          {
            "file": "command/turborepo.md",
            "line_start": 11,
            "line_end": 55
          },
          {
            "file": "references/cli/commands.md",
            "line_start": 7,
            "line_end": 295
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "Clear documentation-only content with code examples. No actual shell or Ruby execution code exists in the skill files."
      },
      {
        "title": "Documentation URLs Misidentified as Network Activity",
        "description": "Static scanner detected 'Hardcoded URL' in 20 locations. These are documentation links to https://turborepo.dev/docs and similar references, not network calls or data exfiltration.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 725,
            "line_end": 725
          },
          {
            "file": "SKILL.md",
            "line_start": 914,
            "line_end": 914
          },
          {
            "file": "references/configuration/global-options.md",
            "line_start": 3,
            "line_end": 3
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "Static documentation links for reference purposes only. No network requests are made by the skill."
      },
      {
        "title": "File Path Patterns Misidentified as Path Traversal",
        "description": "Static scanner detected 'Path traversal sequence' in 23 locations. These are documentation examples showing file paths and turbo.json configuration patterns like `../packages/` or `$TURBO_ROOT$/shared-config.json`.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 70,
            "line_end": 70
          },
          {
            "file": "SKILL.md",
            "line_start": 300,
            "line_end": 300
          },
          {
            "file": "SKILL.md",
            "line_start": 479,
            "line_end": 479
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "Documentation examples showing correct file path patterns for turbo.json configuration. No actual file system operations occur."
      },
      {
        "title": "Environment Variable Documentation Misidentified as Credential Access",
        "description": "Static scanner detected 'Environment file access' and 'env_access' patterns in 39+ locations. These are documentation about turbo.json `env` and `globalEnv` configuration, not actual environment variable reading.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 156,
            "line_end": 156
          },
          {
            "file": "SKILL.md",
            "line_start": 603,
            "line_end": 635
          },
          {
            "file": "references/environment/RULE.md",
            "line_start": 39,
            "line_end": 39
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "Documentation about environment variable configuration in turbo.json. No actual process.env access or credential reading occurs."
      },
      {
        "title": "Heuristic False Positive: Dangerous Combination",
        "description": "Critical heuristic '[HEURISTIC] DANGEROUS COMBINATION: Code execution + Network + Credential access' is a false positive. The scanner incorrectly interpreted documentation patterns: CLI examples (code execution), documentation URLs (network), and env var configuration (credentials).",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 1,
            "line_end": 915
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "This is a documentation skill with no executable code. The detected patterns are all markdown documentation content."
      }
    ],
    "files_scanned": 28,
    "total_lines": 5306,
    "audit_model": "claude",
    "audited_at": "2026-01-31T08:39:11.040Z",
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ],
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 25,
            "line_end": 27
          },
          {
            "file": "command/turborepo.md",
            "line_start": 11,
            "line_end": 13
          },
          {
            "file": "references/cli/commands.md",
            "line_start": 7,
            "line_end": 295
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 725,
            "line_end": 725
          },
          {
            "file": "SKILL.md",
            "line_start": 914,
            "line_end": 914
          },
          {
            "file": "references/configuration/global-options.md",
            "line_start": 3,
            "line_end": 3
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 70,
            "line_end": 70
          },
          {
            "file": "SKILL.md",
            "line_start": 300,
            "line_end": 300
          },
          {
            "file": "references/best-practices/RULE.md",
            "line_start": 195,
            "line_end": 195
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 156,
            "line_end": 156
          },
          {
            "file": "references/configuration/global-options.md",
            "line_start": 35,
            "line_end": 35
          },
          {
            "file": "references/environment/RULE.md",
            "line_start": 39,
            "line_end": 39
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Set up Turborepo monorepo build systems",
    "value_statement": "Managing multiple packages in a monorepo can lead to slow builds and complex task orchestration. Turborepo provides intelligent caching and parallel execution to speed up builds. This skill provides expert guidance on configuring task pipelines, caching strategies, environment variables, and monorepo best practices.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "turborepo",
      "monorepo",
      "build system",
      "javascript",
      "typescript",
      "ci/cd",
      "caching",
      "workspace",
      "package management"
    ],
    "actual_capabilities": [
      "Guide users through turbo.json configuration including tasks, dependsOn, outputs, and env settings",
      "Provide best practices for monorepo structure with apps/ and packages/ directories",
      "Explain caching strategies including local cache, remote cache, and hash inputs",
      "Help configure environment variables for proper cache invalidation",
      "Guide filtering and affected package selection using --filter and --affected flags",
      "Provide CI/CD integration guidance for GitHub Actions and Vercel deployments"
    ],
    "limitations": [
      "Does not execute turbo CLI commands or modify files directly",
      "Does not install or configure npm packages or dependencies",
      "Does not provide build script generation or execution",
      "Does not access or read user's actual turbo.json or package.json files"
    ],
    "use_cases": [
      {
        "title": "New monorepo setup",
        "description": "First-time Turborepo user needs guidance on setting up task pipelines, defining dependencies between packages, and configuring caching for optimal build performance.",
        "target_user": "Developers new to monorepos or Turborepo"
      },
      {
        "title": "CI optimization",
        "description": "DevOps engineer wants to configure CI pipelines that only build changed packages using --affected flag, reducing build times and costs.",
        "target_user": "DevOps engineers and CI/CD specialists"
      },
      {
        "title": "Cache debugging",
        "description": "Developer experiencing cache misses or incorrect builds needs help debugging hash inputs and understanding environment variable impact on caching.",
        "target_user": "Full-stack developers and build engineers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic task configuration",
        "prompt": "I want to configure a [build/lint/test] task in my Turborepo monorepo. My package produces [describe outputs]. What should my turbo.json configuration look like?",
        "scenario": "User needs quick guidance on task configuration"
      },
      {
        "title": "Environment variables and caching",
        "prompt": "My Turborepo cache isn't invalidating when environment variables change. I have API_URL and DATABASE_URL in my code but cache hits are wrong. How do I configure env and globalEnv properly?",
        "scenario": "User experiencing cache issues with environment variables"
      },
      {
        "title": "CI pipeline setup",
        "prompt": "Set up a GitHub Actions workflow for my monorepo that only builds changed packages. How do I use --affected flag with turbo run?",
        "scenario": "User configuring CI/CD for monorepo"
      },
      {
        "title": "Advanced patterns",
        "prompt": "I need to implement the Transit Nodes pattern for parallel lint tasks with cache invalidation. How do I configure dependsOn to allow parallel execution while still invalidating cache when dependency source code changes?",
        "scenario": "User needs advanced task orchestration patterns"
      }
    ],
    "output_examples": [
      {
        "input": "How do I configure a build task that depends on my packages being built first?",
        "output": "To configure a build task with dependency builds, use the `dependsOn` key with the `^` prefix:\n\n```json\n{\n  \"tasks\": {\n    \"build\": {\n      \"dependsOn\": [\"^build\"],\n      \"outputs\": [\"dist/**\", \".next/**\"]\n    }\n  }\n}\n```\n\nThe `^build` prefix means \"run build in all dependencies first\". Your packages should have their own build scripts in package.json, and the root turbo.json orchestrates the execution order."
      },
      {
        "input": "My team wants to only run tests for packages that changed in the current PR",
        "output": "Use the `--affected` flag to automatically detect changed packages and their dependents:\n\n```bash\nturbo run test --affected\n```\n\nThis compares against your default branch and:\n- Finds packages with changed files\n- Includes packages that depend on changed packages\n- Runs only those tests\n\nFor custom base branches, use `--affected-base=origin/develop`."
      }
    ],
    "best_practices": [
      "Always use 'turbo run' in package.json scripts and CI pipelines, not the shorthand 'turbo <task>' which is intended only for interactive terminal use",
      "Place build scripts in each package's package.json and register tasks in root turbo.json, avoiding root scripts that defeat parallelization",
      "Use globalEnv and globalDependencies for configuration shared across all tasks, reducing repetition in individual task configurations"
    ],
    "anti_patterns": [
      "Using '&&' to chain turbo tasks together - let turbo orchestrate task execution through dependsOn instead",
      "Putting task logic in root package.json scripts - this bypasses turbo's dependency graph and parallelization",
      "Using relative paths like '../' in turbo.json inputs - use $TURBO_ROOT$ for repo-relative paths instead"
    ],
    "faq": [
      {
        "question": "What is the difference between 'turbo build' and 'turbo run build'?",
        "answer": "Use 'turbo run build' in package.json scripts and CI pipelines. The shorthand 'turbo build' is only for one-off terminal commands typed directly by humans. The 'run' keyword ensures consistent behavior in scripts."
      },
      {
        "question": "How do I exclude a package from the build?",
        "answer": "Use the --filter flag with negation: turbo run build --filter=!@excluded/package. You can also use --filter with glob patterns like --filter=./apps/* to include only specific directories."
      },
      {
        "question": "Why is my cache not working for TypeScript projects?",
        "answer": "Ensure you have 'incremental: true' in tsconfig.json for .tsbuildinfo cache files. Also verify your outputs pattern matches your outDir. Check that env variables affecting builds are declared in the env key."
      },
      {
        "question": "How do I configure remote cache for my team?",
        "answer": "Set up Vercel Remote Cache or a self-hosted remote. Use 'npx turbo login' to authenticate, then 'npx turbo link' to connect to your remote. Team members need appropriate permissions to access cached artifacts."
      },
      {
        "question": "What is the Transit Nodes pattern and when should I use it?",
        "answer": "Transit Nodes creates a no-op task that establishes dependency relationships without sequential execution. Use it when tasks can run in parallel but need cache invalidation when dependency source changes. Configure with dependsOn: [\"^transit\"] on your actual task."
      },
      {
        "question": "How do environment variables work in Turborepo?",
        "answer": "Variables in the 'env' key are hashed into the cache key - changes trigger rebuilds. Use 'globalEnv' for variables shared across all tasks. Variables not in these keys are filtered out in strict mode. Use passThroughEnv to allow specific CI variables."
      }
    ]
  },
  "file_structure": [
    {
      "name": "command",
      "type": "dir",
      "path": "command",
      "children": [
        {
          "name": "turborepo.md",
          "type": "file",
          "path": "command/turborepo.md",
          "lines": 71
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "best-practices",
          "type": "dir",
          "path": "references/best-practices",
          "children": [
            {
              "name": "dependencies.md",
              "type": "file",
              "path": "references/best-practices/dependencies.md",
              "lines": 247
            },
            {
              "name": "packages.md",
              "type": "file",
              "path": "references/best-practices/packages.md",
              "lines": 336
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/best-practices/RULE.md",
              "lines": 242
            },
            {
              "name": "structure.md",
              "type": "file",
              "path": "references/best-practices/structure.md",
              "lines": 270
            }
          ]
        },
        {
          "name": "boundaries",
          "type": "dir",
          "path": "references/boundaries",
          "children": [
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/boundaries/RULE.md",
              "lines": 127
            }
          ]
        },
        {
          "name": "caching",
          "type": "dir",
          "path": "references/caching",
          "children": [
            {
              "name": "gotchas.md",
              "type": "file",
              "path": "references/caching/gotchas.md",
              "lines": 170
            },
            {
              "name": "remote-cache.md",
              "type": "file",
              "path": "references/caching/remote-cache.md",
              "lines": 128
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/caching/RULE.md",
              "lines": 108
            }
          ]
        },
        {
          "name": "ci",
          "type": "dir",
          "path": "references/ci",
          "children": [
            {
              "name": "github-actions.md",
              "type": "file",
              "path": "references/ci/github-actions.md",
              "lines": 163
            },
            {
              "name": "patterns.md",
              "type": "file",
              "path": "references/ci/patterns.md",
              "lines": 146
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/ci/RULE.md",
              "lines": 80
            },
            {
              "name": "vercel.md",
              "type": "file",
              "path": "references/ci/vercel.md",
              "lines": 104
            }
          ]
        },
        {
          "name": "cli",
          "type": "dir",
          "path": "references/cli",
          "children": [
            {
              "name": "commands.md",
              "type": "file",
              "path": "references/cli/commands.md",
              "lines": 298
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/cli/RULE.md",
              "lines": 101
            }
          ]
        },
        {
          "name": "configuration",
          "type": "dir",
          "path": "references/configuration",
          "children": [
            {
              "name": "global-options.md",
              "type": "file",
              "path": "references/configuration/global-options.md",
              "lines": 192
            },
            {
              "name": "gotchas.md",
              "type": "file",
              "path": "references/configuration/gotchas.md",
              "lines": 349
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/configuration/RULE.md",
              "lines": 212
            },
            {
              "name": "tasks.md",
              "type": "file",
              "path": "references/configuration/tasks.md",
              "lines": 286
            }
          ]
        },
        {
          "name": "environment",
          "type": "dir",
          "path": "references/environment",
          "children": [
            {
              "name": "gotchas.md",
              "type": "file",
              "path": "references/environment/gotchas.md",
              "lines": 146
            },
            {
              "name": "modes.md",
              "type": "file",
              "path": "references/environment/modes.md",
              "lines": 102
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/environment/RULE.md",
              "lines": 97
            }
          ]
        },
        {
          "name": "filtering",
          "type": "dir",
          "path": "references/filtering",
          "children": [
            {
              "name": "patterns.md",
              "type": "file",
              "path": "references/filtering/patterns.md",
              "lines": 150
            },
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/filtering/RULE.md",
              "lines": 147
            }
          ]
        },
        {
          "name": "watch",
          "type": "dir",
          "path": "references/watch",
          "children": [
            {
              "name": "RULE.md",
              "type": "file",
              "path": "references/watch/RULE.md",
              "lines": 96
            }
          ]
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 915
    },
    {
      "name": "SYNC.md",
      "type": "file",
      "path": "SYNC.md",
      "lines": 7
    }
  ]
}
