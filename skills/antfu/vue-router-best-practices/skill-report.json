{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-08T08:41:23.396Z",
    "slug": "antfu-vue-router-best-practices",
    "source_url": "https://github.com/antfu/skills/tree/main/skills/vue-router-best-practices/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "ec6f98572b1479f3006df4951de2fd3b0d1212e9a61f0937c7db01d786e032d5",
    "tree_hash": "81c72625e15b0fd3f9ea2be1afe1ed9e2d02b35fccafcc11b73e51fa349b3f4d"
  },
  "skill": {
    "name": "vue-router-best-practices",
    "description": "Vue Router 4 patterns, navigation guards, route params, and route-component lifecycle interactions.",
    "summary": "Vue Router 4 patterns, navigation guards, route params, and route-component lifecycle interactions.",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "github.com/vuejs-ai",
    "license": "MIT",
    "tags": [
      "vue-router",
      "vue3",
      "navigation-guards",
      "routing",
      "vue"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 192 static findings are false positives. The scanner misinterpreted markdown code block syntax (```) as shell backticks, example URLs as hardcoded network endpoints, and legitimate documentation patterns as malicious code. This is a pure documentation skill containing Vue Router best practices.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 11,
    "total_lines": 1540,
    "audit_model": "claude",
    "audited_at": "2026-02-08T08:41:23.396Z",
    "risk_factors": []
  },
  "content": {
    "user_title": "Apply Vue Router Best Practices",
    "value_statement": "Vue Router applications often suffer from navigation guard pitfalls, route lifecycle issues, and component unmount problems. This skill provides curated patterns and solutions for Vue Router 4 to prevent common bugs and build robust routing architecture.",
    "seo_keywords": [
      "Vue Router best practices",
      "Vue Router patterns",
      "Vue navigation guards",
      "Vue 3 routing",
      "Vue Router lifecycle",
      "Vue Router params",
      "Claude",
      "Codex",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Diagnose navigation guard issues including guards not firing on param changes",
      "Implement proper async patterns for navigation guards with await",
      "Fix infinite redirect loops caused by navigation guards",
      "Handle route param changes without triggering component lifecycle",
      "Clean up event listeners and subscriptions on route transitions",
      "Set up Vue Router correctly for production single-page applications"
    ],
    "limitations": [
      "This skill focuses on Vue Router 4 patterns only",
      "Does not cover Vue Router 3 or earlier versions",
      "Does not provide Vue component implementation code",
      "Does not configure build tools or deployment pipelines"
    ],
    "use_cases": [
      {
        "title": "Debug Navigation Guard Issues",
        "description": "Developer encounters a route guard that does not fire when navigating between same-route params. Uses skill to identify the issue and apply onBeforeRouteUpdate pattern.",
        "target_user": "Vue developer debugging routing behavior"
      },
      {
        "title": "Review Vue Router Codebase",
        "description": "Code reviewer checks Vue Router implementation for common gotchas. Uses skill to verify proper handling of navigation guards, lifecycle hooks, and cleanup patterns.",
        "target_user": "Code reviewer or tech lead"
      },
      {
        "title": "Learn Vue Router Patterns",
        "description": "Developer new to Vue Router learns best practices through curated reference documents. Uses skill to understand navigation guard patterns, lazy loading, and route cleanup.",
        "target_user": "Vue learner or educator"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Vue Router Help",
        "prompt": "I have a Vue Router navigation guard that should fire when URL params change but it does not. What is happening and how do I fix it?",
        "scenario": "User asks about navigation guards not triggering on param changes"
      },
      {
        "title": "Debug Guard Behavior",
        "prompt": "My Vue Router application enters an infinite redirect loop when users try to access a protected route. The guard checks authentication and redirects to login, but something goes wrong. Help me identify the cause and fix it.",
        "scenario": "User experiences infinite redirect loop in navigation guard"
      },
      {
        "title": "Lifecycle and Cleanup",
        "prompt": "I noticed memory leaks in my Vue Router app. Event listeners and subscriptions persist after navigating away from routes. What patterns should I use to properly clean up resources on route changes?",
        "scenario": "User addresses memory leaks from improper cleanup"
      },
      {
        "title": "Review Route Architecture",
        "prompt": "Review my Vue Router configuration for common pitfalls. Check for: beforeEnter guards on same-route navigation, async guard patterns, deprecated next() usage, and missing lifecycle handling for param changes. Provide specific fixes for any issues found.",
        "scenario": "Comprehensive code review of Vue Router implementation"
      }
    ],
    "output_examples": [
      {
        "input": "beforeEnter guard does not fire when navigating from /orders/1 to /orders/2",
        "output": [
          "The beforeEnter guard only fires when entering a route from a DIFFERENT route. Changes to params within the same route do NOT trigger beforeEnter.",
          "To handle param changes, use onBeforeRouteUpdate in your component:",
          "```javascript",
          "import { onBeforeRouteUpdate } from 'vue-router'",
          "onBeforeRouteUpdate(async (to, from) => {",
          "  // This runs when params change",
          "  await fetchOrder(to.params.id)",
          "})",
          "```",
          "Alternative: Use global beforeEach with route comparison logic."
        ]
      },
      {
        "input": "Users get stuck in infinite redirect loop on protected route",
        "output": [
          "Common causes of infinite redirect loops:",
          "1. Guard logic returns true/false without redirecting",
          "2. Authentication check runs on login page itself",
          "3. Missing return statement after redirect",
          "Fix: Ensure guards check current auth state, not redirect blindly, and exclude login route from auth checks."
        ]
      }
    ],
    "best_practices": [
      "Use in-component navigation guards (onBeforeRouteUpdate, onBeforeRouteLeave) for component-specific logic rather than relying solely on route-level beforeEnter guards",
      "Always handle async operations in navigation guards with try/catch and proper error handling to prevent unhandled rejections",
      "Implement cleanup logic in onBeforeRouteLeave or use Vue's onUnmounted hook to prevent memory leaks from lingering subscriptions and event listeners"
    ],
    "anti_patterns": [
      "Relying on beforeEnter guards for param/query changes - they only fire on route transitions, not within-route navigation",
      "Using the deprecated next() function in Vue Router 4 - return values have replaced next()",
      "Forgetting to clean up event listeners or subscriptions when navigating away from routes, causing memory leaks"
    ],
    "faq": [
      {
        "question": "What is the difference between beforeEnter and onBeforeRouteUpdate?",
        "answer": "beforeEnter fires only when entering a route from a different route. onBeforeRouteUpdate fires when navigating within the same route when params, query, or hash change."
      },
      {
        "question": "Is next() still supported in Vue Router 4?",
        "answer": "No, next() is deprecated in Vue Router 4. Use return values instead: return false to abort, return path to redirect, or return undefined to continue."
      },
      {
        "question": "Why does my component lifecycle not trigger when params change?",
        "answer": "Vue Router reuses the same component instance when navigating between same-route params. Use onBeforeRouteUpdate to react to param changes or watch route params directly."
      },
      {
        "question": "How do I prevent memory leaks in Vue Router apps?",
        "answer": "Remove event listeners and cancel subscriptions in onBeforeRouteLeave or onUnmounted. Use AbortController for fetch requests and properly dispose of any observers."
      },
      {
        "question": "What causes infinite redirect loops in navigation guards?",
        "answer": "Common causes include: missing redirect return statements, checking auth on the auth redirect page itself, or guard logic that always redirects regardless of current state."
      },
      {
        "question": "Should I use global guards or component guards?",
        "answer": "Use global guards for cross-cutting concerns like authentication. Use component guards for logic specific to that component's data or UI state."
      }
    ]
  },
  "file_structure": [
    {
      "name": "reference",
      "type": "dir",
      "path": "reference",
      "children": [
        {
          "name": "router-beforeenter-no-param-trigger.md",
          "type": "file",
          "path": "reference/router-beforeenter-no-param-trigger.md",
          "lines": 168
        },
        {
          "name": "router-beforerouteenter-no-this.md",
          "type": "file",
          "path": "reference/router-beforerouteenter-no-this.md",
          "lines": 177
        },
        {
          "name": "router-guard-async-await-pattern.md",
          "type": "file",
          "path": "reference/router-guard-async-await-pattern.md",
          "lines": 228
        },
        {
          "name": "router-navigation-guard-infinite-loop.md",
          "type": "file",
          "path": "reference/router-navigation-guard-infinite-loop.md",
          "lines": 188
        },
        {
          "name": "router-navigation-guard-next-deprecated.md",
          "type": "file",
          "path": "reference/router-navigation-guard-next-deprecated.md",
          "lines": 151
        },
        {
          "name": "router-param-change-no-lifecycle.md",
          "type": "file",
          "path": "reference/router-param-change-no-lifecycle.md",
          "lines": 182
        },
        {
          "name": "router-simple-routing-cleanup.md",
          "type": "file",
          "path": "reference/router-simple-routing-cleanup.md",
          "lines": 210
        },
        {
          "name": "router-use-vue-router-for-production.md",
          "type": "file",
          "path": "reference/router-use-vue-router-for-production.md",
          "lines": 184
        }
      ]
    },
    {
      "name": "LICENSE.md",
      "type": "file",
      "path": "LICENSE.md",
      "lines": 22
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 24
    },
    {
      "name": "SYNC.md",
      "type": "file",
      "path": "SYNC.md",
      "lines": 6
    }
  ]
}
