{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-06T04:25:36.381Z",
    "slug": "labring-workflow-interactive-dev",
    "source_url": "https://github.com/labring/FastGPT/tree/main/.claude/skills/core/app/workflow/inteactive",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "fe5170ec7691d21d6ac310107cc22f586dba4bf37abe9b6d320cfc2da05a224b",
    "tree_hash": "4798eba22d9d48b60c8958c275b720089b7cdebe66f83bec52eeee1cae0ffa2e"
  },
  "skill": {
    "name": "workflow-interactive-dev",
    "description": "用于开发 FastGPT 工作流中的交互响应。详细说明了交互节点的架构、开发流程和需要修改的文件。",
    "summary": "用于开发 FastGPT 工作流中的交互响应。详细说明了交互节点的架构、开发流程和需要修改的文件。",
    "icon": "🔧",
    "version": "1.0.0",
    "author": "labring",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "FastGPT",
      "workflow",
      "interactive",
      "development",
      "node"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "纯文档技能，仅包含 Markdown 格式的开发指南和 TypeScript 代码示例，无可执行内容。所有代码片段均为文档说明性质，不包含任何脚本、网络调用或文件访问功能。",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 535,
    "audit_model": "claude",
    "audited_at": "2026-01-06T04:25:36.381Z"
  },
  "content": {
    "user_title": "开发 FastGPT 工作流交互节点",
    "value_statement": "FastGPT 工作流支持在工作流执行过程中暂停并等待用户输入。本指南详细说明了交互节点的完整开发流程，包括类型定义、执行逻辑、前端组件和国际化支持，附带完整的代码示例。",
    "seo_keywords": [
      "FastGPT 工作流开发",
      "交互节点开发指南",
      "workflow interactive node",
      "Claude Code 开发文档",
      "TypeScript 工作流节点",
      "用户输入节点开发",
      "AI Agent 工作流",
      "React 组件开发",
      "节点模板开发",
      "工作流引擎扩展"
    ],
    "actual_capabilities": [
      "提供交互节点类型定义和架构说明",
      "详细列出 8 个开发步骤和需要修改的文件清单",
      "包含 TypeScript 代码示例（类型定义、执行逻辑、前端组件）",
      "说明 isEntry 标志管理和历史记录处理机制",
      "提供测试清单和常见问题解答",
      "参考现有 userSelect 和 formInput 节点实现"
    ],
    "limitations": [
      "本技能为开发指南，不直接生成可运行的交互节点代码",
      "需要结合 FastGPT 项目代码库使用",
      "示例代码需要根据实际业务需求进行调整"
    ],
    "use_cases": [
      {
        "target_user": "FastGPT 插件开发者",
        "title": "创建自定义用户选择节点",
        "description": "为工作流添加用户选择功能，支持单选或多选场景，实现人机协作流程"
      },
      {
        "target_user": "AI 应用架构师",
        "title": "设计表单输入交互",
        "description": "构建复杂表单交互节点，收集用户多字段输入，适配业务数据采集需求"
      },
      {
        "target_user": "全栈开发工程师",
        "title": "扩展工作流引擎",
        "description": "在 FastGPT 基础上开发新的交互节点类型，扩展平台能力边界"
      }
    ],
    "prompt_templates": [
      {
        "title": "基础用法",
        "scenario": "了解交互节点架构",
        "prompt": "请介绍 FastGPT 交互节点的基本架构，包括核心类型定义和两阶段执行机制"
      },
      {
        "title": "开发步骤",
        "scenario": "创建新节点类型",
        "prompt": "请详细说明开发一个新的交互节点类型需要修改哪些文件，以及每个文件的作用"
      },
      {
        "title": "代码示例",
        "scenario": "参考执行逻辑实现",
        "prompt": "请解释 dispatchYourNode 函数中的两阶段处理逻辑，特别是 isEntry 标志的作用"
      },
      {
        "title": "高级技巧",
        "scenario": "处理特殊情况",
        "prompt": "如何实现多个交互节点串联？交互节点如何正确处理历史记录和 skipNodeQueue？"
      }
    ],
    "output_examples": [
      {
        "input": "如何开发一个自定义的用户反馈节点？",
        "output": [
          "开发自定义反馈节点需要以下步骤：",
          "1. 在 type.d.ts 中定义节点类型和参数结构",
          "2. 在常量文件中添加节点枚举（可选）",
          "3. 创建节点模板文件定义输入输出",
          "4. 实现 dispatch 逻辑，包含两阶段处理",
          "5. 注册节点回调到回调映射表",
          "6. 创建前端聊天组件和工作流编辑器组件",
          "7. 添加国际化翻译文本"
        ]
      }
    ],
    "best_practices": [
      "在第二阶段处理用户输入时，务必设置 node.isEntry = false 以重置入口标志",
      "使用 histories.slice(0, -2) 移除交互相关的历史记录，保持对话上下文清洁",
      "参考现有的 userSelect 和 formInput 节点实现，它们提供了完整的代码模式"
    ],
    "anti_patterns": [
      "忘记在 isEntry 白名单中添加新节点类型，导致工作流恢复后无法继续执行",
      "未正确解析用户输入格式，导致数据无法传递到后续节点",
      "在前端组件中直接使用未封装的原始数据，绕过表单验证和类型检查"
    ],
    "faq": [
      {
        "question": "交互节点与普通节点有什么主要区别？",
        "answer": "交互节点会暂停工作流执行，等待用户输入。它们有两个执行阶段：首次执行返回交互请求，第二次执行处理用户数据。"
      },
      {
        "question": "一个工作流中可以使用多个交互节点吗？",
        "answer": "可以。每个交互节点都会独立暂停工作流，用户完成后自动继续到下一个节点。"
      },
      {
        "question": "如何调试新开发的交互节点？",
        "answer": "使用测试清单逐项验证：节点显示、配置保存、交互请求发送、前端渲染、用户输入回传、工作流恢复和输出连接。"
      },
      {
        "question": "交互节点是否支持在工具调用中使用？",
        "answer": "支持。设置节点模板的 isTool: true 标志后，该节点可在工具调用场景中使用。"
      },
      {
        "question": "前端组件需要处理哪些状态？",
        "answer": "需要处理 submitted 状态控制表单只读、defaultValues 初始化、SubmitButton 提交回调和数据验证。"
      },
      {
        "question": "userSelect 和 formInput 节点有什么区别？",
        "answer": "userSelect 是简单的单选节点，formInput 是支持多字段的复杂表单节点。后者需要更复杂的输入项配置和验证逻辑。"
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
