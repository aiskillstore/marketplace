{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-28T08:41:47.882Z",
    "slug": "jimliu-baoyu-image-gen",
    "source_url": "https://github.com/jimliu/baoyu-skills/tree/main/skills/baoyu-image-gen/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d5cd3fcc8597f4f639f106b0b4d7d5b83b4ed71a33be357da06a3d86a3e055e2",
    "tree_hash": "9fc05e43796d77c04036ad783462b7dc11bd662c11bd08e280563a34bbfc77e8"
  },
  "skill": {
    "name": "baoyu-image-gen",
    "description": "AI image generation with OpenAI and Google APIs. Supports text-to-image, reference images, aspect ratios, and parallel generation.",
    "summary": "Generate AI images using OpenAI and Google APIs with support for aspect ratios, reference images, and batch processing.",
    "icon": "ðŸŽ¨",
    "version": "1.0.0",
    "author": "jimliu",
    "license": "MIT",
    "category": "design",
    "tags": [
      "image-generation",
      "ai-art",
      "openai",
      "google",
      "dalle",
      "gemini",
      "claude",
      "codex",
      "claude-code"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Static analysis detected 183 pattern matches, but all evaluated as false positives for this legitimate image generation skill. Dynamic imports load internal provider modules (google.ts, openai.ts). Environment access reads standard API keys (OPENAI_API_KEY, GOOGLE_API_KEY). Network calls are to legitimate AI endpoints (api.openai.com, generativelanguage.googleapis.com). Filesystem operations handle prompt files and save generated images. No malicious intent detected.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/main.ts",
            "line_start": 264,
            "line_end": 264
          },
          {
            "file": "scripts/main.ts",
            "line_start": 266,
            "line_end": 266
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "scripts/providers/google.ts",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 85,
            "line_end": 85
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 107,
            "line_end": 107
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/main.ts",
            "line_start": 37,
            "line_end": 37
          },
          {
            "file": "scripts/main.ts",
            "line_start": 253,
            "line_end": 253
          },
          {
            "file": "scripts/providers/google.ts",
            "line_start": 3,
            "line_end": 3
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 1,
            "line_end": 1
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "scripts/main.ts",
            "line_start": 244,
            "line_end": 245
          },
          {
            "file": "scripts/providers/google.ts",
            "line_start": 27,
            "line_end": 27
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 65,
            "line_end": 65
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "Dynamic Module Imports",
        "description": "Uses dynamic import() to load provider modules at runtime. This is a legitimate pattern for loading either ./providers/google or ./providers/openai based on user configuration. Paths are hardcoded and not user-controlled.",
        "locations": [
          {
            "file": "scripts/main.ts",
            "line_start": 264,
            "line_end": 266
          }
        ],
        "confidence": 0.15,
        "confidence_reasoning": "Low confidence in any risk - imports are hardcoded internal module paths, not user-controlled. Standard pattern for provider selection."
      },
      {
        "title": "Environment Variable Access for API Keys",
        "description": "Reads API keys from environment variables (OPENAI_API_KEY, GOOGLE_API_KEY, GEMINI_API_KEY). This is the standard and recommended pattern for CLI tools that interact with external APIs.",
        "locations": [
          {
            "file": "scripts/main.ts",
            "line_start": 244,
            "line_end": 245
          },
          {
            "file": "scripts/providers/google.ts",
            "line_start": 27,
            "line_end": 27
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 65,
            "line_end": 65
          }
        ],
        "confidence": 0.1,
        "confidence_reasoning": "Very low risk - standard pattern for API key management in CLI tools. Keys are used only for authenticated API calls to legitimate services."
      },
      {
        "title": "Network Requests to External APIs",
        "description": "Makes fetch requests to OpenAI and Google AI APIs for image generation. These are legitimate calls to documented endpoints (api.openai.com, generativelanguage.googleapis.com).",
        "locations": [
          {
            "file": "scripts/providers/google.ts",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "scripts/providers/openai.ts",
            "line_start": 85,
            "line_end": 85
          }
        ],
        "confidence": 0.1,
        "confidence_reasoning": "No risk - network calls are to legitimate, documented AI service endpoints for image generation functionality."
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 5,
    "total_lines": 860,
    "audit_model": "claude",
    "audited_at": "2026-01-28T08:41:47.882Z"
  },
  "content": {
    "user_title": "Generate AI Images with OpenAI and Google",
    "value_statement": "Create high-quality AI-generated images without leaving your development environment. Supports multiple providers, aspect ratios, and reference images for precise visual control.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "AI image generation",
      "DALL-E",
      "Gemini",
      "OpenAI",
      "Google AI",
      "text-to-image",
      "batch image generation"
    ],
    "actual_capabilities": [
      "Generate images using OpenAI (DALL-E 3, GPT-Image-1.5) or Google (Gemini, Imagen) APIs",
      "Support custom aspect ratios (1:1, 16:9, 9:16, 4:3, 3:4, 2.35:1)",
      "Use reference images for style transfer (Google multimodal models only)",
      "Generate multiple images in parallel using background subagents",
      "Read prompts from files for complex generation workflows",
      "Automatic retry on generation failures"
    ],
    "limitations": [
      "Requires valid API keys for OpenAI or Google",
      "Reference images only supported with Google multimodal models",
      "Maximum recommended concurrency is 8 subagents for batch generation",
      "Image generation costs apply based on provider pricing"
    ],
    "use_cases": [
      {
        "title": "Content Creation",
        "description": "Generate blog post featured images, social media graphics, and marketing visuals with consistent aspect ratios and quality settings.",
        "target_user": "Content creators and marketers"
      },
      {
        "title": "UI/UX Design",
        "description": "Create mockup images, illustration assets, and design concepts for web and mobile applications.",
        "target_user": "Designers and product teams"
      },
      {
        "title": "Batch Asset Generation",
        "description": "Generate multiple images in parallel for presentations, comics, or infographic series using concurrent subagents.",
        "target_user": "Developers and automation workflows"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Image Generation",
        "prompt": "Generate an image of a serene mountain landscape at sunset with snow-capped peaks reflected in a calm lake",
        "scenario": "Simple text-to-image generation"
      },
      {
        "title": "Social Media Graphic",
        "prompt": "Create a 16:9 banner image for a tech conference with abstract geometric shapes in blue and purple gradients, including space for text overlay",
        "scenario": "Generate with specific aspect ratio"
      },
      {
        "title": "Batch Illustration Set",
        "prompt": "Generate 4 images in parallel for a children's book: 1) a friendly robot, 2) a magical forest, 3) a flying car, 4) an underwater city. Use consistent art style across all images.",
        "scenario": "Parallel generation with background subagents"
      },
      {
        "title": "Style Reference Generation",
        "prompt": "Generate an image of a futuristic cityscape using reference.png as the style guide. Match the color palette and artistic style of the reference.",
        "scenario": "Using reference images for style transfer"
      }
    ],
    "output_examples": [
      {
        "input": "npx -y bun scripts/main.ts --prompt 'A cat sitting on a windowsill' --image cat.png",
        "output": "/path/to/cat.png"
      },
      {
        "input": "npx -y bun scripts/main.ts --prompt 'A futuristic city' --image city.png --ar 16:9 --json",
        "output": "/path/to/city.json"
      }
    ],
    "best_practices": [
      "Use --quality 2k for final assets and --quality normal for quick previews to manage costs",
      "Leverage parallel generation with 4 concurrent subagents when creating multiple images",
      "Store API keys in ~/.baoyu-skills/.env for secure, persistent configuration"
    ],
    "anti_patterns": [
      "Do not commit API keys to version control - use environment files instead",
      "Avoid generating images sequentially when batch processing - use parallel subagents",
      "Do not use reference images with OpenAI provider - they are only supported with Google multimodal models"
    ],
    "faq": [
      {
        "question": "Which API provider should I use?",
        "answer": "Google (Gemini/Imagen) is the default and supports reference images and 4K output. Use OpenAI if you prefer DALL-E 3 or have existing OpenAI credits."
      },
      {
        "question": "How do I set up my API keys?",
        "answer": "Create a file at ~/.baoyu-skills/.env with your keys: OPENAI_API_KEY=sk-... or GOOGLE_API_KEY=... The skill will automatically load them on each run."
      },
      {
        "question": "Can I use reference images to control the style?",
        "answer": "Yes, but only with Google multimodal models (gemini-3-pro-image-preview or gemini-3-flash-preview). Use the --ref flag followed by image file paths."
      },
      {
        "question": "What is the recommended way to generate multiple images?",
        "answer": "Use background subagents with run_in_background=true for parallel generation. The recommended concurrency is 4 subagents, with a maximum of 8."
      },
      {
        "question": "How do I specify custom image dimensions?",
        "answer": "Use --ar for aspect ratios (16:9, 1:1, 4:3, etc.) or --size for exact dimensions (1024x1024). Aspect ratio is recommended for most use cases."
      },
      {
        "question": "What happens if image generation fails?",
        "answer": "The skill automatically retries failed generations once before reporting an error. Check your API key and network connection if issues persist."
      }
    ]
  },
  "file_structure": [
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "providers",
          "type": "dir",
          "path": "scripts/providers",
          "children": [
            {
              "name": "google.ts",
              "type": "file",
              "path": "scripts/providers/google.ts",
              "lines": 230
            },
            {
              "name": "openai.ts",
              "type": "file",
              "path": "scripts/providers/openai.ts",
              "lines": 115
            }
          ]
        },
        {
          "name": "main.ts",
          "type": "file",
          "path": "scripts/main.ts",
          "lines": 346
        },
        {
          "name": "types.ts",
          "type": "file",
          "path": "scripts/types.ts",
          "lines": 19
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 150
    }
  ]
}
