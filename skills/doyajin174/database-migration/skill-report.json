{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T05:07:46.439Z",
    "slug": "doyajin174-database-migration",
    "source_url": "https://github.com/Doyajin174/myskills/tree/main/.public/skills/database-migration",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "80ceae910613c2689eff57aa8e5c630b745f33c9dbf6f735a0cce9a67288aaa3",
    "tree_hash": "656d8f982360bd84b6208f756ea02a07951216400cdc22eb76704270eb324e3a"
  },
  "skill": {
    "name": "database-migration",
    "description": "Manage database schema changes with version control. Use when modifying DB schema, adding tables/columns, or setting up new projects. Covers Prisma, Drizzle, and migration best practices.",
    "summary": "Manage database schema changes with version control. Use when modifying DB schema, adding tables/col...",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Doyajin174",
    "license": "MIT",
    "category": "data",
    "tags": [
      "database",
      "migration",
      "prisma",
      "drizzle",
      "sql"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "external_commands",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill containing only markdown guidance for database migrations. All 68 static findings are false positives caused by documentation code blocks and example patterns being misinterpreted as executable code. No actual security risks present.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 376,
            "line_end": 376
          },
          {
            "file": "SKILL.md",
            "line_start": 377,
            "line_end": 377
          },
          {
            "file": "SKILL.md",
            "line_start": 378,
            "line_end": 378
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 33,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 76
          },
          {
            "file": "SKILL.md",
            "line_start": 76,
            "line_end": 80
          },
          {
            "file": "SKILL.md",
            "line_start": 80,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 96
          },
          {
            "file": "SKILL.md",
            "line_start": 96,
            "line_end": 105
          },
          {
            "file": "SKILL.md",
            "line_start": 105,
            "line_end": 109
          },
          {
            "file": "SKILL.md",
            "line_start": 109,
            "line_end": 121
          },
          {
            "file": "SKILL.md",
            "line_start": 121,
            "line_end": 127
          },
          {
            "file": "SKILL.md",
            "line_start": 127,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 135
          },
          {
            "file": "SKILL.md",
            "line_start": 135,
            "line_end": 156
          },
          {
            "file": "SKILL.md",
            "line_start": 156,
            "line_end": 160
          },
          {
            "file": "SKILL.md",
            "line_start": 160,
            "line_end": 171
          },
          {
            "file": "SKILL.md",
            "line_start": 171,
            "line_end": 175
          },
          {
            "file": "SKILL.md",
            "line_start": 175,
            "line_end": 184
          },
          {
            "file": "SKILL.md",
            "line_start": 184,
            "line_end": 190
          },
          {
            "file": "SKILL.md",
            "line_start": 190,
            "line_end": 205
          },
          {
            "file": "SKILL.md",
            "line_start": 205,
            "line_end": 209
          },
          {
            "file": "SKILL.md",
            "line_start": 209,
            "line_end": 220
          },
          {
            "file": "SKILL.md",
            "line_start": 220,
            "line_end": 224
          },
          {
            "file": "SKILL.md",
            "line_start": 224,
            "line_end": 232
          },
          {
            "file": "SKILL.md",
            "line_start": 232,
            "line_end": 236
          },
          {
            "file": "SKILL.md",
            "line_start": 236,
            "line_end": 242
          },
          {
            "file": "SKILL.md",
            "line_start": 242,
            "line_end": 248
          },
          {
            "file": "SKILL.md",
            "line_start": 248,
            "line_end": 254
          },
          {
            "file": "SKILL.md",
            "line_start": 254,
            "line_end": 258
          },
          {
            "file": "SKILL.md",
            "line_start": 258,
            "line_end": 261
          },
          {
            "file": "SKILL.md",
            "line_start": 261,
            "line_end": 267
          },
          {
            "file": "SKILL.md",
            "line_start": 267,
            "line_end": 295
          },
          {
            "file": "SKILL.md",
            "line_start": 295,
            "line_end": 299
          },
          {
            "file": "SKILL.md",
            "line_start": 299,
            "line_end": 322
          },
          {
            "file": "SKILL.md",
            "line_start": 322,
            "line_end": 350
          },
          {
            "file": "SKILL.md",
            "line_start": 350,
            "line_end": 355
          },
          {
            "file": "SKILL.md",
            "line_start": 355,
            "line_end": 359
          },
          {
            "file": "SKILL.md",
            "line_start": 359,
            "line_end": 364
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 40,
            "line_end": 40
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 54,
            "line_end": 54
          },
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 294,
            "line_end": 294
          },
          {
            "file": "SKILL.md",
            "line_start": 294,
            "line_end": 294
          },
          {
            "file": "SKILL.md",
            "line_start": 321,
            "line_end": 321
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 557,
    "audit_model": "claude",
    "audited_at": "2026-01-17T05:07:46.439Z"
  },
  "content": {
    "user_title": "Manage database migrations with version control",
    "value_statement": "Manual database changes break team collaboration and risk data loss. This skill provides structured guidance for safe schema migrations using Prisma and Drizzle with rollback support and CI/CD integration.",
    "seo_keywords": [
      "database migration",
      "Prisma migration",
      "Drizzle ORM",
      "schema changes",
      "SQL migration",
      "database version control",
      "Claude Code",
      "Claude",
      "Codex"
    ],
    "actual_capabilities": [
      "Generate migration files for Prisma and Drizzle ORM",
      "Apply and deploy migrations to development and production databases",
      "Create rollback scripts for safe database recovery",
      "Validate migrations in CI/CD pipelines with GitHub Actions",
      "Follow best practices for safe column additions and deletions",
      "Configure zero-downtime migrations with CONCURRENTLY indexes"
    ],
    "limitations": [
      "Does not execute migrations automatically - requires user confirmation",
      "Cannot access or modify existing databases without explicit commands",
      "Does not provide migration for databases other than PostgreSQL with Prisma/Drizzle",
      "Requires manual backup verification before production migrations"
    ],
    "use_cases": [
      {
        "target_user": "Backend Developers",
        "title": "Version-controlled schema changes",
        "description": "Create and manage database migrations with full rollback support for team collaboration."
      },
      {
        "target_user": "DevOps Engineers",
        "title": "CI/CD migration automation",
        "description": "Integrate database migrations into deployment pipelines with automated validation."
      },
      {
        "target_user": "Full-stack Developers",
        "title": "Safe schema evolution",
        "description": "Add tables and columns without breaking production data or causing downtime."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create initial migration",
        "scenario": "Starting a new project with database",
        "prompt": "Help me set up Prisma for a new project. I need to create the initial schema with User and Post models, then generate the migration files."
      },
      {
        "title": "Add new table",
        "scenario": "Extending database schema",
        "prompt": "I need to add a Comment table to my existing Prisma schema. The table should link to posts and users. Generate the migration with proper relations."
      },
      {
        "title": "Safe column modification",
        "scenario": "Modifying existing columns",
        "prompt": "I want to add a status column to my users table. Write a safe migration that handles existing data and can be rolled back if needed."
      },
      {
        "title": "Production deployment",
        "scenario": "Deploying migrations safely",
        "prompt": "Create a GitHub Actions workflow that validates migrations on pull requests and deploys them safely to production after merge."
      }
    ],
    "output_examples": [
      {
        "input": "Create a migration to add a status column to users",
        "output": [
          "Migration: add_user_status",
          "Up: ALTER TABLE users ADD COLUMN status TEXT NOT NULL DEFAULT 'active'",
          "Down: ALTER TABLE users DROP COLUMN status",
          "Safety: Default value prevents NOT NULL violations on existing rows"
        ]
      },
      {
        "input": "Set up Prisma for a new Node.js project",
        "output": [
          "Install: npm install prisma @prisma/client",
          "Initialize: npx prisma init",
          "Define schema with User and Post models",
          "Generate: npx prisma migrate dev --name init"
        ]
      },
      {
        "input": "Create CI/CD pipeline for database migrations",
        "output": [
          "GitHub Actions workflow with migration validation job",
          "Secrets.DATABASE_URL for secure credential handling",
          "Test database spin-up with postgres service container",
          "Deploy after merge to main branch"
        ]
      }
    ],
    "best_practices": [
      "Create small, focused migrations that do one thing at a time for easier rollback",
      "Include both up and down migrations to enable safe rollback of any change",
      "Test migrations on a staging database before applying to production"
    ],
    "anti_patterns": [
      "Running manual ALTER TABLE commands instead of generated migrations",
      "Skipping down migrations or rollback testing",
      "Making multiple schema changes in a single large migration"
    ],
    "faq": [
      {
        "question": "Which ORM should I choose, Prisma or Drizzle?",
        "answer": "Prisma offers a higher-level abstraction for Node.js. Drizzle is lighter and more SQL-like for performance-critical apps."
      },
      {
        "question": "How do I handle long-running migrations?",
        "answer": "Use CONCURRENTLY for indexes, schedule during low-traffic periods, and break large changes into smaller batches."
      },
      {
        "question": "Can I use this with databases other than PostgreSQL?",
        "answer": "Prisma supports PostgreSQL, MySQL, SQLite, MongoDB, and SQL Server. Drizzle supports PostgreSQL and MySQL."
      },
      {
        "question": "How do I recover from a failed migration?",
        "answer": "Use the down migration to revert. For Prisma, use 'migrate resolve --rolled-back' to mark failed migrations."
      },
      {
        "question": "Do migrations lock the database?",
        "answer": "Some operations like ALTER TABLE can cause locks. Use CONCURRENTLY for index creation in PostgreSQL."
      },
      {
        "question": "How is this different from raw SQL migrations?",
        "answer": "ORM migrations provide type safety, automatic dependency tracking, and cross-database compatibility."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 379
    }
  ]
}
