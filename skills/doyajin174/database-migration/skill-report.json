{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T14:15:08.553Z",
    "slug": "doyajin174-database-migration",
    "source_url": "https://github.com/Doyajin174/myskills/tree/main/.public/skills/database-migration",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "80ceae910613c2689eff57aa8e5c630b745f33c9dbf6f735a0cce9a67288aaa3",
    "tree_hash": "7e6eb3a2e5d59bb7aca47d7c8b2ee0c3eb78655bb9e15c666be094f1223471c0"
  },
  "skill": {
    "name": "database-migration",
    "description": "Manage database schema changes with version control. Use when modifying DB schema, adding tables/columns, or setting up new projects. Covers Prisma, Drizzle, and migration best practices.",
    "summary": "Manage database schema changes with version control. Use when modifying DB schema, adding tables/col...",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Doyajin174",
    "license": "MIT",
    "category": "data",
    "tags": [
      "database",
      "migration",
      "prisma",
      "drizzle",
      "sql"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a pure prompt-based documentation skill containing no executable code. It provides guidance on database migration best practices for Prisma and Drizzle ORM. No security risks detected.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 379,
    "audit_model": "claude",
    "audited_at": "2026-01-10T14:15:08.553Z"
  },
  "content": {
    "user_title": "Manage database migrations with version control",
    "value_statement": "Manual database changes break team collaboration and risk data loss. This skill provides structured guidance for safe schema migrations using Prisma and Drizzle with rollback support and CI/CD integration.",
    "seo_keywords": [
      "database migration",
      "Prisma migration",
      "Drizzle ORM",
      "schema changes",
      "SQL migration",
      "database version control",
      "Clauode Code",
      "Claude",
      "Codex"
    ],
    "actual_capabilities": [
      "Generate migration files for Prisma and Drizzle ORM",
      "Apply and deploy migrations to development and production databases",
      "Create rollback scripts for safe database recovery",
      "Validate migrations in CI/CD pipelines with GitHub Actions",
      "Follow best practices for safe column additions and deletions",
      "Configure zero-downtime migrations with CONCURRENTLY indexes"
    ],
    "limitations": [
      "Does not execute migrations automatically - requires user confirmation",
      "Cannot access or modify existing databases without explicit commands",
      "Does not provide migration for databases other than PostgreSQL with Prisma/Drizzle",
      "Requires manual backup verification before production migrations"
    ],
    "use_cases": [
      {
        "target_user": "Backend Developers",
        "title": "Version-controlled schema changes",
        "description": "Create and manage database migrations with full rollback support for team collaboration."
      },
      {
        "target_user": "DevOps Engineers",
        "title": "CI/CD migration automation",
        "description": "Integrate database migrations into deployment pipelines with automated validation."
      },
      {
        "target_user": "Full-stack Developers",
        "title": "Safe schema evolution",
        "description": "Add tables and columns without breaking production data or causing downtime."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create initial migration",
        "scenario": "Starting a new project with database",
        "prompt": "Help me set up Prisma for a new project. I need to create the initial schema with User and Post models, then generate the migration files."
      },
      {
        "title": "Add new table",
        "scenario": "Extending database schema",
        "prompt": "I need to add a Comment table to my existing Prisma schema. The table should link to posts and users. Generate the migration with proper relations."
      },
      {
        "title": "Safe column modification",
        "scenario": "Modifying existing columns",
        "prompt": "I want to add a status column to my users table. Write a safe migration that handles existing data and can be rolled back if needed."
      },
      {
        "title": "Production deployment",
        "scenario": "Deploying migrations safely",
        "prompt": "Create a GitHub Actions workflow that validates migrations on pull requests and deploys them safely to production after merge."
      }
    ],
    "output_examples": [
      {
        "input": "Create a migration to add a status column to users",
        "output": [
          "Migration: add_user_status",
          "Up migration: ALTER TABLE users ADD COLUMN status TEXT NOT NULL DEFAULT 'active'",
          "Down migration: ALTER TABLE users DROP COLUMN status",
          "Safety check: Default value prevents NOT NULL constraint violations on existing rows"
        ]
      }
    ],
    "best_practices": [
      "Always create small, focused migrations that do one thing at a time for easier rollback",
      "Include both up and down migrations to enable safe rollback of any change",
      "Test migrations on a staging database before applying to production",
      "Always backup production databases before running migrations in production"
    ],
    "anti_patterns": [
      "Running manual ALTER TABLE commands instead of generated migrations",
      "Skipping down migrations or rollback testing",
      "Making multiple schema changes in a single large migration",
      "Deploying migrations during peak traffic without monitoring"
    ],
    "faq": [
      {
        "question": "Which ORM should I choose, Prisma or Drizzle?",
        "answer": "Prisma offers a higher-level abstraction and works great for Node.js projects. Drizzle is lighter and more SQL-like, ideal for performance-critical applications or those already comfortable with raw SQL."
      },
      {
        "question": "How do I handle long-running migrations?",
        "answer": "Use CONCURRENTLY for index creation, schedule migrations during low-traffic periods, and break large migrations into smaller batches. Monitor locks and set appropriate timeouts."
      },
      {
        "question": "Can I use this with databases other than PostgreSQL?",
        "answer": "Prisma supports PostgreSQL, MySQL, SQLite, MongoDB, and SQL Server. Drizzle primarily supports PostgreSQL and MySQL. The migration syntax varies by database type."
      },
      {
        "question": "How do I recover from a failed migration?",
        "answer": "Use the down migration to revert changes. For Prisma, use 'migrate resolve --rolled-back' to mark failed migrations as rolled back. Always have backup restoration procedures ready."
      },
      {
        "question": "Do migrations lock the database?",
        "answer": "Some operations like ALTER TABLE can cause locks. Use CONCURRENTLY for index creation in PostgreSQL, and batch large changes. Test migration performance on a data clone first."
      },
      {
        "question": "How is this different from raw SQL migrations?",
        "answer": "ORM migrations provide type safety, automatic dependency tracking, and cross-database compatibility. Raw SQL gives full control but requires manual management of migration ordering and dependencies."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
