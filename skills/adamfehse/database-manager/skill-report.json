{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T16:27:46.336Z",
    "slug": "adamfehse-database-manager",
    "source_url": "https://github.com/AdamFehse/cookmodeV2/tree/main/.claude/skills/database-manager",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "e44f1eb9a1e36037ace7bbe0671ead5681b275233ce06a79df130e4a82191f6a",
    "tree_hash": "7ecc563c0a42813e026456787fa1a49c9d68a022cc320169965381f5bfc1d079"
  },
  "skill": {
    "name": "database-manager",
    "description": "Manages Supabase database schema, migrations, and queries for CookMode V2. Use this when the user needs to create/modify tables, write migrations, update RLS policies, or troubleshoot database issues.",
    "summary": "Manages Supabase database schema, migrations, and queries for CookMode V2. Use this when the user ne...",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "AdamFehse",
    "license": "MIT",
    "category": "data",
    "tags": [
      "supabase",
      "postgresql",
      "database",
      "schema",
      "migrations"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a pure documentation skill containing SQL templates and best practices for Supabase database operations. No executable code, scripts, network calls, or external command execution exists. All 66 static findings are false positives caused by the scanner misinterpreting SQL CHECK constraints as cryptographic algorithms, Markdown backticks as shell execution, and 'SAM' in 'Row Level Security' as Windows SAM database.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 47,
            "line_end": 47
          },
          {
            "file": "SKILL.md",
            "line_start": 48,
            "line_end": 48
          },
          {
            "file": "SKILL.md",
            "line_start": 53,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 75
          },
          {
            "file": "SKILL.md",
            "line_start": 75,
            "line_end": 78
          },
          {
            "file": "SKILL.md",
            "line_start": 78,
            "line_end": 84
          },
          {
            "file": "SKILL.md",
            "line_start": 84,
            "line_end": 87
          },
          {
            "file": "SKILL.md",
            "line_start": 87,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 96
          },
          {
            "file": "SKILL.md",
            "line_start": 96,
            "line_end": 103
          },
          {
            "file": "SKILL.md",
            "line_start": 103,
            "line_end": 109
          },
          {
            "file": "SKILL.md",
            "line_start": 109,
            "line_end": 116
          },
          {
            "file": "SKILL.md",
            "line_start": 116,
            "line_end": 123
          },
          {
            "file": "SKILL.md",
            "line_start": 123,
            "line_end": 124
          },
          {
            "file": "SKILL.md",
            "line_start": 124,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 126
          },
          {
            "file": "SKILL.md",
            "line_start": 126,
            "line_end": 127
          },
          {
            "file": "SKILL.md",
            "line_start": 127,
            "line_end": 129
          },
          {
            "file": "SKILL.md",
            "line_start": 129,
            "line_end": 135
          },
          {
            "file": "SKILL.md",
            "line_start": 135,
            "line_end": 141
          },
          {
            "file": "SKILL.md",
            "line_start": 141,
            "line_end": 177
          },
          {
            "file": "SKILL.md",
            "line_start": 177,
            "line_end": 191
          },
          {
            "file": "SKILL.md",
            "line_start": 191,
            "line_end": 203
          },
          {
            "file": "SKILL.md",
            "line_start": 203,
            "line_end": 209
          },
          {
            "file": "SKILL.md",
            "line_start": 209,
            "line_end": 231
          },
          {
            "file": "SKILL.md",
            "line_start": 231,
            "line_end": 236
          },
          {
            "file": "SKILL.md",
            "line_start": 236,
            "line_end": 242
          },
          {
            "file": "SKILL.md",
            "line_start": 242,
            "line_end": 243
          },
          {
            "file": "SKILL.md",
            "line_start": 243,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 265,
            "line_end": 274
          },
          {
            "file": "SKILL.md",
            "line_start": 274,
            "line_end": 286
          },
          {
            "file": "SKILL.md",
            "line_start": 286,
            "line_end": 292
          },
          {
            "file": "SKILL.md",
            "line_start": 292,
            "line_end": 305
          },
          {
            "file": "SKILL.md",
            "line_start": 305,
            "line_end": 319
          },
          {
            "file": "SKILL.md",
            "line_start": 319,
            "line_end": 321
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 503,
    "audit_model": "claude",
    "audited_at": "2026-01-16T16:27:46.336Z"
  },
  "content": {
    "user_title": "Manage Supabase Database Schema and Migrations",
    "value_statement": "Database management requires deep knowledge of SQL patterns and Supabase features. This skill provides expert guidance for creating tables, writing migrations, configuring RLS policies, and troubleshooting database issues with confidence.",
    "seo_keywords": [
      "Supabase database management",
      "PostgreSQL schema design",
      "database migrations",
      "RLS policies",
      "CookMode V2 database",
      "Claude database skill",
      "Codex database management",
      "Claude Code database skill",
      "Supabase troubleshooting",
      "SQL templates"
    ],
    "actual_capabilities": [
      "Create and modify database tables with proper constraints",
      "Write SQL migrations following best practices",
      "Configure Row Level Security policies",
      "Debug database errors and performance issues",
      "Optimize queries with proper indexing",
      "Implement real-time data synchronization"
    ],
    "limitations": [
      "Provides guidance only - does not execute SQL directly",
      "Does not access or modify your actual Supabase instance",
      "Does not handle database credentials or authentication",
      "Requires Supabase project already configured"
    ],
    "use_cases": [
      {
        "target_user": "Full-stack developers",
        "title": "Schema Design and Migration",
        "description": "Design new tables, write safe migrations, and manage schema evolution for Supabase projects."
      },
      {
        "target_user": "Backend engineers",
        "title": "RLS Policy Configuration",
        "description": "Configure Row Level Security policies for data protection and multi-tenant access control."
      },
      {
        "target_user": "DevOps engineers",
        "title": "Database Troubleshooting",
        "description": "Diagnose database issues, optimize slow queries, and fix constraint violations."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create New Table",
        "scenario": "Add a tracking table",
        "prompt": "Create a migration to add a new table for tracking recipe cooking times with columns for recipe_slug, start_time, end_time, and notes."
      },
      {
        "title": "Add RLS Policy",
        "scenario": "Secure data access",
        "prompt": "Write SQL to add RLS policies so users can only read their own recipe data but admins can access everything."
      },
      {
        "title": "Optimize Query",
        "scenario": "Fix slow query",
        "prompt": "Review this query and suggest indexes to improve performance: SELECT * FROM ingredient_checks WHERE recipe_slug = ?"
      },
      {
        "title": "Debug Issue",
        "scenario": "Data not syncing",
        "prompt": "My real-time updates stopped working. What could be causing this and how do I check the configuration?"
      }
    ],
    "output_examples": [
      {
        "input": "Create a migration to add a user preferences table for recipes.",
        "output": [
          "Creating table with primary key, recipe reference, and timestamp fields",
          "Adding index on user_id for fast lookups",
          "Enabling RLS with a policy for user-owned data access",
          "Include rollback steps for safe reversal"
        ]
      },
      {
        "input": "How do I add a new column to the recipe_status table?",
        "output": [
          "Using ALTER TABLE to add the new column with appropriate data type",
          "Adding a CHECK constraint if validation is needed",
          "Testing the migration in development before production",
          "Documenting the change for team reference"
        ]
      },
      {
        "input": "What indexes should I create for better query performance?",
        "output": [
          "Analyzing query patterns to identify frequently filtered columns",
          "Creating indexes on recipe_slug for lookups",
          "Using composite indexes for multi-column queries",
          "Avoiding over-indexing to prevent write performance degradation"
        ]
      }
    ],
    "best_practices": [
      "Always include rollback steps in migrations for safe reversal",
      "Test migrations locally before applying to production databases",
      "Use proper indexing on frequently filtered columns like recipe_slug",
      "Document schema changes in your project alongside the migration"
    ],
    "anti_patterns": [
      "Dropping tables without backup or rollback plan",
      "Modifying columns without understanding dependent objects",
      "Skipping RLS policies even in trusted environments",
      "Writing migrations without proper transaction handling"
    ],
    "faq": [
      {
        "question": "Does this skill connect to my Supabase instance?",
        "answer": "No. This skill provides SQL templates and guidance. You apply the generated SQL to your database using the Supabase dashboard, CLI, or client SDK."
      },
      {
        "question": "What Supabase features are supported?",
        "answer": "Full support for PostgreSQL tables, RLS policies, migrations, indexes, real-time subscriptions, and the Supabase JavaScript client."
      },
      {
        "question": "Can I use this with other PostgreSQL databases?",
        "answer": "Yes. Most SQL patterns work on any PostgreSQL database. Supabase-specific features like RLS and real-time are clearly marked."
      },
      {
        "question": "Is my data safe when using this skill?",
        "answer": "Yes. This skill only generates SQL guidance locally. No data leaves your machine. Always review generated SQL before applying."
      },
      {
        "question": "How do I troubleshoot failed migrations?",
        "answer": "Check the error message from Supabase, verify syntax matches your PostgreSQL version, and ensure you have proper permissions. Rollback steps are in the migration comments."
      },
      {
        "question": "How is this different from Supabase CLI?",
        "answer": "This skill provides expert guidance and SQL patterns. The CLI executes migrations and manages projects. Use both together for best results."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 324
    }
  ]
}
