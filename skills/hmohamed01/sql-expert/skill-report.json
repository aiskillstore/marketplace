{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T06:08:49.464Z",
    "slug": "hmohamed01-sql-expert",
    "source_url": "https://github.com/hmohamed01/SQL-Expert/tree/main/sql-expert",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d42912de0d037049f366961f83aeb3a22edc7c8777101038c3b4ee78eb6ce136",
    "tree_hash": "db90bc645856e0d4e711ee5e715db82eea6a6e62be7ccd451b9f7c5973295a4c"
  },
  "skill": {
    "name": "sql-expert",
    "description": "Write, optimize, and debug T-SQL queries for Microsoft SQL Server. Covers CTEs, window functions, PIVOT, MERGE, APPLY operators, execution plan analysis, indexing strategies, and stored procedures. Use when working with SQL Server, T-SQL scripts, .sql files, stored procedures, query optimization, or database performance tuning.",
    "summary": "Write, optimize, and debug T-SQL queries for Microsoft SQL Server. Covers CTEs, window functions, PI...",
    "icon": "ðŸ—ƒï¸",
    "version": "1.0.0",
    "author": "hmohamed01",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sql-server",
      "t-sql",
      "database",
      "query-optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill containing markdown files with T-SQL code examples. All 265 static findings are FALSE_POSITIVES. The analyzer incorrectly flags markdown syntax (triple backticks for code blocks) as shell commands, security education content as vulnerabilities, and SQL Server features like encryption as weak crypto. No executable code, network access, or file system operations exist.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "evaluation.json",
            "line_start": 24,
            "line_end": 36
          },
          {
            "file": "references/data-types.md",
            "line_start": 27,
            "line_end": 42
          },
          {
            "file": "references/data-types.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "references/data-types.md",
            "line_start": 46,
            "line_end": 67
          },
          {
            "file": "references/data-types.md",
            "line_start": 67,
            "line_end": 71
          },
          {
            "file": "references/data-types.md",
            "line_start": 71,
            "line_end": 85
          },
          {
            "file": "references/data-types.md",
            "line_start": 85,
            "line_end": 91
          },
          {
            "file": "references/data-types.md",
            "line_start": 91,
            "line_end": 111
          },
          {
            "file": "references/data-types.md",
            "line_start": 111,
            "line_end": 115
          },
          {
            "file": "references/data-types.md",
            "line_start": 115,
            "line_end": 128
          },
          {
            "file": "references/data-types.md",
            "line_start": 128,
            "line_end": 132
          },
          {
            "file": "references/data-types.md",
            "line_start": 132,
            "line_end": 151
          },
          {
            "file": "references/data-types.md",
            "line_start": 151,
            "line_end": 166
          },
          {
            "file": "references/data-types.md",
            "line_start": 166,
            "line_end": 185
          },
          {
            "file": "references/data-types.md",
            "line_start": 185,
            "line_end": 189
          },
          {
            "file": "references/data-types.md",
            "line_start": 189,
            "line_end": 203
          },
          {
            "file": "references/data-types.md",
            "line_start": 203,
            "line_end": 209
          },
          {
            "file": "references/data-types.md",
            "line_start": 209,
            "line_end": 224
          },
          {
            "file": "references/data-types.md",
            "line_start": 224,
            "line_end": 228
          },
          {
            "file": "references/data-types.md",
            "line_start": 228,
            "line_end": 241
          },
          {
            "file": "references/data-types.md",
            "line_start": 241,
            "line_end": 245
          },
          {
            "file": "references/data-types.md",
            "line_start": 245,
            "line_end": 257
          },
          {
            "file": "references/data-types.md",
            "line_start": 257,
            "line_end": 261
          },
          {
            "file": "references/data-types.md",
            "line_start": 261,
            "line_end": 277
          },
          {
            "file": "references/data-types.md",
            "line_start": 277,
            "line_end": 281
          },
          {
            "file": "references/data-types.md",
            "line_start": 281,
            "line_end": 297
          },
          {
            "file": "references/data-types.md",
            "line_start": 297,
            "line_end": 303
          },
          {
            "file": "references/data-types.md",
            "line_start": 303,
            "line_end": 323
          },
          {
            "file": "references/data-types.md",
            "line_start": 323,
            "line_end": 327
          },
          {
            "file": "references/data-types.md",
            "line_start": 327,
            "line_end": 344
          },
          {
            "file": "references/data-types.md",
            "line_start": 344,
            "line_end": 348
          },
          {
            "file": "references/data-types.md",
            "line_start": 348,
            "line_end": 377
          },
          {
            "file": "references/patterns.md",
            "line_start": 7,
            "line_end": 20
          },
          {
            "file": "references/patterns.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "references/patterns.md",
            "line_start": 24,
            "line_end": 30
          },
          {
            "file": "references/patterns.md",
            "line_start": 30,
            "line_end": 34
          },
          {
            "file": "references/patterns.md",
            "line_start": 34,
            "line_end": 45
          },
          {
            "file": "references/patterns.md",
            "line_start": 45,
            "line_end": 49
          },
          {
            "file": "references/patterns.md",
            "line_start": 49,
            "line_end": 65
          },
          {
            "file": "references/patterns.md",
            "line_start": 65,
            "line_end": 69
          },
          {
            "file": "references/patterns.md",
            "line_start": 69,
            "line_end": 79
          },
          {
            "file": "references/patterns.md",
            "line_start": 79,
            "line_end": 83
          },
          {
            "file": "references/patterns.md",
            "line_start": 83,
            "line_end": 95
          },
          {
            "file": "references/patterns.md",
            "line_start": 95,
            "line_end": 100
          },
          {
            "file": "references/patterns.md",
            "line_start": 100,
            "line_end": 104
          },
          {
            "file": "references/patterns.md",
            "line_start": 104,
            "line_end": 107
          },
          {
            "file": "references/patterns.md",
            "line_start": 107,
            "line_end": 111
          },
          {
            "file": "references/patterns.md",
            "line_start": 111,
            "line_end": 120
          },
          {
            "file": "references/patterns.md",
            "line_start": 120,
            "line_end": 131
          },
          {
            "file": "references/patterns.md",
            "line_start": 131,
            "line_end": 135
          },
          {
            "file": "references/patterns.md",
            "line_start": 135,
            "line_end": 153
          },
          {
            "file": "references/patterns.md",
            "line_start": 153,
            "line_end": 157
          },
          {
            "file": "references/patterns.md",
            "line_start": 157,
            "line_end": 171
          },
          {
            "file": "references/patterns.md",
            "line_start": 171,
            "line_end": 175
          },
          {
            "file": "references/patterns.md",
            "line_start": 175,
            "line_end": 197
          },
          {
            "file": "references/performance.md",
            "line_start": 22,
            "line_end": 36
          },
          {
            "file": "references/performance.md",
            "line_start": 36,
            "line_end": 42
          },
          {
            "file": "references/performance.md",
            "line_start": 42,
            "line_end": 50
          },
          {
            "file": "references/performance.md",
            "line_start": 50,
            "line_end": 60
          },
          {
            "file": "references/performance.md",
            "line_start": 60,
            "line_end": 76
          },
          {
            "file": "references/performance.md",
            "line_start": 76,
            "line_end": 80
          },
          {
            "file": "references/performance.md",
            "line_start": 80,
            "line_end": 96
          },
          {
            "file": "references/performance.md",
            "line_start": 96,
            "line_end": 102
          },
          {
            "file": "references/performance.md",
            "line_start": 102,
            "line_end": 121
          },
          {
            "file": "references/performance.md",
            "line_start": 121,
            "line_end": 125
          },
          {
            "file": "references/performance.md",
            "line_start": 125,
            "line_end": 149
          },
          {
            "file": "references/performance.md",
            "line_start": 149,
            "line_end": 155
          },
          {
            "file": "references/performance.md",
            "line_start": 155,
            "line_end": 164
          },
          {
            "file": "references/performance.md",
            "line_start": 164,
            "line_end": 168
          },
          {
            "file": "references/performance.md",
            "line_start": 168,
            "line_end": 187
          },
          {
            "file": "references/performance.md",
            "line_start": 187,
            "line_end": 191
          },
          {
            "file": "references/performance.md",
            "line_start": 191,
            "line_end": 197
          },
          {
            "file": "references/performance.md",
            "line_start": 197,
            "line_end": 203
          },
          {
            "file": "references/performance.md",
            "line_start": 203,
            "line_end": 215
          },
          {
            "file": "references/performance.md",
            "line_start": 215,
            "line_end": 219
          },
          {
            "file": "references/performance.md",
            "line_start": 219,
            "line_end": 228
          },
          {
            "file": "references/performance.md",
            "line_start": 228,
            "line_end": 234
          },
          {
            "file": "references/performance.md",
            "line_start": 234,
            "line_end": 250
          },
          {
            "file": "references/performance.md",
            "line_start": 250,
            "line_end": 254
          },
          {
            "file": "references/performance.md",
            "line_start": 254,
            "line_end": 261
          },
          {
            "file": "references/performance.md",
            "line_start": 261,
            "line_end": 267
          },
          {
            "file": "references/performance.md",
            "line_start": 267,
            "line_end": 285
          },
          {
            "file": "references/security.md",
            "line_start": 9,
            "line_end": 16
          },
          {
            "file": "references/security.md",
            "line_start": 16,
            "line_end": 20
          },
          {
            "file": "references/security.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "references/security.md",
            "line_start": 24,
            "line_end": 28
          },
          {
            "file": "references/security.md",
            "line_start": 28,
            "line_end": 58
          },
          {
            "file": "references/security.md",
            "line_start": 58,
            "line_end": 64
          },
          {
            "file": "references/security.md",
            "line_start": 64,
            "line_end": 102
          },
          {
            "file": "references/security.md",
            "line_start": 102,
            "line_end": 106
          },
          {
            "file": "references/security.md",
            "line_start": 106,
            "line_end": 127
          },
          {
            "file": "references/security.md",
            "line_start": 127,
            "line_end": 131
          },
          {
            "file": "references/security.md",
            "line_start": 131,
            "line_end": 167
          },
          {
            "file": "references/security.md",
            "line_start": 167,
            "line_end": 173
          },
          {
            "file": "references/security.md",
            "line_start": 173,
            "line_end": 187
          },
          {
            "file": "references/security.md",
            "line_start": 187,
            "line_end": 191
          },
          {
            "file": "references/security.md",
            "line_start": 191,
            "line_end": 207
          },
          {
            "file": "references/security.md",
            "line_start": 207,
            "line_end": 211
          },
          {
            "file": "references/security.md",
            "line_start": 211,
            "line_end": 228
          },
          {
            "file": "references/security.md",
            "line_start": 228,
            "line_end": 232
          },
          {
            "file": "references/security.md",
            "line_start": 232,
            "line_end": 249
          },
          {
            "file": "references/security.md",
            "line_start": 249,
            "line_end": 255
          },
          {
            "file": "references/security.md",
            "line_start": 255,
            "line_end": 270
          },
          {
            "file": "references/security.md",
            "line_start": 270,
            "line_end": 274
          },
          {
            "file": "references/security.md",
            "line_start": 274,
            "line_end": 298
          },
          {
            "file": "references/security.md",
            "line_start": 298,
            "line_end": 304
          },
          {
            "file": "references/security.md",
            "line_start": 304,
            "line_end": 317
          },
          {
            "file": "references/security.md",
            "line_start": 317,
            "line_end": 321
          },
          {
            "file": "references/security.md",
            "line_start": 321,
            "line_end": 357
          },
          {
            "file": "references/security.md",
            "line_start": 357,
            "line_end": 363
          },
          {
            "file": "references/security.md",
            "line_start": 363,
            "line_end": 363
          },
          {
            "file": "references/security.md",
            "line_start": 363,
            "line_end": 364
          },
          {
            "file": "references/transactions.md",
            "line_start": 18,
            "line_end": 35
          },
          {
            "file": "references/transactions.md",
            "line_start": 35,
            "line_end": 39
          },
          {
            "file": "references/transactions.md",
            "line_start": 39,
            "line_end": 60
          },
          {
            "file": "references/transactions.md",
            "line_start": 60,
            "line_end": 64
          },
          {
            "file": "references/transactions.md",
            "line_start": 64,
            "line_end": 83
          },
          {
            "file": "references/transactions.md",
            "line_start": 83,
            "line_end": 100
          },
          {
            "file": "references/transactions.md",
            "line_start": 100,
            "line_end": 119
          },
          {
            "file": "references/transactions.md",
            "line_start": 119,
            "line_end": 123
          },
          {
            "file": "references/transactions.md",
            "line_start": 123,
            "line_end": 134
          },
          {
            "file": "references/transactions.md",
            "line_start": 134,
            "line_end": 138
          },
          {
            "file": "references/transactions.md",
            "line_start": 138,
            "line_end": 148
          },
          {
            "file": "references/transactions.md",
            "line_start": 148,
            "line_end": 152
          },
          {
            "file": "references/transactions.md",
            "line_start": 152,
            "line_end": 164
          },
          {
            "file": "references/transactions.md",
            "line_start": 164,
            "line_end": 168
          },
          {
            "file": "references/transactions.md",
            "line_start": 168,
            "line_end": 180
          },
          {
            "file": "references/transactions.md",
            "line_start": 180,
            "line_end": 184
          },
          {
            "file": "references/transactions.md",
            "line_start": 184,
            "line_end": 198
          },
          {
            "file": "references/transactions.md",
            "line_start": 198,
            "line_end": 202
          },
          {
            "file": "references/transactions.md",
            "line_start": 202,
            "line_end": 212
          },
          {
            "file": "references/transactions.md",
            "line_start": 212,
            "line_end": 218
          },
          {
            "file": "references/transactions.md",
            "line_start": 218,
            "line_end": 225
          },
          {
            "file": "references/transactions.md",
            "line_start": 225,
            "line_end": 229
          },
          {
            "file": "references/transactions.md",
            "line_start": 229,
            "line_end": 263
          },
          {
            "file": "references/transactions.md",
            "line_start": 263,
            "line_end": 267
          },
          {
            "file": "references/transactions.md",
            "line_start": 267,
            "line_end": 306
          },
          {
            "file": "references/transactions.md",
            "line_start": 306,
            "line_end": 322
          },
          {
            "file": "references/transactions.md",
            "line_start": 322,
            "line_end": 344
          },
          {
            "file": "references/transactions.md",
            "line_start": 344,
            "line_end": 348
          },
          {
            "file": "references/transactions.md",
            "line_start": 348,
            "line_end": 374
          },
          {
            "file": "references/transactions.md",
            "line_start": 374,
            "line_end": 380
          },
          {
            "file": "references/transactions.md",
            "line_start": 380,
            "line_end": 396
          },
          {
            "file": "references/transactions.md",
            "line_start": 396,
            "line_end": 400
          },
          {
            "file": "references/transactions.md",
            "line_start": 400,
            "line_end": 426
          },
          {
            "file": "references/transactions.md",
            "line_start": 426,
            "line_end": 430
          },
          {
            "file": "references/transactions.md",
            "line_start": 430,
            "line_end": 499
          },
          {
            "file": "references/transactions.md",
            "line_start": 499,
            "line_end": 503
          },
          {
            "file": "references/transactions.md",
            "line_start": 503,
            "line_end": 531
          },
          {
            "file": "SKILL.md",
            "line_start": 32,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 56
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "references/patterns.md",
            "line_start": 8,
            "line_end": 8
          },
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 3072,
    "audit_model": "claude",
    "audited_at": "2026-01-17T06:08:49.464Z"
  },
  "content": {
    "user_title": "Write and optimize T-SQL queries for SQL Server",
    "value_statement": "Get expert help writing complex T-SQL queries, stored procedures, and performance optimizations for Microsoft SQL Server. Covers advanced patterns like CTEs, window functions, PIVOT, and MERGE statements.",
    "seo_keywords": [
      "SQL Server",
      "T-SQL",
      "Microsoft SQL Server",
      "query optimization",
      "database development",
      "stored procedures",
      "CTE",
      "window functions",
      "Claude Code",
      "Claude"
    ],
    "actual_capabilities": [
      "Write and debug complex T-SQL queries with CTEs, window functions, and PIVOT operations",
      "Analyze execution plans and recommend indexing strategies for query performance",
      "Create and optimize stored procedures with proper error handling and transaction management",
      "Implement security patterns including SQL injection prevention and dynamic SQL safety"
    ],
    "limitations": [
      "Does not execute queries or connect to databases directly",
      "Does not have access to your specific database schema or data",
      "Does not provide GUI-based database design or administration"
    ],
    "use_cases": [
      {
        "target_user": "Database developers",
        "title": "Write complex T-SQL queries",
        "description": "Create queries with advanced patterns like recursive CTEs, running totals, and gap detection"
      },
      {
        "target_user": "Performance engineers",
        "title": "Optimize slow queries",
        "description": "Analyze query patterns and execution plans to identify and fix performance bottlenecks"
      },
      {
        "target_user": "Backend developers",
        "title": "Build secure stored procedures",
        "description": "Implement parameterized queries, proper error handling, and transaction management patterns"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic query help",
        "scenario": "Write a simple query",
        "prompt": "Write a T-SQL query to select all orders from last month with their customer names, joining the Orders and Customers tables"
      },
      {
        "title": "Advanced pattern",
        "scenario": "Use window functions",
        "prompt": "Create a query using window functions to show each product with its sales, running total, and rank within category"
      },
      {
        "title": "Performance tuning",
        "scenario": "Optimize slow query",
        "prompt": "This query takes 30 seconds to run on a table with 10 million rows. Suggest optimizations including index changes and query rewrite: SELECT * FROM transactions WHERE YEAR(date) = 2024"
      },
      {
        "title": "Security patterns",
        "scenario": "Prevent SQL injection",
        "prompt": "Show me how to safely build a dynamic WHERE clause that accepts user input for filtering, preventing SQL injection while allowing optional filters"
      }
    ],
    "output_examples": [
      {
        "input": "Write a recursive CTE to traverse an organizational hierarchy where each employee has a manager_id pointing to another employee",
        "output": [
          "WITH RECURSIVE hierarchy AS (",
          "  -- Anchor: top-level employees (no manager)",
          "  SELECT id, name, manager_id, 0 AS level",
          "  FROM employees WHERE manager_id IS NULL",
          "  ",
          "  UNION ALL",
          "  ",
          "  -- Recursive: employees reporting to current level",
          "  SELECT e.id, e.name, e.manager_id, h.level + 1",
          "  FROM employees e",
          "  INNER JOIN hierarchy h ON e.manager_id = h.id",
          ")",
          "SELECT * FROM hierarchy OPTION (MAXRECURSION 100)"
        ]
      },
      {
        "input": "How do I implement keyset pagination for better performance on large tables?",
        "output": [
          "Keyset (seek method) pagination is more efficient than OFFSET for large datasets:",
          " ",
          "CREATE PROCEDURE GetProductsPage",
          "  @LastProductId INT,",
          "  @PageSize INT = 20",
          "AS",
          "BEGIN",
          "  SELECT TOP (@PageSize) * FROM Products",
          "  WHERE ProductId > @LastProductId",
          "  ORDER BY ProductId;",
          "END",
          " ",
          "Benefits: consistent performance at any page, works with real-time data"
        ]
      }
    ],
    "best_practices": [
      "Always use parameterized queries with sp_executesql instead of string concatenation to prevent SQL injection",
      "Write SARGable queries by avoiding functions on indexed columns in WHERE clauses",
      "Handle NULLs explicitly using IS NULL, ISNULL(), or COALESCE rather than relying on defaults"
    ],
    "anti_patterns": [
      "Using SELECT * in production queries - explicitly list columns to improve performance and avoid schema binding issues",
      "Calling functions on indexed columns in WHERE clauses (e.g., WHERE YEAR(date) = 2024) which prevents index usage",
      "Not validating or white-listing dynamic object names in dynamic SQL, even when using sp_executesql"
    ],
    "faq": [
      {
        "question": "What versions of SQL Server are supported?",
        "answer": "The skill covers features from SQL Server 2012 through 2022, with version-specific notes for features like STRING_AGG (2017+) and GENERATE_SERIES (2022+)."
      },
      {
        "question": "Can this skill help with database migration?",
        "answer": "Yes, the skill can help translate patterns between SQL Server and other databases, optimize migration queries, and handle data type conversions."
      },
      {
        "question": "Does the skill provide execution plan analysis?",
        "answer": "Yes, describe your query and execution plan operators (Table Scan, Key Lookup, Hash Match) for specific optimization recommendations."
      },
      {
        "question": "How do I handle dynamic sorting safely?",
        "answer": "Validate sort columns against a whitelist, then use QUOTENAME() for the column name. Never concatenate user input directly into ORDER BY clauses."
      },
      {
        "question": "What error handling patterns are recommended?",
        "answer": "Use TRY...CATCH blocks with proper transaction rollback. Check @@TRANCOUNT before rolling back and use THROW to re-raise exceptions."
      },
      {
        "question": "Can this help with JSON and XML processing?",
        "answer": "Yes, the skill covers OPENJSON, FOR JSON, and XML methods for parsing and generating structured data in SQL Server 2016+."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "data-types.md",
          "type": "file",
          "path": "references/data-types.md",
          "lines": 378
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md",
          "lines": 198
        },
        {
          "name": "performance.md",
          "type": "file",
          "path": "references/performance.md",
          "lines": 297
        },
        {
          "name": "security.md",
          "type": "file",
          "path": "references/security.md",
          "lines": 371
        },
        {
          "name": "transactions.md",
          "type": "file",
          "path": "references/transactions.md",
          "lines": 532
        }
      ]
    },
    {
      "name": "evaluation.json",
      "type": "file",
      "path": "evaluation.json",
      "lines": 219
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 73
    }
  ]
}
