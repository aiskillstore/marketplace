{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-14T22:40:40.021Z",
    "slug": "hmohamed01-sql-expert",
    "source_url": "https://github.com/hmohamed01/SQL-Expert/tree/main/sql-expert",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d42912de0d037049f366961f83aeb3a22edc7c8777101038c3b4ee78eb6ce136",
    "tree_hash": "e7d309f2026549a31f04d9e18801b773d76d70e10f8f900cdae86caf30191444"
  },
  "skill": {
    "name": "sql-expert",
    "description": "Write, optimize, and debug T-SQL queries for Microsoft SQL Server. Covers CTEs, window functions, PIVOT, MERGE, APPLY operators, execution plan analysis, indexing strategies, and stored procedures. Use when working with SQL Server, T-SQL scripts, .sql files, stored procedures, query optimization, or database performance tuning.",
    "summary": "Write, optimize, and debug T-SQL queries for Microsoft SQL Server. Covers CTEs, window functions, PI...",
    "icon": "ðŸ—„ï¸",
    "version": "1.0.0",
    "author": "hmohamed01",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sql-server",
      "t-sql",
      "database",
      "query-optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill contains ONLY markdown documentation with T-SQL code examples. All 235 static findings are FALSE POSITIVES caused by the scanner misidentifying T-SQL syntax as executable code patterns. There is no actual code execution, network access, or credential handling in this skill.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "references/data-types.md",
            "line_start": 27,
            "line_end": 42
          },
          {
            "file": "references/data-types.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "references/data-types.md",
            "line_start": 46,
            "line_end": 67
          },
          {
            "file": "references/data-types.md",
            "line_start": 67,
            "line_end": 71
          },
          {
            "file": "references/data-types.md",
            "line_start": 71,
            "line_end": 85
          },
          {
            "file": "references/data-types.md",
            "line_start": 85,
            "line_end": 91
          },
          {
            "file": "references/data-types.md",
            "line_start": 91,
            "line_end": 111
          },
          {
            "file": "references/data-types.md",
            "line_start": 111,
            "line_end": 115
          },
          {
            "file": "references/data-types.md",
            "line_start": 115,
            "line_end": 128
          },
          {
            "file": "references/data-types.md",
            "line_start": 128,
            "line_end": 132
          },
          {
            "file": "references/data-types.md",
            "line_start": 132,
            "line_end": 151
          },
          {
            "file": "references/data-types.md",
            "line_start": 151,
            "line_end": 166
          },
          {
            "file": "references/data-types.md",
            "line_start": 166,
            "line_end": 185
          },
          {
            "file": "references/data-types.md",
            "line_start": 185,
            "line_end": 189
          },
          {
            "file": "references/data-types.md",
            "line_start": 189,
            "line_end": 203
          },
          {
            "file": "references/data-types.md",
            "line_start": 203,
            "line_end": 209
          },
          {
            "file": "references/data-types.md",
            "line_start": 209,
            "line_end": 224
          },
          {
            "file": "references/data-types.md",
            "line_start": 224,
            "line_end": 228
          },
          {
            "file": "references/data-types.md",
            "line_start": 228,
            "line_end": 241
          },
          {
            "file": "references/data-types.md",
            "line_start": 241,
            "line_end": 245
          },
          {
            "file": "references/data-types.md",
            "line_start": 245,
            "line_end": 257
          },
          {
            "file": "references/data-types.md",
            "line_start": 257,
            "line_end": 261
          },
          {
            "file": "references/data-types.md",
            "line_start": 261,
            "line_end": 277
          },
          {
            "file": "references/data-types.md",
            "line_start": 277,
            "line_end": 281
          },
          {
            "file": "references/data-types.md",
            "line_start": 281,
            "line_end": 297
          },
          {
            "file": "references/data-types.md",
            "line_start": 297,
            "line_end": 303
          },
          {
            "file": "references/data-types.md",
            "line_start": 303,
            "line_end": 323
          },
          {
            "file": "references/data-types.md",
            "line_start": 323,
            "line_end": 327
          },
          {
            "file": "references/data-types.md",
            "line_start": 327,
            "line_end": 344
          },
          {
            "file": "references/data-types.md",
            "line_start": 344,
            "line_end": 348
          },
          {
            "file": "references/data-types.md",
            "line_start": 348,
            "line_end": 377
          },
          {
            "file": "references/patterns.md",
            "line_start": 7,
            "line_end": 20
          },
          {
            "file": "references/patterns.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "references/patterns.md",
            "line_start": 24,
            "line_end": 30
          },
          {
            "file": "references/patterns.md",
            "line_start": 30,
            "line_end": 34
          },
          {
            "file": "references/patterns.md",
            "line_start": 34,
            "line_end": 45
          },
          {
            "file": "references/patterns.md",
            "line_start": 45,
            "line_end": 49
          },
          {
            "file": "references/patterns.md",
            "line_start": 49,
            "line_end": 65
          },
          {
            "file": "references/patterns.md",
            "line_start": 65,
            "line_end": 69
          },
          {
            "file": "references/patterns.md",
            "line_start": 69,
            "line_end": 79
          },
          {
            "file": "references/patterns.md",
            "line_start": 79,
            "line_end": 83
          },
          {
            "file": "references/patterns.md",
            "line_start": 83,
            "line_end": 95
          },
          {
            "file": "references/patterns.md",
            "line_start": 95,
            "line_end": 100
          },
          {
            "file": "references/patterns.md",
            "line_start": 100,
            "line_end": 104
          },
          {
            "file": "references/patterns.md",
            "line_start": 104,
            "line_end": 107
          },
          {
            "file": "references/patterns.md",
            "line_start": 107,
            "line_end": 111
          },
          {
            "file": "references/patterns.md",
            "line_start": 111,
            "line_end": 120
          },
          {
            "file": "references/patterns.md",
            "line_start": 120,
            "line_end": 131
          },
          {
            "file": "references/patterns.md",
            "line_start": 131,
            "line_end": 135
          },
          {
            "file": "references/patterns.md",
            "line_start": 135,
            "line_end": 153
          },
          {
            "file": "references/patterns.md",
            "line_start": 153,
            "line_end": 157
          },
          {
            "file": "references/patterns.md",
            "line_start": 157,
            "line_end": 171
          },
          {
            "file": "references/patterns.md",
            "line_start": 171,
            "line_end": 175
          },
          {
            "file": "references/patterns.md",
            "line_start": 175,
            "line_end": 197
          },
          {
            "file": "references/performance.md",
            "line_start": 22,
            "line_end": 36
          },
          {
            "file": "references/performance.md",
            "line_start": 36,
            "line_end": 42
          },
          {
            "file": "references/performance.md",
            "line_start": 42,
            "line_end": 50
          },
          {
            "file": "references/performance.md",
            "line_start": 50,
            "line_end": 60
          },
          {
            "file": "references/performance.md",
            "line_start": 60,
            "line_end": 76
          },
          {
            "file": "references/performance.md",
            "line_start": 76,
            "line_end": 80
          },
          {
            "file": "references/performance.md",
            "line_start": 80,
            "line_end": 96
          },
          {
            "file": "references/performance.md",
            "line_start": 96,
            "line_end": 102
          },
          {
            "file": "references/performance.md",
            "line_start": 102,
            "line_end": 121
          },
          {
            "file": "references/performance.md",
            "line_start": 121,
            "line_end": 125
          },
          {
            "file": "references/performance.md",
            "line_start": 125,
            "line_end": 149
          },
          {
            "file": "references/performance.md",
            "line_start": 149,
            "line_end": 155
          },
          {
            "file": "references/performance.md",
            "line_start": 155,
            "line_end": 164
          },
          {
            "file": "references/performance.md",
            "line_start": 164,
            "line_end": 168
          },
          {
            "file": "references/performance.md",
            "line_start": 168,
            "line_end": 187
          },
          {
            "file": "references/performance.md",
            "line_start": 187,
            "line_end": 191
          },
          {
            "file": "references/performance.md",
            "line_start": 191,
            "line_end": 197
          },
          {
            "file": "references/performance.md",
            "line_start": 197,
            "line_end": 203
          },
          {
            "file": "references/performance.md",
            "line_start": 203,
            "line_end": 215
          },
          {
            "file": "references/performance.md",
            "line_start": 215,
            "line_end": 219
          },
          {
            "file": "references/performance.md",
            "line_start": 219,
            "line_end": 228
          },
          {
            "file": "references/performance.md",
            "line_start": 228,
            "line_end": 234
          },
          {
            "file": "references/performance.md",
            "line_start": 234,
            "line_end": 250
          },
          {
            "file": "references/performance.md",
            "line_start": 250,
            "line_end": 254
          },
          {
            "file": "references/performance.md",
            "line_start": 254,
            "line_end": 261
          },
          {
            "file": "references/performance.md",
            "line_start": 261,
            "line_end": 267
          },
          {
            "file": "references/performance.md",
            "line_start": 267,
            "line_end": 285
          },
          {
            "file": "references/security.md",
            "line_start": 9,
            "line_end": 16
          },
          {
            "file": "references/security.md",
            "line_start": 16,
            "line_end": 20
          },
          {
            "file": "references/security.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "references/security.md",
            "line_start": 24,
            "line_end": 28
          },
          {
            "file": "references/security.md",
            "line_start": 28,
            "line_end": 58
          },
          {
            "file": "references/security.md",
            "line_start": 58,
            "line_end": 64
          },
          {
            "file": "references/security.md",
            "line_start": 64,
            "line_end": 102
          },
          {
            "file": "references/security.md",
            "line_start": 102,
            "line_end": 106
          },
          {
            "file": "references/security.md",
            "line_start": 106,
            "line_end": 127
          },
          {
            "file": "references/security.md",
            "line_start": 127,
            "line_end": 131
          },
          {
            "file": "references/security.md",
            "line_start": 131,
            "line_end": 167
          },
          {
            "file": "references/security.md",
            "line_start": 167,
            "line_end": 173
          },
          {
            "file": "references/security.md",
            "line_start": 173,
            "line_end": 187
          },
          {
            "file": "references/security.md",
            "line_start": 187,
            "line_end": 191
          },
          {
            "file": "references/security.md",
            "line_start": 191,
            "line_end": 207
          },
          {
            "file": "references/security.md",
            "line_start": 207,
            "line_end": 211
          },
          {
            "file": "references/security.md",
            "line_start": 211,
            "line_end": 228
          },
          {
            "file": "references/security.md",
            "line_start": 228,
            "line_end": 232
          },
          {
            "file": "references/security.md",
            "line_start": 232,
            "line_end": 249
          },
          {
            "file": "references/security.md",
            "line_start": 249,
            "line_end": 255
          },
          {
            "file": "references/security.md",
            "line_start": 255,
            "line_end": 270
          },
          {
            "file": "references/security.md",
            "line_start": 270,
            "line_end": 274
          },
          {
            "file": "references/security.md",
            "line_start": 274,
            "line_end": 298
          },
          {
            "file": "references/security.md",
            "line_start": 298,
            "line_end": 304
          },
          {
            "file": "references/security.md",
            "line_start": 304,
            "line_end": 317
          },
          {
            "file": "references/security.md",
            "line_start": 317,
            "line_end": 321
          },
          {
            "file": "references/security.md",
            "line_start": 321,
            "line_end": 357
          },
          {
            "file": "references/security.md",
            "line_start": 357,
            "line_end": 363
          },
          {
            "file": "references/security.md",
            "line_start": 363,
            "line_end": 363
          },
          {
            "file": "references/security.md",
            "line_start": 363,
            "line_end": 364
          },
          {
            "file": "references/transactions.md",
            "line_start": 18,
            "line_end": 35
          },
          {
            "file": "references/transactions.md",
            "line_start": 35,
            "line_end": 39
          },
          {
            "file": "references/transactions.md",
            "line_start": 39,
            "line_end": 60
          },
          {
            "file": "references/transactions.md",
            "line_start": 60,
            "line_end": 64
          },
          {
            "file": "references/transactions.md",
            "line_start": 64,
            "line_end": 83
          },
          {
            "file": "references/transactions.md",
            "line_start": 83,
            "line_end": 100
          },
          {
            "file": "references/transactions.md",
            "line_start": 100,
            "line_end": 119
          },
          {
            "file": "references/transactions.md",
            "line_start": 119,
            "line_end": 123
          },
          {
            "file": "references/transactions.md",
            "line_start": 123,
            "line_end": 134
          },
          {
            "file": "references/transactions.md",
            "line_start": 134,
            "line_end": 138
          },
          {
            "file": "references/transactions.md",
            "line_start": 138,
            "line_end": 148
          },
          {
            "file": "references/transactions.md",
            "line_start": 148,
            "line_end": 152
          },
          {
            "file": "references/transactions.md",
            "line_start": 152,
            "line_end": 164
          },
          {
            "file": "references/transactions.md",
            "line_start": 164,
            "line_end": 168
          },
          {
            "file": "references/transactions.md",
            "line_start": 168,
            "line_end": 180
          },
          {
            "file": "references/transactions.md",
            "line_start": 180,
            "line_end": 184
          },
          {
            "file": "references/transactions.md",
            "line_start": 184,
            "line_end": 198
          },
          {
            "file": "references/transactions.md",
            "line_start": 198,
            "line_end": 202
          },
          {
            "file": "references/transactions.md",
            "line_start": 202,
            "line_end": 212
          },
          {
            "file": "references/transactions.md",
            "line_start": 212,
            "line_end": 218
          },
          {
            "file": "references/transactions.md",
            "line_start": 218,
            "line_end": 225
          },
          {
            "file": "references/transactions.md",
            "line_start": 225,
            "line_end": 229
          },
          {
            "file": "references/transactions.md",
            "line_start": 229,
            "line_end": 263
          },
          {
            "file": "references/transactions.md",
            "line_start": 263,
            "line_end": 267
          },
          {
            "file": "references/transactions.md",
            "line_start": 267,
            "line_end": 306
          },
          {
            "file": "references/transactions.md",
            "line_start": 306,
            "line_end": 322
          },
          {
            "file": "references/transactions.md",
            "line_start": 322,
            "line_end": 344
          },
          {
            "file": "references/transactions.md",
            "line_start": 344,
            "line_end": 348
          },
          {
            "file": "references/transactions.md",
            "line_start": 348,
            "line_end": 374
          },
          {
            "file": "references/transactions.md",
            "line_start": 374,
            "line_end": 380
          },
          {
            "file": "references/transactions.md",
            "line_start": 380,
            "line_end": 396
          },
          {
            "file": "references/transactions.md",
            "line_start": 396,
            "line_end": 400
          },
          {
            "file": "references/transactions.md",
            "line_start": 400,
            "line_end": 426
          },
          {
            "file": "references/transactions.md",
            "line_start": 426,
            "line_end": 430
          },
          {
            "file": "references/transactions.md",
            "line_start": 430,
            "line_end": 499
          },
          {
            "file": "references/transactions.md",
            "line_start": 499,
            "line_end": 503
          },
          {
            "file": "references/transactions.md",
            "line_start": 503,
            "line_end": 531
          },
          {
            "file": "SKILL.md",
            "line_start": 32,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 56
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "references/patterns.md",
            "line_start": 8,
            "line_end": 8
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 6,
    "total_lines": 1849,
    "audit_model": "claude",
    "audited_at": "2026-01-14T22:40:40.020Z"
  },
  "content": {
    "user_title": "Write, optimize, and debug T-SQL queries",
    "value_statement": "This skill provides expert assistance for Microsoft SQL Server and T-SQL development. It helps you write efficient queries, optimize performance, and debug complex database issues using best practices and advanced patterns.",
    "seo_keywords": [
      "sql-expert",
      "claude",
      "codex",
      "claude-code",
      "sql-server",
      "t-sql",
      "query-optimization",
      "stored-procedures",
      "database-development",
      "execution-plans"
    ],
    "actual_capabilities": [
      "Write efficient T-SQL queries using CTEs, window functions, PIVOT, MERGE, and APPLY operators",
      "Analyze execution plans and identify performance bottlenecks",
      "Implement proper error handling with TRY...CATCH and transaction management",
      "Create secure dynamic SQL using parameterized queries and sp_executesql",
      "Optimize indexing strategies and resolve parameter sniffing issues",
      "Implement SQL injection prevention patterns and least-privilege security"
    ],
    "limitations": [
      "This skill covers Microsoft SQL Server only, not other database platforms",
      "Cannot access or query your actual database - provides guidance only",
      "Does not install or configure SQL Server instances",
      "Focuses on T-SQL patterns rather than ORM or application-level database access"
    ],
    "use_cases": [
      {
        "target_user": "Database Developers",
        "title": "Query Development",
        "description": "Get help writing complex queries with advanced T-SQL patterns and techniques."
      },
      {
        "target_user": "Database Administrators",
        "title": "Performance Tuning",
        "description": "Diagnose slow queries, analyze execution plans, and optimize database performance."
      },
      {
        "target_user": "Backend Engineers",
        "title": "Secure Coding",
        "description": "Implement proper dynamic SQL patterns and prevent SQL injection vulnerabilities."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Query Help",
        "scenario": "Write a simple query",
        "prompt": "Write a query to [describe what you need] with columns [column names] from [table name] where [conditions]"
      },
      {
        "title": "Pattern Implementation",
        "scenario": "Use advanced T-SQL patterns",
        "prompt": "Implement [CTE/pagination/window function/pivot] pattern for [use case] showing both anti-pattern and correct approach"
      },
      {
        "title": "Performance Analysis",
        "scenario": "Optimize slow queries",
        "prompt": "Optimize this query: [paste query]. The execution plan shows [describe issue]. How can I improve performance?"
      },
      {
        "title": "Security Review",
        "scenario": "Fix security vulnerabilities",
        "prompt": "Review this stored procedure for SQL injection vulnerabilities and suggest secure alternatives: [paste code]"
      }
    ],
    "output_examples": [
      {
        "input": "Write a paginated query to get customers with their latest order date, showing page 2 with 20 items per page",
        "output": [
          "Using OFFSET-FETCH for pagination (SQL Server 2012+):",
          "âœ“ Includes proper ordering for consistent results",
          "âœ“ Shows equivalent keyset pagination for better performance on large datasets"
        ]
      },
      {
        "input": "My query with WHERE YEAR(OrderDate) = 2024 is slow even with an index on OrderDate",
        "output": [
          "Problem: YEAR() function makes the query non-SARGable - the index cannot be used efficiently",
          "Solution: Use date range comparison instead",
          "âœ“ Before: WHERE YEAR(OrderDate) = 2024",
          "âœ“ After: WHERE OrderDate >= '2024-01-01' AND OrderDate < '2025-01-01'"
        ]
      },
      {
        "input": "Create a stored procedure to search products with optional filters for name, category, and price range",
        "output": [
          "Shows dynamic SQL construction with sp_executesql",
          "âœ“ All filters use parameters - no SQL injection risk",
          "âœ“ Demonstrates building WHERE clause safely with proper escaping"
        ]
      }
    ],
    "best_practices": [
      "Always use parameterized queries with sp_executesql instead of string concatenation for dynamic SQL",
      "Write SARGable queries by applying functions on columns rather than the comparison value",
      "Handle transactions with TRY...CATCH blocks and check @@TRANCOUNT before rollback"
    ],
    "anti_patterns": [
      "Using string concatenation to build dynamic SQL - creates SQL injection vulnerabilities",
      "Functions like YEAR(), MONTH(), or UPPER() on indexed columns prevent index usage",
      "Missing error handling in stored procedures leads to unhandled exceptions and orphaned transactions"
    ],
    "faq": [
      {
        "question": "What SQL Server versions does this skill support?",
        "answer": "The skill covers features from SQL Server 2012 through 2022, with version-specific annotations for features like STRING_AGG, JSON functions, and GREATEST/LEAST."
      },
      {
        "question": "Can this skill help with SQL injection prevention?",
        "answer": "Yes. The security reference covers parameterized queries, sp_executesql patterns, QUOTENAME usage, and whitelist validation for dynamic object names."
      },
      {
        "question": "Does this skill cover performance tuning?",
        "answer": "Yes. Includes execution plan analysis, index recommendations, parameter sniffing solutions, Query Store patterns, and wait statistics troubleshooting."
      },
      {
        "question": "What transaction patterns are covered?",
        "answer": "Full transaction handling including TRY...CATCH, savepoints, isolation levels, deadlock prevention, retry patterns, and distributed transaction alternatives."
      },
      {
        "question": "Is this skill only for SQL Server on Windows?",
        "answer": "The T-SQL patterns work on SQL Server on Windows, Linux, and Azure SQL Database. The skill focuses on T-SQL syntax which is platform-independent."
      },
      {
        "question": "Does this skill help with database design?",
        "answer": "The skill focuses on T-SQL queries and stored procedures. For schema design, it covers indexing strategies and schema-based security patterns."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "data-types.md",
          "type": "file",
          "path": "references/data-types.md",
          "lines": 378
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md",
          "lines": 198
        },
        {
          "name": "performance.md",
          "type": "file",
          "path": "references/performance.md",
          "lines": 297
        },
        {
          "name": "security.md",
          "type": "file",
          "path": "references/security.md",
          "lines": 371
        },
        {
          "name": "transactions.md",
          "type": "file",
          "path": "references/transactions.md",
          "lines": 532
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 73
    }
  ]
}
