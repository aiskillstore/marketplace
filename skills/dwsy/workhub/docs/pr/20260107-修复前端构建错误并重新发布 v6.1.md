# PR: ä¿®å¤å‰ç«¯æ„å»ºé”™è¯¯å¹¶é‡æ–°å‘å¸ƒ v6.1

> ä¿®å¤å‰ç«¯ TypeScript ç±»å‹é”™è¯¯ï¼Œæ¸…ç†å†å²æ„å»ºäº§ç‰©å’Œ releaseï¼Œé‡æ–°å‘å¸ƒ v6.1 ç‰ˆæœ¬

## èƒŒæ™¯ä¸ç›®çš„ (Why)

å‰ç«¯æ„å»ºå¤±è´¥ï¼ŒTypeScript ç¼–è¯‘å™¨æŠ¥å‘Š `select_file_dialog` æ–¹æ³•åœ¨ `window.pywebview.api` ç±»å‹å®šä¹‰ä¸­ä¸å­˜åœ¨ã€‚è¯¥æ–¹æ³•å·²åœ¨åç«¯å®ç°ï¼Œä½†å‰ç«¯ç±»å‹å®šä¹‰æ–‡ä»¶ç¼ºå¤±ã€‚åŒæ—¶éœ€è¦æ¸…ç†æ‰€æœ‰å†å² release å’Œæ„å»ºäº§ç‰©ï¼Œé‡æ–°å¼€å§‹ç‰ˆæœ¬ç®¡ç†ã€‚

## å˜æ›´å†…å®¹æ¦‚è¿° (What)

### ä»£ç å˜æ›´
- **æ–‡ä»¶**: `src/frontend/src/vite-env.d.ts`
- **å˜æ›´**: åœ¨ `Window.pywebview.api` æ¥å£ä¸­æ·»åŠ  `select_file_dialog` æ–¹æ³•ç±»å‹å®šä¹‰
- **ç­¾å**: `(title: string, filters: Array<{name: string; extensions: string[]}>) => Promise<{success: boolean; filePath: string | null; message: string}>`

### æ¸…ç†æ“ä½œ
- åˆ é™¤æ‰€æœ‰æ„å»ºäº§ç‰©ç›®å½•ï¼š
  - `./out/build`
  - `./src/frontend/dist`
  - `./occt-import-js/dist`
  - `./__pycache__`
  - `./src/backend/__pycache__`
  - `./src/cad_quote_bot/__pycache__`
  - `./build`
- åˆ é™¤å†å²å‘å¸ƒæ–‡ä»¶ï¼š
  - `out/DeepFlyAutoQuote-Windows-x64.zip`
  - `project-latest.zip`

### GitHub Release æ¸…ç†
- åˆ é™¤æ‰€æœ‰å†å² release: v5.0, v5.1, v6.0
- åˆ é™¤æ‰€æœ‰è¿œç¨‹å’Œæœ¬åœ° tags

### é‡æ–°å‘å¸ƒ
- æäº¤ä¿®å¤ä»£ç : `c620e287`
- æ¨é€åˆ° master åˆ†æ”¯
- åˆ›å»ºå¹¶æ¨é€ v6.1 tag
- åˆ›å»º GitHub Release v6.1

## å…³è” Issue ä¸ ToDo æ¡ç›® (Links)

- **Issues:** `docs/issues/20260107-ä¿®å¤å‰ç«¯æ„å»ºé”™è¯¯å¹¶é‡æ–°å‘å¸ƒ.md`

## æµ‹è¯•ä¸éªŒè¯ç»“æœ (Test Result)

- [x] å‰ç«¯æ„å»ºæˆåŠŸ: `npm run build` âœ“
- [x] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡: `tsc -b` âœ“
- [x] ç”Ÿæˆçš„æ„å»ºæ–‡ä»¶:
  - `dist/index.html` (0.41 kB)
  - `dist/assets/index-CEh1oKqk.css` (0.61 kB)
  - `dist/assets/index-C1eztoUY.js` (2,735.97 kB)
- [x] GitHub Release åˆ›å»ºæˆåŠŸ: https://github.com/Dwsy/cad1222/releases/tag/v6.1

## é£é™©ä¸å½±å“è¯„ä¼° (Risk Assessment)

**é£é™©ç­‰çº§**: ğŸŸ¢ ä½é£é™©

- **å½±å“èŒƒå›´**: ä»…å½±å“å‰ç«¯ç±»å‹å®šä¹‰ï¼Œä¸å½±å“è¿è¡Œæ—¶é€»è¾‘
- **å‘åå…¼å®¹**: å®Œå…¨å‘åå…¼å®¹ï¼Œä»…æ·»åŠ ç¼ºå¤±çš„ç±»å‹å®šä¹‰
- **æµ‹è¯•è¦†ç›–**: æ„å»ºå’Œç±»å‹æ£€æŸ¥å·²é€šè¿‡éªŒè¯

**æ³¨æ„äº‹é¡¹**:
- å‰ç«¯æ„å»ºäº§ç‰©è¾ƒå¤§ï¼ˆ2.7MB JSï¼‰ï¼Œå»ºè®®åç»­è€ƒè™‘ä»£ç åˆ†å‰²ä¼˜åŒ–
- æ‰€æœ‰å†å² release å·²åˆ é™¤ï¼Œå¦‚éœ€å›é€€éœ€é‡æ–°åˆ›å»º

## å›æ»šæ–¹æ¡ˆ (Rollback Plan)

å¦‚éœ€å›æ»šï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **ä»£ç å›æ»š**:
   ```bash
   git revert c620e287
   git push origin master
   ```

2. **ç‰ˆæœ¬å›é€€**ï¼ˆå¦‚éœ€è¦ï¼‰:
   ```bash
   # åˆ é™¤ v6.1
   git tag -d v6.1
   git push origin :refs/tags/v6.1

   # é‡æ–°åˆ›å»º v6.0
   git tag v6.0 55e442b0
   git push origin v6.0

   # é‡æ–°åˆ›å»º v6.0 release
   gh release create v6.0 --notes "..."
   ```

3. **æ¢å¤å†å²ç‰ˆæœ¬**ï¼ˆå¦‚éœ€è¦ï¼‰:
   - ä»ä¹‹å‰çš„å¤‡ä»½æˆ– git å†å²ä¸­æ¢å¤æ„å»ºäº§ç‰©
   - é‡æ–°æ„å»ºå†å² release

**é¢„è®¡å›æ»šæ—¶é—´**: 5-10 åˆ†é’Ÿ