{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-02T08:54:40.517Z",
    "slug": "google-labs-code-stitch-loop",
    "source_url": "https://github.com/google-labs-code/stitch-skills/tree/main/skills/stitch-loop/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "758d69f30008584631f4239e87663a37e9bba8994cfc580075b9e85d846601a8",
    "tree_hash": "c256a9c45c59a52d4b0b08b679e12338e592ce6732c703ac73742fa9d6d6a99f"
  },
  "skill": {
    "name": "stitch-loop",
    "description": "Teaches agents to iteratively build websites using Stitch with an autonomous baton-passing loop pattern",
    "summary": "Autonomous website build loop for agents using Stitch MCP tools and baton-passing pattern",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "google-labs-code",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "Stitch",
      "MCP",
      "website-build",
      "baton-passing",
      "auto-development"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "No security concerns found. Static analyzer produced numerous false positives due to pattern matching on documentation content (hex color codes in design templates, example website text, file path patterns). All findings are documentation strings describing project structure, not executable code.",
    "files_scanned": 6,
    "total_lines": 526,
    "audit_model": "claude",
    "audited_at": "2026-02-02T09:00:00.000Z",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "examples/SITE.md",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "examples/SITE.md",
            "line_start": 10,
            "line_end": 10
          },
          {
            "file": "examples/SITE.md",
            "line_start": 29,
            "line_end": 29
          },
          {
            "file": "examples/SITE.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "examples/SITE.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "examples/SITE.md",
            "line_start": 38,
            "line_end": 38
          },
          {
            "file": "examples/SITE.md",
            "line_start": 39,
            "line_end": 39
          },
          {
            "file": "examples/SITE.md",
            "line_start": 40,
            "line_end": 40
          },
          {
            "file": "examples/SITE.md",
            "line_start": 41,
            "line_end": 41
          },
          {
            "file": "examples/SITE.md",
            "line_start": 44,
            "line_end": 44
          },
          {
            "file": "examples/SITE.md",
            "line_start": 64,
            "line_end": 64
          },
          {
            "file": "examples/SITE.md",
            "line_start": 65,
            "line_end": 65
          },
          {
            "file": "examples/SITE.md",
            "line_start": 66,
            "line_end": 66
          },
          {
            "file": "examples/SITE.md",
            "line_start": 67,
            "line_end": 67
          },
          {
            "file": "examples/SITE.md",
            "line_start": 71,
            "line_end": 71
          },
          {
            "file": "README.md",
            "line_start": 7,
            "line_end": 9
          },
          {
            "file": "README.md",
            "line_start": 9,
            "line_end": 15
          },
          {
            "file": "README.md",
            "line_start": 15,
            "line_end": 23
          },
          {
            "file": "README.md",
            "line_start": 23,
            "line_end": 23
          },
          {
            "file": "README.md",
            "line_start": 23,
            "line_end": 24
          },
          {
            "file": "README.md",
            "line_start": 24,
            "line_end": 28
          },
          {
            "file": "README.md",
            "line_start": 28,
            "line_end": 30
          },
          {
            "file": "README.md",
            "line_start": 30,
            "line_end": 34
          },
          {
            "file": "README.md",
            "line_start": 34,
            "line_end": 44
          },
          {
            "file": "README.md",
            "line_start": 44,
            "line_end": 48
          },
          {
            "file": "README.md",
            "line_start": 48,
            "line_end": 48
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 3,
            "line_end": 3
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 7,
            "line_end": 12
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 12,
            "line_end": 20
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 20,
            "line_end": 27
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 27,
            "line_end": 32
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 32,
            "line_end": 52
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 52,
            "line_end": 58
          },
          {
            "file": "resources/baton-schema.md",
            "line_start": 58,
            "line_end": 60
          },
          {
            "file": "resources/site-template.md",
            "line_start": 7,
            "line_end": 28
          },
          {
            "file": "resources/site-template.md",
            "line_start": 28,
            "line_end": 29
          },
          {
            "file": "resources/site-template.md",
            "line_start": 29,
            "line_end": 29
          },
          {
            "file": "resources/site-template.md",
            "line_start": 29,
            "line_end": 35
          },
          {
            "file": "resources/site-template.md",
            "line_start": 35,
            "line_end": 36
          },
          {
            "file": "resources/site-template.md",
            "line_start": 36,
            "line_end": 58
          },
          {
            "file": "resources/site-template.md",
            "line_start": 58,
            "line_end": 59
          },
          {
            "file": "resources/site-template.md",
            "line_start": 59,
            "line_end": 63
          },
          {
            "file": "resources/site-template.md",
            "line_start": 63,
            "line_end": 65
          },
          {
            "file": "resources/site-template.md",
            "line_start": 65,
            "line_end": 69
          },
          {
            "file": "resources/site-template.md",
            "line_start": 69,
            "line_end": 71
          },
          {
            "file": "resources/site-template.md",
            "line_start": 71,
            "line_end": 104
          },
          {
            "file": "SKILL.md",
            "line_start": 19,
            "line_end": 19
          },
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 29
          },
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 29
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 37,
            "line_end": 37
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 52
          },
          {
            "file": "SKILL.md",
            "line_start": 52,
            "line_end": 55
          },
          {
            "file": "SKILL.md",
            "line_start": 55,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 64
          },
          {
            "file": "SKILL.md",
            "line_start": 64,
            "line_end": 73
          },
          {
            "file": "SKILL.md",
            "line_start": 73,
            "line_end": 74
          },
          {
            "file": "SKILL.md",
            "line_start": 74,
            "line_end": 85
          },
          {
            "file": "SKILL.md",
            "line_start": 85,
            "line_end": 87
          },
          {
            "file": "SKILL.md",
            "line_start": 87,
            "line_end": 87
          },
          {
            "file": "SKILL.md",
            "line_start": 87,
            "line_end": 88
          },
          {
            "file": "SKILL.md",
            "line_start": 88,
            "line_end": 88
          },
          {
            "file": "SKILL.md",
            "line_start": 88,
            "line_end": 89
          },
          {
            "file": "SKILL.md",
            "line_start": 89,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 91
          },
          {
            "file": "SKILL.md",
            "line_start": 91,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 94
          },
          {
            "file": "SKILL.md",
            "line_start": 94,
            "line_end": 94
          },
          {
            "file": "SKILL.md",
            "line_start": 94,
            "line_end": 95
          },
          {
            "file": "SKILL.md",
            "line_start": 95,
            "line_end": 95
          },
          {
            "file": "SKILL.md",
            "line_start": 95,
            "line_end": 99
          },
          {
            "file": "SKILL.md",
            "line_start": 99,
            "line_end": 99
          },
          {
            "file": "SKILL.md",
            "line_start": 99,
            "line_end": 102
          },
          {
            "file": "SKILL.md",
            "line_start": 102,
            "line_end": 110
          },
          {
            "file": "SKILL.md",
            "line_start": 110,
            "line_end": 110
          },
          {
            "file": "SKILL.md",
            "line_start": 110,
            "line_end": 111
          },
          {
            "file": "SKILL.md",
            "line_start": 111,
            "line_end": 112
          },
          {
            "file": "SKILL.md",
            "line_start": 112,
            "line_end": 112
          },
          {
            "file": "SKILL.md",
            "line_start": 112,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 114
          },
          {
            "file": "SKILL.md",
            "line_start": 114,
            "line_end": 121
          },
          {
            "file": "SKILL.md",
            "line_start": 121,
            "line_end": 122
          },
          {
            "file": "SKILL.md",
            "line_start": 122,
            "line_end": 128
          },
          {
            "file": "SKILL.md",
            "line_start": 128,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 136
          },
          {
            "file": "SKILL.md",
            "line_start": 136,
            "line_end": 149
          },
          {
            "file": "SKILL.md",
            "line_start": 149,
            "line_end": 153
          },
          {
            "file": "SKILL.md",
            "line_start": 153,
            "line_end": 165
          },
          {
            "file": "SKILL.md",
            "line_start": 165,
            "line_end": 173
          },
          {
            "file": "SKILL.md",
            "line_start": 173,
            "line_end": 182
          },
          {
            "file": "SKILL.md",
            "line_start": 182,
            "line_end": 184
          },
          {
            "file": "SKILL.md",
            "line_start": 184,
            "line_end": 184
          },
          {
            "file": "SKILL.md",
            "line_start": 184,
            "line_end": 190
          },
          {
            "file": "SKILL.md",
            "line_start": 190,
            "line_end": 193
          },
          {
            "file": "SKILL.md",
            "line_start": 193,
            "line_end": 194
          },
          {
            "file": "SKILL.md",
            "line_start": 194,
            "line_end": 202
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Autonomous Website Build Loop",
    "value_statement": "Automates iterative website development using Stitch MCP tools and a baton-passing loop pattern. Agents generate pages autonomously, maintain project context, and continue development through continuous improvement cycles.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Stitch",
      "MCP",
      "website builder",
      "auto development",
      "baton passing",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Read task specifications from baton files (next-prompt.md)",
      "Generate pages using Stitch MCP server tools",
      "Integrate generated pages into site structure",
      "Update project documentation (SITE.md)",
      "Prepare next iteration tasks to continue the loop",
      "Support visual verification with Chrome DevTools MCP"
    ],
    "limitations": [
      "Requires access to Stitch MCP server",
      "Depends on design.md file for visual consistency",
      "Requires SITE.md file for project context",
      "Loop must be triggered externally"
    ],
    "use_cases": [
      {
        "title": "Continuous Deployment Pipeline",
        "description": "GitHub Actions triggers on baton file changes, running automated iterations to build and deploy website sections.",
        "target_user": "DevOps engineers"
      },
      {
        "title": "Human-Assisted Agent Development",
        "description": "Developer reviews each iteration before the loop continues, allowing for controlled website development with human oversight.",
        "target_user": "Frontend developers"
      },
      {
        "title": "Multi-Agent Orchestration",
        "description": "One agent dispatches to specialized agents (design, development, testing) in a coordinated baton-passing workflow.",
        "target_user": "AI engineers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Build Loop",
        "scenario": "Start a website build iteration by reading the baton and generating the page",
        "prompt": "Read the next-prompt.md file to understand your task. Generate the requested page using Stitch MCP tools, integrate it into the site structure, update SITE.md, and prepare the next iteration in next-prompt.md."
      },
      {
        "title": "With Design System",
        "scenario": "Build a page while maintaining visual consistency using the design system",
        "prompt": "Read next-prompt.md and DESIGN.md. Generate the page following the design system specifications. Copy the DESIGN_SYSTEM block from DESIGN.md into your prompt. After generating and integrating, update SITE.md and prepare the next iteration."
      },
      {
        "title": "With Visual Verification",
        "scenario": "Verify generated pages using Chrome DevTools before completing the loop",
        "prompt": "Read next-prompt.md and DESIGN.md. Generate the page using Stitch MCP tools. Start a local server with npx serve site/public. Use Chrome DevTools to navigate to and screenshot the page. Compare against Stitch output for fidelity. Once verified, integrate the page, update SITE.md, and prepare the next iteration."
      },
      {
        "title": "Loop Maintenance",
        "scenario": "Continue the build loop when all planned pages are complete",
        "prompt": "Read SITE.md to check if the roadmap is complete. If backlog items remain, create a baton with the next task. If backlog is empty, remove ideas from Section 6 or design new pages that fit the project vision. Always update next-prompt.md to keep the loop alive."
      }
    ],
    "output_examples": [
      {
        "input": "next-prompt.md contains:\n---\npage: contact\n---\nA warm contact page for the furniture site.\n\n**DESIGN SYSTEM (REQUIRED):**\n[Design system block from DESIGN.md]",
        "output": "1. Reads the baton and extracts 'contact' as the page name\n2. Generates the contact page using Stitch MCP\n3. Moves generated HTML from queue/ to site/public/contact.html\n4. Updates SITE.md Section 4 to mark contact.html as complete\n5. Writes next baton with a new page task (e.g., 'achievements')"
      },
      {
        "input": "SITE.md shows completed roadmap items",
        "output": "After completing all high and medium priority tasks, the agent:\n1. Checks Section 5 (Roadmap) - all items marked complete\n2. Reviews Section 6 (Creative Freedom) for ideas\n3. Selects one idea (e.g., 'materials.html')\n4. Creates baton with new task and removes idea from Section 6"
      }
    ],
    "best_practices": [
      "Always update next-prompt.md before completing each iteration to keep the loop alive",
      "Copy the full DESIGN_SYSTEM block from DESIGN.md into every baton prompt for consistency",
      "Verify page filenames match the 'page' field in YAML frontmatter"
    ],
    "anti_patterns": [
      "Forgetting to update next-prompt.md - this breaks the autonomous loop",
      "Recreating pages that already exist in SITE.md Section 4",
      "Not including the design system block in baton prompts - leads to inconsistent styles"
    ],
    "faq": [
      {
        "question": "What is the baton-passing loop pattern?",
        "answer": "A loop where one iteration writes a task to a baton file (next-prompt.md) and another iteration reads it. This enables continuous, autonomous development without manual intervention between cycles."
      },
      {
        "question": "Do I need to trigger the loop manually?",
        "answer": "Not necessarily. The loop can be triggered by CI/CD (GitHub Actions on file changes), a human-in-the-loop (developer reviews each iteration), or agent chains (one agent dispatches to another)."
      },
      {
        "question": "What is the Stitch MCP server?",
        "answer": "Stitch is a Model Context Protocol (MCP) server that provides tools for generating website screens from text prompts. This skill uses Stitch's generate_screen_from_text tool to build pages autonomously."
      },
      {
        "question": "Why do I need DESIGN.md?",
        "answer": "DESIGN.md contains the visual design system specifications (colors, typography, layout) that ensure all generated pages maintain consistent styling. Copying the DESIGN_SYSTEM block into baton prompts guarantees visual consistency."
      },
      {
        "question": "What happens if next-prompt.md is missing?",
        "answer": "The agent should check SITE.md Section 5 (Roadmap) for the next task. If the roadmap is complete and empty, pick a task from Section 6 (Creative Freedom) or invent a new page that fits the project vision."
      },
      {
        "question": "Can I interrupt or stop the loop?",
        "answer": "Yes. Simply remove or delete the baton file (next-prompt.md) to signal the loop should stop. The agent will detect this and complete its current task without creating a new baton."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "next-prompt.md",
          "type": "file",
          "path": "examples/next-prompt.md",
          "lines": 26
        },
        {
          "name": "SITE.md",
          "type": "file",
          "path": "examples/SITE.md",
          "lines": 74
        }
      ]
    },
    {
      "name": "resources",
      "type": "dir",
      "path": "resources",
      "children": [
        {
          "name": "baton-schema.md",
          "type": "file",
          "path": "resources/baton-schema.md",
          "lines": 62
        },
        {
          "name": "site-template.md",
          "type": "file",
          "path": "resources/site-template.md",
          "lines": 105
        }
      ]
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md",
      "lines": 55
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 204
    }
  ]
}
