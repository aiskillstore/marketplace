{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T19:59:59.690Z",
    "slug": "bossjones-pytest-recording",
    "source_url": "https://github.com/bossjones/logging-lab/tree/main/.claude/skills/pytest-recording",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c1127b43532bb615c7f34b25a182446394a3eb18c87975f55961482c6da4199e",
    "tree_hash": "2a70bf4b2ea6eb997ae69fe20f78e5f25f9e2bca1065be65d0dfe6adff6101a6"
  },
  "skill": {
    "name": "pytest-recording",
    "description": "Work with pytest-recording (VCR.py) for recording and replaying HTTP interactions in tests. Use when writing VCR tests, managing cassettes, configuring VCR options, filtering sensitive data, or debugging recorded HTTP responses.",
    "summary": "Work with pytest-recording (VCR.py) for recording and replaying HTTP interactions in tests. Use when...",
    "icon": "ðŸŽ¬",
    "version": "1.0.0",
    "author": "bossjones",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "testing",
      "vcr",
      "http",
      "mocking",
      "pytest"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill for pytest-recording (VCR.py), a widely-used Python testing library. All 67 static findings are false positives. The 'external commands' are example pytest/shell commands in documentation code blocks, 'hardcoded IP addresses' are localhost examples for configuring VCR ignore_hosts, and 'API keys' are demonstrating how to filter sensitive authentication headers from recordings. The skill teaches security best practices for protecting credentials, not exploiting them.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 194
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 90
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 84,
            "line_end": 84
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 417,
    "audit_model": "claude",
    "audited_at": "2026-01-16T19:59:59.690Z"
  },
  "content": {
    "user_title": "Record and replay HTTP interactions in Python tests",
    "value_statement": "Testing external APIs is unreliable and slow due to network dependencies and rate limits. pytest-recording captures HTTP interactions as reusable YAML cassettes for fast, deterministic tests. Use this skill to mock API calls, filter sensitive credentials, and debug VCR configuration issues.",
    "seo_keywords": [
      "pytest-recording",
      "VCR.py",
      "HTTP mocking",
      "Python testing",
      "API testing",
      "test cassettes",
      "Claude",
      "Claude Code",
      "pytest",
      "HTTP recording"
    ],
    "actual_capabilities": [
      "Record HTTP interactions as YAML cassettes for deterministic test replay",
      "Configure VCR options for filtering sensitive authentication headers",
      "Manage different recording modes including once, rewrite, and new_episodes",
      "Debug cassette mismatches and request matching issues",
      "Filter API keys and tokens from recorded cassettes for secure CI/CD"
    ],
    "limitations": [
      "Only works with pytest testing framework",
      "Requires understanding of HTTP request matching for advanced use",
      "Cassettes may require periodic updates when external APIs change",
      "Cannot record WebSocket or non-HTTP protocols"
    ],
    "use_cases": [
      {
        "target_user": "Python developers",
        "title": "Mock external API calls",
        "description": "Replace live API calls with recorded responses for reliable, fast test execution without rate limits or network dependencies."
      },
      {
        "target_user": "Test engineers",
        "title": "Create deterministic tests",
        "description": "Ensure tests produce consistent results by replaying exact HTTP responses, eliminating flaky tests from API changes."
      },
      {
        "target_user": "DevOps teams",
        "title": "Secure CI/CD testing",
        "description": "Run tests in CI/CD pipelines without exposing API credentials by filtering sensitive data from recorded cassettes."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic VCR test setup",
        "scenario": "Adding VCR to existing API test",
        "prompt": "Convert this test to use pytest-recording: [paste test code]. Show me the decorator and needed imports."
      },
      {
        "title": "Filter sensitive headers",
        "scenario": "Securing API credentials in tests",
        "prompt": "Create a vcr_config fixture that filters authorization headers and API keys for OpenAI and Anthropic APIs."
      },
      {
        "title": "Debug cassette issues",
        "scenario": "Test fails with cassette not found",
        "prompt": "My test cannot find the cassette file. Walk me through debugging steps including file paths and recording modes."
      },
      {
        "title": "Advanced VCR configuration",
        "scenario": "Custom request matching and response processing",
        "prompt": "Show me how to configure VCR to match requests by method and path only, and sanitize response headers before recording."
      }
    ],
    "output_examples": [
      {
        "input": "Create a VCR test for an API that requires Bearer token authentication",
        "output": [
          "Add @pytest.mark.vcr() decorator to your test function",
          "Create vcr_config fixture to filter authorization header",
          "Run test with --vcr-record=once to create initial cassette",
          "Verify cassette does not contain your token by checking the YAML file",
          "Future runs will use recorded response without making live API calls"
        ]
      },
      {
        "input": "How do I update cassettes when the API changes?",
        "output": [
          "Option 1: Delete specific cassette files and re-run tests with --vcr-record=once",
          "Option 2: Use --vcr-record=rewrite to refresh all cassettes at once",
          "Option 3: Use --vcr-record=new_episodes to add new responses while keeping existing ones",
          "Review updated cassettes to ensure they contain expected response data"
        ]
      }
    ],
    "best_practices": [
      "Always filter authentication headers and API keys before recording cassettes",
      "Use descriptive test names as they become cassette file names automatically",
      "Review cassette files in pull requests to ensure no secrets are committed",
      "Delete and re-record cassettes periodically to catch API changes early"
    ],
    "anti_patterns": [
      "Recording cassettes with real API credentials without filtering sensitive data",
      "Committing large cassette files with unnecessary HTTP interactions",
      "Using --vcr-record=all in CI/CD which overwrites working cassettes",
      "Ignoring cassette merge conflicts instead of re-recording properly"
    ],
    "faq": [
      {
        "question": "Why is my test still making live API calls?",
        "answer": "Check if VCR is disabled with --disable-recording flag or if cassette exists for your test name."
      },
      {
        "question": "How do I update cassettes when APIs change?",
        "answer": "Delete specific cassette files and re-run tests with --vcr-record=once or use --vcr-record=rewrite for all."
      },
      {
        "question": "Can I use VCR with async tests?",
        "answer": "Yes, pytest-recording works with both sync and async test functions using standard pytest-asyncio."
      },
      {
        "question": "Where are cassette files stored?",
        "answer": "By default in tests/cassettes/ organized by test module name. You can customize paths in vcr_config."
      },
      {
        "question": "How do I filter custom authentication headers?",
        "answer": "Add header names to filter_headers list in your vcr_config fixture, like x-custom-api-key."
      },
      {
        "question": "What does request mismatch error mean?",
        "answer": "VCR cannot match the current request to any recorded interaction. Check match_on criteria in vcr_config."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 204
    }
  ]
}
