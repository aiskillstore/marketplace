{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T20:02:07.263Z",
    "slug": "bossjones-sqlalchemy-2-0",
    "source_url": "https://github.com/bossjones/logging-lab/tree/main/.claude/skills/sqlalchemy",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c8b436213c9152c2e7cb957325592863f433eeb168dc660e0013be6246f6b2e2",
    "tree_hash": "3ab706662904682f20cd7f3c45f51f552e718aab59a6de6d669a27b807a8bbdd"
  },
  "skill": {
    "name": "sqlalchemy-2-0",
    "description": "Modern async ORM with type-safe models and efficient queries",
    "summary": "Modern async ORM with type-safe models and efficient queries",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "bossjones",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sqlalchemy",
      "orm",
      "async",
      "database",
      "python"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill is documentation-only content containing SQLAlchemy 2.0 ORM examples. All 131 static findings are false positives. The scanner misinterpreted markdown code fences as shell commands, SQL ORDER BY .desc() (descending sort) as weak crypto, and standard database queries as reconnaissance. No executable code, network calls, or credential access exists.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "evaluation.json",
            "line_start": 24,
            "line_end": 30
          },
          {
            "file": "evaluation.json",
            "line_start": 30,
            "line_end": 36
          },
          {
            "file": "evaluation.json",
            "line_start": 36,
            "line_end": 42
          },
          {
            "file": "evaluation.json",
            "line_start": 42,
            "line_end": 48
          },
          {
            "file": "evaluation.json",
            "line_start": 48,
            "line_end": 54
          },
          {
            "file": "evaluation.json",
            "line_start": 54,
            "line_end": 60
          },
          {
            "file": "evaluation.json",
            "line_start": 60,
            "line_end": 66
          },
          {
            "file": "evaluation.json",
            "line_start": 66,
            "line_end": 72
          },
          {
            "file": "evaluation.json",
            "line_start": 72,
            "line_end": 78
          },
          {
            "file": "evaluation.json",
            "line_start": 78,
            "line_end": 84
          },
          {
            "file": "evaluation.json",
            "line_start": 84,
            "line_end": 90
          },
          {
            "file": "evaluation.json",
            "line_start": 90,
            "line_end": 96
          },
          {
            "file": "evaluation.json",
            "line_start": 96,
            "line_end": 102
          },
          {
            "file": "evaluation.json",
            "line_start": 102,
            "line_end": 108
          },
          {
            "file": "evaluation.json",
            "line_start": 108,
            "line_end": 114
          },
          {
            "file": "evaluation.json",
            "line_start": 114,
            "line_end": 120
          },
          {
            "file": "evaluation.json",
            "line_start": 120,
            "line_end": 126
          },
          {
            "file": "evaluation.json",
            "line_start": 126,
            "line_end": 132
          },
          {
            "file": "evaluation.json",
            "line_start": 132,
            "line_end": 138
          },
          {
            "file": "evaluation.json",
            "line_start": 138,
            "line_end": 144
          },
          {
            "file": "evaluation.json",
            "line_start": 144,
            "line_end": 150
          },
          {
            "file": "evaluation.json",
            "line_start": 150,
            "line_end": 156
          },
          {
            "file": "evaluation.json",
            "line_start": 156,
            "line_end": 162
          },
          {
            "file": "evaluation.json",
            "line_start": 162,
            "line_end": 168
          },
          {
            "file": "evaluation.json",
            "line_start": 168,
            "line_end": 174
          },
          {
            "file": "evaluation.json",
            "line_start": 174,
            "line_end": 180
          },
          {
            "file": "evaluation.json",
            "line_start": 180,
            "line_end": 186
          },
          {
            "file": "evaluation.json",
            "line_start": 186,
            "line_end": 192
          },
          {
            "file": "evaluation.json",
            "line_start": 192,
            "line_end": 198
          },
          {
            "file": "evaluation.json",
            "line_start": 198,
            "line_end": 204
          },
          {
            "file": "evaluation.json",
            "line_start": 204,
            "line_end": 210
          },
          {
            "file": "evaluation.json",
            "line_start": 210,
            "line_end": 216
          },
          {
            "file": "evaluation.json",
            "line_start": 216,
            "line_end": 222
          },
          {
            "file": "evaluation.json",
            "line_start": 222,
            "line_end": 228
          },
          {
            "file": "evaluation.json",
            "line_start": 228,
            "line_end": 246
          },
          {
            "file": "evaluation.json",
            "line_start": 246,
            "line_end": 252
          },
          {
            "file": "evaluation.json",
            "line_start": 252,
            "line_end": 258
          },
          {
            "file": "evaluation.json",
            "line_start": 258,
            "line_end": 270
          },
          {
            "file": "evaluation.json",
            "line_start": 270,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 13,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 39
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 89
          },
          {
            "file": "SKILL.md",
            "line_start": 89,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 103
          },
          {
            "file": "SKILL.md",
            "line_start": 103,
            "line_end": 109
          },
          {
            "file": "SKILL.md",
            "line_start": 109,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 129
          },
          {
            "file": "SKILL.md",
            "line_start": 129,
            "line_end": 155
          },
          {
            "file": "SKILL.md",
            "line_start": 155,
            "line_end": 161
          },
          {
            "file": "SKILL.md",
            "line_start": 161,
            "line_end": 193
          },
          {
            "file": "SKILL.md",
            "line_start": 193,
            "line_end": 197
          },
          {
            "file": "SKILL.md",
            "line_start": 197,
            "line_end": 216
          },
          {
            "file": "SKILL.md",
            "line_start": 216,
            "line_end": 220
          },
          {
            "file": "SKILL.md",
            "line_start": 220,
            "line_end": 227
          },
          {
            "file": "SKILL.md",
            "line_start": 227,
            "line_end": 231
          },
          {
            "file": "SKILL.md",
            "line_start": 231,
            "line_end": 244
          },
          {
            "file": "SKILL.md",
            "line_start": 244,
            "line_end": 250
          },
          {
            "file": "SKILL.md",
            "line_start": 250,
            "line_end": 257
          },
          {
            "file": "SKILL.md",
            "line_start": 257,
            "line_end": 261
          },
          {
            "file": "SKILL.md",
            "line_start": 261,
            "line_end": 280
          },
          {
            "file": "SKILL.md",
            "line_start": 280,
            "line_end": 284
          },
          {
            "file": "SKILL.md",
            "line_start": 284,
            "line_end": 299
          },
          {
            "file": "SKILL.md",
            "line_start": 299,
            "line_end": 305
          },
          {
            "file": "SKILL.md",
            "line_start": 305,
            "line_end": 323
          },
          {
            "file": "SKILL.md",
            "line_start": 323,
            "line_end": 327
          },
          {
            "file": "SKILL.md",
            "line_start": 327,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 343
          },
          {
            "file": "SKILL.md",
            "line_start": 343,
            "line_end": 352
          },
          {
            "file": "SKILL.md",
            "line_start": 352,
            "line_end": 356
          },
          {
            "file": "SKILL.md",
            "line_start": 356,
            "line_end": 370
          },
          {
            "file": "SKILL.md",
            "line_start": 370,
            "line_end": 375
          },
          {
            "file": "SKILL.md",
            "line_start": 375,
            "line_end": 378
          },
          {
            "file": "SKILL.md",
            "line_start": 378,
            "line_end": 380
          },
          {
            "file": "SKILL.md",
            "line_start": 380,
            "line_end": 388
          },
          {
            "file": "SKILL.md",
            "line_start": 388,
            "line_end": 392
          },
          {
            "file": "SKILL.md",
            "line_start": 392,
            "line_end": 399
          },
          {
            "file": "SKILL.md",
            "line_start": 399,
            "line_end": 403
          },
          {
            "file": "SKILL.md",
            "line_start": 403,
            "line_end": 404
          },
          {
            "file": "SKILL.md",
            "line_start": 404,
            "line_end": 405
          },
          {
            "file": "SKILL.md",
            "line_start": 405,
            "line_end": 411
          },
          {
            "file": "SKILL.md",
            "line_start": 411,
            "line_end": 417
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 1292,
    "audit_model": "claude",
    "audited_at": "2026-01-16T20:02:07.263Z"
  },
  "content": {
    "user_title": "Build async database operations with SQLAlchemy 2.0",
    "value_statement": "This skill provides ready-to-use SQLAlchemy 2.0+ patterns for async database operations. It includes type-safe models, CRUD operations, relationships, and performance optimizations for building robust data services.",
    "seo_keywords": [
      "sqlalchemy",
      "sqlalchemy 2.0",
      "async orm",
      "python database",
      "type-safe models",
      "async python",
      "claude code",
      "claude",
      "codex",
      "fastapi database"
    ],
    "actual_capabilities": [
      "Create async engine and session configuration for PostgreSQL, SQLite, and MySQL",
      "Define type-safe SQLAlchemy models with annotated column types",
      "Implement CRUD operations with async/await patterns",
      "Configure one-to-many and many-to-many relationships with cascade options",
      "Use selectinload and joinedload for efficient relationship loading",
      "Integrate with FastAPI using dependency injection for session management"
    ],
    "limitations": [
      "Does not include database migration setup (see Alembic skill for migrations)",
      "Does not provide connection pooling configuration examples",
      "Does not cover raw SQL migration strategies or schema management",
      "Does not include transaction retry logic or error handling patterns"
    ],
    "use_cases": [
      {
        "target_user": "Backend Python developers",
        "title": "Build async API backends",
        "description": "Create FastAPI endpoints with async SQLAlchemy sessions for high-concurrency web services."
      },
      {
        "target_user": "Data engineers",
        "title": "Design type-safe data models",
        "description": "Define validated ORM models with annotated columns for consistent database schemas."
      },
      {
        "target_user": "Full-stack developers",
        "title": "Optimize database queries",
        "description": "Use eager loading and streaming patterns to reduce N+1 queries and memory usage."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic model setup",
        "scenario": "Setting up async SQLAlchemy",
        "prompt": "Show me how to create an async SQLAlchemy 2.0 engine and session factory for PostgreSQL with a User model that has id, name, and email fields."
      },
      {
        "title": "Relationship queries",
        "scenario": "Fetching related data",
        "prompt": "Write a function that fetches a User with all their Posts loaded, using selectinload to avoid N+1 queries."
      },
      {
        "title": "FastAPI integration",
        "scenario": "Adding database to API",
        "prompt": "Create a FastAPI dependency that provides an async SQLAlchemy session, properly handling cleanup with try/finally."
      },
      {
        "title": "Custom session routing",
        "scenario": "Read-write splitting",
        "prompt": "Implement a custom AsyncRoutingSession that routes read-only models to a read replica database."
      }
    ],
    "output_examples": [
      {
        "input": "Create a User model with posts relationship and a function to get all users",
        "output": [
          "User model with posts relationship defined using List[Post] with cascade delete",
          "get_all_users() async function using session.execute(select(User))",
          "Result parsing with scalars().all() for efficient object loading"
        ]
      },
      {
        "input": "Set up async SQLAlchemy for PostgreSQL with type-safe annotated columns",
        "output": [
          "Async engine created with postgresql+asyncpg://user:pass@localhost/db",
          "async_sessionmaker configured with expire_on_commit=False",
          "User model using Annotated[int, mapped_column(primary_key=True)] pattern"
        ]
      }
    ],
    "best_practices": [
      "Use expire_on_commit=False to avoid unnecessary reloads after commits",
      "Prefer selectinload over lazy loading for collections to prevent N+1 queries",
      "Always close sessions properly using async with context managers"
    ],
    "anti_patterns": [
      "Avoid lazy loading in async contexts as it can cause connection leaks",
      "Do not use sync sessions with async engines as this blocks the event loop",
      "Avoid committing transactions inside nested context managers without proper scoping"
    ],
    "faq": [
      {
        "question": "What databases support async SQLAlchemy?",
        "answer": "PostgreSQL with asyncpg, SQLite with aiosqlite, and MySQL with aiomysql are fully supported async drivers."
      },
      {
        "question": "How do I prevent N+1 queries with relationships?",
        "answer": "Use selectinload() or joinedload() in your query options to eagerly load related data in a single query."
      },
      {
        "question": "What is the difference between classic and annotated models?",
        "answer": "Annotated models use Python type hints with mapped_column for better IDE support and type checking."
      },
      {
        "question": "How do I handle sessions in FastAPI dependencies?",
        "answer": "Create an async generator function that yields the session and closes it in a finally block."
      },
      {
        "question": "Can I use raw SQL with async SQLAlchemy?",
        "answer": "Yes, use sqlalchemy.text() to execute raw SQL with proper parameterized queries for security."
      },
      {
        "question": "How do I stream large result sets?",
        "answer": "Use session.stream(select(Model)) and iterate with async for to process records without loading all into memory."
      }
    ]
  },
  "file_structure": [
    {
      "name": "evaluation.json",
      "type": "file",
      "path": "evaluation.json",
      "lines": 470
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 418
    }
  ]
}
