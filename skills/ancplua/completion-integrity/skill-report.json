{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T15:29:50.988Z",
    "slug": "ancplua-completion-integrity",
    "source_url": "https://github.com/ANcpLua/ancplua-claude-plugins/tree/main/plugins/completion-integrity/skills/completion-integrity",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c81d742e2f736a1c9ed544e8e2fe1656ab09f6dc3087285d7f75077a461fc065",
    "tree_hash": "a9cd6549303dc09b7e8562b3a5fa5e3036b50bb6fab122110185fb1e2effa306"
  },
  "skill": {
    "name": "completion-integrity",
    "description": "Prevents shortcuts and cheating when completing tasks. Blocks commits with warning suppressions, commented tests, or deleted assertions.",
    "summary": "Git pre-commit hook that blocks commits with integrity violations like warning suppressions and test tampering.",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "ANcpLua",
    "license": "MIT",
    "tags": [
      "git",
      "pre-commit",
      "code-quality",
      "integrity",
      "testing"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 14 static findings are false positives. Network finding is standard GitHub URL metadata. Weak cryptographic algorithm flags are triggered by benign words like 'integrity'. Shell command detections are legitimate bash invocations for git hook scripts, not backtick execution. This is a benign development quality tool.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 14
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 31
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 272,
    "audit_model": "claude",
    "audited_at": "2026-01-21T15:29:50.988Z"
  },
  "content": {
    "user_title": "Enforce code completion integrity",
    "value_statement": "Developers often take shortcuts when completing tasks. This skill provides a git pre-commit hook that blocks commits with integrity violations like warning suppressions, commented tests, and deleted assertions.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "git",
      "pre-commit",
      "code quality",
      "integrity",
      "testing",
      "code review",
      "workflow"
    ],
    "actual_capabilities": [
      "Installs a git pre-commit hook to block commits with integrity violations",
      "Detects warning suppressions like #pragma warning disable and eslint-disable",
      "Flags commented-out tests and test file deletions",
      "Identifies deleted test assertions and empty catch blocks",
      "Detects deferred work hidden in TODO comments",
      "Supports manual integrity check via CLI command"
    ],
    "limitations": [
      "Only works with git repositories that have the pre-commit hook installed",
      "Does not modify code automatically - flags issues for manual review",
      "False positives may occur for legitimate warning suppressions",
      "Requires CLAUDE_PLUGIN_ROOT environment variable to be set"
    ],
    "use_cases": [
      {
        "title": "Prevent testing shortcuts",
        "description": "Team leads can ensure developers do not delete or comment out tests to make code appear to work. The hook blocks commits with test integrity violations.",
        "target_user": "Team leads and code reviewers"
      },
      {
        "title": "Maintain code quality standards",
        "description": "Enforce that developers fix warnings rather than suppressing them. The hook catches eslint-disable and pragma warning disable patterns.",
        "target_user": "Engineering managers"
      },
      {
        "title": "Document deferred work properly",
        "description": "Force developers to create explicit tickets for deferred work rather than leaving undocumented TODOs. The hook limits fresh TODOs per commit.",
        "target_user": "Product managers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Install the integrity hook",
        "prompt": "Install the completion-integrity git pre-commit hook by running: bash \"${CLAUDE_PLUGIN_ROOT}/scripts/install-git-hook.sh\"",
        "scenario": "Initial setup of the completion integrity hook"
      },
      {
        "title": "Check for integrity violations",
        "prompt": "Run a manual integrity check on the current state of the repository using: bash \"${CLAUDE_PLUGIN_ROOT}/scripts/integrity-check.sh\"",
        "scenario": "Verifying code quality before committing"
      },
      {
        "title": "Review blocked commit",
        "prompt": "My commit was blocked by the integrity hook. The violation was: [describe violation]. Explain why this is flagged and how to fix it properly.",
        "scenario": "Understanding and resolving integrity violations"
      },
      {
        "title": "Understand false positive handling",
        "prompt": "I need to commit code with a legitimate warning suppression. How do I handle this with the completion-integrity hook while providing proper documentation?",
        "scenario": "Handling legitimate edge cases"
      }
    ],
    "output_examples": [
      {
        "input": "A developer attempts to commit code with eslint-disable-next-line comments suppressing lint warnings",
        "output": "Commit BLOCKED by completion-integrity hook. Reason: Warning suppression detected (eslint-disable). The hook requires developers to fix the underlying issue or document why suppression is necessary in the commit message."
      },
      {
        "input": "A developer deletes 3 assertions from a test file to make tests pass",
        "output": "Commit BLOCKED by completion-integrity hook. Reason: Deleted assertions detected (3 total). Removing test checks does not fix bugs. The developer must restore the assertions or fix the underlying code issues."
      },
      {
        "input": "A developer commits code with 5 new TODO comments",
        "output": "Commit BLOCKED by completion-integrity hook. Reason: Fresh TODOs detected (5, limit is 2). The developer should defer work by creating explicit tickets rather than leaving undocumented TODOs."
      }
    ],
    "best_practices": [
      "Fix the underlying issue rather than suppressing warnings or deleting tests",
      "Document legitimate suppressions in commit messages with clear justification",
      "Create tickets for deferred work instead of leaving undocumented TODOs",
      "Run manual integrity checks before committing to catch issues early"
    ],
    "anti_patterns": [
      "Using eslint-disable or pragma warning disable to hide lint errors",
      "Commenting out or deleting tests to make them pass",
      "Removing test assertions instead of fixing failing code",
      "Leaving TODO comments without creating tracking tickets"
    ],
    "faq": [
      {
        "question": "What happens when the hook blocks my commit?",
        "answer": "The hook displays the specific integrity violation detected. You must address the issue or provide justification in your commit message before the commit will be accepted."
      },
      {
        "question": "Can I bypass the hook for legitimate cases?",
        "answer": "You can still commit by explaining why the suppression or pattern is necessary in your commit message. The explanation should convince a reviewer that the exception is justified."
      },
      {
        "question": "What patterns does the hook detect?",
        "answer": "The hook detects warning suppressions, commented-out tests, deleted assertions, test file deletion, empty catch blocks, and excessive fresh TODOs in a single commit."
      },
      {
        "question": "Does this work with all git workflows?",
        "answer": "The hook integrates with standard git pre-commit workflows. It requires the CLAUDE_PLUGIN_ROOT environment variable to locate the installation scripts."
      },
      {
        "question": "Can I customize the thresholds?",
        "answer": "The current version enforces fixed thresholds (2 fresh TODOs, 2+ deleted assertions). Customization would require modifying the underlying integrity-check.sh script."
      },
      {
        "question": "Is this suitable for all team sizes?",
        "answer": "The hook is valuable for teams of any size that want to enforce code quality standards. Smaller teams may want to adjust thresholds to match their workflow."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 50
    }
  ]
}
