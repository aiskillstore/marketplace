{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-23T07:20:32.952Z",
    "slug": "expo-expo-api-routes",
    "source_url": "https://github.com/expo/skills/tree/main/plugins/expo-app-design/skills/expo-api-routes/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "4b0bf5c1861534b07e4718cd4096cc4f6f5d9a3de7f2c89c09d3df6a2ddb0e0f",
    "tree_hash": "8b4ce4d0ab40f0633dfc202c2b91bcf4c6d318393634a37960c37b1c2f9d7893"
  },
  "skill": {
    "name": "expo-api-routes",
    "description": "Guidelines for creating API routes in Expo Router with EAS Hosting",
    "summary": "Build server-side API endpoints in Expo apps using Expo Router file-based routing and EAS Hosting",
    "icon": "ðŸ”Œ",
    "version": "1.0.0",
    "author": "expo",
    "license": "MIT",
    "tags": [
      "expo",
      "api-routes",
      "eas-hosting",
      "serverless",
      "backend"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "filesystem",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Educational documentation for Expo Router API routes. All static findings are false positives. Detected patterns (code blocks, API examples, environment variables) represent safe documentation demonstrating best practices for server-side API development.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "Documentation Pattern: Code Block Syntax",
        "description": "Static scanner flagged backticks in markdown code blocks as shell command execution. All 49 instances are documentation examples (file paths, code snippets) in SKILL.md, not actual code execution.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 33,
            "line_end": 33
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 358
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Backticks in markdown documentation represent inline code formatting and code blocks, not Ruby/shell execution. No actual command execution occurs in this documentation file."
      },
      {
        "title": "Documentation Pattern: API Endpoint Examples",
        "description": "Static scanner flagged fetch calls as network requests. These are legitimate documentation examples showing proper server-side API usage patterns (OpenAI, weather API proxies, local testing).",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 139,
            "line_end": 139
          },
          {
            "file": "SKILL.md",
            "line_start": 204,
            "line_end": 204
          },
          {
            "file": "SKILL.md",
            "line_start": 209,
            "line_end": 210
          },
          {
            "file": "SKILL.md",
            "line_start": 265,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 352,
            "line_end": 353
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Fetch calls in documentation examples demonstrate proper API integration patterns. All are documented as examples with no actual network requests being made."
      },
      {
        "title": "Documentation Pattern: Import Path References",
        "description": "Static scanner flagged relative paths as path traversal. These are standard TypeScript import statements in code examples for authentication utilities.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 336,
            "line_end": 336
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Relative import path ../../utils/auth is standard TypeScript syntax for importing utility modules, not malicious path traversal."
      },
      {
        "title": "Documentation Pattern: Environment Variable Access",
        "description": "Static scanner flagged process.env references as credential access. These are legitimate documentation examples teaching secure secret handling in server-side code.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 143
          },
          {
            "file": "SKILL.md",
            "line_start": 290,
            "line_end": 291
          },
          {
            "file": "SKILL.md",
            "line_start": 353,
            "line_end": 353
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "process.env examples demonstrate secure credential handling - exactly what this skill teaches. Secrets are accessed server-side, never exposed to clients."
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 369,
    "audit_model": "claude",
    "audited_at": "2026-01-23T07:20:32.952Z",
    "risk_factors": [
      "external_commands",
      "network",
      "filesystem",
      "env_access"
    ],
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 33,
            "line_end": 358
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 139,
            "line_end": 353
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 336,
            "line_end": 336
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 353
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Create API Routes in Expo Router",
    "value_statement": "Building server-side endpoints in Expo apps requires understanding file-based routing, secure credential handling, and deployment to cloud infrastructure. This skill provides guidelines for creating, testing, and deploying API routes using Expo Router and EAS Hosting.",
    "seo_keywords": [
      "Expo API routes",
      "Expo Router server",
      "EAS Hosting",
      "Cloudflare Workers Expo",
      "Expo backend API",
      "Expo serverless functions",
      "React Native API backend",
      "Expo API development",
      "Claude",
      "Codex",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Create API endpoints using Expo Router file-based routing with +api.ts suffix",
      "Implement HTTP methods (GET, POST, PUT, DELETE) in server-side handlers",
      "Handle query parameters, headers, and JSON request bodies",
      "Access environment variables securely for API keys and database credentials",
      "Configure CORS headers for cross-origin requests from web clients",
      "Deploy API routes to EAS Hosting on Cloudflare Workers"
    ],
    "limitations": [
      "No Node.js filesystem access on EAS Hosting (runs on Cloudflare Workers)",
      "30-second timeout limit for CPU-intensive operations",
      "No native Node.js modules available (must use Web APIs or polyfills)",
      "Cannot use WebSockets without Durable Objects configuration"
    ],
    "use_cases": [
      {
        "title": "Mobile App Backend API",
        "description": "Build server-side endpoints that handle database operations, authentication, and third-party API integrations for React Native mobile apps without exposing secrets to clients.",
        "target_user": "Mobile developers building full-stack Expo applications"
      },
      {
        "title": "API Proxy for External Services",
        "description": "Create server-side routes that proxy requests to external APIs (OpenAI, Stripe, weather services) while keeping API keys secure on the server.",
        "target_user": "Developers integrating paid third-party services"
      },
      {
        "title": "Webhook Handlers",
        "description": "Receive and process callbacks from services like Stripe payments, GitHub events, or other webhooks in a server-side Expo endpoint.",
        "target_user": "Developers implementing payment or event-driven workflows"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic API Route",
        "prompt": "Create a new API route at /api/hello that returns a JSON response with a greeting message.",
        "scenario": "Creating a simple endpoint"
      },
      {
        "title": "API Route with Authentication",
        "prompt": "Create an API route at /api/users that accepts a POST request with user data, validates the input, and returns the created user with a 201 status code.",
        "scenario": "Building a CRUD endpoint with validation"
      },
      {
        "title": "API Route with External API",
        "prompt": "Create an API route that calls the OpenAI API to generate a response. Use an environment variable for the API key and handle errors gracefully.",
        "scenario": "Integrating with external AI services"
      },
      {
        "title": "Protected API Route",
        "prompt": "Create a protected API route that requires a Bearer token in the Authorization header. Return 401 if missing or invalid.",
        "scenario": "Implementing authentication middleware"
      }
    ],
    "output_examples": [
      {
        "input": "Create an API route for /api/items that supports GET and POST methods",
        "output": [
          "// app/api/items+api.ts",
          "export function GET() {",
          "  return Response.json({ items: [] });",
          "}",
          "",
          "export async function POST(request: Request) {",
          "  const body = await request.json();",
          "  return Response.json({ created: body }, { status: 201 });",
          "}"
        ]
      },
      {
        "input": "How do I configure CORS for my API routes?",
        "output": "Add CORS headers to your responses. Create a headers object with Access-Control-Allow-Origin, Methods, and Headers. Export an OPTIONS handler for preflight requests."
      },
      {
        "input": "Deploy my API routes to EAS Hosting",
        "output": "Run 'eas deploy' to build and deploy your API routes. Use 'eas env:create' to set production environment variables. Configure custom domains in eas.json or the Expo dashboard."
      }
    ],
    "best_practices": [
      "Never expose API keys or secrets in client code - always use server-side environment variables",
      "Validate and sanitize all user input before processing or storing data",
      "Use appropriate HTTP status codes (200, 201, 400, 401, 404, 500) for different error scenarios"
    ],
    "anti_patterns": [
      "Storing API keys or secrets in client-side code or environment files that ship to users",
      "Skipping input validation and trusting user-provided data without sanitization",
      "Returning detailed error messages that expose internal implementation details to clients"
    ],
    "faq": [
      {
        "question": "What is the difference between API routes and regular Expo pages?",
        "answer": "API routes export HTTP handler functions (GET, POST, etc.) and return raw Response objects. Regular pages export React components that render UI. API routes run server-side while pages render client-side."
      },
      {
        "question": "Can I use a database with API routes on EAS Hosting?",
        "answer": "Yes. Since filesystem is unavailable on Cloudflare Workers, use cloud databases like Cloudflare D1, Turso, PlanetScale, Supabase, or Neon. These provide HTTP APIs that work in the serverless environment."
      },
      {
        "question": "How do I test API routes locally?",
        "answer": "Run 'npx expo serve' to start the development server. API routes are available at http://localhost:8081/api/your-route. Use curl or Postman to test endpoints during development."
      },
      {
        "question": "What environment variables should I use for production?",
        "answer": "Use eas env:create --name VAR_NAME --value value --environment production or configure variables in the Expo dashboard. Never commit .env files to version control."
      },
      {
        "question": "How long can API route handlers run on EAS Hosting?",
        "answer": "EAS Hosting on Cloudflare Workers has a 30-second timeout for CPU-intensive tasks. Design your endpoints to complete quickly or use async processing for longer operations."
      },
      {
        "question": "Can API routes access the filesystem?",
        "answer": "No. API routes run on Cloudflare Workers, which do not have Node.js filesystem access. Use cloud databases or object storage (S3, Cloudflare R2) for file persistence."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 369
    }
  ]
}
