{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T06:22:25.881Z",
    "slug": "hylarucoder-ast-grep-rule-crafter",
    "source_url": "https://github.com/hylarucoder/skills-for-vibe-coder/tree/main/skills/ast-grep-rule-crafter",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c08fce458205fb16484af53e3de8565912a86c51fa2c191d0f155cd4412eca8e",
    "tree_hash": "b092c08ad86e144d1690352be020b0728505485560f3d6132967fdd18d1e4262"
  },
  "skill": {
    "name": "ast-grep-rule-crafter",
    "description": "Write AST-based code search and rewrite rules using ast-grep YAML. Create linting rules, code modernizations, and API migrations with auto-fix. Use when the user mentions ast-grep, tree-sitter patterns, code search rules, lint rules with YAML, AST matching, or code refactoring patterns.",
    "summary": "Write AST-based code search and rewrite rules using ast-grep YAML. Create linting rules, code modern...",
    "icon": "üîç",
    "version": "1.0.0",
    "author": "hylarucoder",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "ast-grep",
      "code-analysis",
      "refactoring",
      "linting",
      "tree-sitter"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation skill containing YAML code examples for ast-grep rules. The static analyzer flagged 170 issues but all are false positives. The 'external_commands' findings are YAML patterns in code blocks (e.g., `pattern: console.log($GREETING)`), not Ruby shell execution. 'Weak cryptographic algorithm' and 'C2 keywords' are YAML syntax misinterpreted by the pattern scanner. No executable code exists - only documentation and example rules.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 128
          },
          {
            "file": "references/common-patterns.md",
            "line_start": 15,
            "line_end": 168
          },
          {
            "file": "references/rule-syntax.md",
            "line_start": 16,
            "line_end": 297
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "references/common-patterns.md",
            "line_start": 135,
            "line_end": 135
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 4,
    "total_lines": 1555,
    "audit_model": "claude",
    "audited_at": "2026-01-17T06:22:25.881Z"
  },
  "content": {
    "user_title": "Create AST-based code search rules with ast-grep",
    "value_statement": "Writing custom linting rules and code transformations is complex and error-prone. This skill provides ready-to-use ast-grep YAML patterns for creating precise AST-based code search and rewrite rules.",
    "seo_keywords": [
      "ast-grep",
      "tree-sitter",
      "code search",
      "lint rules",
      "AST matching",
      "code refactoring",
      "Claude",
      "Claude Code",
      "YAML rules",
      "code analysis"
    ],
    "actual_capabilities": [
      "Generate YAML rules for JavaScript and TypeScript code patterns",
      "Create auto-fix rules for code modernization and API migration",
      "Build custom linting rules for team coding conventions",
      "Write AST-based search patterns for multi-language code analysis",
      "Apply relational rules like has, inside, follows, and precedes"
    ],
    "limitations": [
      "Requires ast-grep CLI installation to execute generated rules",
      "Limited to languages supported by tree-sitter parsers",
      "Complex patterns may need manual testing and refinement"
    ],
    "use_cases": [
      {
        "target_user": "Senior developers",
        "title": "Enforce team coding standards",
        "description": "Create custom lint rules to detect and fix code style violations specific to your team's conventions."
      },
      {
        "target_user": "DevOps engineers",
        "title": "Automate API migration",
        "description": "Build transformation rules to automatically update codebase when migrating between library versions."
      },
      {
        "target_user": "Code reviewers",
        "title": "Find anti-patterns automatically",
        "description": "Write patterns to detect common mistakes, security issues, or performance problems during review."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic pattern",
        "scenario": "Find console.log statements",
        "prompt": "Create an ast-grep rule to find all console.log calls in JavaScript with a warning message."
      },
      {
        "title": "Auto-fix rule",
        "scenario": "Replace deprecated methods",
        "prompt": "Write an ast-grep rule that finds deprecated array.length() calls and replaces them with array.length."
      },
      {
        "title": "Complex pattern",
        "scenario": "Find unused variables",
        "prompt": "Create a rule to detect variables declared but never used, handling var, let, and const."
      },
      {
        "title": "Multi-language",
        "scenario": "Consistent error handling",
        "prompt": "Generate ast-grep rules for Python and JavaScript that enforce consistent error handling patterns."
      }
    ],
    "output_examples": [
      {
        "input": "Create a rule to replace old fetchData() API calls with new api.get()",
        "output": [
          "Generated rule for API migration:",
          "Pattern matches: fetchData($$$ARGS)",
          "Auto-fix transforms to: api.get($$$ARGS)",
          "Message: 'Migrate to new API method'",
          "Works for all JavaScript and TypeScript files"
        ]
      },
      {
        "input": "Find React useEffect hooks missing dependency arrays",
        "output": [
          "Pattern identifies useEffect calls with empty dependency arrays",
          "Checks for variables used inside the effect not in the dependency array",
          "Severity level: warning",
          "Applies to TypeScript React components"
        ]
      }
    ],
    "best_practices": [
      "Test rules on sample code before applying to entire codebase",
      "Use specific patterns with constraints to reduce false positives",
      "Include descriptive messages explaining why each rule exists"
    ],
    "anti_patterns": [
      "Writing overly broad patterns that catch legitimate code",
      "Creating fix rules without testing the transformations first",
      "Ignoring language-specific syntax differences in multi-language rules"
    ],
    "faq": [
      {
        "question": "What is ast-grep?",
        "answer": "ast-grep is a tool that uses tree-sitter to parse code into AST for precise pattern matching and transformation."
      },
      {
        "question": "Do I need to install ast-grep?",
        "answer": "Yes, you need the ast-grep CLI installed to execute the generated rules on your codebase."
      },
      {
        "question": "Which languages are supported?",
        "answer": "ast-grep supports 30+ languages including JavaScript, Python, Go, Rust, Java, and more."
      },
      {
        "question": "Can rules automatically fix code?",
        "answer": "Yes, add 'fix' properties to rules for automatic code transformation and modernization."
      },
      {
        "question": "How do I test my rules?",
        "answer": "Use 'ast-grep scan -r rule.yml src/' to test rules before applying fixes to your code."
      },
      {
        "question": "What is the difference between pattern and kind?",
        "answer": "Pattern matches code syntax like console.log($ARG) while kind matches AST node types like function_declaration."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "common-patterns.md",
          "type": "file",
          "path": "references/common-patterns.md",
          "lines": 169
        },
        {
          "name": "rule-syntax.md",
          "type": "file",
          "path": "references/rule-syntax.md",
          "lines": 298
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 146
    }
  ]
}
