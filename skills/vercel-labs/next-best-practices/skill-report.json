{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-28T08:41:33.658Z",
    "slug": "vercel-labs-next-best-practices",
    "source_url": "https://github.com/vercel-labs/next-skills/tree/main/skills/next-best-practices/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1260c95e9d70f60846184beebf6d589d9822b807633aea381a78bf94cc07de58",
    "tree_hash": "7862a95b55beeef1d42db2d64dc99657de3c202e1f160fac1343f14574c4cdb6"
  },
  "skill": {
    "name": "next-best-practices",
    "description": "Comprehensive Next.js best practices guide covering file conventions, React Server Components, data patterns, async APIs, metadata, error handling, routing, image/font optimization, and deployment.",
    "summary": "Expert guidance for writing production-ready Next.js applications with proper patterns and conventions.",
    "icon": "â–²",
    "version": "1.0.0",
    "author": "vercel-labs",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "nextjs",
      "react",
      "web-development",
      "frontend",
      "full-stack"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 790 static analysis findings are false positives. The skill contains only documentation and code examples for Next.js best practices. Pattern matches for 'external commands' are Markdown code blocks, 'network' findings are documentation URLs, and 'env_access' references are standard configuration examples. No executable code or security risks detected.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 20,
    "total_lines": 3410,
    "audit_model": "claude",
    "audited_at": "2026-01-28T08:41:33.658Z",
    "risk_factors": []
  },
  "content": {
    "user_title": "Build Production-Ready Next.js Applications",
    "value_statement": "Stop guessing about Next.js patterns and write code that scales. This skill provides authoritative guidance from Vercel on file conventions, React Server Components, data fetching, error handling, and deployment best practices.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "Next.js",
      "React Server Components",
      "Next.js best practices",
      "web development",
      "frontend framework",
      "full-stack React",
      "Vercel deployment"
    ],
    "actual_capabilities": [
      "Enforce correct file conventions for App Router (layout.tsx, page.tsx, loading.tsx, error.tsx)",
      "Identify and fix React Server Component boundary violations",
      "Guide async patterns for params, searchParams, cookies, and headers in Next.js 15+",
      "Recommend proper data fetching patterns to avoid waterfalls",
      "Configure metadata, OG images, and SEO optimization",
      "Troubleshoot hydration errors and bundling issues"
    ],
    "limitations": [
      "Provides guidance only for Next.js 14+ with App Router",
      "Does not cover legacy Pages Router patterns",
      "Cannot automatically fix code - provides recommendations only",
      "Assumes familiarity with React and TypeScript fundamentals"
    ],
    "use_cases": [
      {
        "title": "Review New Next.js Projects",
        "description": "Ensure your project structure follows official conventions from day one. Validate file organization, route segments, and special file usage.",
        "target_user": "Developers starting new Next.js projects"
      },
      {
        "title": "Migrate to App Router",
        "description": "Get step-by-step guidance converting Pages Router code to App Router with proper Server Components, async patterns, and data fetching.",
        "target_user": "Teams upgrading existing Next.js applications"
      },
      {
        "title": "Debug Production Issues",
        "description": "Resolve hydration errors, bundling problems, and deployment configuration issues with proven solutions from Vercel.",
        "target_user": "Engineers troubleshooting production Next.js apps"
      }
    ],
    "prompt_templates": [
      {
        "title": "Review Project Structure",
        "prompt": "Review my Next.js project structure and identify any files that don't follow the App Router conventions. Check for correct usage of layout.tsx, page.tsx, loading.tsx, error.tsx, and route groups.",
        "scenario": "Starting a new project or auditing existing code"
      },
      {
        "title": "Fix Server Component Issues",
        "prompt": "I am getting errors with my React Server Components. Review this code and tell me if I am using async/await correctly for params, cookies, or headers. Also check if I am accidentally using client-only APIs in server components.",
        "scenario": "Debugging RSC boundary violations"
      },
      {
        "title": "Optimize Data Fetching",
        "prompt": "Review my data fetching patterns and identify any waterfalls. Show me how to use Promise.all, Suspense boundaries, or preload patterns to improve performance.",
        "scenario": "Improving application performance"
      },
      {
        "title": "Configure Self-Hosting",
        "prompt": "Help me configure my Next.js app for self-hosting with Docker. I need standalone output, cache handler setup for ISR, and environment variable configuration.",
        "scenario": "Deploying outside of Vercel"
      }
    ],
    "output_examples": [
      {
        "input": "Should I use 'use client' in this component?",
        "output": "Based on your code, you do NOT need 'use client' here. This component only receives data via props and renders JSX without any browser APIs. Adding 'use client' would unnecessarily increase your client bundle size.\n\nKeep it as a Server Component unless you need:\n- useState, useEffect, or other React hooks\n- Browser APIs like window or document\n- Event handlers like onClick\n- Client-side data fetching"
      },
      {
        "input": "Review my async params usage",
        "output": "Your params typing is incorrect for Next.js 15+. Update it to:\n\ntype Props = {\n  params: Promise<{ slug: string }>\n}\n\nexport default async function Page({ params }: Props) {\n  const { slug } = await params\n  // ...\n}\n\nThe params prop is now a Promise that must be awaited. This change enables partial prerendering and improves performance."
      },
      {
        "input": "How do I fix this hydration error?",
        "output": "Your hydration error is caused by using Date.now() in your component. The server and client render different timestamps.\n\nSolutions:\n1. Use 'use client' if the date display is not critical for SEO\n2. Use suppressHydrationWarning for timestamps\n3. Render the date only on the client with useEffect\n\nExample fix:\nconst [date, setDate] = useState<string>()\nuseEffect(() => setDate(new Date().toISOString()), [])\n\nThis ensures the date only renders on the client."
      }
    ],
    "best_practices": [
      "Always type params and searchParams as Promise<T> in Next.js 15+ and await them in Server Components",
      "Use dynamic imports with ssr: false for browser-only packages to prevent server-side errors",
      "Implement loading.tsx and error.tsx boundaries for better UX during data fetching and error states",
      "Configure output: 'standalone' in next.config.js for Docker deployments to minimize image size",
      "Use next/image instead of img tags for automatic optimization and better Core Web Vitals"
    ],
    "anti_patterns": [
      "Do not use 'use client' unnecessarily - Server Components reduce JavaScript sent to the browser",
      "Avoid fetching data sequentially in nested components - use Promise.all or Suspense to prevent waterfalls",
      "Never use NEXT_PUBLIC_ prefix for secrets - these are exposed to the browser bundle",
      "Do not use Link tags for CSS - import CSS files directly for proper bundling",
      "Avoid custom webpack config - prefer Turbopack-compatible serverExternalPackages and transpilePackages"
    ],
    "faq": [
      {
        "question": "When should I use 'use client' versus keeping a Server Component?",
        "answer": "Use 'use client' only when you need browser APIs, React hooks like useState/useEffect, or event handlers. Server Components can receive props, fetch data, and render JSX without the directive. Default to Server Components for better performance."
      },
      {
        "question": "How do I handle async params in Next.js 15?",
        "answer": "Type params as Promise<{ slug: string }> and await it in your async component. For client components, use React.use() to unwrap the promise. This change enables partial prerendering."
      },
      {
        "question": "What is the difference between Server Actions and Route Handlers?",
        "answer": "Server Actions are for mutations from components with automatic revalidation. Route Handlers are for API endpoints that need custom request/response handling. Use Server Actions for form submissions, Route Handlers for webhooks or external API proxies."
      },
      {
        "question": "How do I fix 'window is not defined' errors?",
        "answer": "This happens when browser-only code runs on the server. Solutions: 1) Add 'use client' if the component only runs in browser, 2) Use dynamic import with ssr: false, 3) Wrap browser code in useEffect which only runs on client."
      },
      {
        "question": "What causes hydration errors and how do I fix them?",
        "answer": "Hydration errors occur when server and client render different HTML. Common causes: Date.now(), Math.random(), localStorage usage, or invalid HTML nesting. Fix by using suppressHydrationWarning, rendering dynamic content only on client with useEffect, or fixing HTML structure."
      },
      {
        "question": "How do I deploy Next.js on my own servers?",
        "answer": "Use output: 'standalone' in next.config.js for Docker deployments. For multi-instance setups, implement a custom cache handler using Redis or S3. Always include a health check endpoint and copy the public/ and .next/static/ folders to your container."
      }
    ]
  },
  "file_structure": [
    {
      "name": "async-patterns.md",
      "type": "file",
      "path": "async-patterns.md",
      "lines": 88
    },
    {
      "name": "bundling.md",
      "type": "file",
      "path": "bundling.md",
      "lines": 181
    },
    {
      "name": "data-patterns.md",
      "type": "file",
      "path": "data-patterns.md",
      "lines": 298
    },
    {
      "name": "debug-tricks.md",
      "type": "file",
      "path": "debug-tricks.md",
      "lines": 106
    },
    {
      "name": "directives.md",
      "type": "file",
      "path": "directives.md",
      "lines": 74
    },
    {
      "name": "error-handling.md",
      "type": "file",
      "path": "error-handling.md",
      "lines": 228
    },
    {
      "name": "file-conventions.md",
      "type": "file",
      "path": "file-conventions.md",
      "lines": 141
    },
    {
      "name": "font.md",
      "type": "file",
      "path": "font.md",
      "lines": 246
    },
    {
      "name": "functions.md",
      "type": "file",
      "path": "functions.md",
      "lines": 109
    },
    {
      "name": "hydration-error.md",
      "type": "file",
      "path": "hydration-error.md",
      "lines": 92
    },
    {
      "name": "image.md",
      "type": "file",
      "path": "image.md",
      "lines": 174
    },
    {
      "name": "metadata.md",
      "type": "file",
      "path": "metadata.md",
      "lines": 302
    },
    {
      "name": "parallel-routes.md",
      "type": "file",
      "path": "parallel-routes.md",
      "lines": 288
    },
    {
      "name": "route-handlers.md",
      "type": "file",
      "path": "route-handlers.md",
      "lines": 147
    },
    {
      "name": "rsc-boundaries.md",
      "type": "file",
      "path": "rsc-boundaries.md",
      "lines": 160
    },
    {
      "name": "runtime-selection.md",
      "type": "file",
      "path": "runtime-selection.md",
      "lines": 40
    },
    {
      "name": "scripts.md",
      "type": "file",
      "path": "scripts.md",
      "lines": 142
    },
    {
      "name": "self-hosting.md",
      "type": "file",
      "path": "self-hosting.md",
      "lines": 372
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 154
    },
    {
      "name": "suspense-boundaries.md",
      "type": "file",
      "path": "suspense-boundaries.md",
      "lines": 68
    }
  ]
}
