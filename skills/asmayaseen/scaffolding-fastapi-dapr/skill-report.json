{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T19:14:54.156Z",
    "slug": "asmayaseen-scaffolding-fastapi-dapr",
    "source_url": "https://github.com/Asmayaseen/hackathon-2/tree/main/.claude/skills/scaffolding-fastapi-dapr",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "e7047214d953ab273efeacdaa76940556d7301f8345a62823b0bbff51e930d1d",
    "tree_hash": "4236742ec08f15e8235b4a62c40384dcf66601e950cb1edf6613fd3fd1bdf655"
  },
  "skill": {
    "name": "scaffolding-fastapi-dapr",
    "description": "Build production-grade FastAPI backends with SQLModel, Dapr integration, and JWT authentication.\nUse when building REST APIs with Neon PostgreSQL, implementing event-driven microservices with\nDapr pub/sub, scheduling jobs, or creating CRUD endpoints with JWT/JWKS verification.\nNOT when building simple scripts or non-microservice architectures.\n",
    "summary": "Build production-grade FastAPI backends with SQLModel, Dapr integration, and JWT authentication.\nUse...",
    "icon": "ðŸ”§",
    "version": "1.0.0",
    "author": "Asmayaseen",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "fastapi",
      "dapr",
      "sqlmodel",
      "backend",
      "microservices"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "network",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation and code-pattern skill with minimal executable code. The only script (verify.py) only checks file existence. HTTP calls are to standard Dapr sidecar (localhost:3500) and configurable auth endpoints. No credential theft, data exfiltration, or persistence mechanisms.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/verify.py",
            "line_start": 1,
            "line_end": 21
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/verify.py",
            "line_start": 7,
            "line_end": 11
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 166,
            "line_end": 175
          },
          {
            "file": "references/dapr-patterns.md",
            "line_start": 103,
            "line_end": 127
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 62,
            "line_end": 62
          },
          {
            "file": "references/fastapi-patterns.md",
            "line_start": 86,
            "line_end": 86
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 2219,
    "audit_model": "claude",
    "audited_at": "2026-01-16T19:14:54.156Z"
  },
  "content": {
    "user_title": "Build FastAPI backends with Dapr and SQLModel",
    "value_statement": "Creating production backends with proper patterns requires research across multiple documentation sources. This skill provides ready-to-use code patterns for FastAPI, SQLModel, Dapr pub/sub, and JWT authentication so you can start building immediately.",
    "seo_keywords": [
      "fastapi",
      "dapr",
      "sqlmodel",
      "backend",
      "claude code",
      "claude",
      "codex",
      "pubsub",
      "jwt auth",
      "microservices"
    ],
    "actual_capabilities": [
      "Generate SQLModel schemas with async PostgreSQL connection",
      "Create CRUD REST endpoints with dependency injection",
      "Implement JWT/JWKS authentication with Better Auth",
      "Set up Dapr pub/sub subscriptions and event handlers",
      "Configure scheduled jobs with Dapr Jobs API",
      "Add structured logging with request ID tracking"
    ],
    "limitations": [
      "Does not generate complete project files",
      "Requires manual integration into your codebase",
      "No database migration automation included",
      "Authentication requires existing auth server"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Build REST API backends",
        "description": "Create FastAPI applications with SQLModel, async database patterns, and JWT verification."
      },
      {
        "target_user": "DevOps engineers",
        "title": "Integrate Dapr microservices",
        "description": "Set up event-driven architecture with Dapr pub/sub, state management, and scheduled jobs."
      },
      {
        "target_user": "AI developers",
        "title": "Create agent-compatible APIs",
        "description": "Design endpoints that work for both human users and AI agents with consistent patterns."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create task CRUD endpoints",
        "scenario": "Need SQLModel CRUD patterns",
        "prompt": "Show me how to create a Task model with SQLModel and generate POST, GET, PATCH endpoints using async database sessions."
      },
      {
        "title": "Add JWT authentication",
        "scenario": "Authenticating API requests",
        "prompt": "Implement JWT verification against Better Auth JWKS endpoint with HTTPBearer security for a FastAPI protected route."
      },
      {
        "title": "Set up Dapr pub/sub",
        "scenario": "Event-driven messaging",
        "prompt": "Create a Dapr subscription handler in FastAPI that receives CloudEvent messages and publishes events to a topic."
      },
      {
        "title": "Configure async testing",
        "scenario": "Testing FastAPI endpoints",
        "prompt": "Write pytest fixtures for async testing with AsyncClient, AsyncSession, and dependency overrides for database connections."
      }
    ],
    "output_examples": [
      {
        "input": "Create a Task model with SQLModel and async endpoints",
        "output": [
          "Task model with title, status, priority fields and timestamps",
          "Async database engine setup for PostgreSQL",
          "POST /tasks endpoint with session injection",
          "GET /tasks/{id} endpoint with 404 handling",
          "PATCH /tasks/{id} endpoint with partial update"
        ]
      },
      {
        "input": "Set up Dapr pub/sub for task events",
        "output": [
          "Dapr subscription endpoint returning topic routes",
          "CloudEvent handler with data unwrapping",
          "Event publishing function with topic parameter",
          "Error handling to return SUCCESS status"
        ]
      },
      {
        "input": "Add JWT authentication to a protected route",
        "output": [
          "JWKS client with key caching for 1 hour",
          "Token decoding with RS256 verification",
          "HTTPBearer dependency for protected endpoints",
          "User payload extraction from claims"
        ]
      }
    ],
    "best_practices": [
      "Always extract primitives from database objects before committing to prevent MissingGreenlet errors",
      "Return SUCCESS status from Dapr handlers even on error to prevent infinite retries",
      "Cache JWKS keys for 1 hour to reduce auth server load and improve performance"
    ],
    "anti_patterns": [
      "Using synchronous session.execute() instead of async session.exec()",
      "Forgetting to unwrap CloudEvent data field in Dapr handlers",
      "Committing transactions inside service functions instead of letting the caller control commits"
    ],
    "faq": [
      {
        "question": "What Python version is required?",
        "answer": "Python 3.10 or later for type hints and latest async patterns."
      },
      {
        "question": "Can I use SQLite instead of PostgreSQL?",
        "answer": "Yes, change DATABASE_URL to sqlite:// and use aiosqlite adapter."
      },
      {
        "question": "How do I connect this to an existing auth system?",
        "answer": "Configure AUTH_SERVER_URL and JWKS_URL env vars, then use the verify_token pattern."
      },
      {
        "question": "Is my data safe when using these patterns?",
        "answer": "These are read-only patterns. You control data flow and storage in your own code."
      },
      {
        "question": "Why am I getting MissingGreenlet errors?",
        "answer": "You are accessing detached objects after commit. Extract primitives before committing."
      },
      {
        "question": "How is this different from using Django or Flask?",
        "answer": "FastAPI provides async support, automatic OpenAPI docs, and Pydantic validation out of the box."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "dapr-patterns.md",
          "type": "file",
          "path": "references/dapr-patterns.md",
          "lines": 352
        },
        {
          "name": "fastapi-patterns.md",
          "type": "file",
          "path": "references/fastapi-patterns.md",
          "lines": 644
        },
        {
          "name": "production-testing.md",
          "type": "file",
          "path": "references/production-testing.md",
          "lines": 382
        },
        {
          "name": "sqlmodel-patterns.md",
          "type": "file",
          "path": "references/sqlmodel-patterns.md",
          "lines": 230
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "verify.py",
          "type": "file",
          "path": "scripts/verify.py",
          "lines": 21
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 317
    }
  ]
}
