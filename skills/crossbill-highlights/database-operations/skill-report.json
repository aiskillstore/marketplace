{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T23:21:50.595Z",
    "slug": "crossbill-highlights-database-operations",
    "source_url": "https://github.com/Crossbill-Highlights/crossbill-web/tree/main/.claude/skills/database-operations",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c7dea32d8408491cbeba843a9beb23841797be58d4b5880a4b0f52453b68c463",
    "tree_hash": "57a80dbb5ebb627ef06937336890ce85e7751769c0b8133752ec3ee92a56366e"
  },
  "skill": {
    "name": "database-operations",
    "description": "Instructions on how to write database queries with SQLAlchemy.",
    "summary": "Instructions on how to write database queries with SQLAlchemy.",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Crossbill-Highlights",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sqlalchemy",
      "database",
      "orm",
      "python",
      "sql"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure prompt-based skill containing only SQLAlchemy guidelines. No executable code, no file access, no network calls, no command execution. Static findings are false positives from pattern matching on words like 'algorithm' in non-security contexts. This skill provides only instructional text about database query optimization.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 184,
    "audit_model": "claude",
    "audited_at": "2026-01-16T23:21:50.595Z"
  },
  "content": {
    "user_title": "Write efficient SQLAlchemy database queries",
    "value_statement": "Database queries written with for-loops are slow and create maintenance problems. This skill provides guidelines for using SQLAlchemy bulk operations and repository patterns to write fast, maintainable database code.",
    "seo_keywords": [
      "SQLAlchemy database queries",
      "bulk operations Python",
      "repository pattern database",
      "SQL joins performance",
      "Claude Code database",
      "Claude database operations",
      "Codex SQLAlchemy",
      "Python ORM optimization",
      "database query efficiency",
      "SQLAlchemy best practices"
    ],
    "actual_capabilities": [
      "Guide bulk insert, update, and delete operations using SQLAlchemy",
      "Recommend SQL joins instead of N+1 query patterns",
      "Structure database code with repository classes",
      "Optimize query performance through proper ORM usage",
      "Avoid inefficient for-loop patterns in database operations"
    ],
    "limitations": [
      "Provides guidelines only, does not execute database operations",
      "Does not generate complete repository implementations",
      "Does not provide database connection or migration support",
      "Focused on SQLAlchemy ORM, not raw SQL optimization"
    ],
    "use_cases": [
      {
        "target_user": "Python developers",
        "title": "Optimize existing database code",
        "description": "Refactor slow for-loop database operations to use SQLAlchemy bulk methods for better performance."
      },
      {
        "target_user": "Backend engineers",
        "title": "Design maintainable data layer",
        "description": "Structure database operations in repository classes following established patterns."
      },
      {
        "target_user": "Data engineers",
        "title": "Write efficient batch operations",
        "description": "Use SQL joins and bulk methods when processing large datasets with SQLAlchemy."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic bulk insert",
        "scenario": "Insert multiple records efficiently",
        "prompt": "Use SQLAlchemy bulk insert to add multiple user records to the database. Show the bulk_insert_mappings method."
      },
      {
        "title": "Batch update pattern",
        "scenario": "Update many records at once",
        "prompt": "Write a SQLAlchemy bulk update operation to change status for all pending orders. Include the Core update statement pattern."
      },
      {
        "title": "Repository structure",
        "scenario": "Organize database operations",
        "prompt": "Create a UserRepository class with methods for finding users by email, getting active users, and updating last login."
      },
      {
        "title": "Join optimization",
        "scenario": "Replace N+1 queries",
        "prompt": "Show how to use SQLAlchemy joinedload or selectinload to fetch users with their orders in a single query instead of separate queries."
      }
    ],
    "output_examples": [
      {
        "input": "Bulk insert 1000 user records efficiently",
        "output": [
          "Use session.bulk_insert_mappings() for efficient batch inserts",
          "Pass a list of dictionaries with model attributes",
          "Example: session.bulk_insert_mappings(User, user_list)",
          "This performs a single INSERT statement instead of 1000 separate queries"
        ]
      },
      {
        "input": "Create a repository for user data access",
        "output": [
          "Define a UserRepository class with Session injection",
          "Implement find_by_id, find_by_email, and find_active methods",
          "Use type hints for better code clarity and maintenance",
          "Keep database logic abstracted from business layer"
        ]
      },
      {
        "input": "Fix slow query with N+1 problem",
        "output": [
          "Replace loop-based related data fetching with joinedload()",
          "Configure relationship loading strategy in query options",
          "Single query retrieves all related objects efficiently",
          "Reduces hundreds of queries to just one or two round-trips"
        ]
      }
    ],
    "best_practices": [
      "Always prefer SQLAlchemy bulk methods over Python for-loops for database operations",
      "Use SQL joins to fetch related data in a single query rather than multiple queries",
      "Organize database operations in repository classes for maintainability and testing"
    ],
    "anti_patterns": [
      "Iterating through query results with for-loops to insert or update records",
      "Making separate database calls in loops to fetch related objects (N+1 problem)",
      "Putting database logic directly in route handlers or controllers without abstraction"
    ],
    "faq": [
      {
        "question": "What SQLAlchemy versions are supported?",
        "answer": "Works with SQLAlchemy 1.4 and 2.0. Patterns apply to both Core and ORM interfaces."
      },
      {
        "question": "What are the performance benefits?",
        "answer": "Bulk operations reduce hundreds of queries to a single database round-trip, improving speed significantly."
      },
      {
        "question": "Can this integrate with FastAPI or Flask?",
        "answer": "Yes, the repository pattern works with any Python web framework using SQLAlchemy."
      },
      {
        "question": "Is my data safe with this skill?",
        "answer": "This skill provides guidance only. No data is stored, transmitted, or accessed by the skill itself."
      },
      {
        "question": "Why avoid for-loops for database operations?",
        "answer": "For-loops cause N+1 queries, making hundreds of database calls instead of one efficient batch operation."
      },
      {
        "question": "How does this compare to raw SQL?",
        "answer": "SQLAlchemy bulk methods use optimized SQL under the hood while providing Pythonic abstractions and safety."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 8
    }
  ]
}
