{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T20:51:03.590Z",
    "slug": "cjharmath-py-testing-async",
    "source_url": "https://github.com/CJHarmath/claude-agents-skills/tree/main/skills/py-testing-async",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "36a02edec273a29c9569ce2dd3ab2850934d2a07c97a07f3404842137251295b",
    "tree_hash": "46efa1fc49f646fecf0265af82eea16541fad201d8065788979e8c3a85718269"
  },
  "skill": {
    "name": "py-testing-async",
    "description": "Async testing patterns with pytest-asyncio. Use when writing tests, mocking async code, testing database operations, or debugging test failures.",
    "summary": "Async testing patterns with pytest-asyncio. Use when writing tests, mocking async code, testing data...",
    "icon": "ðŸ”„",
    "version": "1.0.0",
    "author": "CJHarmath",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "python",
      "async",
      "pytest",
      "testing",
      "asyncio"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a pure documentation skill containing only a SKILL.md markdown file with informational content about Python async testing patterns. No executable code, scripts, network calls, filesystem access, or environment variable access. All static findings are false positives - the scanner misidentified code block backticks as shell execution, 'async' as C2 keywords, and configuration strings as cryptographic patterns.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 171,
            "line_end": 171
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 18,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 26
          },
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 72
          },
          {
            "file": "SKILL.md",
            "line_start": 72,
            "line_end": 80
          },
          {
            "file": "SKILL.md",
            "line_start": 80,
            "line_end": 114
          },
          {
            "file": "SKILL.md",
            "line_start": 114,
            "line_end": 120
          },
          {
            "file": "SKILL.md",
            "line_start": 120,
            "line_end": 122
          },
          {
            "file": "SKILL.md",
            "line_start": 122,
            "line_end": 154
          },
          {
            "file": "SKILL.md",
            "line_start": 154,
            "line_end": 162
          },
          {
            "file": "SKILL.md",
            "line_start": 162,
            "line_end": 200
          },
          {
            "file": "SKILL.md",
            "line_start": 200,
            "line_end": 206
          },
          {
            "file": "SKILL.md",
            "line_start": 206,
            "line_end": 238
          },
          {
            "file": "SKILL.md",
            "line_start": 238,
            "line_end": 246
          },
          {
            "file": "SKILL.md",
            "line_start": 246,
            "line_end": 277
          },
          {
            "file": "SKILL.md",
            "line_start": 277,
            "line_end": 285
          },
          {
            "file": "SKILL.md",
            "line_start": 285,
            "line_end": 305
          },
          {
            "file": "SKILL.md",
            "line_start": 305,
            "line_end": 308
          },
          {
            "file": "SKILL.md",
            "line_start": 308,
            "line_end": 309
          },
          {
            "file": "SKILL.md",
            "line_start": 309,
            "line_end": 310
          },
          {
            "file": "SKILL.md",
            "line_start": 310,
            "line_end": 316
          },
          {
            "file": "SKILL.md",
            "line_start": 316,
            "line_end": 333
          },
          {
            "file": "SKILL.md",
            "line_start": 333,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 364
          },
          {
            "file": "SKILL.md",
            "line_start": 364,
            "line_end": 372
          },
          {
            "file": "SKILL.md",
            "line_start": 372,
            "line_end": 372
          },
          {
            "file": "SKILL.md",
            "line_start": 372,
            "line_end": 373
          },
          {
            "file": "SKILL.md",
            "line_start": 373,
            "line_end": 373
          },
          {
            "file": "SKILL.md",
            "line_start": 373,
            "line_end": 375
          },
          {
            "file": "SKILL.md",
            "line_start": 375,
            "line_end": 376
          },
          {
            "file": "SKILL.md",
            "line_start": 376,
            "line_end": 376
          },
          {
            "file": "SKILL.md",
            "line_start": 376,
            "line_end": 376
          },
          {
            "file": "SKILL.md",
            "line_start": 376,
            "line_end": 382
          },
          {
            "file": "SKILL.md",
            "line_start": 382,
            "line_end": 403
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 582,
    "audit_model": "claude",
    "audited_at": "2026-01-16T20:51:03.590Z"
  },
  "content": {
    "user_title": "Write async tests with pytest",
    "value_statement": "Async testing requires specific patterns that differ from synchronous code. This skill provides ready-to-use patterns for pytest-asyncio configuration, async fixtures, mocking async functions, and database test isolation.",
    "seo_keywords": [
      "pytest-asyncio",
      "async testing Python",
      "pytest async fixtures",
      "mocking async functions",
      "Python test patterns",
      "asyncio testing",
      "pytest configuration",
      "database test isolation",
      "Claude Code testing",
      "Codex Python testing"
    ],
    "actual_capabilities": [
      "Configure pytest-asyncio with strict or auto mode",
      "Create async fixtures for database sessions and test data",
      "Mock async functions using AsyncMock and patch",
      "Test FastAPI endpoints with httpx AsyncClient",
      "Implement database test isolation with transaction rollbacks",
      "Handle common async testing errors and issues"
    ],
    "limitations": [
      "Does not execute tests or generate test files",
      "Does not install dependencies or configure project files",
      "Does not provide runtime test execution",
      "Does not integrate with CI/CD pipelines"
    ],
    "use_cases": [
      {
        "target_user": "Backend Developers",
        "title": "Test async API endpoints",
        "description": "Write integration tests for FastAPI or async Flask endpoints using httpx AsyncClient and ASGITransport."
      },
      {
        "target_user": "Full-stack Developers",
        "title": "Mock async service calls",
        "description": "Replace async database calls and external service calls with AsyncMock for fast, isolated unit tests."
      },
      {
        "target_user": "Data Engineers",
        "title": "Test database operations",
        "description": "Create isolated tests for async database operations with proper transaction rollback between tests."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic async test setup",
        "scenario": "Setting up pytest for async code",
        "prompt": "Show me how to configure pytest for async testing with pytest-asyncio. Include both strict and auto modes."
      },
      {
        "title": "Mock async function",
        "scenario": "Mocking external async calls",
        "prompt": "How do I mock an async function that calls an external API? Show me how to use AsyncMock and patch."
      },
      {
        "title": "Test database isolation",
        "scenario": "Preventing test pollution",
        "prompt": "Show me how to create an async fixture that rolls back database changes after each test to prevent pollution."
      },
      {
        "title": "Advanced test patterns",
        "scenario": "Testing complex async flows",
        "prompt": "Write a test that covers a multi-step async flow including creating a resource, performing actions, and verifying the final state."
      }
    ],
    "output_examples": [
      {
        "input": "How do I test an async function that calls a database?",
        "output": [
          "Use an async fixture with session scope and automatic rollback:",
          "Create async fixture that yields the session inside a transaction",
          "Rollback happens automatically when the test completes",
          "Mark your test with @pytest.mark.asyncio",
          "Use await to call async database functions"
        ]
      },
      {
        "input": "How do I mock an async HTTP client call?",
        "output": [
          "Use AsyncMock to create a mock async function:",
          "mock_response = AsyncMock()",
          "mock_response.json.return_value = {\"data\": \"test\"}",
          "mock_client.get.return_value = mock_response",
          "Assert the mock was called with correct arguments"
        ]
      },
      {
        "input": "What causes event loop closed errors in async tests?",
        "output": [
          "This happens when async fixtures have wrong scope:",
          "Session-scoped fixtures may outlive the test event loop",
          "Use function scope for fixtures that need fresh state",
          "Ensure event_loop fixture matches your test scope",
          "Check that engine disposal happens at correct scope"
        ]
      }
    ],
    "best_practices": [
      "Use asyncio_mode = \"strict\" and @pytest.mark.asyncio for explicit test intent",
      "Create async fixtures that yield session inside a transaction for automatic rollback",
      "Use AsyncMock instead of Mock when testing async functions"
    ],
    "anti_patterns": [
      "Using regular Mock instead of AsyncMock for async functions",
      "Forgetting @pytest.mark.asyncio when using strict mode",
      "Running tests without transaction rollback causing test pollution"
    ],
    "faq": [
      {
        "question": "What pytest-asyncio mode should I use?",
        "answer": "Use strict mode with @pytest.mark.asyncio for explicit intent. Auto mode runs all async tests but can hide missing markers."
      },
      {
        "question": "How do I test async database operations?",
        "answer": "Create an async fixture that provides an AsyncSession. Use transaction rollback for test isolation."
      },
      {
        "question": "Can I test FastAPI endpoints with this skill?",
        "answer": "Yes. Use httpx AsyncClient with ASGITransport to make async requests to your FastAPI app during tests."
      },
      {
        "question": "How do I mock an async function?",
        "answer": "Use AsyncMock() to create mock objects and patch() to replace the original async function in your tests."
      },
      {
        "question": "What causes coroutine was never awaited errors?",
        "answer": "This error means you forgot to await an async call. Check that all async functions are called with await in your tests."
      },
      {
        "question": "How do I prevent tests from polluting each other?",
        "answer": "Use transaction rollbacks in your async fixture. Wrap each test in a transaction and rollback after completion."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 404
    }
  ]
}
