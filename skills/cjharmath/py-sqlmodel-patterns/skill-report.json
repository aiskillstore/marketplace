{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T20:49:40.900Z",
    "slug": "cjharmath-py-sqlmodel-patterns",
    "source_url": "https://github.com/CJHarmath/claude-agents-skills/tree/main/skills/py-sqlmodel-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "b7a406489d4842e3fcee2c87c97c26819f8934ee6a588e2e2230b05d2e36ce44",
    "tree_hash": "f09e4de7f4168c01b4ffdb8da4afca3e69dcacfe5dc9585452e13f48c40fc9e9"
  },
  "skill": {
    "name": "py-sqlmodel-patterns",
    "description": "SQLModel and async SQLAlchemy patterns. Use when working with database models, queries, relationships, or debugging ORM issues.",
    "summary": "SQLModel and async SQLAlchemy patterns. Use when working with database models, queries, relationship...",
    "icon": "ðŸ—„ï¸",
    "version": "1.0.0",
    "author": "CJHarmath",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "python",
      "sqlmodel",
      "sqlalchemy",
      "database",
      "orm"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "external_commands",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill containing markdown patterns and code examples. No executable code, no network calls, no file system access beyond reading the markdown file. Pure prompt-based skill providing SQLModel and async SQLAlchemy best practices. All static findings are false positives: markdown code blocks and documentation links, not actual command execution or credential exfiltration.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 303,
            "line_end": 303
          },
          {
            "file": "SKILL.md",
            "line_start": 304,
            "line_end": 304
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 18,
            "line_end": 45
          },
          {
            "file": "SKILL.md",
            "line_start": 45,
            "line_end": 51
          },
          {
            "file": "SKILL.md",
            "line_start": 51,
            "line_end": 52
          },
          {
            "file": "SKILL.md",
            "line_start": 52,
            "line_end": 53
          },
          {
            "file": "SKILL.md",
            "line_start": 53,
            "line_end": 61
          },
          {
            "file": "SKILL.md",
            "line_start": 61,
            "line_end": 78
          },
          {
            "file": "SKILL.md",
            "line_start": 78,
            "line_end": 86
          },
          {
            "file": "SKILL.md",
            "line_start": 86,
            "line_end": 113
          },
          {
            "file": "SKILL.md",
            "line_start": 113,
            "line_end": 116
          },
          {
            "file": "SKILL.md",
            "line_start": 116,
            "line_end": 117
          },
          {
            "file": "SKILL.md",
            "line_start": 117,
            "line_end": 118
          },
          {
            "file": "SKILL.md",
            "line_start": 118,
            "line_end": 119
          },
          {
            "file": "SKILL.md",
            "line_start": 119,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 127
          },
          {
            "file": "SKILL.md",
            "line_start": 127,
            "line_end": 148
          },
          {
            "file": "SKILL.md",
            "line_start": 148,
            "line_end": 156
          },
          {
            "file": "SKILL.md",
            "line_start": 156,
            "line_end": 178
          },
          {
            "file": "SKILL.md",
            "line_start": 178,
            "line_end": 186
          },
          {
            "file": "SKILL.md",
            "line_start": 186,
            "line_end": 200
          },
          {
            "file": "SKILL.md",
            "line_start": 200,
            "line_end": 206
          },
          {
            "file": "SKILL.md",
            "line_start": 206,
            "line_end": 234
          },
          {
            "file": "SKILL.md",
            "line_start": 234,
            "line_end": 240
          },
          {
            "file": "SKILL.md",
            "line_start": 240,
            "line_end": 276
          },
          {
            "file": "SKILL.md",
            "line_start": 276,
            "line_end": 282
          },
          {
            "file": "SKILL.md",
            "line_start": 282,
            "line_end": 297
          },
          {
            "file": "SKILL.md",
            "line_start": 297,
            "line_end": 312
          },
          {
            "file": "SKILL.md",
            "line_start": 312,
            "line_end": 312
          },
          {
            "file": "SKILL.md",
            "line_start": 312,
            "line_end": 315
          },
          {
            "file": "SKILL.md",
            "line_start": 315,
            "line_end": 315
          },
          {
            "file": "SKILL.md",
            "line_start": 315,
            "line_end": 316
          },
          {
            "file": "SKILL.md",
            "line_start": 316,
            "line_end": 316
          },
          {
            "file": "SKILL.md",
            "line_start": 316,
            "line_end": 322
          },
          {
            "file": "SKILL.md",
            "line_start": 322,
            "line_end": 331
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 76,
            "line_end": 76
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 509,
    "audit_model": "claude",
    "audited_at": "2026-01-16T20:49:40.900Z"
  },
  "content": {
    "user_title": "Write SQLModel patterns for async databases",
    "value_statement": "SQLModel combines Pydantic and SQLAlchemy, creating confusion about models and schemas. Async SQLAlchemy has different rules than sync. This skill provides tested patterns for eager loading, relationships, sessions, and common database operations.",
    "seo_keywords": [
      "SQLModel patterns",
      "async SQLAlchemy",
      "Python database patterns",
      "SQLModel relationships",
      "SQLModel tutorials",
      "Claude Code SQLModel",
      "Codex database",
      "ORM best practices",
      "Python async database",
      "SQLModel examples"
    ],
    "actual_capabilities": [
      "Provides eager loading patterns for async relationships",
      "Shows N+1 query detection and prevention methods",
      "Demonstrates model vs schema separation",
      "Explains session state management with expire_on_commit",
      "Covers UUID handling and nullable field patterns",
      "Shows query patterns for CRUD operations"
    ],
    "limitations": [
      "Does not execute code or connect to databases",
      "Does not generate complete project boilerplate",
      "Does not handle migrations or schema changes",
      "Focused on patterns, not full API implementation"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Build async database APIs",
        "description": "Create FastAPI endpoints with async SQLAlchemy using proper eager loading and session management."
      },
      {
        "target_user": "Data engineers",
        "title": "Write efficient queries",
        "description": "Avoid N+1 queries and optimize database access patterns in data processing pipelines."
      },
      {
        "target_user": "Python developers",
        "title": "Learn SQLModel patterns",
        "description": "Understand the difference between database models and API schemas in SQLModel projects."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic query patterns",
        "scenario": "Writing CRUD operations",
        "prompt": "Show me how to write a select query to get a user by ID, then update their email, and commit the changes using SQLModel and async session."
      },
      {
        "title": "Eager loading setup",
        "scenario": "Loading related data",
        "prompt": "I have User and Assessment models with a one-to-many relationship. How do I fetch all users with their assessments loaded in a single query using selectinload?"
      },
      {
        "title": "Schema separation",
        "scenario": "Creating API layers",
        "prompt": "Create separate SQLModel classes for a User database table, UserCreate input schema, and UserRead output schema that excludes the password field."
      },
      {
        "title": "Complex relationships",
        "scenario": "Nested data loading",
        "prompt": "I have User -> Assessment -> Question relationships. How do I chain selectinload to eagerly load both assessments and their questions in one query?"
      }
    ],
    "output_examples": [
      {
        "input": "How do I fix greenlet_spawn error in async SQLAlchemy?",
        "output": [
          "This error occurs when lazy loading is used in async code",
          "For collections use selectinload(), for single references use joinedload()",
          "Example: select(User).options(selectinload(User.assessments))"
        ]
      },
      {
        "input": "How do I separate models from schemas in SQLModel?",
        "output": [
          "Create distinct classes: User for database table, UserCreate for input, UserRead for output",
          "UserRead should exclude sensitive fields like hashed_password",
          "Use consistent naming convention for clarity"
        ]
      },
      {
        "input": "What causes N+1 queries and how do I prevent them?",
        "output": [
          "N+1 happens when fetching related objects one-by-one in a loop",
          "Prevent by using eager loading with selectinload() or joinedload()",
          "Enable echo=True on engine to detect N+1 patterns in logs"
        ]
      }
    ],
    "best_practices": [
      "Always use selectinload or joinedload for relationships in async code to avoid lazy loading errors.",
      "Separate database models from API schemas to prevent accidentally exposing sensitive fields like passwords.",
      "Use expire_on_commit=False when you need to access objects after commit without refreshing from the database."
    ],
    "anti_patterns": [
      "Using lazy loading with async SQLAlchemy causes greenlet_spawn errors.",
      "Exposing database models directly in API responses may leak sensitive fields.",
      "Accessing relationships without eager loading causes N+1 queries that slow down applications."
    ],
    "faq": [
      {
        "question": "What versions of SQLModel and SQLAlchemy are supported?",
        "answer": "Patterns work with SQLModel 0.0+ and SQLAlchemy 2.0+. Async patterns require SQLAlchemy 2.0+."
      },
      {
        "question": "What database engines work with these patterns?",
        "answer": "Patterns support PostgreSQL, MySQL, and SQLite with async engines. PostgreSQL uses psycopg3 for async."
      },
      {
        "question": "Can I use these patterns with Django ORM?",
        "answer": "No. These patterns are specific to SQLModel and SQLAlchemy. Django ORM has different methods."
      },
      {
        "question": "Is my data safe when using these patterns?",
        "answer": "Yes. Patterns are read-only code generation guidance. No data leaves your machine."
      },
      {
        "question": "Why do I get greenlet_spawn has not been called?",
        "answer": "Lazy loading blocks in async code. Use selectinload or joinedload for eager loading instead."
      },
      {
        "question": "How is SQLModel different from plain SQLAlchemy?",
        "answer": "SQLModel combines Pydantic and SQLAlchemy, blurring data validation and database schema boundaries."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 332
    }
  ]
}
