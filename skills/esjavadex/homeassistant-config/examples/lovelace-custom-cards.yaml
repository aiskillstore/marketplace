# Example Custom Card Configurations
# Popular custom cards for enhanced Lovelace dashboards

# ===========================================
# MUSHROOM CARDS
# Install via HACS: lovelace-mushroom
# ===========================================

# Mushroom Entity Card - Basic
mushroom_entity_basic:
  type: custom:mushroom-entity-card
  entity: sensor.living_room_temperature
  icon: mdi:thermometer
  icon_color: blue
  name: Living Room Temp
  primary_info: name
  secondary_info: state
  tap_action:
    action: more-info

# Mushroom Light Card - With Controls
mushroom_light_card:
  type: custom:mushroom-light-card
  entity: light.bedroom
  name: Bedroom Light
  icon: mdi:ceiling-light
  show_brightness_control: true
  show_color_temp_control: true
  show_color_control: true
  use_light_color: true
  collapsible_controls: false
  tap_action:
    action: toggle
  hold_action:
    action: more-info

# Mushroom Climate Card
mushroom_climate_card:
  type: custom:mushroom-climate-card
  entity: climate.thermostat
  name: Thermostat
  icon: mdi:thermostat
  show_temperature_control: true
  hvac_modes:
    - heat
    - cool
    - heat_cool
    - "off"
  collapsible_controls: true

# Mushroom Cover Card
mushroom_cover_card:
  type: custom:mushroom-cover-card
  entity: cover.garage_door
  name: Garage Door
  icon: mdi:garage
  show_position_control: true
  show_tilt_position_control: false
  show_buttons_control: true

# Mushroom Fan Card
mushroom_fan_card:
  type: custom:mushroom-fan-card
  entity: fan.bedroom
  name: Bedroom Fan
  icon: mdi:fan
  show_percentage_control: true
  show_oscillate_control: true
  collapsible_controls: false

# Mushroom Person Card
mushroom_person_card:
  type: custom:mushroom-person-card
  entity: person.john
  icon_type: entity-picture
  layout: horizontal
  primary_info: name
  secondary_info: state

# Mushroom Alarm Card
mushroom_alarm_card:
  type: custom:mushroom-alarm-control-panel-card
  entity: alarm_control_panel.home
  name: Home Alarm
  states:
    - armed_home
    - armed_away
    - armed_night
    - disarmed

# Mushroom Media Player Card
mushroom_media_card:
  type: custom:mushroom-media-player-card
  entity: media_player.living_room
  name: Living Room
  icon: mdi:speaker
  use_media_info: true
  show_volume_level: true
  media_controls:
    - on_off
    - shuffle
    - previous
    - play_pause_stop
    - next
    - repeat
  volume_controls:
    - volume_mute
    - volume_set
    - volume_buttons
  collapsible_controls: true

# Mushroom Template Card - Dynamic
mushroom_template_card:
  type: custom:mushroom-template-card
  entity: light.living_room
  icon: mdi:lightbulb
  color: |
    {% if is_state(entity, 'on') %}
      amber
    {% else %}
      disabled
    {% endif %}
  icon_color: |
    {% if is_state(entity, 'on') %}
      amber
    {% else %}
      grey
    {% endif %}
  primary: "{{ state_attr(entity, 'friendly_name') }}"
  secondary: |
    {% if is_state(entity, 'on') %}
      {{ state_attr(entity, 'brightness') | int / 255 * 100 | round }}% brightness
    {% else %}
      Off
    {% endif %}
  badge_icon: |
    {% if is_state(entity, 'on') %}
      mdi:check
    {% endif %}
  badge_color: green
  tap_action:
    action: toggle
  hold_action:
    action: more-info

# Mushroom Chips Card
mushroom_chips_card:
  type: custom:mushroom-chips-card
  alignment: center
  chips:
    # Weather chip
    - type: weather
      entity: weather.home
      show_temperature: true
      show_conditions: true
    # Entity chip
    - type: entity
      entity: sensor.indoor_temperature
      icon: mdi:thermometer
      content_info: state
    # Template chip
    - type: template
      icon: mdi:home
      content: |
        {{ states.light | selectattr('state', 'eq', 'on') | list | count }} lights
      tap_action:
        action: navigate
        navigation_path: /lovelace/lights
    # Action chip
    - type: action
      icon: mdi:power
      tap_action:
        action: call-service
        service: script.turn_on
        target:
          entity_id: script.all_off
    # Conditional chip
    - type: conditional
      conditions:
        - entity: binary_sensor.front_door
          state: "on"
      chip:
        type: entity
        entity: binary_sensor.front_door
        icon: mdi:door-open
        icon_color: red
    # Back chip
    - type: back
      icon: mdi:arrow-left
    # Spacer
    - type: spacer
    # Menu chip
    - type: menu

# ===========================================
# BUTTON CARD (Custom)
# Install via HACS: button-card
# ===========================================

# Basic Button Card
button_card_basic:
  type: custom:button-card
  entity: light.bedroom
  name: Bedroom
  icon: mdi:bed
  show_state: true
  show_name: true
  tap_action:
    action: toggle

# Styled Button Card
button_card_styled:
  type: custom:button-card
  entity: light.living_room
  name: Living Room
  icon: mdi:sofa
  show_state: true
  styles:
    card:
      - border-radius: 16px
      - padding: 16px
      - background: "var(--card-background-color)"
    icon:
      - width: 40px
      - color: "var(--primary-color)"
    name:
      - font-size: 14px
      - font-weight: bold
      - color: "var(--primary-text-color)"
    state:
      - font-size: 12px
      - color: "var(--secondary-text-color)"
  state:
    - value: "on"
      styles:
        card:
          - background: "linear-gradient(135deg, rgba(255,200,50,0.3) 0%, rgba(255,150,0,0.1) 100%)"
        icon:
          - color: "rgb(255, 180, 0)"
          - filter: "drop-shadow(0 0 10px rgba(255, 180, 0, 0.5))"
    - value: "off"
      styles:
        icon:
          - color: "var(--disabled-text-color)"
          - opacity: 0.5

# Button Card with Dynamic Label
button_card_dynamic:
  type: custom:button-card
  entity: light.bedroom
  name: Bedroom Light
  icon: mdi:lightbulb
  show_state: false
  show_label: true
  label: |
    [[[
      if (entity.state === 'on') {
        var bri = entity.attributes.brightness || 0;
        return 'Brightness: ' + Math.round(bri / 255 * 100) + '%';
      }
      return 'Off';
    ]]]
  styles:
    label:
      - font-size: 11px
      - color: "var(--secondary-text-color)"

# Button Card with Custom Fields (Grid Layout)
button_card_grid:
  type: custom:button-card
  entity: climate.thermostat
  name: Thermostat
  show_state: false
  show_name: false
  custom_fields:
    icon_field: |
      [[[
        return '<ha-icon icon="mdi:thermostat" style="width: 40px; height: 40px; color: var(--primary-color);"></ha-icon>';
      ]]]
    name_field: |
      [[[
        return 'Thermostat';
      ]]]
    current_temp: |
      [[[
        return entity.attributes.current_temperature + '°C';
      ]]]
    target_temp: |
      [[[
        return 'Target: ' + entity.attributes.temperature + '°C';
      ]]]
    mode: |
      [[[
        return entity.state.charAt(0).toUpperCase() + entity.state.slice(1);
      ]]]
  styles:
    grid:
      - grid-template-areas: '"icon_field name_field" "current_temp target_temp" "mode mode"'
      - grid-template-columns: 1fr 2fr
      - grid-template-rows: auto auto auto
    card:
      - padding: 16px
    custom_fields:
      icon_field:
        - justify-self: start
      name_field:
        - justify-self: start
        - font-weight: bold
        - font-size: 16px
      current_temp:
        - font-size: 28px
        - font-weight: bold
        - color: "var(--primary-color)"
      target_temp:
        - font-size: 14px
        - color: "var(--secondary-text-color)"
      mode:
        - font-size: 12px
        - text-transform: uppercase
        - color: "var(--secondary-text-color)"

# Button Card Template (define in button_card_templates)
button_card_template_definition:
  button_card_templates:
    # Base template for all room cards
    room_card:
      styles:
        card:
          - border-radius: 12px
          - padding: 12px
        icon:
          - width: 32px
        name:
          - font-size: 14px
          - font-weight: bold
      tap_action:
        action: navigate

    # Light button template
    light_button:
      show_state: true
      show_name: true
      styles:
        card:
          - border-radius: 50%
          - width: 80px
          - height: 80px
        icon:
          - width: 30px
      state:
        - value: "on"
          styles:
            card:
              - background: "var(--primary-color)"
            icon:
              - color: white
            name:
              - color: white

# Using templates
button_card_with_template:
  type: custom:button-card
  template: light_button
  entity: light.bedroom
  name: Bedroom

# ===========================================
# MINI GRAPH CARD
# Install via HACS: mini-graph-card
# ===========================================

mini_graph_basic:
  type: custom:mini-graph-card
  entities:
    - sensor.living_room_temperature
  name: Temperature
  hours_to_show: 24
  points_per_hour: 4

mini_graph_multiple:
  type: custom:mini-graph-card
  entities:
    - entity: sensor.indoor_temperature
      name: Indoor
      color: "#e74c3c"
    - entity: sensor.outdoor_temperature
      name: Outdoor
      color: "#3498db"
  name: Temperature Comparison
  hours_to_show: 24
  points_per_hour: 2
  line_width: 2
  show:
    labels: true
    points: false
    legend: true
    fill: fade
    state: true

mini_graph_styled:
  type: custom:mini-graph-card
  entities:
    - entity: sensor.energy_usage
      name: Power
      color: "#ff9800"
  name: Energy Usage
  hours_to_show: 12
  aggregate_func: max
  group_by: hour
  show:
    graph: bar
    average: true
    extrema: true
  color_thresholds:
    - value: 0
      color: "#4caf50"
    - value: 2000
      color: "#ff9800"
    - value: 4000
      color: "#f44336"

# ===========================================
# SWIPE CARD
# Install via HACS: swipe-card
# ===========================================

swipe_card_example:
  type: custom:swipe-card
  cards:
    - type: custom:mushroom-light-card
      entity: light.living_room
      show_brightness_control: true
    - type: custom:mushroom-light-card
      entity: light.bedroom
      show_brightness_control: true
    - type: custom:mushroom-light-card
      entity: light.kitchen
      show_brightness_control: true
  parameters:
    slidesPerView: 1
    spaceBetween: 8
    pagination:
      type: bullets

# ===========================================
# LAYOUT CARD
# Install via HACS: lovelace-layout-card
# ===========================================

layout_card_masonry:
  type: custom:masonry-layout
  cards:
    - type: custom:mushroom-entity-card
      entity: sensor.temperature
    - type: custom:mushroom-light-card
      entity: light.bedroom
    - type: weather-forecast
      entity: weather.home

# ===========================================
# AUTO ENTITIES
# Install via HACS: lovelace-auto-entities
# ===========================================

auto_entities_example:
  type: custom:auto-entities
  card:
    type: entities
    title: Active Lights
    show_header_toggle: false
  filter:
    include:
      - domain: light
        state: "on"
    exclude:
      - entity_id: light.unavailable_light
  sort:
    method: name
    numeric: false

auto_entities_template:
  type: custom:auto-entities
  card:
    type: glance
    title: Motion Detected
  filter:
    template: |
      {% for state in states.binary_sensor %}
        {% if state.attributes.device_class == 'motion' and state.state == 'on' %}
          {{ state.entity_id }},
        {% endif %}
      {% endfor %}

# ===========================================
# COMPLETE DASHBOARD SECTION EXAMPLE
# Combining multiple custom cards
# ===========================================

complete_section_example:
  type: vertical-stack
  cards:
    # Chips at top
    - type: custom:mushroom-chips-card
      alignment: end
      chips:
        - type: weather
          entity: weather.home
          show_temperature: true
        - type: template
          icon: mdi:lightbulb-group
          content: "{{ states.light | selectattr('state', 'eq', 'on') | list | count }}"
          tap_action:
            action: navigate
            navigation_path: /lovelace/lights

    # Room controls grid
    - type: grid
      columns: 2
      square: false
      cards:
        - type: custom:mushroom-light-card
          entity: light.living_room
          name: Living Room
          use_light_color: true
          show_brightness_control: true
          layout: horizontal

        - type: custom:mushroom-light-card
          entity: light.bedroom
          name: Bedroom
          use_light_color: true
          show_brightness_control: true
          layout: horizontal

        - type: custom:mushroom-climate-card
          entity: climate.thermostat
          name: Climate
          show_temperature_control: true
          collapsible_controls: true

        - type: custom:mushroom-media-player-card
          entity: media_player.speaker
          name: Speaker
          use_media_info: true
          collapsible_controls: true

    # Temperature graph
    - type: custom:mini-graph-card
      entities:
        - entity: sensor.indoor_temperature
          name: Indoor
        - entity: sensor.outdoor_temperature
          name: Outdoor
      hours_to_show: 24
      line_width: 2
      show:
        legend: true
        fill: fade
