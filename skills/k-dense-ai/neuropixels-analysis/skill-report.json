{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T06:43:58.271Z",
    "slug": "k-dense-ai-neuropixels-analysis",
    "source_url": "https://github.com/K-Dense-AI/claude-scientific-skills/tree/main/scientific-skills/neuropixels-analysis",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "e332bc1a3eff4016dd0693eba0fbe913b0e2e12bc9cea6df3f79101880cf992b",
    "tree_hash": "60420824f49e095a20e879e9e2e148ba6985f53ffaebd46b2570f2cc72861b56"
  },
  "skill": {
    "name": "neuropixels-analysis",
    "description": "Neuropixels neural recording analysis. Load SpikeGLX/OpenEphys data, preprocess, motion correction, Kilosort4 spike sorting, quality metrics, Allen/IBL curation, AI-assisted visual analysis, for Neuropixels 1.0/2.0 extracellular electrophysiology. Use when working with neural recordings, spike sorting, extracellular electrophysiology, or when the user mentions Neuropixels, SpikeGLX, Open Ephys, Kilosort, quality metrics, or unit curation.",
    "summary": "Neuropixels neural recording analysis. Load SpikeGLX/OpenEphys data, preprocess, motion correction, ...",
    "icon": "ðŸ§ ",
    "version": "1.0.0",
    "author": "K-Dense-AI",
    "license": "MIT license",
    "category": "data",
    "tags": [
      "neuroscience",
      "electrophysiology",
      "spike-sorting",
      "data-analysis",
      "neuropixels"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 703 static findings are false positives. The scanner incorrectly flags markdown code block backticks as shell commands, scientific terminology (channel, detect, universal) as C2/crypto keywords, and documentation URLs as hardcoded URLs. This is a legitimate neuroscience analysis toolkit using SpikeInterface and Kilosort4 for scientific research.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "references/AI_CURATION.md",
            "line_start": 12,
            "line_end": 15
          },
          {
            "file": "references/SPIKE_SORTING.md",
            "line_start": 113,
            "line_end": 122
          },
          {
            "file": "references/standard_workflow.md",
            "line_start": 9,
            "line_end": 18
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/neuropixels_pipeline.py",
            "line_start": 326,
            "line_end": 343
          },
          {
            "file": "scripts/compute_metrics.py",
            "line_start": 99,
            "line_end": 134
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 341,
            "line_end": 347
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 19,
    "total_lines": 5689,
    "audit_model": "claude",
    "audited_at": "2026-01-17T06:43:58.271Z"
  },
  "content": {
    "user_title": "Analyze Neuropixels neural recordings",
    "value_statement": "This skill provides comprehensive analysis of Neuropixels high-density neural recordings. It handles the complete workflow from raw data loading to publication-ready curated units using SpikeInterface and Kilosort4 algorithms.",
    "seo_keywords": [
      "Neuropixels analysis",
      "spike sorting",
      "electrophysiology data",
      "Kilosort4",
      "SpikeInterface",
      "neural recording analysis",
      "motion correction",
      "quality metrics",
      "Claude Code",
      "Cla"
    ],
    "actual_capabilities": [
      "Load and preprocess SpikeGLX and OpenEphys neural recordings",
      "Apply highpass filtering, phase shift correction, and common median reference",
      "Estimate and correct motion and drift in Neuropixels recordings",
      "Run Kilosort4 spike sorting on preprocessed data",
      "Compute quality metrics including SNR, ISI violations, and presence ratio",
      "Curate units using Allen Institute or IBL criteria"
    ],
    "limitations": [
      "Requires SpikeInterface and spike sorter installations (Kilosort4 requires CUDA GPU)",
      "Does not perform manual curation - automated criteria are starting points",
      "Limited to Neuropixels 1.0/2.0 probe formats; other formats require conversion",
      "AI curation features require Anthropic API key for programmatic access"
    ],
    "use_cases": [
      {
        "target_user": "Neuroscience researchers",
        "title": "Automated spike sorting pipeline",
        "description": "Process Neuropixels recordings from raw data to sorted spikes with quality metrics for publication."
      },
      {
        "target_user": "Neurophysiology labs",
        "title": "Batch processing workflow",
        "description": "Apply standardized preprocessing and curation across multiple recording sessions for consistency."
      },
      {
        "target_user": "Computational neuroscientists",
        "title": "Integration with Phy",
        "description": "Export sorted data to Phy for manual review and fine-tuning of spike sorting results."
      }
    ],
    "prompt_templates": [
      {
        "title": "Load and preprocess",
        "scenario": "Start analysis on new data",
        "prompt": "Load a SpikeGLX recording from /path/to/data and apply standard preprocessing including highpass filtering at 400 Hz, phase shift correction, and common median reference."
      },
      {
        "title": "Run spike sorting",
        "scenario": "Process preprocessed recording",
        "prompt": "Run Kilosort4 spike sorting on the preprocessed recording and compute quality metrics including SNR, ISI violations ratio, and presence ratio."
      },
      {
        "title": "Motion correction",
        "scenario": "Check and correct drift",
        "prompt": "Check for drift in my Neuropixels recording and apply motion correction if the estimated drift exceeds 20 microns."
      },
      {
        "title": "AI-assisted curation",
        "scenario": "Visual unit analysis",
        "prompt": "Generate a summary plot for unit 15 showing waveforms and autocorrelogram, then analyze whether it appears to be a well-isolated single unit based on the visualization."
      }
    ],
    "output_examples": [
      {
        "input": "Load my Neuropixels recording and run the complete analysis pipeline",
        "output": [
          "Recording: 384 channels, 600.2 seconds",
          "Preprocessing complete - 2 bad channels removed",
          "Drift estimate: 15.3 um",
          "Kilosort4 found 45 units",
          "Quality metrics computed",
          "Allen curation: 28 good units, 12 MUA, 5 noise"
        ]
      },
      {
        "input": "Check for drift and motion in my recording",
        "output": [
          "Motion estimate: 12.8 um peak-to-peak",
          "No severe drift detected",
          "Nonrigid motion correction applied",
          "Corrected recording saved to motion/corrected/"
        ]
      }
    ],
    "best_practices": [
      "Always check drift before spike sorting - drift above 20 um significantly impacts quality",
      "Use GPU for Kilosort4 for 10-50x faster processing compared to CPU alternatives",
      "Save preprocessed data to avoid recomputing filtering steps on subsequent runs",
      "Review uncertain units in Phy - automated curation provides starting points for manual refinement"
    ],
    "anti_patterns": [
      "Skipping drift estimation before spike sorting can lead to poor unit isolation",
      "Applying phase shift correction to Neuropixels 2.0 data (only needed for 1.0 probes)",
      "Using default curation thresholds without considering your experimental requirements",
      "Processing full recordings without testing on a subset first to verify pipeline"
    ],
    "faq": [
      {
        "question": "What formats does this skill support?",
        "answer": "SpikeGLX, Open Ephys, and NWB formats are fully supported."
      },
      {
        "question": "Do I need a GPU for spike sorting?",
        "answer": "Kilosort4 requires CUDA GPU. CPU alternatives include SpykingCircus2, Mountainsort5, or Tridesclous2."
      },
      {
        "question": "What curation methods are available?",
        "answer": "Allen Institute (permissive), IBL (standard), and strict (conservative single-unit criteria)."
      },
      {
        "question": "How do I inspect results manually?",
        "answer": "Export to Phy using the export_to_phy script, then run phy template-gui to open the GUI."
      },
      {
        "question": "Can AI help with curation?",
        "answer": "Yes, Claude Code can visually analyze waveform plots and provide expert curation recommendations for uncertain units."
      },
      {
        "question": "What preprocessing is recommended?",
        "answer": "Highpass filter at 300-400 Hz, phase shift for NP 1.0, bad channel removal, and common median reference."
      }
    ]
  },
  "file_structure": [
    {
      "name": "assets",
      "type": "dir",
      "path": "assets",
      "children": [
        {
          "name": "analysis_template.py",
          "type": "file",
          "path": "assets/analysis_template.py",
          "lines": 272
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "AI_CURATION.md",
          "type": "file",
          "path": "references/AI_CURATION.md",
          "lines": 346
        },
        {
          "name": "ANALYSIS.md",
          "type": "file",
          "path": "references/ANALYSIS.md",
          "lines": 393
        },
        {
          "name": "api_reference.md",
          "type": "file",
          "path": "references/api_reference.md",
          "lines": 416
        },
        {
          "name": "AUTOMATED_CURATION.md",
          "type": "file",
          "path": "references/AUTOMATED_CURATION.md",
          "lines": 359
        },
        {
          "name": "MOTION_CORRECTION.md",
          "type": "file",
          "path": "references/MOTION_CORRECTION.md",
          "lines": 324
        },
        {
          "name": "plotting_guide.md",
          "type": "file",
          "path": "references/plotting_guide.md",
          "lines": 455
        },
        {
          "name": "PREPROCESSING.md",
          "type": "file",
          "path": "references/PREPROCESSING.md",
          "lines": 274
        },
        {
          "name": "QUALITY_METRICS.md",
          "type": "file",
          "path": "references/QUALITY_METRICS.md",
          "lines": 360
        },
        {
          "name": "SPIKE_SORTING.md",
          "type": "file",
          "path": "references/SPIKE_SORTING.md",
          "lines": 340
        },
        {
          "name": "standard_workflow.md",
          "type": "file",
          "path": "references/standard_workflow.md",
          "lines": 386
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "compute_metrics.py",
          "type": "file",
          "path": "scripts/compute_metrics.py",
          "lines": 179
        },
        {
          "name": "explore_recording.py",
          "type": "file",
          "path": "scripts/explore_recording.py",
          "lines": 169
        },
        {
          "name": "export_to_phy.py",
          "type": "file",
          "path": "scripts/export_to_phy.py",
          "lines": 80
        },
        {
          "name": "neuropixels_pipeline.py",
          "type": "file",
          "path": "scripts/neuropixels_pipeline.py",
          "lines": 433
        },
        {
          "name": "preprocess_recording.py",
          "type": "file",
          "path": "scripts/preprocess_recording.py",
          "lines": 123
        },
        {
          "name": "run_sorting.py",
          "type": "file",
          "path": "scripts/run_sorting.py",
          "lines": 99
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 350
    }
  ]
}
