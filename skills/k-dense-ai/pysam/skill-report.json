{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T08:16:19.962Z",
    "slug": "k-dense-ai-pysam",
    "source_url": "https://github.com/K-Dense-AI/claude-scientific-skills/tree/main/scientific-skills/pysam",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "9f06b4b3df4a8e89ca6bc98c013b92736653f94686e652b890c000079b551678",
    "tree_hash": "3e224a81d01c3c8c6e53974badc9409cafafd2672e410b34710e7c4d49472f88"
  },
  "skill": {
    "name": "pysam",
    "description": "Genomic file toolkit. Read/write SAM/BAM/CRAM alignments, VCF/BCF variants, FASTA/FASTQ sequences, extract regions, calculate coverage, for NGS data processing pipelines.",
    "summary": "Genomic file toolkit. Read/write SAM/BAM/CRAM alignments, VCF/BCF variants, FASTA/FASTQ sequences, e...",
    "icon": "ðŸ§¬",
    "version": "1.0",
    "author": "K-Dense-AI",
    "license": "MIT license",
    "category": "research",
    "tags": [
      "bioinformatics",
      "genomics",
      "ngs",
      "htslib",
      "sequence-analysis"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 447 static findings are FALSE POSITIVES caused by bioinformatics terminology being misinterpreted as security-relevant patterns. The scanner flags 'SAM' as Windows Security Account Manager when it means Sequence Alignment/Map format, and samtools/bcftools as network scanning tools when they are legitimate bioinformatics command-line utilities. The skill contains only documentation and code examples for legitimate genomic data processing. No actual malicious code, command injection, credential access, or network exfiltration patterns exist.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 237
          },
          {
            "file": "references/alignment_files.md",
            "line_start": 1,
            "line_end": 300
          },
          {
            "file": "references/common_workflows.md",
            "line_start": 1,
            "line_end": 500
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "references/common_workflows.md",
            "line_start": 311,
            "line_end": 311
          },
          {
            "file": "references/sequence_files.md",
            "line_start": 205,
            "line_end": 205
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 2265,
    "audit_model": "claude",
    "audited_at": "2026-01-17T08:16:19.962Z"
  },
  "content": {
    "user_title": "Work with genomic sequencing files",
    "value_statement": "Process and analyze DNA sequencing data with tools for reading BAM, VCF, and FASTQ files. Extract genomic regions, calculate coverage statistics, and integrate multiple file types for comprehensive variant analysis.",
    "seo_keywords": [
      "pysam",
      "genomic sequencing",
      "BAM files",
      "VCF variant files",
      "FASTA FASTQ",
      "bioinformatics",
      "DNA analysis",
      "NGS data",
      "samtools",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Read and write SAM/BAM/CRAM alignment files with region-based queries",
      "Process VCF/BCF variant files and extract genotype information",
      "Extract reference sequences from FASTA files using genomic coordinates",
      "Read FASTQ files for raw sequencing read processing",
      "Calculate coverage statistics and perform pileup analysis",
      "Execute samtools and bcftools commands through Python interface"
    ],
    "limitations": [
      "Does not perform variant calling algorithms - requires external tools",
      "Coordinate system differences between VCF (1-based) and pysam (0-based) require careful handling",
      "Random access requires index files (.bai, .fai, .tbi) for BAM, FASTA, and compressed VCF",
      "FASTQ files support only sequential reading, not random access by region"
    ],
    "use_cases": [
      {
        "target_user": "Bioinformatics researchers",
        "title": "Variant analysis workflow",
        "description": "Extract and filter genetic variants from VCF files, annotate with read coverage from BAM files"
      },
      {
        "target_user": "Genomic data scientists",
        "title": "Coverage analysis",
        "description": "Calculate per-base coverage, identify low-coverage regions, generate coverage tracks for visualization"
      },
      {
        "target_user": "Clinical geneticists",
        "title": "Quality control pipeline",
        "description": "Validate sequencing data, check reference consistency, filter reads by quality thresholds"
      }
    ],
    "prompt_templates": [
      {
        "title": "Read alignment data",
        "scenario": "Fetch reads from a BAM file",
        "prompt": "Use pysam to open example.bam and print all reads overlapping chr1 positions 1000-2000"
      },
      {
        "title": "Process variants",
        "scenario": "Extract variants from VCF",
        "prompt": "Open variants.vcf and print all variants on chr2 with quality score above 30"
      },
      {
        "title": "Calculate coverage",
        "scenario": "Get coverage statistics",
        "prompt": "Calculate per-base coverage for chromosome 1 positions 100000-200000 using pileup analysis"
      },
      {
        "title": "Extract sequences",
        "scenario": "Get reference sequence regions",
        "prompt": "Open reference.fasta and extract the sequence for gene ABC on chr5 from position 10000 to 11000"
      }
    ],
    "output_examples": [
      {
        "input": "Open a BAM file and show coverage statistics for chromosome 1",
        "output": [
          "Chromosome 1 statistics:",
          "Total reads: 1,245,678",
          "Mapped reads: 1,198,432 (96.2%)",
          "Mean coverage: 32.4x",
          "Regions below 10x coverage: 5,234 positions"
        ]
      },
      {
        "input": "Filter variants by quality and depth",
        "output": [
          "Filtered 12,456 variants to 3,892 high-quality variants",
          "Applied filters: QUAL > 30, DP > 10, MQ > 40",
          "Variants written to filtered.vcf"
        ]
      },
      {
        "input": "Extract sequences around variant positions",
        "output": [
          "Extracted 100bp sequences for 847 variants",
          "Sequences written to variant_contexts.fasta",
          "Flanking region: +/- 50bp from each variant position"
        ]
      }
    ],
    "best_practices": [
      "Always use indexed BAM files for random access operations to improve performance",
      "Remember pysam uses 0-based coordinates while VCF files use 1-based coordinates",
      "Use pileup() for column-wise coverage analysis instead of repeated fetch() calls"
    ],
    "anti_patterns": [
      "Loading entire BAM files into memory instead of using iterator-based processing",
      "Ignoring coordinate system differences between pysam and VCF file formats",
      "Processing large files without creating index files for random access"
    ],
    "faq": [
      {
        "question": "What is the difference between SAM and BAM files?",
        "answer": "SAM is a human-readable text format for alignment data. BAM is the compressed binary version that enables efficient random access and smaller file sizes."
      },
      {
        "question": "Do I need to install samtools separately?",
        "answer": "No, pysam includes bindings to samtools and bcftools commands. The underlying htslib library is included with pysam."
      },
      {
        "question": "How do I create an index for my BAM file?",
        "answer": "Use pysam.index('your_file.bam') to create the .bai index file. This enables fast region-based queries."
      },
      {
        "question": "Can pysam filter reads by mapping quality?",
        "answer": "Yes, use the quality parameter in fetch() or filter reads manually using the mapping_quality attribute of AlignedSegment objects."
      },
      {
        "question": "What coordinate system does pysam use?",
        "answer": "Pysam uses 0-based, half-open coordinates for programmatic access. However, region strings in fetch() use 1-based coordinates to match samtools convention."
      },
      {
        "question": "How do I extract variants overlapping a specific gene?",
        "answer": "Use pysam.TabixFile to open a BED file with gene coordinates, then use vcf.fetch() with those coordinates to get overlapping variants."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "alignment_files.md",
          "type": "file",
          "path": "references/alignment_files.md",
          "lines": 281
        },
        {
          "name": "common_workflows.md",
          "type": "file",
          "path": "references/common_workflows.md",
          "lines": 521
        },
        {
          "name": "sequence_files.md",
          "type": "file",
          "path": "references/sequence_files.md",
          "lines": 408
        },
        {
          "name": "variant_files.md",
          "type": "file",
          "path": "references/variant_files.md",
          "lines": 366
        }
      ]
    },
    {
      "name": "EVALUATION_OUTPUT.json",
      "type": "file",
      "path": "EVALUATION_OUTPUT.json",
      "lines": 191
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 265
    }
  ]
}
