{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T14:14:41.098Z",
    "slug": "aayushbaniya2006-credits-handler",
    "source_url": "https://github.com/AayushBaniya2006/blinkfund/tree/main/.claude/skills/credits-handler",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d285f2e4629541b7d1cd52ad79d5dc81360c544ec949ea71666a7d393f73f17d",
    "tree_hash": "ccad0a70b709d1809ddb0cd77a2a29313f37008a64f1e339e32d032d72bd1bde"
  },
  "skill": {
    "name": "credits-handler",
    "description": "Manage the credit system (allocation, purchasing, usage). Use when adding credit types, configuring pricing, or building credit UI.",
    "summary": "Manage the credit system (allocation, purchasing, usage). Use when adding credit types, configuring ...",
    "icon": "ðŸ’³",
    "version": "1.0.0",
    "author": "AayushBaniya2006",
    "license": "MIT",
    "category": "data",
    "tags": [
      "credits",
      "payments",
      "stripe",
      "pricing"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill contains only documentation files (SKILL.md and reference.md). There is no executable code, scripts, network operations, or file system access. The static findings are false positives caused by the scanner misinterpreting markdown code fences as shell backtick execution and hash identifiers as C2 keywords. The previous audit correctly assessed this skill as safe.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "reference.md",
            "line_start": 4,
            "line_end": 4
          },
          {
            "file": "reference.md",
            "line_start": 5,
            "line_end": 5
          },
          {
            "file": "reference.md",
            "line_start": 8,
            "line_end": 8
          },
          {
            "file": "reference.md",
            "line_start": 9,
            "line_end": 9
          },
          {
            "file": "reference.md",
            "line_start": 11,
            "line_end": 11
          },
          {
            "file": "reference.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "reference.md",
            "line_start": 15,
            "line_end": 15
          },
          {
            "file": "reference.md",
            "line_start": 16,
            "line_end": 16
          },
          {
            "file": "reference.md",
            "line_start": 19,
            "line_end": 19
          },
          {
            "file": "reference.md",
            "line_start": 19,
            "line_end": 19
          },
          {
            "file": "reference.md",
            "line_start": 19,
            "line_end": 19
          },
          {
            "file": "reference.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "reference.md",
            "line_start": 21,
            "line_end": 21
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 15,
            "line_end": 15
          },
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 22
          },
          {
            "file": "SKILL.md",
            "line_start": 22,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 25
          },
          {
            "file": "SKILL.md",
            "line_start": 25,
            "line_end": 41
          },
          {
            "file": "SKILL.md",
            "line_start": 41,
            "line_end": 43
          },
          {
            "file": "SKILL.md",
            "line_start": 43,
            "line_end": 47
          },
          {
            "file": "SKILL.md",
            "line_start": 47,
            "line_end": 49
          },
          {
            "file": "SKILL.md",
            "line_start": 49,
            "line_end": 50
          },
          {
            "file": "SKILL.md",
            "line_start": 50,
            "line_end": 53
          },
          {
            "file": "SKILL.md",
            "line_start": 53,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 106
          },
          {
            "file": "SKILL.md",
            "line_start": 106,
            "line_end": 122
          },
          {
            "file": "SKILL.md",
            "line_start": 122,
            "line_end": 126
          },
          {
            "file": "SKILL.md",
            "line_start": 126,
            "line_end": 128
          },
          {
            "file": "SKILL.md",
            "line_start": 128,
            "line_end": 129
          },
          {
            "file": "SKILL.md",
            "line_start": 129,
            "line_end": 132
          },
          {
            "file": "SKILL.md",
            "line_start": 132,
            "line_end": 140
          },
          {
            "file": "SKILL.md",
            "line_start": 140,
            "line_end": 143
          },
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 157
          },
          {
            "file": "SKILL.md",
            "line_start": 157,
            "line_end": 164
          },
          {
            "file": "SKILL.md",
            "line_start": 164,
            "line_end": 165
          },
          {
            "file": "SKILL.md",
            "line_start": 165,
            "line_end": 166
          },
          {
            "file": "SKILL.md",
            "line_start": 166,
            "line_end": 166
          },
          {
            "file": "SKILL.md",
            "line_start": 166,
            "line_end": 166
          },
          {
            "file": "SKILL.md",
            "line_start": 166,
            "line_end": 167
          },
          {
            "file": "SKILL.md",
            "line_start": 167,
            "line_end": 170
          },
          {
            "file": "SKILL.md",
            "line_start": 170,
            "line_end": 170
          },
          {
            "file": "SKILL.md",
            "line_start": 170,
            "line_end": 170
          },
          {
            "file": "SKILL.md",
            "line_start": 170,
            "line_end": 171
          },
          {
            "file": "SKILL.md",
            "line_start": 171,
            "line_end": 175
          },
          {
            "file": "SKILL.md",
            "line_start": 175,
            "line_end": 177
          },
          {
            "file": "SKILL.md",
            "line_start": 177,
            "line_end": 190
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 398,
    "audit_model": "claude",
    "audited_at": "2026-01-16T14:14:41.098Z"
  },
  "content": {
    "user_title": "Implement Credit System for AI Apps",
    "value_statement": "Building a credit system from scratch is complex and error-prone. This skill provides ready-to-use patterns for configuring credit types, pricing slabs, and React hooks for purchasing and balance display.",
    "seo_keywords": [
      "credits system",
      "AI credits",
      "Claude Code",
      "pricing implementation",
      "Stripe credits",
      "credit allocation",
      "usage tracking",
      "subscription credits",
      "payment integration",
      "credit balance"
    ],
    "actual_capabilities": [
      "Add new credit types with pricing configuration",
      "Implement credit purchase UI with useBuyCredits hook",
      "Display user credit balances with useCredits hook",
      "Configure pricing slabs and dynamic calculators",
      "Handle credit allocation on plan changes",
      "Validate and deduct credits before operations"
    ],
    "limitations": [
      "Requires existing database schema for credit transactions",
      "Does not include payment processor integration code",
      "Assumes React/Next.js application structure",
      "Credit pricing must be configured manually in config.ts"
    ],
    "use_cases": [
      {
        "target_user": "SaaS Developers",
        "title": "Build Credit-Based Pricing",
        "description": "Implement pay-per-use pricing for AI features like image generation or API access"
      },
      {
        "target_user": "Startup Teams",
        "title": "Subscription Bonus Credits",
        "description": "Allocate credits to users when they subscribe to different plan tiers"
      },
      {
        "target_user": "Marketplace Builders",
        "title": "Multi-Credit System",
        "description": "Support different credit types for various services with individual pricing"
      }
    ],
    "prompt_templates": [
      {
        "title": "Add New Credit Type",
        "scenario": "Creating a new credit type",
        "prompt": "Add a new credit type called [credit_name] with pricing of $0.05 per credit for amounts 1-500 and $0.03 per credit for amounts over 500"
      },
      {
        "title": "Create Purchase UI",
        "scenario": "Building credit purchase component",
        "prompt": "Create a pricing card component that shows credit packages for [credit_type] with packages of 100, 500, and 1000 credits"
      },
      {
        "title": "Check Balance",
        "scenario": "Verifying user has enough credits",
        "prompt": "Write code to check if user has enough [credit_type] credits before allowing them to use [feature], and show an error if not"
      },
      {
        "title": "Allocate on Signup",
        "scenario": "Giving credits to new users",
        "prompt": "Configure the system to give new users 50 free [credit_type] credits when they create an account"
      }
    ],
    "output_examples": [
      {
        "input": "Add a new credit type for audio generation with pricing of $0.02 per unit",
        "output": [
          "Added 'audio_generation' to creditTypeSchema",
          "Configured pricing slabs: 1-200 units at $0.02, 201+ units at $0.015",
          "Created useBuyCredits hook integration",
          "Ready to use: buyCredits('audio_generation', amount)"
        ]
      }
    ],
    "best_practices": [
      "Always use the provided helper functions (addCredits, deductCredits) instead of directly modifying user credit balances",
      "Include a unique paymentId for every credit addition to ensure idempotency and prevent duplicate grants",
      "Check canDeductCredits before performing any paid operation to provide graceful error handling"
    ],
    "anti_patterns": [
      "Directly updating users.credits JSONB field instead of using the atomic helpers",
      "Skipping paymentId for credit allocations, which can lead to duplicate credits",
      "Hardcoding credit prices in components instead of using the centralized config"
    ],
    "faq": [
      {
        "question": "What databases are supported for credit storage?",
        "answer": "The schema uses Drizzle ORM with PostgreSQL JSONB for flexible credit storage."
      },
      {
        "question": "Can I use Lemon Squeezy instead of Stripe?",
        "answer": "Yes, the useBuyCredits hook supports both Stripe and Lemon Squeezy providers."
      },
      {
        "question": "How do credit deductions handle concurrency?",
        "answer": "The canDeductCredits function checks balance atomically before any deduction operation."
      },
      {
        "question": "Is user credit data stored securely?",
        "answer": "Credits are stored in your database. The skill does not access or store any user data externally."
      },
      {
        "question": "Why are my credit prices not calculating correctly?",
        "answer": "Ensure your priceCalculator function returns the total price, not the per-unit price."
      },
      {
        "question": "How is this different from subscription plans?",
        "answer": "Credits provide pay-per-use flexibility while plans offer recurring quotas. Both can be combined."
      }
    ]
  },
  "file_structure": [
    {
      "name": "reference.md",
      "type": "file",
      "path": "reference.md",
      "lines": 23
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 194
    }
  ]
}
