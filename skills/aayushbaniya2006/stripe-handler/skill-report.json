{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T16:32:58.252Z",
    "slug": "aayushbaniya2006-stripe-handler",
    "source_url": "https://github.com/AayushBaniya2006/blinkfund/tree/main/.claude/skills/stripe-handler",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "df5fad5c6737a4afba1be60d343cf6ecf34e06b198cb32208c4e24396ade5cdb",
    "tree_hash": "6258ac448170e32371d87922ecf1facd881e667b87a830572d9cdc237caa37c6"
  },
  "skill": {
    "name": "stripe-handler",
    "description": "Handle Stripe payments, custom checkouts, and webhook fulfillment outside of standard plans/credits.",
    "summary": "Implement custom Stripe payment flows for one-time products, services, and non-standard payment scenarios with webhook handling.",
    "icon": "ðŸ’³",
    "version": "1.0.0",
    "author": "AayushBaniya2006",
    "license": "MIT",
    "tags": [
      "payments",
      "stripe",
      "checkout",
      "webhooks",
      "ecommerce"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "env_access"
    ],
    "category": "coding"
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Static analysis flagged command execution and environment access patterns in documentation. Review shows Stripe CLI examples and standard environment variable guidance with no executable code. No evidence of data exfiltration or malicious intent was found.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "reference.md",
            "line_start": 149,
            "line_end": 159
          },
          {
            "file": "SKILL.md",
            "line_start": 71,
            "line_end": 75
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "reference.md",
            "line_start": 164,
            "line_end": 169
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 40
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "Stripe CLI commands in documentation",
        "description": "Markdown shows Stripe CLI commands for local webhook testing. No command execution occurs in the skill.",
        "locations": [
          {
            "file": "reference.md",
            "line_start": 149,
            "line_end": 159
          },
          {
            "file": "SKILL.md",
            "line_start": 71,
            "line_end": 75
          }
        ]
      },
      {
        "title": "Environment variable references in documentation",
        "description": "Documentation lists required Stripe environment variables and example URLs for configuration. This is standard setup guidance.",
        "locations": [
          {
            "file": "reference.md",
            "line_start": 164,
            "line_end": 169
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 40
          }
        ]
      }
    ],
    "dangerous_patterns": [
      {
        "title": "Heuristic combination in documentation",
        "description": "Static heuristics flagged CLI commands and credential references together. The content is documentation only and does not execute commands or transmit secrets.",
        "locations": [
          {
            "file": "reference.md",
            "line_start": 145,
            "line_end": 169
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 75
          }
        ]
      }
    ],
    "files_scanned": 3,
    "total_lines": 1123,
    "audit_model": "codex",
    "audited_at": "2026-01-21T16:32:58.252Z",
    "risk_factors": [
      "external_commands",
      "env_access"
    ]
  },
  "content": {
    "user_title": "Implement Custom Stripe Payments",
    "value_statement": "Custom payment flows for one time products are complex to implement safely. This skill provides patterns for Stripe checkout sessions, webhook handling, and background processing with Inngest.",
    "seo_keywords": [
      "Stripe custom checkout",
      "Stripe webhook handling",
      "one time payments",
      "payment fulfillment",
      "Inngest workflow",
      "Claude",
      "Codex",
      "Claude Code",
      "Stripe CLI"
    ],
    "actual_capabilities": [
      "Outline a custom checkout session flow for one time products",
      "Describe webhook routing using metadata types",
      "Explain how to offload fulfillment to Inngest background jobs",
      "List required Stripe environment variables for keys and webhook secrets",
      "Provide local webhook testing steps with Stripe CLI"
    ],
    "limitations": [
      "Does not generate UI components or client side Stripe elements",
      "Requires a Stripe account and valid API keys",
      "Does not replace official Stripe API documentation",
      "Assumes a Next.js style backend and may need adaptation for other stacks"
    ],
    "use_cases": [
      {
        "title": "Launch a one time product checkout",
        "description": "Create a server side checkout flow for a digital product with metadata driven fulfillment.",
        "target_user": "Startup developers selling digital goods"
      },
      {
        "title": "Route custom webhook events",
        "description": "Add metadata based routing to separate custom purchases from plan or credit flows.",
        "target_user": "Backend engineers maintaining payment services"
      },
      {
        "title": "Scale fulfillment with background jobs",
        "description": "Move slow fulfillment to Inngest to avoid webhook timeouts and ensure idempotent processing.",
        "target_user": "Platform teams handling high volume payments"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic checkout session",
        "prompt": "Draft a server side Stripe checkout session for a one time $49 product. Include metadata type and productId.",
        "scenario": "Beginner: create a basic checkout"
      },
      {
        "title": "Webhook routing logic",
        "prompt": "Explain how to route checkout.session.completed events using metadata.type and where to place the logic.",
        "scenario": "Intermediate: webhook routing"
      },
      {
        "title": "Background processing plan",
        "prompt": "Design an Inngest workflow for payment fulfillment with idempotency checks and a confirmation email step.",
        "scenario": "Advanced: background jobs"
      },
      {
        "title": "Environment setup checklist",
        "prompt": "List the Stripe environment variables needed for server, client, and webhook verification, and describe where they are used.",
        "scenario": "Setup: configuration review"
      }
    ],
    "output_examples": [
      {
        "input": "Create a checkout for a $99 ebook with metadata type ebook.",
        "output": [
          "Describes required checkout session fields such as mode, customer email, line items, and metadata.",
          "Calls out success and cancel URLs that use NEXT_PUBLIC_APP_URL.",
          "Notes that the server returns the hosted checkout URL to the client."
        ]
      },
      {
        "input": "How do I test webhooks locally?",
        "output": [
          "Lists Stripe CLI steps: login, listen with forward to localhost, then trigger checkout.session.completed.",
          "Explains that the webhook secret from stripe listen should be placed in STRIPE_WEBHOOK_SECRET."
        ]
      }
    ],
    "best_practices": [
      "Use metadata.type to separate custom products from plan and credit flows.",
      "Respond to webhooks quickly and offload slow work to Inngest.",
      "Add idempotency checks before creating orders or granting access."
    ],
    "anti_patterns": [
      "Relying only on product IDs for routing when metadata is available.",
      "Running long database updates directly inside the webhook handler.",
      "Skipping webhook signature verification with STRIPE_WEBHOOK_SECRET."
    ],
    "faq": [
      {
        "question": "When should I use stripe-handler?",
        "answer": "Use it for one time products or custom services that are not standard plans or credit packages."
      },
      {
        "question": "Does this skill create Stripe products for me?",
        "answer": "No. It focuses on checkout, webhooks, and fulfillment logic, not product management in Stripe."
      },
      {
        "question": "How do I prevent duplicate fulfillment?",
        "answer": "Store the Stripe session ID and check for an existing order before fulfilling."
      },
      {
        "question": "What environment variables are required?",
        "answer": "You need STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET, and NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY."
      },
      {
        "question": "Can I use it with subscriptions?",
        "answer": "Yes, but it is optimized for custom flows. Use plans-handler for standard subscription plans."
      },
      {
        "question": "Is Inngest required?",
        "answer": "No. It is recommended for long running fulfillment and high volume events."
      }
    ]
  },
  "file_structure": [
    {
      "name": "reference.md",
      "type": "file",
      "path": "reference.md",
      "lines": 171
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 79
    }
  ]
}
