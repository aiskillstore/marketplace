{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T16:25:29.050Z",
    "slug": "aayushbaniya2006-plans-handler",
    "source_url": "https://github.com/AayushBaniya2006/blinkfund/tree/main/.claude/skills/plans-handler",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "df12712940c9ab49cfbb071167a8152a20bfba738f81d640681f7cc7ef337b83",
    "tree_hash": "44fe3c4db790eebcf777d808ad4cc187021c7abb2cfd0001ecb4c4f9b5240865"
  },
  "skill": {
    "name": "plans-handler",
    "description": "Manage subscription plans, pricing, and quotas. Use when adding plan features, updating limits, or building pricing pages.",
    "summary": "Manage subscription plans, pricing, and quotas. Use when adding plan features, updating limits, or building pricing pages.",
    "category": "productivity",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "AayushBaniya2006",
    "license": "MIT",
    "tags": [
      "subscriptions",
      "pricing",
      "quotas",
      "plans"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 29 static findings are false positives. The backtick patterns are markdown code fences, not shell execution. Network and filesystem references are JSON metadata fields. No actual security risks detected in skill code.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 431,
    "audit_model": "claude",
    "audited_at": "2026-01-21T16:25:29.050Z"
  },
  "content": {
    "user_title": "Manage Subscription Plans and Pricing",
    "value_statement": "Managing subscription plans and quotas across database, validation, and UI layers is error-prone and time-consuming. This skill provides a structured workflow for adding plan features, updating limits, and building consistent pricing pages.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "subscription plans",
      "pricing management",
      "quota limits",
      "pricing table",
      "subscription billing",
      "plan management"
    ],
    "actual_capabilities": [
      "Add new quota limits to database schema, validation, and UI forms",
      "Create pricing tables that fetch plans via API and display features",
      "Access user subscription plans on client and server side",
      "Maintain consistency between database, validation, and form schemas",
      "Generate subscription URLs for different payment providers"
    ],
    "limitations": [
      "Does not create or modify payment provider accounts (Stripe, PayPal)",
      "Does not handle actual billing transactions or webhooks",
      "Does not migrate existing plans between providers",
      "Requires user to configure plan settings via dashboard UI"
    ],
    "use_cases": [
      {
        "title": "Add New Quota to Subscription Plans",
        "description": "Add a new usage-based limit like 'max_projects' or 'storage_gb' across database schema, form validation, and admin UI components.",
        "target_user": "Backend developers extending subscription features"
      },
      {
        "title": "Build Pricing Page",
        "description": "Create a pricing table component that displays available plans, features, and subscription buttons using the plans API.",
        "target_user": "Frontend developers building pricing pages"
      },
      {
        "title": "Check User Subscription Status",
        "description": "Retrieve the current user's plan and quota usage on the client using SWR hooks or on the server with authentication wrappers.",
        "target_user": "Full-stack developers implementing access control"
      }
    ],
    "prompt_templates": [
      {
        "title": "Add New Plan Limit",
        "prompt": "I need to add a new quota limit called '{quota_name}' to our subscription plans. Follow the plans-handler workflow: update the database schema, add validation, and create the UI input.",
        "scenario": "When adding a new usage-based limit to subscription plans"
      },
      {
        "title": "Create Pricing Component",
        "prompt": "Create a pricing table component for our subscription plans. It should fetch plans via API, display features from plan.quotas, and include subscribe buttons with proper URLs.",
        "scenario": "When building a pricing page for customers"
      },
      {
        "title": "Get User Plan Info",
        "prompt": "Show me how to access the current user's subscription plan. I need examples for both client-side (SWR) and server-side (withAuthRequired) implementations.",
        "target_user": "When implementing feature access based on subscription"
      },
      {
        "title": "Sync Plan Schemas",
        "prompt": "Audit our plan-related files and ensure the database schema, validation schema, and form schema are all in sync. Report any mismatches.",
        "scenario": "When maintaining schema consistency"
      }
    ],
    "output_examples": [
      {
        "input": "Add a new 'api_calls' quota to our plans",
        "output": "I'll add the 'api_calls' quota following the plans-handler workflow:\n\n1. **DB Schema**: Add field to `quotaSchema` in `src/db/schema/plans.ts`\n2. **Validation**: Add field to `planFormSchema` in `src/lib/validations/plan.schema.ts`\n3. **UI**: Add input to `src/components/forms/plan-form.tsx`\n4. **Data**: Please update the plan via `/super-admin/plans` dashboard"
      },
      {
        "input": "How do I check what plan the current user has?",
        "output": "**Client-side (React/SWR):**\n```tsx\nimport useCurrentPlan from '@/hooks/useCurrentPlan'\nconst { data: plan } = useCurrentPlan()\n```\n\n**Server-side:**\n```ts\nimport { withAuthRequired } from '@/lib/middleware'\nimport { getCurrentPlan } from '@/lib/plans'\n\n// Use withAuthRequired wrapper, then call getCurrentPlan()\n```"
      }
    ],
    "best_practices": [
      "Always use the Super Admin dashboard UI for plan changes instead of manual database seeding",
      "Keep database schema, validation schema, and form schema in sync when adding quotas",
      "Use usage-based quota names like 'images' rather than time-bound names like 'monthly_images'"
    ],
    "anti_patterns": [
      "Manually seeding plans directly in the database instead of using the dashboard",
      "Adding a quota to only one layer (DB, validation, or UI) and forgetting others",
      "Hardcoding plan IDs or provider IDs instead of configuring them in the plan dashboard"
    ],
    "faq": [
      {
        "question": "What quota naming convention should I use?",
        "answer": "Use usage-based names like 'images' or 'storage_gb' rather than time-bound names like 'monthly_images'. This makes quotas more flexible for different billing periods."
      },
      {
        "question": "How do I add a new quota limit?",
        "answer": "Add the field to three places: quotaSchema in database schema, planFormSchema in validation, and the plan form UI. Then update the plan via the Super Admin dashboard."
      },
      {
        "question": "How do I access a user's plan on the client?",
        "answer": "Use the useCurrentPlan() hook with SWR. For server-side access, use the withAuthRequired middleware wrapper and call getCurrentPlan()."
      },
      {
        "question": "Can I create plans manually in the database?",
        "answer": "No. Always use the Super Admin dashboard (/super-admin/plans) to create or modify plans. Manual seeding can cause inconsistencies."
      },
      {
        "question": "How do I create a subscribe button?",
        "answer": "Use the getSubscribeUrl helper function from src/lib/plans/getSubscribeUrl.ts with parameters: { codename, type, provider }."
      },
      {
        "question": "What if my schemas are out of sync?",
        "answer": "Audit the three files: src/db/schema/plans.ts, src/lib/validations/plan.schema.ts, and src/components/forms/plan-form.tsx. Ensure all new quotas are added to each."
      }
    ]
  },
  "file_structure": [
    {
      "name": "reference.md",
      "type": "file",
      "path": "reference.md",
      "lines": 21
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 30
    }
  ]
}
