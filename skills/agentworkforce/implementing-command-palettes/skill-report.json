{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T14:46:41.897Z",
    "slug": "agentworkforce-implementing-command-palettes",
    "source_url": "https://github.com/AgentWorkforce/relay/tree/main/.claude/skills/implementing-command-palettes",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "9d05b15a6cb28d5ecbd92d5eda3c68c533c0fd72464db2a7588e5c22af46d5ef",
    "tree_hash": "9454686c80e547b157c72630da1e35a7e40d845cbd9dc9356ff4e2cef55d318b"
  },
  "skill": {
    "name": "implementing-command-palettes",
    "description": "Use when building Cmd+K command palettes in React - covers keyboard navigation with arrow keys, keeping selected items in view with scrollIntoView, filtering with shortcut matching, and preventing infinite re-renders from reference instability",
    "summary": "Use when building Cmd+K command palettes in React - covers keyboard navigation with arrow keys, keep...",
    "icon": "⌨️",
    "version": "1.0.0",
    "author": "AgentWorkforce",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "react",
      "ui-components",
      "accessibility",
      "keyboard-navigation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing markdown and React/TypeScript code examples. No executable code, scripts, network calls, or file operations. Static findings are false positives triggered by documentation patterns: template literal backticks misidentified as shell execution, 'hash' content identifiers misidentified as weak crypto, 'command' terms misidentified as C2 keywords. No security risk present.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 25,
            "line_end": 25
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 54
          },
          {
            "file": "SKILL.md",
            "line_start": 54,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 65
          },
          {
            "file": "SKILL.md",
            "line_start": 65,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 79
          },
          {
            "file": "SKILL.md",
            "line_start": 79,
            "line_end": 83
          },
          {
            "file": "SKILL.md",
            "line_start": 83,
            "line_end": 119
          },
          {
            "file": "SKILL.md",
            "line_start": 119,
            "line_end": 122
          },
          {
            "file": "SKILL.md",
            "line_start": 122,
            "line_end": 123
          },
          {
            "file": "SKILL.md",
            "line_start": 123,
            "line_end": 124
          },
          {
            "file": "SKILL.md",
            "line_start": 124,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 155
          },
          {
            "file": "SKILL.md",
            "line_start": 155,
            "line_end": 159
          },
          {
            "file": "SKILL.md",
            "line_start": 159,
            "line_end": 175
          },
          {
            "file": "SKILL.md",
            "line_start": 175,
            "line_end": 177
          },
          {
            "file": "SKILL.md",
            "line_start": 177,
            "line_end": 178
          },
          {
            "file": "SKILL.md",
            "line_start": 178,
            "line_end": 179
          },
          {
            "file": "SKILL.md",
            "line_start": 179,
            "line_end": 180
          },
          {
            "file": "SKILL.md",
            "line_start": 180,
            "line_end": 180
          },
          {
            "file": "SKILL.md",
            "line_start": 180,
            "line_end": 184
          },
          {
            "file": "SKILL.md",
            "line_start": 184,
            "line_end": 210
          },
          {
            "file": "SKILL.md",
            "line_start": 210,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 213,
            "line_end": 213
          },
          {
            "file": "SKILL.md",
            "line_start": 213,
            "line_end": 221
          },
          {
            "file": "SKILL.md",
            "line_start": 221,
            "line_end": 232
          },
          {
            "file": "SKILL.md",
            "line_start": 232,
            "line_end": 236
          },
          {
            "file": "SKILL.md",
            "line_start": 236,
            "line_end": 254
          },
          {
            "file": "SKILL.md",
            "line_start": 254,
            "line_end": 260
          },
          {
            "file": "SKILL.md",
            "line_start": 260,
            "line_end": 267
          },
          {
            "file": "SKILL.md",
            "line_start": 267,
            "line_end": 268
          },
          {
            "file": "SKILL.md",
            "line_start": 268,
            "line_end": 287
          },
          {
            "file": "SKILL.md",
            "line_start": 287,
            "line_end": 291
          },
          {
            "file": "SKILL.md",
            "line_start": 291,
            "line_end": 311
          },
          {
            "file": "SKILL.md",
            "line_start": 311,
            "line_end": 315
          },
          {
            "file": "SKILL.md",
            "line_start": 315,
            "line_end": 322
          },
          {
            "file": "SKILL.md",
            "line_start": 322,
            "line_end": 323
          },
          {
            "file": "SKILL.md",
            "line_start": 323,
            "line_end": 323
          },
          {
            "file": "SKILL.md",
            "line_start": 323,
            "line_end": 324
          },
          {
            "file": "SKILL.md",
            "line_start": 324,
            "line_end": 326
          },
          {
            "file": "SKILL.md",
            "line_start": 326,
            "line_end": 326
          },
          {
            "file": "SKILL.md",
            "line_start": 326,
            "line_end": 327
          },
          {
            "file": "SKILL.md",
            "line_start": 327,
            "line_end": 327
          },
          {
            "file": "SKILL.md",
            "line_start": 327,
            "line_end": 328
          },
          {
            "file": "SKILL.md",
            "line_start": 328,
            "line_end": 329
          },
          {
            "file": "SKILL.md",
            "line_start": 329,
            "line_end": 329
          },
          {
            "file": "SKILL.md",
            "line_start": 329,
            "line_end": 330
          },
          {
            "file": "SKILL.md",
            "line_start": 330,
            "line_end": 330
          },
          {
            "file": "SKILL.md",
            "line_start": 330,
            "line_end": 332
          },
          {
            "file": "SKILL.md",
            "line_start": 332,
            "line_end": 333
          },
          {
            "file": "SKILL.md",
            "line_start": 333,
            "line_end": 333
          },
          {
            "file": "SKILL.md",
            "line_start": 333,
            "line_end": 333
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 522,
    "audit_model": "claude",
    "audited_at": "2026-01-16T14:46:41.897Z"
  },
  "content": {
    "user_title": "Build accessible command palettes in React",
    "value_statement": "Command palettes need careful keyboard handling and scroll behavior to feel responsive. This skill provides battle-tested patterns for arrow navigation, scroll-into-view, shortcut matching, and preventing infinite re-renders.",
    "seo_keywords": [
      "cmd+k palette react",
      "keyboard navigation react",
      "command palette ui",
      "react accessibility",
      "scrollintoview react",
      "claude code",
      "claude",
      "codex",
      "react components",
      "keyboard shortcuts"
    ],
    "actual_capabilities": [
      "Implement arrow key navigation with index tracking and bounds clamping",
      "Keep selected items visible using scrollIntoView with nearest block option",
      "Filter commands by label text AND keyboard shortcuts with space stripping",
      "Prevent infinite re-renders using stable icon references and useCallback",
      "Handle keyboard events with window listeners and input autoFocus",
      "Structure command items with action, navigation, file, and PR types"
    ],
    "limitations": [
      "Provides patterns only, requires React project setup",
      "Does not include pre-built component library",
      "Does not handle mobile touch interactions",
      "Focused on keyboard navigation, not voice or switch access"
    ],
    "use_cases": [
      {
        "target_user": "Frontend developers",
        "title": "Build editor command palettes",
        "description": "Create VS Code-style command palettes for text editors with keyboard-driven item selection."
      },
      {
        "target_user": "SaaS application teams",
        "title": "Add site-wide quick actions",
        "description": "Implement Cmd+K menus for quick navigation, search, and actions across web applications."
      },
      {
        "target_user": "React library authors",
        "title": "Create palette components",
        "description": "Build reusable command palette components with proper accessibility and performance patterns."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic palette",
        "scenario": "Building a simple command palette",
        "prompt": "I need to build a command palette with arrow key navigation. Show me the keyboard event handling with selectedIndex tracking and how to prevent page scrolling on arrow keys."
      },
      {
        "title": "Scroll behavior",
        "scenario": "Keeping items visible during navigation",
        "prompt": "My command palette list is long. How do I keep the selected item visible using scrollIntoView with the nearest block option?"
      },
      {
        "title": "Shortcut matching",
        "scenario": "Filtering by keyboard shortcuts",
        "prompt": "I want users to type shortcut sequences like 'gd' to match commands with keyboard shortcuts like 'g d'. Show me the filtering logic with space stripping."
      },
      {
        "title": "Prevent re-renders",
        "scenario": "Fixing infinite re-render loops",
        "prompt": "My command palette causes maximum update depth exceeded errors. Show me how to use stable icon references, useCallback, and label-based change detection."
      }
    ],
    "output_examples": [
      {
        "input": "Build a command palette with arrow navigation and scroll behavior",
        "output": [
          "Arrow navigation uses selectedIndex state with Math.min/max for bounds",
          "scrollIntoView with block: 'nearest' keeps items visible without jarring jumps",
          "Window-level keydown listener handles arrows while input handles text",
          "Use autoFocus on input instead of setTimeout focus",
          "Wrap palette in conditional component to prevent effects running when closed"
        ]
      },
      {
        "input": "How do I filter commands by keyboard shortcut patterns like typing 'gd' for 'g d'",
        "output": [
          "Strip spaces from shortcut strings before matching",
          "Use .replace(/\\s+/g, '') to normalize 'g d' to 'gd'",
          "Match normalized shortcut against query using startsWith or includes",
          "Reset selectedIndex to 0 when query changes",
          "Handle both label matching and shortcut matching in filter function"
        ]
      },
      {
        "input": "My React component causes infinite re-render loop with command palette",
        "output": [
          "Define icon elements as constants outside the component function",
          "Use useCallback for action handlers to maintain stable references",
          "Avoid undefined for disabled actions - use a noop constant instead",
          "Use label-based change detection instead of object reference comparison",
          "Memoize command IDs based on labels joined with separator"
        ]
      }
    ],
    "best_practices": [
      "Use wrapper component pattern to ensure effects only run when palette is visible",
      "Define icon elements outside components to maintain stable references",
      "Reset selectedIndex to zero when query changes to start from top of filtered results"
    ],
    "anti_patterns": [
      "Placing conditional return after useEffect hooks causes effects to run when palette is closed",
      "Using block: 'center' in scrollIntoView causes jarring scroll even when item is already visible",
      "Defining icons inside useMemo creates new elements every render triggering re-render loops"
    ],
    "faq": [
      {
        "question": "What React hooks are required for command palettes?",
        "answer": "useState for selectedIndex, useEffect for keyboard listeners, useRef for item references, useCallback and useMemo for stable references."
      },
      {
        "question": "How many items can a command palette handle efficiently?",
        "answer": "Hundreds of items work well. For thousands, consider virtualization but the core patterns remain the same."
      },
      {
        "question": "Does this work with React 18 concurrent features?",
        "answer": "Yes. The patterns use standard hooks that work correctly with React 18 concurrent rendering and useEffect timing."
      },
      {
        "question": "Is user data sent anywhere when using these patterns?",
        "answer": "No. These are purely local React patterns for UI behavior. No network calls or data transmission occur."
      },
      {
        "question": "Why does my palette freeze when I type fast?",
        "answer": "Likely re-render loop from unstable references. Define icons outside component and use useCallback for action handlers."
      },
      {
        "question": "How is this different from libraries like cmdk?",
        "answer": "This skill teaches underlying patterns so you understand why things work. Libraries handle edge cases; this skill teaches you to build or customize them."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 345
    }
  ]
}
