{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-21T15:06:22.550Z",
    "slug": "cleanexpo-api-endpoint-creation",
    "source_url": "https://github.com/CleanExpo/Unite-Hub/tree/main/.claude/skills/api-endpoint-creation",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "ad65469eebd45ef49ce53b58c31c70c83d131718a6322392ec53329ab46b9c32",
    "tree_hash": "c7edc5bac3d1da332027934dbf21c96adc3e8be94035a4afdbf0bb216937f914"
  },
  "skill": {
    "name": "api-endpoint-creation",
    "description": "Next.js 15+ API endpoint creation patterns with Supabase and workspace validation",
    "summary": "Create secure Next.js 15+ API routes with Supabase integration and multi-tenant workspace isolation",
    "icon": "ðŸ”Œ",
    "version": "1.0.0",
    "author": "CleanExpo",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "Next.js",
      "API routes",
      "Supabase",
      "workspace isolation",
      "TypeScript"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All static findings are false positives. The skill contains standard Next.js API patterns with Supabase integration. HTTP methods (GET/POST), TypeScript code blocks, and standard workspace validation logic were incorrectly flagged by the static scanner. No malicious patterns present.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 15,
            "line_end": 48
          },
          {
            "file": "SKILL.md",
            "line_start": 48,
            "line_end": 54
          },
          {
            "file": "SKILL.md",
            "line_start": 54,
            "line_end": 91
          },
          {
            "file": "SKILL.md",
            "line_start": 91,
            "line_end": 97
          },
          {
            "file": "SKILL.md",
            "line_start": 97,
            "line_end": 103
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 442,
    "audit_model": "claude",
    "audited_at": "2026-01-21T15:06:22.550Z"
  },
  "content": {
    "user_title": "Create Secure Next.js API Endpoints",
    "value_statement": "Building multi-tenant API endpoints requires careful workspace isolation and authentication. This skill provides ready-to-use patterns for Next.js 15+ API routes with Supabase integration and proper workspace validation.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "Next.js API routes",
      "Supabase API",
      "workspace isolation",
      "TypeScript API endpoints",
      "multi-tenant API",
      "API route patterns",
      "Next.js 15"
    ],
    "actual_capabilities": [
      "Generate GET and POST API endpoint patterns for Next.js 15+",
      "Implement Supabase server-side authentication and database access",
      "Add workspace validation to ensure multi-tenant data isolation",
      "Use standardized response helpers for consistent API output",
      "Wrap endpoints with error boundary handlers for graceful error management"
    ],
    "limitations": [
      "Requires existing Supabase setup and configured helper utilities",
      "Does not generate authentication logic from scratch",
      "Assumes workspace_id is passed via query parameters",
      "Focused on REST patterns, does not cover GraphQL or WebSocket endpoints"
    ],
    "use_cases": [
      {
        "title": "Build Multi-Tenant REST APIs",
        "description": "Create API endpoints that automatically filter data by workspace_id, ensuring each organization only accesses their own data in a shared database.",
        "target_user": "Backend developers building SaaS applications"
      },
      {
        "title": "Standardize API Response Formats",
        "description": "Apply consistent successResponse and errorResponse patterns across all endpoints to create a uniform API interface for frontend consumers.",
        "target_user": "Full-stack developers maintaining API consistency"
      },
      {
        "title": "Secure API Routes with Error Handling",
        "description": "Wrap API handlers with error boundaries to catch exceptions, log errors, and return appropriate HTTP status codes instead of exposing stack traces.",
        "target_user": "Security-conscious developers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic GET Endpoint",
        "prompt": "Create a Next.js 15 GET API endpoint in src/app/api/items/route.ts that retrieves items from Supabase filtered by workspace_id from query params.",
        "scenario": "When you need a simple read-only endpoint to fetch data"
      },
      {
        "title": "POST Endpoint with Validation",
        "prompt": "Create a POST endpoint that validates input fields, creates a new record in Supabase with workspace_id and user ID, and returns the created record with 201 status.",
        "scenario": "When you need to create new resources through the API"
      },
      {
        "title": "Full CRUD Pattern",
        "prompt": "Generate a complete API route with GET, POST, PUT, and DELETE handlers that all validate workspace access before performing database operations.",
        "scenario": "When building a full resource management API"
      },
      {
        "title": "Custom Error Handling",
        "prompt": "Create an API endpoint that handles specific error cases with custom error messages, logs errors for monitoring, and returns appropriate client-friendly error responses.",
        "scenario": "When you need detailed error reporting and logging"
      }
    ],
    "output_examples": [
      {
        "input": "Create a GET endpoint for /api/projects that returns projects filtered by workspace",
        "output": [
          "Created src/app/api/projects/route.ts",
          "",
          "Features:",
          "â€¢ workspace_id validation from query params",
          "â€¢ Supabase server client integration",
          "â€¢ Success/error response helpers",
          "â€¢ Error boundary wrapper"
        ]
      },
      {
        "input": "Create a POST endpoint to add new tasks",
        "output": [
          "Added POST handler to src/app/api/tasks/route.ts",
          "",
          "Validation: name field required",
          "Auto-populates: workspace_id, created_by",
          "Returns: 201 with created record"
        ]
      }
    ],
    "best_practices": [
      "Always validate workspace_id before any database operations to prevent cross-tenant data access.",
      "Use the withErrorBoundary wrapper on every endpoint to ensure uncaught errors return proper HTTP responses.",
      "Filter ALL Supabase queries by workspace_id without exception to maintain multi-tenant security."
    ],
    "anti_patterns": [
      "Skipping workspace validation for internal endpoints - all endpoints need validation.",
      "Hardcoding table names - use dynamic table names from configuration when possible.",
      "Returning raw database errors - always catch errors and return sanitized messages."
    ],
    "faq": [
      {
        "question": "What workspace_id validation library should I use?",
        "answer": "This skill uses the validateUserAndWorkspace helper which should be imported from your project's lib/api-helpers module."
      },
      {
        "question": "Can I use this for DELETE or PUT endpoints?",
        "answer": "Yes, the same patterns apply. Create handlers for DELETE, PUT, or PATCH using the same workspace validation and error handling approach."
      },
      {
        "question": "Do I need to install any dependencies?",
        "answer": "This skill assumes you already have @supabase/supabase-js installed and have configured getSupabaseServer in your lib/supabase module."
      },
      {
        "question": "How do I handle pagination?",
        "answer": "Add pagination parameters to the query and use Supabase's .range() method. The workspace_id filter must still be applied first."
      },
      {
        "question": "Can this work with Edge runtime?",
        "answer": "The current pattern uses Node.js runtime features. For Edge runtime, you would need to use @supabase/ssr and adjust the authentication approach."
      },
      {
        "question": "How do I test these endpoints?",
        "answer": "Ensure your test environment includes mock workspace validation and Supabase responses. Use the workspace_id from test fixtures to verify isolation."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 121
    }
  ]
}
