{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T21:31:27.161Z",
    "slug": "cleanexpo-backend-agent",
    "source_url": "https://github.com/CleanExpo/Unite-Hub/tree/main/.claude/skills/backend",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "ea7c063473bec850d76e16f0d42df590695375e6e4ab34f8ecdc6a2c1a1ced80",
    "tree_hash": "e71ec608820bf190c0fc0309bdee58f24fb7410b4d42f5342cd2c791d17eb66c"
  },
  "skill": {
    "name": "backend-agent",
    "description": "Handles backend/API/database work for Unite-Hub. Implements Next.js API routes, Supabase database operations, RLS policies, authentication, and third-party integrations (Gmail, Stripe).",
    "summary": "Handles backend/API/database work for Unite-Hub. Implements Next.js API routes, Supabase database op...",
    "icon": "ðŸ”§",
    "version": "1.0.0",
    "author": "CleanExpo",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "backend",
      "api",
      "database",
      "nextjs",
      "supabase"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "filesystem",
      "scripts",
      "external_commands",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill with no executable code. The static analyzer flagged 127 potential issues, but ALL are false positives. The skill contains best practices and implementation guides for backend development with proper security measures including workspace isolation, authentication, and RLS policies. All flagged patterns (shell backticks, environment access, C2 keywords) are benign documentation artifacts or legitimate API integration patterns.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 279,
            "line_end": 279
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 38,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 47
          },
          {
            "file": "SKILL.md",
            "line_start": 47,
            "line_end": 51
          },
          {
            "file": "SKILL.md",
            "line_start": 51,
            "line_end": 65
          },
          {
            "file": "SKILL.md",
            "line_start": 65,
            "line_end": 131
          },
          {
            "file": "SKILL.md",
            "line_start": 131,
            "line_end": 137
          },
          {
            "file": "SKILL.md",
            "line_start": 137,
            "line_end": 149
          },
          {
            "file": "SKILL.md",
            "line_start": 149,
            "line_end": 152
          },
          {
            "file": "SKILL.md",
            "line_start": 152,
            "line_end": 153
          },
          {
            "file": "SKILL.md",
            "line_start": 153,
            "line_end": 155
          },
          {
            "file": "SKILL.md",
            "line_start": 155,
            "line_end": 157
          },
          {
            "file": "SKILL.md",
            "line_start": 157,
            "line_end": 159
          },
          {
            "file": "SKILL.md",
            "line_start": 159,
            "line_end": 219
          },
          {
            "file": "SKILL.md",
            "line_start": 219,
            "line_end": 221
          },
          {
            "file": "SKILL.md",
            "line_start": 221,
            "line_end": 223
          },
          {
            "file": "SKILL.md",
            "line_start": 223,
            "line_end": 234
          },
          {
            "file": "SKILL.md",
            "line_start": 234,
            "line_end": 240
          },
          {
            "file": "SKILL.md",
            "line_start": 240,
            "line_end": 254
          },
          {
            "file": "SKILL.md",
            "line_start": 254,
            "line_end": 258
          },
          {
            "file": "SKILL.md",
            "line_start": 258,
            "line_end": 272
          },
          {
            "file": "SKILL.md",
            "line_start": 272,
            "line_end": 277
          },
          {
            "file": "SKILL.md",
            "line_start": 277,
            "line_end": 281
          },
          {
            "file": "SKILL.md",
            "line_start": 281,
            "line_end": 289
          },
          {
            "file": "SKILL.md",
            "line_start": 289,
            "line_end": 331
          },
          {
            "file": "SKILL.md",
            "line_start": 331,
            "line_end": 334
          },
          {
            "file": "SKILL.md",
            "line_start": 334,
            "line_end": 335
          },
          {
            "file": "SKILL.md",
            "line_start": 335,
            "line_end": 336
          },
          {
            "file": "SKILL.md",
            "line_start": 336,
            "line_end": 337
          },
          {
            "file": "SKILL.md",
            "line_start": 337,
            "line_end": 338
          },
          {
            "file": "SKILL.md",
            "line_start": 338,
            "line_end": 339
          },
          {
            "file": "SKILL.md",
            "line_start": 339,
            "line_end": 345
          },
          {
            "file": "SKILL.md",
            "line_start": 345,
            "line_end": 381
          },
          {
            "file": "SKILL.md",
            "line_start": 381,
            "line_end": 385
          },
          {
            "file": "SKILL.md",
            "line_start": 385,
            "line_end": 414
          },
          {
            "file": "SKILL.md",
            "line_start": 419,
            "line_end": 426
          },
          {
            "file": "SKILL.md",
            "line_start": 426,
            "line_end": 432
          },
          {
            "file": "SKILL.md",
            "line_start": 432,
            "line_end": 442
          },
          {
            "file": "SKILL.md",
            "line_start": 442,
            "line_end": 446
          },
          {
            "file": "SKILL.md",
            "line_start": 446,
            "line_end": 462
          },
          {
            "file": "SKILL.md",
            "line_start": 462,
            "line_end": 468
          },
          {
            "file": "SKILL.md",
            "line_start": 468,
            "line_end": 471
          },
          {
            "file": "SKILL.md",
            "line_start": 471,
            "line_end": 473
          },
          {
            "file": "SKILL.md",
            "line_start": 473,
            "line_end": 478
          },
          {
            "file": "SKILL.md",
            "line_start": 478,
            "line_end": 502
          },
          {
            "file": "SKILL.md",
            "line_start": 502,
            "line_end": 506
          },
          {
            "file": "SKILL.md",
            "line_start": 506,
            "line_end": 509
          },
          {
            "file": "SKILL.md",
            "line_start": 509,
            "line_end": 517
          },
          {
            "file": "SKILL.md",
            "line_start": 517,
            "line_end": 586
          },
          {
            "file": "SKILL.md",
            "line_start": 586,
            "line_end": 602
          },
          {
            "file": "SKILL.md",
            "line_start": 602,
            "line_end": 647
          },
          {
            "file": "SKILL.md",
            "line_start": 647,
            "line_end": 653
          },
          {
            "file": "SKILL.md",
            "line_start": 653,
            "line_end": 663
          },
          {
            "file": "SKILL.md",
            "line_start": 666,
            "line_end": 668
          },
          {
            "file": "SKILL.md",
            "line_start": 668,
            "line_end": 672
          },
          {
            "file": "SKILL.md",
            "line_start": 672,
            "line_end": 678
          },
          {
            "file": "SKILL.md",
            "line_start": 678,
            "line_end": 682
          },
          {
            "file": "SKILL.md",
            "line_start": 682,
            "line_end": 699
          },
          {
            "file": "SKILL.md",
            "line_start": 699,
            "line_end": 741
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 351,
            "line_end": 351
          },
          {
            "file": "SKILL.md",
            "line_start": 352,
            "line_end": 352
          },
          {
            "file": "SKILL.md",
            "line_start": 353,
            "line_end": 353
          },
          {
            "file": "SKILL.md",
            "line_start": 390,
            "line_end": 390
          },
          {
            "file": "SKILL.md",
            "line_start": 351,
            "line_end": 351
          },
          {
            "file": "SKILL.md",
            "line_start": 352,
            "line_end": 352
          },
          {
            "file": "SKILL.md",
            "line_start": 353,
            "line_end": 353
          },
          {
            "file": "SKILL.md",
            "line_start": 390,
            "line_end": 390
          },
          {
            "file": "SKILL.md",
            "line_start": 390,
            "line_end": 390
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 946,
    "audit_model": "claude",
    "audited_at": "2026-01-16T21:31:27.161Z"
  },
  "content": {
    "user_title": "Build secure backend APIs with workspace isolation",
    "value_statement": "Stop building insecure multi-tenant applications. This agent implements proper workspace isolation, authentication, and Row Level Security for Supabase databases.",
    "seo_keywords": [
      "Next.js API routes",
      "Supabase RLS policies",
      "multi-tenant backend",
      "Claude Code backend",
      "workspace isolation",
      "authentication",
      "database security",
      "API development",
      "Codex backend",
      "Supabase database"
    ],
    "actual_capabilities": [
      "Creates Next.js API routes with proper authentication checks",
      "Implements Supabase Row Level Security policies for data isolation",
      "Adds workspace and organization filtering to all database queries",
      "Integrates Gmail API and Stripe payment processing securely",
      "Generates audit logs for all database mutations"
    ],
    "limitations": [
      "Requires Supabase PostgreSQL database with RLS support",
      "Needs Next.js 16+ with App Router architecture",
      "Designed for multi-tenant applications only"
    ],
    "use_cases": [
      {
        "target_user": "SaaS developers",
        "title": "Build multi-tenant APIs",
        "description": "Create secure API endpoints that properly isolate customer data by workspace and organization"
      },
      {
        "target_user": "Backend engineers",
        "title": "Implement RLS policies",
        "description": "Add Row Level Security to Supabase tables with proper user authorization checks"
      },
      {
        "target_user": "Full-stack developers",
        "title": "Add third-party integrations",
        "description": "Integrate Gmail API for email processing and Stripe for payments with proper authentication"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create secure API endpoint",
        "scenario": "Building a new contact management API",
        "prompt": "Create a POST endpoint at /api/contacts that validates workspace_id, checks authentication, and stores new contacts with proper RLS policies"
      },
      {
        "title": "Fix workspace isolation",
        "scenario": "API returning all users instead of workspace-specific",
        "prompt": "Add workspace filtering to this database query and ensure it only returns records for the authenticated user's workspace"
      },
      {
        "title": "Implement Gmail integration",
        "scenario": "Need to fetch and process user emails",
        "prompt": "Create a Gmail API integration that fetches unread emails, processes them through Claude AI, and stores results in the database"
      },
      {
        "title": "Add RLS policies",
        "scenario": "New table needs security policies",
        "prompt": "Create Row Level Security policies for the campaigns table allowing users to only access records in their workspace"
      }
    ],
    "output_examples": [
      {
        "input": "Create a secure API endpoint for contact bulk updates with workspace isolation",
        "output": [
          "Created /api/contacts/bulk-update with POST handler",
          "Added workspace_id validation and authentication checks",
          "Implemented bulk update with proper error handling",
          "Added audit logging for all updates",
          "Tested with multiple workspaces - data properly isolated"
        ]
      },
      {
        "input": "Add workspace filtering to an existing API route that is leaking data",
        "output": [
          "Identified missing workspace filter in query",
          "Added .eq('workspace_id', workspaceId) to all SELECT statements",
          "Added null check for workspaceId parameter",
          "Verified user belongs to the requested workspace",
          "Tested cross-workspace access - properly blocked"
        ]
      }
    ],
    "best_practices": [
      "Always filter queries by workspace_id and organization_id for multi-tenant isolation",
      "Enable RLS policies on every database table as defense in depth",
      "Log all mutations to auditLogs table with user context for compliance"
    ],
    "anti_patterns": [
      "Never skip workspace filtering in multi-tenant applications",
      "Do not expose raw database errors directly to API clients",
      "Avoid hardcoding API keys - use environment variables instead"
    ],
    "faq": [
      {
        "question": "Is this compatible with other databases?",
        "answer": "No, this skill is specifically designed for Supabase PostgreSQL with Row Level Security policies"
      },
      {
        "question": "What are the workspace filtering requirements?",
        "answer": "Every database query must include .eq('workspace_id', workspaceId) and .eq('organization_id', orgId)"
      },
      {
        "question": "Can I integrate with other payment providers?",
        "answer": "Yes, the Stripe integration pattern can be adapted for other providers like PayPal or Square"
      },
      {
        "question": "How does authentication work?",
        "answer": "Uses Supabase Auth with NextAuth.js, validates sessions on every API request"
      },
      {
        "question": "What if my API route needs to be public?",
        "answer": "Explicitly document public endpoints and still validate workspace_id for any data operations"
      },
      {
        "question": "How do I test workspace isolation?",
        "answer": "Create test users in different workspaces and verify they cannot access each other's data"
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 771
    }
  ]
}
