{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T14:19:02.230Z",
    "slug": "0xdarkmatter-sql-patterns",
    "source_url": "https://github.com/0xDarkMatter/claude-mods/tree/main/skills/sql-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "6a742fdb475af5a695755a30d1dae025d9cb1c726fa4c862cf5a220fbc6ded8a",
    "tree_hash": "8c00622505c873466c934728d3dd952b8ef849535c24909549351a59904857c0"
  },
  "skill": {
    "name": "sql-patterns",
    "description": "Quick reference for common SQL patterns, CTEs, window functions, and indexing strategies. Triggers on: sql patterns, cte example, window functions, sql join, index strategy, pagination sql.",
    "summary": "Quick reference for common SQL patterns, CTEs, window functions, and indexing strategies. Triggers o...",
    "icon": "ðŸ—ƒï¸",
    "version": "1.0.0",
    "author": "0xDarkMatter",
    "license": "MIT",
    "category": "data",
    "tags": [
      "sql",
      "database",
      "query-optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill containing SQL reference patterns. No executable code, no file system access beyond reading its own markdown files, no network calls, no command execution. All static findings are false positives caused by the scanner misinterpreting markdown formatting and SQL function names.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "references/indexing-strategies.md",
            "line_start": 11,
            "line_end": 23
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 23,
            "line_end": 29
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 29,
            "line_end": 39
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 39,
            "line_end": 45
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 45,
            "line_end": 57
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 57,
            "line_end": 63
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 63,
            "line_end": 71
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 71,
            "line_end": 77
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 77,
            "line_end": 87
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 87,
            "line_end": 91
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 91,
            "line_end": 98
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 98,
            "line_end": 104
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 104,
            "line_end": 113
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 113,
            "line_end": 117
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 117,
            "line_end": 124
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 124,
            "line_end": 130
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 130,
            "line_end": 142
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 142,
            "line_end": 148
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 148,
            "line_end": 162
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 162,
            "line_end": 168
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 168,
            "line_end": 176
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 176,
            "line_end": 180
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 180,
            "line_end": 188
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 188,
            "line_end": 192
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 192,
            "line_end": 207
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 207,
            "line_end": 213
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 213,
            "line_end": 219
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 219,
            "line_end": 223
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 223,
            "line_end": 234
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 234,
            "line_end": 238
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 238,
            "line_end": 247
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 247,
            "line_end": 253
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 253,
            "line_end": 270
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 270,
            "line_end": 274
          },
          {
            "file": "references/indexing-strategies.md",
            "line_start": 274,
            "line_end": 283
          },
          {
            "file": "references/window-functions.md",
            "line_start": 11,
            "line_end": 27
          },
          {
            "file": "references/window-functions.md",
            "line_start": 27,
            "line_end": 33
          },
          {
            "file": "references/window-functions.md",
            "line_start": 33,
            "line_end": 49
          },
          {
            "file": "references/window-functions.md",
            "line_start": 49,
            "line_end": 55
          },
          {
            "file": "references/window-functions.md",
            "line_start": 55,
            "line_end": 69
          },
          {
            "file": "references/window-functions.md",
            "line_start": 69,
            "line_end": 77
          },
          {
            "file": "references/window-functions.md",
            "line_start": 77,
            "line_end": 100
          },
          {
            "file": "references/window-functions.md",
            "line_start": 100,
            "line_end": 106
          },
          {
            "file": "references/window-functions.md",
            "line_start": 106,
            "line_end": 130
          },
          {
            "file": "references/window-functions.md",
            "line_start": 130,
            "line_end": 136
          },
          {
            "file": "references/window-functions.md",
            "line_start": 136,
            "line_end": 148
          },
          {
            "file": "references/window-functions.md",
            "line_start": 148,
            "line_end": 154
          },
          {
            "file": "references/window-functions.md",
            "line_start": 154,
            "line_end": 172
          },
          {
            "file": "references/window-functions.md",
            "line_start": 172,
            "line_end": 176
          },
          {
            "file": "references/window-functions.md",
            "line_start": 176,
            "line_end": 196
          },
          {
            "file": "references/window-functions.md",
            "line_start": 196,
            "line_end": 200
          },
          {
            "file": "references/window-functions.md",
            "line_start": 200,
            "line_end": 211
          },
          {
            "file": "references/window-functions.md",
            "line_start": 211,
            "line_end": 217
          },
          {
            "file": "references/window-functions.md",
            "line_start": 217,
            "line_end": 237
          },
          {
            "file": "references/window-functions.md",
            "line_start": 237,
            "line_end": 241
          },
          {
            "file": "references/window-functions.md",
            "line_start": 241,
            "line_end": 248
          },
          {
            "file": "references/window-functions.md",
            "line_start": 248,
            "line_end": 254
          },
          {
            "file": "references/window-functions.md",
            "line_start": 254,
            "line_end": 263
          },
          {
            "file": "references/window-functions.md",
            "line_start": 263,
            "line_end": 267
          },
          {
            "file": "references/window-functions.md",
            "line_start": 267,
            "line_end": 276
          },
          {
            "file": "references/window-functions.md",
            "line_start": 276,
            "line_end": 280
          },
          {
            "file": "references/window-functions.md",
            "line_start": 280,
            "line_end": 297
          },
          {
            "file": "references/window-functions.md",
            "line_start": 297,
            "line_end": 301
          },
          {
            "file": "references/window-functions.md",
            "line_start": 301,
            "line_end": 312
          },
          {
            "file": "references/window-functions.md",
            "line_start": 312,
            "line_end": 323
          },
          {
            "file": "references/window-functions.md",
            "line_start": 323,
            "line_end": 333
          },
          {
            "file": "SKILL.md",
            "line_start": 13,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 42
          },
          {
            "file": "SKILL.md",
            "line_start": 42,
            "line_end": 43
          },
          {
            "file": "SKILL.md",
            "line_start": 43,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 44,
            "line_end": 45
          },
          {
            "file": "SKILL.md",
            "line_start": 45,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 47
          },
          {
            "file": "SKILL.md",
            "line_start": 47,
            "line_end": 48
          },
          {
            "file": "SKILL.md",
            "line_start": 48,
            "line_end": 50
          },
          {
            "file": "SKILL.md",
            "line_start": 50,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 64
          },
          {
            "file": "SKILL.md",
            "line_start": 64,
            "line_end": 65
          },
          {
            "file": "SKILL.md",
            "line_start": 65,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 70
          },
          {
            "file": "SKILL.md",
            "line_start": 70,
            "line_end": 76
          },
          {
            "file": "SKILL.md",
            "line_start": 76,
            "line_end": 91
          },
          {
            "file": "SKILL.md",
            "line_start": 91,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 92
          },
          {
            "file": "SKILL.md",
            "line_start": 92,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 93
          },
          {
            "file": "SKILL.md",
            "line_start": 93,
            "line_end": 99
          },
          {
            "file": "SKILL.md",
            "line_start": 99,
            "line_end": 100
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 4,
    "total_lines": 925,
    "audit_model": "claude",
    "audited_at": "2026-01-16T14:19:02.230Z"
  },
  "content": {
    "user_title": "Get SQL patterns reference",
    "value_statement": "Writing efficient SQL queries requires knowing common patterns and anti-patterns. This skill provides ready-to-use examples for CTEs, window functions, joins, and indexing strategies.",
    "seo_keywords": [
      "sql patterns",
      "sql cte",
      "window functions",
      "sql index",
      "sql join",
      "sql pagination",
      "database query",
      "claude sql",
      "codex sql",
      "claude-code sql"
    ],
    "actual_capabilities": [
      "CTE examples with chained common table expressions",
      "Window function patterns (ROW_NUMBER, RANK, LAG, LEAD)",
      "JOIN reference with inner, left, right, and full joins",
      "Pagination patterns using OFFSET/LIMIT and keyset pagination",
      "Index types including B-tree, hash, GIN, and GiST",
      "Anti-patterns to avoid with fixes and explanations"
    ],
    "limitations": [
      "Does not execute queries or connect to databases",
      "Pattern examples may require adjustment for specific database systems",
      "Does not generate custom queries from user requirements"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Query optimization",
        "description": "Learn to write efficient queries using CTEs and proper indexing strategies"
      },
      {
        "target_user": "Data analysts",
        "title": "Analytical queries",
        "description": "Master window functions for running totals, rankings, and time-series analysis"
      },
      {
        "target_user": "Database administrators",
        "title": "Performance tuning",
        "description": "Apply indexing strategies to improve query performance and reduce execution time"
      }
    ],
    "prompt_templates": [
      {
        "title": "CTE pattern",
        "scenario": "Need a common table expression",
        "prompt": "Show me how to write a CTE in SQL"
      },
      {
        "title": "Window function",
        "scenario": "Calculate running totals",
        "prompt": "How do I use SUM() OVER for running totals"
      },
      {
        "title": "Index strategy",
        "scenario": "Optimize query performance",
        "prompt": "What index type should I use for JSONB queries"
      },
      {
        "title": "Join types",
        "scenario": "Understand join differences",
        "prompt": "Explain the difference between INNER JOIN and LEFT JOIN"
      }
    ],
    "output_examples": [
      {
        "input": "Show me how to write a CTE in SQL",
        "output": [
          "Common Table Expressions (CTEs) help organize complex queries:",
          "â€¢ Define a named subquery with WITH clause",
          "â€¢ Chain multiple CTEs together",
          "â€¢ Improve readability of nested queries",
          "Example: WITH active_users AS (SELECT id, name FROM users WHERE status = 'active') SELECT * FROM active_users;"
        ]
      },
      {
        "input": "What index type should I use for JSONB queries",
        "output": [
          "Use GIN (Generalized Inverted Index) for JSONB and array queries:",
          "â€¢ CREATE INDEX idx_data ON table USING gin(payload jsonb_path_ops);",
          "â€¢ Supports @> containment queries efficiently",
          "â€¢ Also works for full-text search with to_tsvector",
          "â€¢ NOT suitable for equality or range queries"
        ]
      },
      {
        "input": "How do I use window functions for rankings",
        "output": [
          "Three ranking functions available in SQL:",
          "â€¢ ROW_NUMBER() assigns unique numbers (1, 2, 3, 4)",
          "â€¢ RANK() allows ties but skips ranks (1, 2, 2, 4)",
          "â€¢ DENSE_RANK() allows ties without skipping (1, 2, 2, 3)",
          "All use PARTITION BY for groups and ORDER BY for sorting"
        ]
      }
    ],
    "best_practices": [
      "List columns explicitly instead of using SELECT *",
      "Use keyset pagination (WHERE id > X) instead of OFFSET for large datasets",
      "Place the most selective column first in composite indexes"
    ],
    "anti_patterns": [
      "Using WHERE YEAR(date) = 2024 instead of date range predicates",
      "Using NOT IN with NULL values causing unexpected results",
      "Writing N+1 queries instead of using JOIN or batch operations"
    ],
    "faq": [
      {
        "question": "Which databases support window functions?",
        "answer": "Most modern databases support window functions including PostgreSQL, MySQL 8+, SQL Server, Oracle, and BigQuery."
      },
      {
        "question": "What is the maximum offset for pagination?",
        "answer": "Avoid large OFFSET values. Keyset pagination with WHERE clause performs better for deep pagination."
      },
      {
        "question": "Can I use these patterns with ORMs?",
        "answer": "Yes. Patterns translate to raw SQL. Some ORM query builders can express CTEs and window functions."
      },
      {
        "question": "Is my data safe when using this skill?",
        "answer": "Yes. This skill only provides reference documentation. It never connects to databases or processes user data."
      },
      {
        "question": "Why is my query slow despite having an index?",
        "answer": "Check if the query uses the indexed column in functions. Also verify column order matches the leftmost prefix rule."
      },
      {
        "question": "How does this differ from online SQL documentation?",
        "answer": "This skill provides curated, verified patterns specifically formatted for AI assistants to use in context."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "indexing-strategies.md",
          "type": "file",
          "path": "references/indexing-strategies.md",
          "lines": 298
        },
        {
          "name": "window-functions.md",
          "type": "file",
          "path": "references/window-functions.md",
          "lines": 334
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 101
    }
  ]
}
