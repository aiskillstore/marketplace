{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T11:00:41.860Z",
    "slug": "barnhardt-enterprises-inc-drizzle-orm-patterns",
    "source_url": "https://github.com/Barnhardt-Enterprises-Inc/quetrex-plugin/tree/main/templates/skills/drizzle-orm-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "8b3f8946ef90b78c69fcbf833b7683cf48800b23951f234e1574e6e46435ae74",
    "tree_hash": "7e37e4cc38b1cfbce9a306e1ea2b51e4ea2fb9716091ebc6789c2f5324657080"
  },
  "skill": {
    "name": "Drizzle ORM Patterns - Complete PostgreSQL Reference",
    "description": "**Use when:** Working with database operations, schema design, migrations, or queries in Quetrex.",
    "summary": "**Use when:** Working with database operations, schema design, migrations, or queries in Quetrex.",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Barnhardt-Enterprises-Inc",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "PostgreSQL",
      "ORM",
      "TypeScript",
      "Edge Runtime",
      "Database"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation and reference skill with a static analysis Python tool. The validate-queries.py script only reads TypeScript files specified by the user and outputs potential SQL injection and performance issues. No network access, no credential access, no data exfiltration, no persistence mechanisms. Legitimate defensive security tool for developers.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "validate-queries.py",
            "line_start": 1,
            "line_end": 356
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "validate-queries.py",
            "line_start": 43,
            "line_end": 60
          },
          {
            "file": "validate-queries.py",
            "line_start": 307,
            "line_end": 315
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 11,
    "total_lines": 7840,
    "audit_model": "claude",
    "audited_at": "2026-01-10T11:00:41.860Z"
  },
  "content": {
    "user_title": "Use Drizzle ORM patterns for PostgreSQL databases",
    "value_statement": "Building type-safe database queries with Drizzle ORM can be complex. This skill provides complete patterns for queries, transactions, migrations, and edge deployment with automated security validation.",
    "seo_keywords": [
      "Drizzle ORM",
      "PostgreSQL",
      "TypeScript",
      "Database patterns",
      "Edge Runtime",
      "Claude Code",
      "Claude",
      "Codex",
      "ORM queries",
      "Database migrations"
    ],
    "actual_capabilities": [
      "Write type-safe queries with Drizzle ORM for PostgreSQL",
      "Implement database transactions with rollback and isolation levels",
      "Create and manage schema migrations with Drizzle Kit",
      "Deploy to Vercel Edge Runtime with serverless PostgreSQL",
      "Detect and prevent SQL injection vulnerabilities with validation script",
      "Optimize performance with indexes, batch operations, and N+1 prevention"
    ],
    "limitations": [
      "Requires Drizzle ORM and PostgreSQL database setup",
      "Does not include runtime database connection management",
      "Does not generate database schema automatically",
      "Validator script requires Python 3 and TypeScript files to analyze"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Build type-safe database layers",
        "description": "Create robust data access layers with Drizzle ORM patterns for production applications."
      },
      {
        "target_user": "Full-stack developers",
        "title": "Deploy edge-compatible database code",
        "description": "Implement database operations that run in Vercel Edge Functions and serverless environments."
      },
      {
        "target_user": "DevOps engineers",
        "title": "Manage schema migrations safely",
        "description": "Execute database migrations with rollback strategies and zero-downtime deployment patterns."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic query pattern",
        "scenario": "Write a select query with filters",
        "prompt": "Use the drizzle-orm-patterns skill to help me write a Drizzle ORM query that selects users where status equals 'active' and created_at is after January 1, 2024."
      },
      {
        "title": "Transaction safety",
        "scenario": "Implement multi-step operations",
        "prompt": "Show me how to use Drizzle ORM transactions with proper rollback handling for creating a user and their profile together."
      },
      {
        "title": "Edge deployment",
        "scenario": "Deploy to serverless environment",
        "prompt": "Help me configure Drizzle ORM for Vercel Edge Runtime with Neon serverless PostgreSQL."
      },
      {
        "title": "Security validation",
        "scenario": "Check code for vulnerabilities",
        "prompt": "Use the validate-queries.py script to check my user-service.ts file for SQL injection risks and performance issues."
      }
    ],
    "output_examples": [
      {
        "input": "Help me write a Drizzle ORM query to get users with their orders",
        "output": [
          "Use a LEFT JOIN to fetch users with their orders:",
          "```typescript",
          "const usersWithOrders = await db",
          "  .select({",
          "    userId: users.id,",
          "    userName: users.name,",
          "    orderCount: count(orders.id),",
          "  })",
          "  .from(users)",
          "  .leftJoin(orders, eq(users.id, orders.userId))",
          "  .groupBy(users.id, users.name);",
          "```",
          "This avoids N+1 queries by using a single query with aggregation."
        ]
      }
    ],
    "best_practices": [
      "Always use parameterized queries with eq(), like(), and other operators instead of string interpolation",
      "Add indexes on foreign keys and frequently queried columns for better performance",
      "Keep transactions short and avoid external API calls inside transaction blocks"
    ],
    "anti_patterns": [
      "Using string interpolation in sql templates which can lead to SQL injection",
      "Querying inside loops causing N+1 performance problems",
      "Using select() without specifying fields or limit in production code"
    ],
    "faq": [
      {
        "question": "Which PostgreSQL drivers work with Drizzle ORM?",
        "answer": "Drizzle supports @neondatabase/serverless for Edge and WebSocket, pg for Node.js with connection pooling, and @vercel/postgres for Vercel deployments."
      },
      {
        "question": "What are the limits of Edge Runtime transactions?",
        "answer": "Edge functions have a 25-second timeout. Keep transactions under 1 second and avoid processing large datasets inside transactions."
      },
      {
        "question": "How do I integrate with existing database schemas?",
        "answer": "Define tables using pgTable() with column definitions. Drizzle can introspect existing databases or you can define schemas manually."
      },
      {
        "question": "Is my data safe when using the validator script?",
        "answer": "Yes. The validator is a static analysis tool that only reads TypeScript files. It does not connect to databases or transmit data externally."
      },
      {
        "question": "Why is my query slow?",
        "answer": "Common causes include missing indexes, N+1 queries, select * usage, and unoptimized joins. Use EXPLAIN ANALYZE to diagnose performance issues."
      },
      {
        "question": "How does Drizzle compare to Prisma?",
        "answer": "Drizzle is edge-compatible with zero dependencies, uses SQL-like syntax, and provides type inference without code generation. Prisma has an easier fluent API but is not edge-compatible."
      }
    ]
  },
  "file_structure": [
    {
      "name": "common-mistakes.md",
      "type": "file",
      "path": "common-mistakes.md"
    },
    {
      "name": "edge-runtime.md",
      "type": "file",
      "path": "edge-runtime.md"
    },
    {
      "name": "migrations.md",
      "type": "file",
      "path": "migrations.md"
    },
    {
      "name": "performance.md",
      "type": "file",
      "path": "performance.md"
    },
    {
      "name": "queries-complete.md",
      "type": "file",
      "path": "queries-complete.md"
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md"
    },
    {
      "name": "relations.md",
      "type": "file",
      "path": "relations.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    },
    {
      "name": "transactions.md",
      "type": "file",
      "path": "transactions.md"
    },
    {
      "name": "type-inference.md",
      "type": "file",
      "path": "type-inference.md"
    },
    {
      "name": "validate-queries.py",
      "type": "file",
      "path": "validate-queries.py"
    }
  ]
}
