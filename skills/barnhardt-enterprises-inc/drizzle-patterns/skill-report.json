{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T18:43:03.865Z",
    "slug": "barnhardt-enterprises-inc-drizzle-patterns",
    "source_url": "https://github.com/Barnhardt-Enterprises-Inc/quetrex-claude/tree/main/skills/drizzle-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "6956c69fbd465a109a5272835c9a11b76a77a99a301101c235c9eb116fb5ff10",
    "tree_hash": "28896935d6c2c00a3e51c209b2477267c605b0bc78370209a2e225b36136e397"
  },
  "skill": {
    "name": "drizzle-patterns",
    "description": "Drizzle ORM patterns for PostgreSQL.",
    "summary": "Drizzle ORM patterns for PostgreSQL.",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Barnhardt-Enterprises-Inc",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "database",
      "postgresql",
      "orm",
      "drizzle",
      "typescript"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill containing markdown patterns and TypeScript code examples for Drizzle ORM. No executable code, scripts, network calls, or file system access beyond reading the SKILL.md file itself. The static analysis findings appear to be false positives from the input report. The actual skill-report.json shows risk_level: safe with no risk factors, no findings, and safe_to_publish: true.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 173,
            "line_end": 173
          },
          {
            "file": "skill-report.json",
            "line_start": 173,
            "line_end": 173
          },
          {
            "file": "skill-report.json",
            "line_start": 173,
            "line_end": 173
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 150
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 150
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 150,
            "line_end": 150
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 10,
            "line_end": 25
          },
          {
            "file": "SKILL.md",
            "line_start": 25,
            "line_end": 29
          },
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 45
          },
          {
            "file": "SKILL.md",
            "line_start": 45,
            "line_end": 49
          },
          {
            "file": "SKILL.md",
            "line_start": 49,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 64
          },
          {
            "file": "SKILL.md",
            "line_start": 64,
            "line_end": 90
          },
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 94
          },
          {
            "file": "SKILL.md",
            "line_start": 94,
            "line_end": 115
          },
          {
            "file": "SKILL.md",
            "line_start": 115,
            "line_end": 119
          },
          {
            "file": "SKILL.md",
            "line_start": 119,
            "line_end": 125
          },
          {
            "file": "SKILL.md",
            "line_start": 125,
            "line_end": 129
          },
          {
            "file": "SKILL.md",
            "line_start": 129,
            "line_end": 138
          },
          {
            "file": "SKILL.md",
            "line_start": 138,
            "line_end": 142
          },
          {
            "file": "SKILL.md",
            "line_start": 142,
            "line_end": 153
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 154,
    "audit_model": "claude",
    "audited_at": "2026-01-16T18:43:03.865Z"
  },
  "content": {
    "user_title": "Apply Drizzle ORM patterns for PostgreSQL",
    "value_statement": "Writing database code with Drizzle ORM can be confusing without clear patterns. This skill provides ready-to-use code examples for schema definition, relations, queries, mutations, transactions, and migrations.",
    "seo_keywords": [
      "Drizzle ORM patterns",
      "PostgreSQL database",
      "TypeScript ORM",
      "Drizzle schema definition",
      "database relations",
      "Drizzle transactions",
      "drizzle-kit migrations",
      "Claude Code database",
      "AI agent database patterns"
    ],
    "actual_capabilities": [
      "Define PostgreSQL table schemas with Drizzle ORM types",
      "Create and configure table relations (one-to-many, many-to-one)",
      "Set up database client connection with connection pooling",
      "Write queries with filtering, ordering, and relation loading",
      "Perform insert, update, and delete operations with returning",
      "Execute atomic transactions with rollback support"
    ],
    "limitations": [
      "This skill provides patterns only - actual database setup required separately",
      "Does not execute database operations - only generates code examples",
      "No runtime database connectivity or query execution capability"
    ],
    "use_cases": [
      {
        "target_user": "Full-stack developers",
        "title": "Build type-safe database layers",
        "description": "Create PostgreSQL database layers with full TypeScript type inference for users, posts, and related entities."
      },
      {
        "target_user": "Backend engineers",
        "title": "Implement database transactions",
        "description": "Handle complex multi-table operations with Drizzle transactions including automatic rollback on failure."
      },
      {
        "target_user": "AI agent users",
        "title": "Generate correct Drizzle code",
        "description": "Get accurate, production-ready Drizzle ORM code snippets for any database operation without syntax errors."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic schema creation",
        "scenario": "Create a users table",
        "prompt": "Create a Drizzle ORM schema for a users table with id, email, name, emailVerified, createdAt, and updatedAt fields using PostgreSQL."
      },
      {
        "title": "Table relations",
        "scenario": "Link users to posts",
        "prompt": "Set up Drizzle relations where users can have many posts and each post belongs to one user."
      },
      {
        "title": "Complex queries",
        "scenario": "Fetch users with posts",
        "prompt": "Write a Drizzle query to find users with their posts, filtering for verified emails, ordered by creation date, limited to 10 results."
      },
      {
        "title": "Transaction safety",
        "scenario": "Create user with profile",
        "prompt": "Write a Drizzle transaction that creates a user, then creates their profile and default settings in one atomic operation."
      }
    ],
    "output_examples": [
      {
        "input": "Create a Drizzle ORM schema for a users table",
        "output": [
          "Schema defined with uuid primary key using defaultRandom()",
          "Email field with unique constraint and length validation",
          "Boolean emailVerified with default false",
          "Timestamp fields for createdAt and updatedAt with defaultNow()",
          "Type exports for $inferSelect and $inferInsert"
        ]
      },
      {
        "input": "Set up Drizzle relations where users have many posts",
        "output": [
          "usersRelations configured with many(posts) relationship",
          "postsRelations configured with one(users) back-reference",
          "Proper foreign key linking via authorId field",
          "Type-safe relation access through $inferSelect"
        ]
      },
      {
        "input": "Write a transaction for creating user with profile",
        "output": [
          "Transaction wrapper with async callback parameter",
          "Insert operation returning new user record",
          "Profile and settings inserts using user.id",
          "Automatic rollback if any operation fails"
        ]
      }
    ],
    "best_practices": [
      "Use $inferSelect and $inferInsert types to ensure type safety across your application",
      "Always use parameterized queries with eq(), and(), or() to prevent SQL injection",
      "Leverage transactions for multi-table operations to maintain data integrity"
    ],
    "anti_patterns": [
      "Do not use raw SQL strings for queries - use Drizzle's query builder instead",
      "Do not skip connection pooling in production - always use Pool from pg module",
      "Do not hardcode database credentials - use process.env.DATABASE_URL with proper validation"
    ],
    "faq": [
      {
        "question": "What PostgreSQL features does Drizzle support?",
        "answer": "Drizzle supports all PostgreSQL features including JSON, arrays, enums, full-text search, and custom types."
      },
      {
        "question": "How does Drizzle compare to Prisma?",
        "answer": "Drizzle is lighter, faster, and provides more control. It uses SQL-like syntax and generates fewer types."
      },
      {
        "question": "Can I use Drizzle with Next.js App Router?",
        "answer": "Yes. Drizzle works with any Node.js runtime including Next.js Server Components and API routes."
      },
      {
        "question": "Is my data safe when using this skill?",
        "answer": "Yes. This skill only provides patterns - it does not access or modify any databases directly."
      },
      {
        "question": "Why am I getting type errors with my schema?",
        "answer": "Ensure you export types using $inferSelect and $inferInsert. Also verify dialect is set to postgresql in config."
      },
      {
        "question": "How do I run migrations in production?",
        "answer": "Use drizzle-kit generate to create migrations, then apply them using your deployment tool or run migrate command."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 154
    }
  ]
}
