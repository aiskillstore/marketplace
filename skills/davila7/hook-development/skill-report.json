{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T00:36:57.761Z",
    "slug": "davila7-hook-development",
    "source_url": "https://github.com/davila7/claude-code-templates/tree/main/cli-tool/components/skills/development/hook-development",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "0987b649688fb25da80f3aba79d255b323eda13d302ea53e0ee22a1f83fa4a3a",
    "tree_hash": "25015cabf3d95f62f8845c649f97d2ebb4f77921183da1ab934e999a44176a60"
  },
  "skill": {
    "name": "hook-development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "author": "davila7",
    "license": "MIT",
    "category": "development",
    "tags": [
      "hooks",
      "automation",
      "validation",
      "security",
      "claude-code"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation skill providing guidance for creating Claude Code hooks. All static findings are FALSE POSITIVES: patterns detected in documentation files (Markdown) showing example code snippets, and security validation scripts that BLOCK dangerous commands (PreToolUse hooks that deny rm -rf, dd, mkfs). The skill contains development utilities for hook validation and testing. No network calls, credential access, or data exfiltration detected.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/hook-linter.sh",
            "line_start": 1,
            "line_end": 154
          },
          {
            "file": "scripts/validate-hook-schema.sh",
            "line_start": 1,
            "line_end": 160
          },
          {
            "file": "scripts/test-hook.sh",
            "line_start": 1,
            "line_end": 253
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "examples/validate-bash.sh",
            "line_start": 20,
            "line_end": 22
          },
          {
            "file": "examples/validate-write.sh",
            "line_start": 20,
            "line_end": 35
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 12,
    "total_lines": 3094,
    "audit_model": "claude",
    "audited_at": "2026-01-17T00:36:57.761Z"
  },
  "content": {
    "user_title": "Create Claude Code hooks for validation and automation",
    "value_statement": "Claude Code hooks enable event-driven automation for validation, security enforcement, and workflow control. This skill provides comprehensive guidance for implementing prompt-based and command hooks to validate tool execution, enforce policies, and integrate with development workflows.",
    "seo_keywords": [
      "claude code hooks",
      "pretooluse hook",
      "posttooluse hook",
      "stop hook",
      "claude plugin hooks",
      "event-driven automation",
      "hook development",
      "claude code automation",
      "security hooks",
      "validation hooks"
    ],
    "actual_capabilities": [
      "Create PreToolUse hooks to validate and modify tool calls before execution",
      "Create PostToolUse hooks to react to tool results, provide feedback, and log operations",
      "Create Stop and SubagentStop hooks to verify task completion and enforce quality standards",
      "Create SessionStart hooks to load project context and set environment variables",
      "Implement prompt-based hooks using LLM reasoning for complex validation scenarios",
      "Use command hooks with bash scripts for deterministic checks and external tool integration"
    ],
    "limitations": [
      "Hooks load at session start and require Claude Code restart to apply changes",
      "Hooks run in parallel so execution order is non-deterministic",
      "Prompt-based hooks have limited event support (Stop, SubagentStop, UserPromptSubmit, PreToolUse)"
    ],
    "use_cases": [
      {
        "target_user": "Plugin Developers",
        "title": "Build secure plugins",
        "description": "Implement validation hooks in plugins to block dangerous operations, validate file writes, and enforce security policies"
      },
      {
        "target_user": "DevOps Engineers",
        "title": "Automate workflows",
        "description": "Create hooks that enforce test runs, verify builds, and ensure compliance before task completion"
      },
      {
        "target_user": "Security Teams",
        "title": "Enforce policies",
        "description": "Deploy hooks that detect sensitive file access, block privilege escalation, and audit command execution"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic hook setup",
        "scenario": "Create validation hook for Write operations",
        "prompt": "Create a PreToolUse hook that validates Write operations. Block writes to system directories like /etc and /sys. Also block writes to files matching .env, secrets, or credentials patterns. Use prompt-based hook type."
      },
      {
        "title": "Security validation",
        "scenario": "Block dangerous bash commands",
        "prompt": "Create a PreToolUse hook for Bash commands. Block commands containing rm -rf, dd, mkfs, or redirects to /dev/null. For sudo commands, return ask instead of deny. Use both command hook for quick checks and prompt hook for deep analysis."
      },
      {
        "title": "Task completion check",
        "scenario": "Verify task completion before stopping",
        "prompt": "Create a Stop hook that reviews the transcript. Verify that if code was modified (Write/Edit tools used), tests were run. Also verify the project builds successfully. Block task completion with a clear reason if requirements are not met."
      },
      {
        "title": "Context loading",
        "scenario": "Load project context at session start",
        "prompt": "Create a SessionStart hook that detects the project type. Check for package.json (Node.js), Cargo.toml (Rust), go.mod (Go), pyproject.toml (Python), or pom.xml (Java). Set PROJECT_TYPE environment variable in CLAUDE_ENV_FILE. Also detect CI configuration."
      }
    ],
    "output_examples": [
      {
        "input": "Create a hook that blocks dangerous bash commands",
        "output": [
          "PreToolUse hook created for Bash commands",
          "Blocks dangerous operations: rm -rf, dd, mkfs, /dev/null redirects (returns deny)",
          "Warns on privilege escalation: sudo, su commands (returns ask)",
          "Approves safe commands: ls, pwd, echo, date, whoami",
          "Configuration saved to hooks/hooks.json"
        ]
      },
      {
        "input": "Create a SessionStart hook for Node.js project",
        "output": [
          "SessionStart hook created for project context loading",
          "Detects Node.js via package.json file presence",
          "Sets PROJECT_TYPE=nodejs in CLAUDE_ENV_FILE",
          "Detects TypeScript if tsconfig.json exists",
          "Checks for CI configuration in .github/workflows"
        ]
      },
      {
        "input": "Create a Stop hook for test enforcement",
        "output": [
          "Stop hook created for task completion verification",
          "Reviews transcript for Write/Edit tool usage",
          "Blocks completion if code was modified without tests",
          "Returns decision: approve or block with reason",
          "Requires restart of Claude Code to activate"
        ]
      }
    ],
    "best_practices": [
      "Use prompt-based hooks for complex validation that requires context-aware reasoning",
      "Set appropriate timeouts: 5-10 seconds for command hooks, 15-30 seconds for prompt hooks",
      "Always validate JSON output and use set -euo pipefail in bash scripts"
    ],
    "anti_patterns": [
      "Do not use hardcoded paths - use CLAUDE_PLUGIN_ROOT and CLAUDE_PROJECT_DIR environment variables",
      "Do not assume hook execution order - hooks run in parallel and do not see each other output",
      "Do not create long-running hooks - they will timeout and block workflows"
    ],
    "faq": [
      {
        "question": "Which Claude tools are supported?",
        "answer": "Works with Claude Code desktop app and CLI. Compatible with Claude, Codex, and Claude Code platforms."
      },
      {
        "question": "What are the timeout limits for hooks?",
        "answer": "Default timeout is 60 seconds for command hooks, 30 seconds for prompt hooks. Maximum is 600 seconds."
      },
      {
        "question": "Can hooks integrate with external tools?",
        "answer": "Yes. Command hooks can run security scanners, linters, or send notifications via curl to webhooks."
      },
      {
        "question": "Is user data safe with hooks?",
        "answer": "Yes. Hooks run locally in your environment. No data is sent to external servers unless your scripts explicitly call external APIs."
      },
      {
        "question": "Why are my hook changes not applying?",
        "answer": "Hooks load at session start. Edit hooks.json, then exit and restart Claude Code for changes to take effect."
      },
      {
        "question": "How do hooks differ from agent instructions?",
        "answer": "Hooks enforce mandatory checks on every tool call or event. Agent instructions guide behavior. Hooks cannot be bypassed by the agent."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh",
          "lines": 56
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh",
          "lines": 44
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh",
          "lines": 39
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md",
          "lines": 480
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md",
          "lines": 370
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md",
          "lines": 347
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh",
          "lines": 154
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md",
          "lines": 165
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh",
          "lines": 253
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh",
          "lines": 160
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 713
    }
  ]
}
