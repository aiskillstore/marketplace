{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T19:41:22.037Z",
    "slug": "caldis-generate-sparkle-appcast",
    "source_url": "https://github.com/Caldis/Mos/tree/master/.codex/skills/generate-sparkle-appcast",
    "source_ref": "master",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d0a6358a5065ee9c78e1830c6cdae2c85aa160a82b4ff308f72a3564631ea65e",
    "tree_hash": "ae64f078708d752591340a4e7036051d9ca1592785c23e4620c50f4f7de1e62e"
  },
  "skill": {
    "name": "generate-sparkle-appcast",
    "description": "Generate Mos Sparkle appcast.xml from the latest build zip and recent git changes (since a given commit), then sync to docs/ for publishing.",
    "summary": "Generate Mos Sparkle appcast.xml from the latest build zip and recent git changes (since a given com...",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "Caldis",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "release",
      "sparkle",
      "macos",
      "appcast",
      "automation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands",
      "filesystem",
      "network",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Legitimate macOS release automation tool for generating Sparkle appcast files. All static findings are false positives stemming from the scanner's inability to distinguish between legitimate release tooling and malicious patterns. The script operates only within project build/docs directories, uses standard tooling (git, python3, openssl) for release signing, and handles Ed25519 private keys appropriately for Sparkle update signing.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 1,
            "line_end": 482
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 45,
            "line_end": 46
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 195,
            "line_end": 198
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 213,
            "line_end": 213
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 4,
            "line_end": 7
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 48,
            "line_end": 50
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 377,
            "line_end": 380
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 10,
            "line_end": 11
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 165,
            "line_end": 165
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "scripts/generate_appcast.sh",
            "line_start": 210,
            "line_end": 210
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 767,
    "audit_model": "claude",
    "audited_at": "2026-01-16T19:41:22.037Z"
  },
  "content": {
    "user_title": "Generate Sparkle appcast for macOS releases",
    "value_statement": "Publishing macOS updates requires generating a Sparkle appcast.xml file with cryptographic signatures. This skill automates the entire release process from zip archive to signed appcast with bilingual release notes.",
    "seo_keywords": [
      "generate-sparkle-appcast",
      "sparkle appcast",
      "macos software update",
      "claude code skill",
      "codex skill",
      "claude skill",
      "release automation",
      "ed25519 signing",
      "bilingual release notes",
      "mos app"
    ],
    "actual_capabilities": [
      "Generate Sparkle appcast.xml from notarized zip archive",
      "Create Ed25519 cryptographic signatures for release verification",
      "Extract and format bilingual release notes from git history",
      "Parse Info.plist for version metadata (CFBundleShortVersionString, CFBundleVersion)",
      "Copy release artifacts to docs/ directory for web hosting",
      "Support stable and beta release channels with proper Sparkle filtering"
    ],
    "limitations": [
      "Requires Sparkle Ed25519 private key file (sparkle_private_key.txt) to be present",
      "Only works with zip files matching Mos naming convention (Mos.Versions.*.zip)",
      "Git history must follow conventional commit format for proper release note categorization",
      "Limited to Mos project directory structure (build/ and docs/ directories required)"
    ],
    "use_cases": [
      {
        "target_user": "macOS App Maintainers",
        "title": "Publish Mos Releases",
        "description": "Generate signed appcast and release notes when preparing new stable or beta releases for distribution."
      },
      {
        "target_user": "DevOps Engineers",
        "title": "Automate Release Pipeline",
        "description": "Integrate into CI/CD workflows to automatically generate Sparkle update files from build artifacts."
      },
      {
        "target_user": "Open Source Contributors",
        "title": "Create Release Candidates",
        "description": "Generate test appcast files for beta testing before official release publishing."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Release Generation",
        "scenario": "Generate appcast for stable release",
        "prompt": "Run the generate-sparkle-appcast skill with --since <commit> to create appcast.xml from the latest build zip. Use the commit hash from the previous release."
      },
      {
        "title": "Beta Channel Release",
        "scenario": "Generate beta release appcast",
        "prompt": "Generate a beta channel appcast using generate-sparkle-appcast with --since <commit>. Ensure the beta zip file is in build/ directory."
      },
      {
        "title": "Custom Release Notes",
        "scenario": "Use pre-written release notes",
        "prompt": "Run generate-sparkle-appcast with RELEASE_NOTES_ZH_FILE and RELEASE_NOTES_EN_FILE environment variables pointing to custom HTML files instead of auto-generating from git."
      },
      {
        "title": "Debug Release Process",
        "scenario": "Troubleshoot release generation",
        "prompt": "Run generate-sparkle-appcast with --help to verify dependencies and check build/ directory for required zip files and Sparkle private key."
      }
    ],
    "output_examples": [
      {
        "input": "Generate appcast since commit 559e727",
        "output": [
          "Selected zip: build/Mos.Versions.4.0.0-20260108.1.zip",
          "Release tag: 4.0.0-20260108.1",
          "Download URL: https://github.com/Caldis/Mos/releases/download/4.0.0-20260108.1/Mos.Versions.4.0.0-20260108.1.zip",
          "Wrote: build/appcast.xml",
          "Copied: docs/appcast.xml"
        ]
      },
      {
        "input": "Generate beta appcast since commit abc1234",
        "output": [
          "Selected zip: build/Mos.Versions.4.0.0-beta-20260108.1.zip",
          "Release tag: 4.0.0-beta-20260108.1",
          "Generated appcast with sparkle:channel set to beta",
          "Wrote: build/appcast.xml",
          "Copied: docs/appcast.xml"
        ]
      }
    ],
    "best_practices": [
      "Always verify the Ed25519 private key file is gitignored and stored securely before running releases.",
      "Test beta releases with a beta channel appcast before publishing stable releases to users.",
      "Keep release notes in a separate file for complex releases that require manual editing."
    ],
    "anti_patterns": [
      "Running the skill without verifying the build zip matches the expected naming convention.",
      "Using an expired or compromised Sparkle private key for signing releases.",
      "Skipping the step to copy appcast.xml to docs/ before GitHub release publication."
    ],
    "faq": [
      {
        "question": "What is the Sparkle private key file format?",
        "answer": "The file must contain a base64-encoded 32-byte Ed25519 seed. Keep this file gitignored and secure."
      },
      {
        "question": "Can this skill sign releases for other macOS apps?",
        "answer": "No. The script is hardcoded for the Mos project structure and naming conventions."
      },
      {
        "question": "What if git history does not follow conventional commits?",
        "answer": "The skill falls back to generic categorization (Fix, New, Improved) based on commit message patterns."
      },
      {
        "question": "How are release notes separated by language?",
        "answer": "The script generates one HTML page with Chinese content followed by English, separated by an <hr/> tag."
      },
      {
        "question": "Does this skill upload files to servers?",
        "answer": "No. The skill only writes to local build/ and docs/ directories. You must sync docs/ to your web host."
      },
      {
        "question": "What dependencies are required?",
        "answer": "The skill requires git, python3, and openssl with Ed25519 support to be available in PATH."
      }
    ]
  },
  "file_structure": [
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "generate_appcast.sh",
          "type": "file",
          "path": "scripts/generate_appcast.sh",
          "lines": 482
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 39
    }
  ]
}
