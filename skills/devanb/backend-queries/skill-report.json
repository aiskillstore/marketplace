{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T03:06:39.574Z",
    "slug": "devanb-backend-queries",
    "source_url": "https://github.com/DevanB/lucidlog/tree/master/.claude/skills/backend-queries",
    "source_ref": "master",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "cbebc03bce0f783dcc167d885ea817bf9e210df97c91dc2ca68d78f1504b264d",
    "tree_hash": "389a4152d351ac3e29d569b0fb5ad58a524cca7c068997828ee32c317be3c34d"
  },
  "skill": {
    "name": "backend-queries",
    "description": "Write secure, performant, and optimized database queries using parameterized queries, eager loading, proper indexing, and transaction management. Use this skill when writing database queries in controllers, repositories, services, or model methods, when using query builders or ORM methods, when implementing filtering/sorting/pagination logic, when optimizing N+1 query problems with eager loading, when working with joins and complex queries, when implementing query caching, or when wrapping related operations in database transactions.",
    "summary": "Write secure, performant, and optimized database queries using parameterized queries, eager loading,...",
    "icon": "ðŸ—„ï¸",
    "version": "1.0.0",
    "author": "DevanB",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "database",
      "sql",
      "performance",
      "security",
      "optimization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands",
      "network",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill providing guidance on secure database query patterns. The static findings are false positives - the analyzer detected patterns in the skill-report.json file itself (the analysis report, not the skill code). The skill contains no executable code, cryptographic operations, network calls, or file system access beyond standard documentation references.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 124,
            "line_end": 124
          },
          {
            "file": "skill-report.json",
            "line_start": 125,
            "line_end": 125
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 124,
            "line_end": 124
          },
          {
            "file": "skill-report.json",
            "line_start": 125,
            "line_end": 125
          },
          {
            "file": "skill-report.json",
            "line_start": 126,
            "line_end": 126
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 205,
    "audit_model": "claude",
    "audited_at": "2026-01-17T03:06:39.574Z"
  },
  "content": {
    "user_title": "Write Secure Database Queries",
    "value_statement": "Database queries often suffer from security vulnerabilities and performance issues. This skill provides expert guidance on writing parameterized queries to prevent SQL injection, optimizing with eager loading to eliminate N+1 problems, and implementing transactions for data integrity.",
    "seo_keywords": [
      "database queries",
      "SQL optimization",
      "parameterized queries",
      "SQL injection prevention",
      "eager loading",
      "N+1 query problem",
      "database transactions",
      "query performance",
      "Claude Code",
      "Laravel queries"
    ],
    "actual_capabilities": [
      "Writing parameterized queries to prevent SQL injection attacks",
      "Optimizing database queries with eager loading to avoid N+1 problems",
      "Implementing filtering, sorting, and pagination logic",
      "Using database transactions for atomic operations",
      "Optimizing query performance with proper indexing",
      "Selecting only needed columns instead of using SELECT *"
    ],
    "limitations": [
      "Provides guidance only - does not execute queries or modify databases",
      "Does not generate SQL code directly - guides query writing approach",
      "Does not provide database connection or query execution capabilities"
    ],
    "use_cases": [
      {
        "target_user": "Backend Developers",
        "title": "Secure Query Patterns",
        "description": "Write safe database queries that prevent SQL injection and follow performance best practices"
      },
      {
        "target_user": "Full-Stack Engineers",
        "title": "Optimize Data Access",
        "description": "Implement efficient data retrieval with eager loading and pagination for responsive applications"
      },
      {
        "target_user": "DevOps Engineers",
        "title": "Database Performance",
        "description": "Identify and fix slow queries using indexing and transaction management"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Query Review",
        "scenario": "Reviewing a query for security issues",
        "prompt": "Review this query for SQL injection vulnerabilities and suggest parameterized alternatives"
      },
      {
        "title": "Performance Audit",
        "scenario": "Finding N+1 query problems",
        "prompt": "Identify N+1 query problems in this code and suggest eager loading improvements"
      },
      {
        "title": "Transaction Safety",
        "scenario": "Implementing atomic operations",
        "prompt": "Help me wrap these related database operations in a transaction for data integrity"
      },
      {
        "title": "Complex Query Design",
        "scenario": "Building multi-table queries",
        "prompt": "Help me write a complex query with joins and subqueries that follows best practices"
      }
    ],
    "output_examples": [
      {
        "input": "Help me write a query to get user posts with comments efficiently",
        "output": [
          "Use eager loading with `with('comments')` to load posts and comments in 2 queries instead of N+1",
          "Select only needed columns: `Post::select('id', 'title', 'user_id')->with('comments:id,post_id,body')`",
          "Consider using `chunk()` for large datasets to avoid memory issues",
          "Add database indexes on foreign keys (user_id, post_id) for faster joins"
        ]
      },
      {
        "input": "Make this raw SQL query secure against SQL injection",
        "output": [
          "Replace string concatenation with parameterized queries or ORM methods",
          "Use prepared statements: `User::where('email', $email)->first()` instead of \"SELECT * FROM users WHERE email = '$email'\"",
          "Validate and sanitize inputs at application layer before querying"
        ]
      },
      {
        "input": "How do I handle multiple related database updates safely?",
        "output": [
          "Wrap operations in a database transaction to ensure atomicity",
          "Use `DB::transaction()` to automatically rollback on failure",
          "Ensure all related changes succeed or fail together to maintain data integrity"
        ]
      }
    ],
    "best_practices": [
      "Always use parameterized queries or ORM methods to prevent SQL injection",
      "Select only the columns you need rather than using SELECT *",
      "Use eager loading (with, load) to prevent N+1 query problems"
    ],
    "anti_patterns": [
      "Using string concatenation to build SQL queries",
      "Loading related records in loops (N+1 queries)",
      "Skipping transactions for operations that span multiple tables"
    ],
    "faq": [
      {
        "question": "What databases does this skill support?",
        "answer": "This skill applies to any SQL database including PostgreSQL, MySQL, SQLite, and MSSQL through ORM frameworks like Laravel Eloquent or similar patterns."
      },
      {
        "question": "Does this skill generate raw SQL code?",
        "answer": "It provides guidance on SQL patterns and ORM usage. For raw SQL, it emphasizes parameterization for security regardless of the database system."
      },
      {
        "question": "How does this skill prevent SQL injection?",
        "answer": "It guides toward using parameterized queries, prepared statements, and ORM methods instead of string concatenation for building queries."
      },
      {
        "question": "Can this skill help with query performance tuning?",
        "answer": "Yes, it covers eager loading, indexing strategies, selecting specific columns, and transaction management for optimal performance."
      },
      {
        "question": "Is this skill compatible with ORMs other than Eloquent?",
        "answer": "Yes, the principles apply to any ORM or query builder. The skill focuses on universal best practices for database interactions."
      },
      {
        "question": "Does this skill execute queries or modify data?",
        "answer": "No, this is a guidance-only skill. It provides patterns and recommendations but does not connect to databases or execute any code."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 29
    }
  ]
}
