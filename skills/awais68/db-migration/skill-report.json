{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T17:36:51.392Z",
    "slug": "awais68-db-migration",
    "source_url": "https://github.com/Awais68/hackathon-2-phase-ii-full-stack-web-app/tree/main/.claude/skills/db-migration",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "d38fac073d7e3c2eeac468c609600e0e8213455aeefe65a959000237ea0d6b4c",
    "tree_hash": "3e02b69ed1b33271136214c7e95f9a456fda6e45f29910999c62e562314c37ac"
  },
  "skill": {
    "name": "db-migration",
    "description": "Use when setting up Alembic migrations or making database schema changes.\nTriggers for: initializing Alembic, generating migrations, applying upgrades,\nrolling back changes, or creating data migrations.\nNOT for: raw SQL execution outside migration context or non-database schema updates.\n",
    "summary": "Use when setting up Alembic migrations or making database schema changes.\nTriggers for: initializing...",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Awais68",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "database",
      "alembic",
      "migration",
      "sqlmodel",
      "fastapi"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill with no executable code. The SKILL.md contains only documentation and code examples. The verify.py script only reads and validates YAML frontmatter locally. All 86 static findings are false positives from misidentified patterns: regex was flagged as crypto, markdown backticks as shell execution, and database terms like 'upgrade' as C2 keywords.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/verify.py",
            "line_start": 1,
            "line_end": 62
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 616,
    "audit_model": "claude",
    "audited_at": "2026-01-16T17:36:51.392Z"
  },
  "content": {
    "user_title": "Manage database migrations with Alembic",
    "value_statement": "Database migrations are complex and error-prone. This skill provides expert guidance for Alembic migrations in SQLModel and FastAPI projects with safe schema evolution and rollback capabilities.",
    "seo_keywords": [
      "database migration",
      "alembic",
      "sqlmodel",
      "fastapi",
      "schema changes",
      "database rollback",
      "sqlalchemy migrations",
      "python database",
      "schema evolution",
      "claude code"
    ],
    "actual_capabilities": [
      "Initialize Alembic migrations in SQLModel and FastAPI projects",
      "Generate migrations automatically from model changes",
      "Apply and rollback database schema changes safely",
      "Create manual migrations for complex scenarios",
      "Handle data migrations and enum type changes",
      "Review and test migration cycles"
    ],
    "limitations": [
      "Does not execute migrations directly (requires alembic CLI)",
      "Does not manage database connections directly",
      "Requires SQLModel or SQLAlchemy-based project",
      "Does not provide migration hosting or deployment"
    ],
    "use_cases": [
      {
        "target_user": "FastAPI Developers",
        "title": "Set up migrations",
        "description": "Initialize and manage Alembic migrations for production FastAPI applications"
      },
      {
        "target_user": "Data Engineers",
        "title": "Handle data migrations",
        "description": "Create complex data migrations with batch updates and enum type changes"
      },
      {
        "target_user": "Backend Teams",
        "title": "Maintain rollback safety",
        "description": "Maintain safe rollback capabilities for database schema evolution"
      }
    ],
    "prompt_templates": [
      {
        "title": "Initialize Alembic",
        "scenario": "Start new migration setup",
        "prompt": "Initialize Alembic migrations in my SQLModel project"
      },
      {
        "title": "Generate migration",
        "scenario": "Create migration from models",
        "prompt": "Generate a migration for my new User table with email and created_at fields"
      },
      {
        "title": "Apply migrations",
        "scenario": "Deploy to database",
        "prompt": "Apply all pending migrations and show the current revision"
      },
      {
        "title": "Rollback safely",
        "scenario": "Undo schema changes",
        "prompt": "Rollback the last migration and show the downgrade steps"
      }
    ],
    "output_examples": [
      {
        "input": "Generate a migration for adding a fees table with student_id, amount, status, and due_date columns",
        "output": [
          "Generated migration file with table creation and foreign key constraint",
          "Added indexes on student_id and status columns",
          "Created downgrade function to safely drop the table",
          "Migration ready for review before applying"
        ]
      },
      {
        "input": "How do I handle enum type changes safely",
        "output": [
          "Create new enum type before altering the column",
          "Use USING clause for type conversion",
          "Include downgrade path to revert enum values",
          "Test the full upgrade and downgrade cycle"
        ]
      }
    ],
    "best_practices": [
      "Always generate migrations with --autogenerate before editing manually",
      "Test the full upgrade and downgrade cycle in a non-production environment",
      "Ensure downgrade operations drop indexes before tables and use IF EXISTS clauses"
    ],
    "anti_patterns": [
      "Do not skip the autogenerate step and write migrations entirely by hand",
      "Do not forget to include rollback logic in the downgrade function",
      "Do not run migrations directly in production without testing the downgrade path first"
    ],
    "faq": [
      {
        "question": "Does this skill work with plain SQLAlchemy?",
        "answer": "Yes. The examples use SQLModel but the Alembic commands and patterns work with any SQLAlchemy-based project."
      },
      {
        "question": "What databases are supported?",
        "answer": "Alembic supports PostgreSQL, MySQL, SQLite, and other SQLAlchemy-compatible databases. The skill covers patterns applicable to all."
      },
      {
        "question": "How do I handle large table migrations?",
        "answer": "Use batch updates with LIMIT clauses in your upgrade function to avoid locking large tables during data migrations."
      },
      {
        "question": "Is my data safe during migrations?",
        "answer": "The skill provides best practices for data safety including testing migrations, using transactions, and always providing downgrade paths."
      },
      {
        "question": "Why is my autogenerated migration empty?",
        "answer": "Ensure your SQLModel classes are imported in env.py so Alembic can detect the changes in your target_metadata."
      },
      {
        "question": "How is this different from raw SQL?",
        "answer": "Alembic provides version control for schema changes with reversible migrations. Raw SQL lacks this safety and tracking capability."
      }
    ]
  },
  "file_structure": [
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "verify.py",
          "type": "file",
          "path": "scripts/verify.py",
          "lines": 62
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 353
    }
  ]
}
