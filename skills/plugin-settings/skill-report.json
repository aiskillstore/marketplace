{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-17T08:12:29.996Z",
    "slug": "plugin-settings",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-settings",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "official",
    "content_hash": "9c288b412cc63328235235c13cd470a74d78bdfe99229a41d293f8b942561aef",
    "tree_hash": "cb8d037c24bea356090ae186162d7fb00866d2817b539ccc52ee0e9bf806573e"
  },
  "skill": {
    "name": "plugin-settings",
    "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
    "summary": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", ...",
    "icon": "⚙️",
    "version": "0.1.0",
    "author": "anthropics",
    "license": "MIT",
    "category": "development",
    "tags": [
      "configuration",
      "plugin-development",
      "settings",
      "yaml",
      "persistence"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official Anthropic skill providing documentation on plugin settings pattern. Contains only educational content and utility scripts with safe bash practices including set -euo pipefail, file existence checks, and proper input validation. No network access, no dangerous operations, no external dependencies beyond standard POSIX tools.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/parse-frontmatter.sh",
            "line_start": 1,
            "line_end": 60
          },
          {
            "file": "scripts/validate-settings.sh",
            "line_start": 1,
            "line_end": 102
          },
          {
            "file": "examples/read-settings-hook.sh",
            "line_start": 1,
            "line_end": 66
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/parse-frontmatter.sh",
            "line_start": 30,
            "line_end": 35
          },
          {
            "file": "scripts/validate-settings.sh",
            "line_start": 26,
            "line_end": 38
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/parse-frontmatter.sh",
            "line_start": 37,
            "line_end": 51
          },
          {
            "file": "SKILL.md",
            "line_start": 139,
            "line_end": 171
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 9,
    "total_lines": 2264,
    "audit_model": "claude",
    "audited_at": "2026-01-17T08:12:29.996Z"
  },
  "content": {
    "user_title": "Configure plugin settings with YAML frontmatter pattern",
    "value_statement": "Plugin settings can be stored in .claude/plugin-name.local.md files using YAML frontmatter and markdown. This pattern enables per-project plugin configuration, state persistence, and user-customizable behavior without complex databases or configuration files.",
    "seo_keywords": [
      "plugin settings",
      "Claude Code plugin",
      "YAML frontmatter",
      ".local.md files",
      "plugin configuration",
      "Claude plugin settings",
      "per-project settings",
      "plugin state files",
      "Claude Codex plugin"
    ],
    "actual_capabilities": [
      "Create .claude/plugin-name.local.md files with YAML frontmatter for structured configuration",
      "Parse YAML frontmatter in bash hooks using sed, grep, and awk commands",
      "Store plugin state including enabled flags, mode settings, and iteration counters",
      "Use markdown body content as prompts or additional context for plugin behavior",
      "Implement quick-exit patterns to skip hook processing when settings file is absent",
      "Validate settings file structure and field values before use"
    ],
    "limitations": [
      "Changes to settings files require Claude Code restart (hooks cannot be hot-swapped)",
      "Parsing is limited to bash-based text extraction (not full YAML parser)",
      "Settings are project-local and not shared across different projects"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developers",
        "title": "Add configurable behavior",
        "description": "Enable users to customize plugin behavior through settings files rather than hardcoded defaults"
      },
      {
        "target_user": "Multi-agent coordination",
        "title": "Track agent state",
        "description": "Store agent task assignments, iteration counts, and coordinator session information across sessions"
      },
      {
        "target_user": "Power users",
        "title": "Create feature flags",
        "description": "Enable or disable plugin features without modifying plugin code"
      }
    ],
    "prompt_templates": [
      {
        "title": "Enable my plugin",
        "scenario": "Activate plugin for current project",
        "prompt": "Create a .claude/my-plugin.local.md file to enable my plugin with standard mode and logging enabled"
      },
      {
        "title": "Read plugin settings",
        "scenario": "Check plugin configuration in hooks",
        "prompt": "Check if .claude/my-plugin.local.md exists and read the enabled and mode fields from frontmatter"
      },
      {
        "title": "Update iteration counter",
        "scenario": "Increment state in loop pattern",
        "prompt": "Update the iteration field in .claude/ralph-loop.local.md to increment from current value"
      },
      {
        "title": "Validate settings file",
        "scenario": "Verify configuration is valid",
        "prompt": "Validate that .claude/my-plugin.local.md has valid frontmatter with enabled field set to true"
      }
    ],
    "output_examples": [
      {
        "input": "Create a settings file to enable my plugin with strict validation mode",
        "output": [
          "Settings file created at .claude/my-plugin.local.md",
          "Configuration: enabled=true, mode=strict, max_file_size=1000000",
          "To modify: edit file and restart Claude Code",
          "File is automatically gitignored"
        ]
      },
      {
        "input": "Configure my plugin to allow JavaScript and TypeScript files with 2MB limit",
        "output": [
          "Updated .claude/my-plugin.local.md with new settings",
          "Allowed extensions: .js, .ts",
          "Maximum file size: 2097152 bytes",
          "Restart Claude Code for changes to take effect"
        ]
      }
    ],
    "best_practices": [
      "Always provide sensible defaults when settings file does not exist",
      "Use quick-exit pattern to skip hook processing when plugin is not configured",
      "Add .claude/*.local.md to project .gitignore to prevent committing user settings"
    ],
    "anti_patterns": [
      "Do not hardcode absolute paths to settings files (use relative paths like .claude/plugin-name.local.md)",
      "Do not skip file existence checks before reading settings",
      "Do not use non-atomic file updates that could corrupt settings on interruption"
    ],
    "faq": [
      {
        "question": "Which tools support this pattern?",
        "answer": "Plugin Settings works with Claude, Codex, and Claude Code. The .claude directory pattern is native to Claude Code plugins."
      },
      {
        "question": "What are the size limits for settings files?",
        "answer": "Settings files use standard markdown. There are no hard limits but keep files under 1MB for optimal hook performance."
      },
      {
        "question": "How do I integrate with existing plugins?",
        "answer": "Add settings file creation to your plugin commands and settings reading to your hooks. Use the quick-exit pattern to maintain backward compatibility."
      },
      {
        "question": "Are settings files secure?",
        "answer": "Settings files are stored in .claude directory which is user-local. Always validate and sanitize input before writing settings. Add to .gitignore to prevent accidental commits."
      },
      {
        "question": "Why are my changes not taking effect?",
        "answer": "Settings changes require Claude Code restart. Hooks cannot be hot-swapped within a session. Exit and restart with 'claude' command."
      },
      {
        "question": "How does this compare to CLAUDE.md?",
        "answer": "CLAUDE.md is for project-wide context. .claude/*.local.md is for plugin-specific settings. Use local.md for plugin configuration, CLAUDE.md for general project documentation."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "create-settings-command.md",
          "type": "file",
          "path": "examples/create-settings-command.md",
          "lines": 99
        },
        {
          "name": "example-settings.md",
          "type": "file",
          "path": "examples/example-settings.md",
          "lines": 160
        },
        {
          "name": "read-settings-hook.sh",
          "type": "file",
          "path": "examples/read-settings-hook.sh",
          "lines": 66
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "parsing-techniques.md",
          "type": "file",
          "path": "references/parsing-techniques.md",
          "lines": 550
        },
        {
          "name": "real-world-examples.md",
          "type": "file",
          "path": "references/real-world-examples.md",
          "lines": 396
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "parse-frontmatter.sh",
          "type": "file",
          "path": "scripts/parse-frontmatter.sh",
          "lines": 60
        },
        {
          "name": "validate-settings.sh",
          "type": "file",
          "path": "scripts/validate-settings.sh",
          "lines": 102
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 545
    }
  ]
}
