{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-16T17:47:33.678Z",
    "slug": "automattic-wp-abilities-api",
    "source_url": "https://github.com/Automattic/agent-skills/tree/trunk/skills/wp-abilities-api",
    "source_ref": "trunk",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "7ef50a7300aceb283917040cdc53d6ba062888227c827ce653540c77143c7b8b",
    "tree_hash": "9c386ff22cd089d6bfc1cbb1f4373df31d6f00a2c68aec6a4806a6a6fb23f708"
  },
  "skill": {
    "name": "wp-abilities-api",
    "description": "Use when working with the WordPress Abilities API (wp_register_ability, wp_register_ability_category, /wp-json/wp-abilities/v1/*, @wordpress/abilities) including defining abilities, categories, meta, REST exposure, and permissions checks for clients.",
    "summary": "Use when working with the WordPress Abilities API (wp_register_ability, wp_register_ability_category...",
    "icon": "ðŸ”Œ",
    "version": "1.0.0",
    "author": "Automattic",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "wordpress",
      "abilities-api",
      "rest-api",
      "php",
      "wordpress-plugin"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a pure documentation skill containing only markdown files that provide guidance on WordPress Abilities API usage. No executable code, scripts, network calls, filesystem modifications, or external command execution exist. All 78 static findings are false positives caused by the scanner misidentifying PHP function syntax in documentation examples as shell commands and cryptographic patterns.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "references/php-registration.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "references/php-registration.md",
            "line_start": 13,
            "line_end": 13
          },
          {
            "file": "references/php-registration.md",
            "line_start": 15,
            "line_end": 15
          },
          {
            "file": "references/php-registration.md",
            "line_start": 15,
            "line_end": 15
          },
          {
            "file": "references/php-registration.md",
            "line_start": 17,
            "line_end": 35
          },
          {
            "file": "references/php-registration.md",
            "line_start": 35,
            "line_end": 39
          },
          {
            "file": "references/php-registration.md",
            "line_start": 39,
            "line_end": 40
          },
          {
            "file": "references/php-registration.md",
            "line_start": 40,
            "line_end": 42
          },
          {
            "file": "references/php-registration.md",
            "line_start": 42,
            "line_end": 46
          },
          {
            "file": "references/php-registration.md",
            "line_start": 46,
            "line_end": 47
          },
          {
            "file": "references/php-registration.md",
            "line_start": 47,
            "line_end": 48
          },
          {
            "file": "references/php-registration.md",
            "line_start": 48,
            "line_end": 49
          },
          {
            "file": "references/php-registration.md",
            "line_start": 49,
            "line_end": 50
          },
          {
            "file": "references/php-registration.md",
            "line_start": 50,
            "line_end": 51
          },
          {
            "file": "references/php-registration.md",
            "line_start": 51,
            "line_end": 52
          },
          {
            "file": "references/php-registration.md",
            "line_start": 52,
            "line_end": 53
          },
          {
            "file": "references/php-registration.md",
            "line_start": 53,
            "line_end": 53
          },
          {
            "file": "references/php-registration.md",
            "line_start": 53,
            "line_end": 54
          },
          {
            "file": "references/php-registration.md",
            "line_start": 54,
            "line_end": 54
          },
          {
            "file": "references/php-registration.md",
            "line_start": 54,
            "line_end": 58
          },
          {
            "file": "references/php-registration.md",
            "line_start": 58,
            "line_end": 60
          },
          {
            "file": "references/php-registration.md",
            "line_start": 60,
            "line_end": 60
          },
          {
            "file": "references/php-registration.md",
            "line_start": 60,
            "line_end": 61
          },
          {
            "file": "references/rest-api.md",
            "line_start": 1,
            "line_end": 1
          },
          {
            "file": "references/rest-api.md",
            "line_start": 5,
            "line_end": 5
          },
          {
            "file": "references/rest-api.md",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "references/rest-api.md",
            "line_start": 10,
            "line_end": 10
          },
          {
            "file": "references/rest-api.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 14,
            "line_end": 14
          },
          {
            "file": "SKILL.md",
            "line_start": 15,
            "line_end": 15
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 35
          },
          {
            "file": "SKILL.md",
            "line_start": 36,
            "line_end": 36
          },
          {
            "file": "SKILL.md",
            "line_start": 37,
            "line_end": 37
          },
          {
            "file": "SKILL.md",
            "line_start": 38,
            "line_end": 38
          },
          {
            "file": "SKILL.md",
            "line_start": 39,
            "line_end": 39
          },
          {
            "file": "SKILL.md",
            "line_start": 40,
            "line_end": 40
          },
          {
            "file": "SKILL.md",
            "line_start": 46,
            "line_end": 46
          },
          {
            "file": "SKILL.md",
            "line_start": 52,
            "line_end": 52
          },
          {
            "file": "SKILL.md",
            "line_start": 53,
            "line_end": 53
          },
          {
            "file": "SKILL.md",
            "line_start": 53,
            "line_end": 53
          },
          {
            "file": "SKILL.md",
            "line_start": 54,
            "line_end": 54
          },
          {
            "file": "SKILL.md",
            "line_start": 55,
            "line_end": 55
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 57
          },
          {
            "file": "SKILL.md",
            "line_start": 59,
            "line_end": 59
          },
          {
            "file": "SKILL.md",
            "line_start": 63,
            "line_end": 63
          },
          {
            "file": "SKILL.md",
            "line_start": 64,
            "line_end": 64
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 73,
            "line_end": 73
          },
          {
            "file": "SKILL.md",
            "line_start": 73,
            "line_end": 73
          },
          {
            "file": "SKILL.md",
            "line_start": 74,
            "line_end": 74
          },
          {
            "file": "SKILL.md",
            "line_start": 83,
            "line_end": 83
          },
          {
            "file": "SKILL.md",
            "line_start": 94,
            "line_end": 94
          },
          {
            "file": "SKILL.md",
            "line_start": 95,
            "line_end": 95
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "references/php-registration.md",
            "line_start": 65,
            "line_end": 65
          },
          {
            "file": "references/php-registration.md",
            "line_start": 66,
            "line_end": 66
          },
          {
            "file": "skill-report.json",
            "line_start": 6,
            "line_end": 6
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 4,
    "total_lines": 383,
    "audit_model": "claude",
    "audited_at": "2026-01-16T17:47:33.678Z"
  },
  "content": {
    "user_title": "Work with WordPress Abilities API",
    "value_statement": "WordPress Abilities API enables granular feature control for clients. This skill provides step-by-step guidance for registering abilities in PHP, exposing them via REST endpoints, and consuming them safely in JavaScript applications.",
    "seo_keywords": [
      "WordPress Abilities API",
      "wp_register_ability",
      "wp-abilities/v1",
      "WordPress REST API",
      "WordPress permissions",
      "WordPress capabilities",
      "Claude Code",
      "Claude",
      "Codex",
      "WordPress plugin development"
    ],
    "actual_capabilities": [
      "Register ability categories using wp_register_ability_category() in PHP",
      "Register abilities with wp_register_ability() including meta and schema definitions",
      "Expose abilities to REST API clients via wp-abilities/v1 endpoints",
      "Consume abilities in JavaScript using @wordpress/abilities package",
      "Debug ability visibility issues in REST and JavaScript contexts",
      "Implement permission callbacks for capability-based access control"
    ],
    "limitations": [
      "Targets WordPress 6.9+ (PHP 7.2.24+) - older versions need Abilities API plugin",
      "Requires WP-CLI for some workflows - not all features work without CLI",
      "Cannot install or configure WordPress environments - only guides existing setups"
    ],
    "use_cases": [
      {
        "target_user": "WordPress Plugin Developers",
        "title": "Add Feature Flags",
        "description": "Register new abilities for plugin features and expose them to the WordPress command palette or UI controls."
      },
      {
        "target_user": "Theme Developers",
        "title": "Expose Theme Capabilities",
        "description": "Make theme-specific functionality available to block editor patterns and client-side JavaScript applications."
      },
      {
        "target_user": "WP Core Contributors",
        "title": "Test Abilities API Core",
        "description": "Implement or debug Abilities API usage in WordPress core, including REST endpoint verification and PHP registration hooks."
      }
    ],
    "prompt_templates": [
      {
        "title": "Register New Ability",
        "scenario": "Add ability to plugin",
        "prompt": "Register a new ability called 'my-plugin/process-data' in PHP. It should appear in the WordPress command palette, accept JSON input with 'data' and 'format' fields, and only be accessible to users who can edit posts."
      },
      {
        "title": "Debug REST Visibility",
        "scenario": "Ability not showing in REST",
        "prompt": "My ability is registered but does not appear when querying /wp-json/wp-abilities/v1/abilities. Walk me through the debugging checklist to identify why it is missing."
      },
      {
        "title": "Add Ability Category",
        "scenario": "Organize related abilities",
        "prompt": "Create an ability category for my e-commerce plugin with the ID 'my-shop' and proper localization. Then register two abilities within that category for managing products and orders."
      },
      {
        "title": "Consume from JavaScript",
        "scenario": "Use ability in JS",
        "prompt": "Show me how to consume an ability from JavaScript using @wordpress/abilities. I need to check if a user has a specific ability and execute it with input data in the block editor context."
      }
    ],
    "output_examples": [
      {
        "input": "Register a 'posts/export' ability that lets users export posts to CSV. It should require 'edit_posts' capability and appear in REST.",
        "output": [
          "1. Register category first (if needed):",
          "   add_action('wp_abilities_api_categories_init', function() {",
          "       wp_register_ability_category('my-exporter', ['label' => __('Post Exporter', 'my-exporter')]);",
          "   });",
          "2. Register the ability with permission_callback:",
          "   add_action('wp_abilities_api_init', function() {",
          "       wp_register_ability('my-exporter/export-posts', [",
          "           'label' => __('Export Posts to CSV', 'my-exporter'),",
          "           'description' => __('Generates a CSV file of all published posts.', 'my-exporter'),",
          "           'category' => 'my-exporter',",
          "           'callback' => 'my_exporter_csv_callback',",
          "           'permission_callback' => function() { return current_user_can('edit_posts'); },",
          "           'meta' => ['show_in_rest' => true],",
          "           'input_schema' => ['type' => 'object', 'properties' => ['status' => ['type' => 'string']]],",
          "       ]);",
          "   });"
        ]
      },
      {
        "input": "Why is my ability not appearing in the REST API response?",
        "output": [
          "Check these common issues:",
          "1. Verify 'meta.show_in_rest' is set to true in wp_register_ability() args",
          "2. Confirm registration happens on 'wp_abilities_api_init' hook (not other hooks)",
          "3. Ensure the category was registered first on 'wp_abilities_api_categories_init'",
          "4. Check that the ability ID matches what you are querying",
          "5. Clear any caching (object cache, page cache) that might hide changes",
          "6. Verify the REST endpoint URL: /wp-json/wp-abilities/v1/abilities"
        ]
      }
    ],
    "best_practices": [
      "Namespace ability IDs with your plugin/theme prefix (e.g., 'my-plugin:feature.action') to avoid collisions with other plugins",
      "Register categories before abilities using the correct hooks (wp_abilities_api_categories_init, then wp_abilities_api_init)",
      "Include input_schema and output_schema definitions to enable validation and help AI agents understand usage patterns"
    ],
    "anti_patterns": [
      "Registering abilities outside of wp_abilities_api_init hook - this triggers _doing_it_wrong() and registration fails silently",
      "Changing ability IDs after release - treat them as stable public API that breaking changes would affect downstream consumers",
      "Skipping permission_callback for abilities that modify data - always verify user capabilities to prevent unauthorized actions"
    ],
    "faq": [
      {
        "question": "What WordPress versions support the Abilities API?",
        "answer": "WordPress 6.9+ includes Abilities API in core. Older versions require the separate Abilities API plugin package."
      },
      {
        "question": "What permissions does my ability need?",
        "answer": "Define a permission_callback function that returns true or false based on current_user_can() checks for your required capability."
      },
      {
        "question": "How do I expose abilities to REST clients?",
        "answer": "Set 'meta.show_in_rest' to true when registering the ability. The ability will appear at /wp-json/wp-abilities/v1/abilities."
      },
      {
        "question": "Is my data safe when using this skill?",
        "answer": "Yes. This skill only provides documentation guidance. No code execution, file access, or network calls occur on your system."
      },
      {
        "question": "Why does my ability not appear in REST?",
        "answer": "Common causes include missing meta.show_in_rest, registration on wrong hook, category not registered first, or caching issues."
      },
      {
        "question": "How is this different from WordPress capabilities?",
        "answer": "Abilities API provides structured, discoverable feature flags with schemas. Unlike basic capabilities, they support input/output validation and REST exposure."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "php-registration.md",
          "type": "file",
          "path": "references/php-registration.md",
          "lines": 68
        },
        {
          "name": "rest-api.md",
          "type": "file",
          "path": "references/rest-api.md",
          "lines": 14
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 96
    }
  ]
}
