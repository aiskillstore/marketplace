{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-18T08:56:09.838Z",
    "slug": "sickn33-nextjs-supabase-auth",
    "source_url": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/nextjs-supabase-auth/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "83395a60e82795c073331e10fd70460be418159ed0a429e8f30f67565853ca3e",
    "tree_hash": "d6ee4fa8edf528812630ed09750a27e7ff8c6a44e7a964a11b98f94eb46646bf"
  },
  "skill": {
    "name": "nextjs-supabase-auth",
    "description": "Expert integration of Supabase Auth with Next.js App Router. Use when: supabase auth next, authentication next.js, login supabase, auth middleware, protected route.",
    "summary": "Expert integration of Supabase Auth with Next.js App Router",
    "icon": "üîê",
    "version": "1.0.0",
    "author": "sickn33",
    "license": "MIT",
    "tags": [
      "nextjs",
      "supabase",
      "authentication",
      "app-router",
      "security"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Static analysis flagged backticks in Markdown and references to 'auth' as security concerns. Both are false positives. The skill is a documentation file containing only Markdown text describing Supabase Auth integration patterns. No executable code, no network calls, no file system access, and no actual security vulnerabilities present.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 57,
    "audit_model": "claude",
    "audited_at": "2026-02-18T08:56:09.838Z",
    "risk_factors": [],
    "risk_factor_evidence": []
  },
  "content": {
    "user_title": "Add Supabase Auth to Next.js App Router",
    "value_statement": "This skill provides expert guidance for integrating Supabase authentication with Next.js App Router. It helps developers implement secure login flows, protect routes with middleware, and properly handle sessions in server and client components.",
    "seo_keywords": [
      "Claude Code Supabase Auth",
      "Next.js Supabase authentication",
      "Supabase Auth Next.js App Router",
      "Codex Next.js auth integration",
      "Claude authentication middleware",
      "Supabase session management Next.js",
      "Next.js protected routes Supabase",
      "Server Components authentication",
      "Supabase OAuth callback handling",
      "Next.js auth best practices"
    ],
    "actual_capabilities": [
      "Set up Supabase client with @supabase/ssr for App Router",
      "Implement authentication middleware for protected routes",
      "Handle OAuth callback routes and session exchange",
      "Create auth flow using Server Actions",
      "Manage cookie-based session lifecycle",
      "Avoid common auth state management mistakes"
    ],
    "limitations": [
      "Does not include executable code or templates",
      "Requires existing Next.js App Router project",
      "Requires Supabase project with auth configured",
      "Does not cover legacy Pages Router patterns"
    ],
    "use_cases": [
      {
        "title": "Building a new Next.js app with user authentication",
        "description": "Add secure login and session management to a new Next.js App Router project using Supabase as the auth provider.",
        "target_user": "Full-stack developers building web applications"
      },
      {
        "title": "Protecting routes with middleware",
        "description": "Implement route protection that checks authentication status and refreshes sessions before granting access.",
        "target_user": "Next.js developers needing route security"
      },
      {
        "title": "Migrating from Pages Router to App Router",
        "description": "Understand the differences in auth patterns between Pages Router and App Router when using Supabase.",
        "target_user": "Developers migrating existing Next.js projects"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Supabase setup",
        "prompt": "How do I set up Supabase Auth in a Next.js App Router project?",
        "scenario": "Getting started with Supabase authentication"
      },
      {
        "title": "Middleware protection",
        "prompt": "Create middleware to protect routes and refresh sessions with Supabase",
        "scenario": "Securing routes with auth middleware"
      },
      {
        "title": "OAuth callback handling",
        "prompt": "How do I handle OAuth callback and exchange the code for a session in Next.js?",
        "scenario": "Setting up social login flow"
      },
      {
        "title": "Server Action auth",
        "prompt": "Use Supabase with Server Actions for login, logout, and registration",
        "scenario": "Implementing form-based authentication"
      }
    ],
    "output_examples": [
      {
        "input": "How do I set up Supabase Auth in Next.js App Router?",
        "output": "Use @supabase/ssr package. Install it with npm install @supabase/ssr. Create a utils/supabase/server.ts file for server-side client and utils/supabase/client.ts for client-side client. Configure environment variables NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY."
      },
      {
        "input": "Create auth middleware for protected routes",
        "output": "Import createServerClient from @supabase/ssr. In middleware, use supabase.auth.getUser() to verify tokens. Return redirect to /login if no valid session. Refresh tokens before expiration."
      }
    ],
    "best_practices": [
      "Use @supabase/ssr package instead of @supabase/auth-helpers-nextjs for App Router",
      "Handle tokens in middleware for protected routes, not in client components",
      "Use Server Actions for auth operations to keep sensitive logic on the server",
      "Never expose auth tokens to client unnecessarily - rely on HttpOnly cookies"
    ],
    "anti_patterns": [
      "Do not use getSession in Server Components - use getUser instead",
      "Do not manage auth state in Client Components without a session listener",
      "Do not store tokens manually in localStorage - use Supabase's cookie-based sessions"
    ],
    "faq": [
      {
        "question": "What package should I use for Supabase Auth in Next.js App Router?",
        "answer": "Use @supabase/ssr. It is the official package designed for App Router and handles cookie-based sessions properly."
      },
      {
        "question": "How do I protect routes in Next.js App Router?",
        "answer": "Use middleware. Import createServerClient and check for valid sessions using getUser(). Redirect to login page if no session exists."
      },
      {
        "question": "Can I use Supabase Auth with Server Components?",
        "answer": "Yes. Use the server client from @supabase/ssr. Call getUser() or getSession() in Server Components to check auth status."
      },
      {
        "question": "How do sessions work with Supabase in Next.js?",
        "answer": "Supabase uses cookie-based sessions. The middleware handles cookie rotation, refreshing tokens before they expire automatically."
      },
      {
        "question": "What is the difference between getSession and getUser?",
        "answer": "getSession returns the session including raw tokens (avoid in browsers). getUser validates the token with Supabase and returns user data (recommended)."
      },
      {
        "question": "How do I handle OAuth callbacks?",
        "answer": "Create a route handler at /auth/callback. Exchange the code from URL params for a session using supabase.auth.exchangeCodeForSession(). Then redirect to the protected area."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 57
    }
  ]
}
