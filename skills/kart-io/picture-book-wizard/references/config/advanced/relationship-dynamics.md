# Relationship Dynamics Configuration

**Version**: 3.0 (Multi-Character System)
**Purpose**: Define relationship patterns and interaction dynamics for multi-character stories

---

## Overview

Relationship Dynamics is a new **Soul Layer** dimension that defines how characters interact and relate to each other in stories. This extends the Soul System from 5 to 6 dimensions:

**Soul Layer Dimensions**:
1. Emotion/Mood (7 types)
2. Theme (8 types)
3. Narrative Structure (6 types)
4. Pacing (5 types)
5. Color Mood (7 palettes)
6. **Relationship Dynamics** (4 types) ðŸ†•

---

## Why Relationship Dynamics?

**Problem**: Previous system could only tell single-protagonist stories. Social interaction themes (friendship, family, kindness) lacked authentic multi-character representation.

**Solution**: Relationship Dynamics provides structure for multi-character interactions:
- Enables social learning
- Supports emotional relationship stories
- Allows authentic friendship and family narratives
- Enriches thematic depth

---

## The 4 Relationship Types

### 1. Solo (ç‹¬è‡ª) - `solo`

**Chinese**: ç‹¬è‡ªã€ä¸€ä¸ªäººã€è‡ªæˆ‘æŽ¢ç´¢

**Pattern**: Single character internal exploration or independent activity

**Character Count**: 1

**Focus**:
- Personal growth
- Self-discovery
- Individual challenges
- Internal reflection

**Best For**:
- **Themes**: Growth, Courage, Discovery, Nature, Creativity
- **Narratives**: Journey, Problem-Solving, Transformation, Quest
- **Emotions**: Curious, Reflective, Brave, Wonder
- **Ages**: All ages (3-12)

**Example Scenarios**:
- Exploring forest alone
- Solving puzzle independently
- Discovering nature
- Personal courage challenge
- Solo artistic creation

**Prompt Structure**:
```
[Single Character Anchor] +
[Solo Action/Pose] +
[Scene Elements] +
[Internal emotional state] +
...
```

---

### 2. Pair (åŒäºº) - `pair`

**Chinese**: åŒäººã€ä¸¤ä¸ªäººã€ä¼™ä¼´äº’åŠ¨

**Pattern**: Two characters interacting, cooperating, or learning from each other

**Character Count**: 2

**Focus**:
- Friendship development
- Sibling interaction
- Intergenerational learning (grandparent-grandchild)
- Cooperation and teamwork
- Mutual support

**Best For**:
- **Themes**: Friendship, Family, Kindness, Growth, Cooperation
- **Narratives**: Helping, Cooperation, Problem-Solving (dual), Journey (together)
- **Emotions**: Warm, Joyful, Brave (supporting), Calm (together)
- **Ages**: All ages (3-12), especially 5+

**Interaction Patterns**:

**A. Peer Interaction** (åŒé¾„ä¼™ä¼´):
- Two protagonists as friends (e.g., Yueyue + Xiaoming)
- Equal roles, mutual learning
- Friendship themes
- Ages 5-12

**B. Intergenerational** (ä»£é™…äº’åŠ¨):
- Child + elderly (e.g., Yueyue + Grandma)
- Teaching-learning relationship
- Family warmth themes
- Ages 3-12

**C. Sibling-like** (ç±»å…„å¼Ÿå§å¦¹):
- Older + younger protagonist (e.g., Xiaoming + Lele)
- Protective/caring dynamic
- Responsibility themes
- Ages 5+

**Example Scenarios**:
- Two friends solving puzzle together
- Grandma teaching grandchild to cook
- Older child helping younger child
- Friends exploring forest together
- Siblings sharing toys

**Prompt Structure**:
```
[Primary Character Anchor - 150 words] +
[Interaction Action] +
[Secondary Character Anchor - 50 words] +
[Relationship Description] +
[Scene Elements] +
...
```

---

### 3. Family (å®¶åº­) - `family`

**Chinese**: å®¶åº­ã€å®¶äººèšä¼šã€äº²æƒ…

**Pattern**: Family unit interaction (3-4 characters), focus on family bonds

**Character Count**: 3-4

**Focus**:
- Family warmth and unity
- Intergenerational relationships
- Family activities and traditions
- Collective family experiences
- Cultural heritage transmission

**Best For**:
- **Themes**: Family, Warm, Kindness, Tradition
- **Narratives**: Cycle (family routines), Cumulative (family project), Cooperation
- **Emotions**: Warm, Joyful, Calm
- **Ages**: 5-12 (requires understanding of family roles)

**Family Configurations**:

**A. Three-Generation** (ä¸‰ä»£åŒå ‚):
- Child + Parent + Grandparent
- Example: Yueyue + Mom + Grandma
- Cultural transmission theme

**B. Nuclear Family** (æ ¸å¿ƒå®¶åº­):
- Child + Both Parents
- Example: Xiaoming + Mom + Dad
- Family unity theme

**C. Sibling Family** (å…„å¼Ÿå§å¦¹å®¶åº­):
- Multiple children + Parent/Grandparent
- Example: Yueyue + Lele + Grandma
- Sibling relationships theme

**Example Scenarios**:
- Family preparing festival dinner together
- Three generations making dumplings
- Family outing to market
- Grandma telling story while parents listen
- Family working in garden together

**Prompt Structure**:
```
[Primary Character Anchor - 150 words] +
[Primary Action] +
[Secondary Character Anchor - 50 words] +
[Secondary Action] +
[Tertiary Character Anchor - 30 words] +
[Family Interaction Description] +
[Scene Elements] +
...
```

**Note**: Family dynamics require longer prompts (250-300 words) to accommodate multiple characters.

---

### 4. Group (ç¾¤ä½“) - `group`

**Chinese**: ç¾¤ä½“ã€å°å›¢é˜Ÿã€æœ‹å‹åœˆ

**Pattern**: Small peer group (3-5 children), focus on group dynamics

**Character Count**: 3-5

**Focus**:
- Peer cooperation
- Group problem-solving
- Social skills development
- Community participation
- Collective creativity

**Best For**:
- **Themes**: Friendship, Cooperation, Creativity, Discovery
- **Narratives**: Cumulative (group contribution), Cooperation, Problem-Solving (group)
- **Emotions**: Joyful, Curious, Brave (collective courage)
- **Ages**: 7-12 (requires understanding of group dynamics)

**Group Configurations**:

**A. Peer Group** (åŒé¾„ç¾¤ä½“):
- 3-5 protagonists as friends
- Example: Yueyue + Xiaoming + Meimei
- Friendship and cooperation

**B. Classroom/Kindergarten** (è¯¾å ‚/å¹¼å„¿å›­):
- Multiple children + Teacher
- Example: 4 children + Teacher in kindergarten scene
- Learning and social skills

**C. Play Group** (çŽ©ä¼´):
- Neighborhood children playing together
- Example: 3-4 children at playground/meadow
- Social play and sharing

**Example Scenarios**:
- Group of friends building something together
- Classroom working on group project
- Children playing cooperative game
- Neighborhood kids exploring together
- Group preparing surprise for someone

**Prompt Structure**:
```
[Primary Character Anchor - 100 words] +
[Primary Action] +
[Secondary Character Anchor - 40 words] +
[Tertiary Character Anchor - 40 words] +
[Additional Characters - 20 words each] +
[Group Interaction Description] +
[Scene Elements] +
...
```

**Note**: Group dynamics require careful prompt management. Consider using "group of children" description instead of individual anchors when 4+ characters.

---

## Compatibility Matrix

### Relationship Ã— Theme Compatibility

| Relationship | Highly Compatible Themes | Avoid |
|--------------|-------------------------|-------|
| **Solo** | Growth, Courage, Discovery, Nature | Family, Friendship, Kindness (needs others) |
| **Pair** | Friendship, Family, Kindness, Growth, Cooperation | (None - very versatile) |
| **Family** | Family, Warm, Kindness, Tradition | Courage (unless family supports), Friendship (peer focus) |
| **Group** | Friendship, Cooperation, Creativity, Discovery | Family (different dynamic), intimate themes |

---

### Relationship Ã— Narrative Compatibility

| Relationship | Highly Compatible Narratives | Need Adaptation |
|--------------|----------------------------|-----------------|
| **Solo** | Journey, Problem-Solving, Transformation, Quest | Cycle (can be solo routine), Cumulative (solo building) |
| **Pair** | Helping, Cooperation, Problem-Solving (dual), Journey (together) | All narratives adaptable |
| **Family** | Cycle (family routine), Cumulative (family project), Cooperation | Quest (individual focus), Transformation (needs individual arc) |
| **Group** | Cumulative (group contribution), Cooperation, Problem-Solving (group) | Transformation (individual focus) |

---

### Relationship Ã— Age Suitability

| Relationship | Age 3-4 | Age 5-6 | Age 7-8 | Age 9-10 | Age 11-12 |
|--------------|---------|---------|---------|----------|-----------|
| **Solo** | âœ… Simple | âœ… Good | âœ… Good | âœ… Good | âœ… Good |
| **Pair** | âš ï¸ Limited | âœ… Good | âœ…âœ… Excellent | âœ…âœ… Excellent | âœ…âœ… Excellent |
| **Family** | âš ï¸ Confusing | âœ… Simple | âœ…âœ… Excellent | âœ…âœ… Excellent | âœ… Good |
| **Group** | âŒ Too complex | âš ï¸ Limited | âœ… Simple | âœ…âœ… Excellent | âœ…âœ… Excellent |

**Age Guidelines**:
- **Ages 3-4**: Solo preferred, pair only with family member (simple interaction)
- **Ages 5-6**: Solo and pair excellent, family simple configurations
- **Ages 7-8**: All types appropriate, pair and family excel
- **Ages 9-12**: All types excellent, can handle complex group dynamics

---

## Auto-Selection Logic

### When to Auto-Select Relationship Type

```python
# Pseudo-code for auto-selection

IF theme = "friendship" THEN
    relationship = "pair" (peer interaction)
    suggest_peer_character()

IF theme = "family" OR theme = "warm" THEN
    relationship = "pair" (intergenerational) OR "family"
    suggest_grandma()

IF theme = "kindness" AND age >= 5 THEN
    relationship = "pair" (helping someone)
    suggest_supporting_character()

IF theme = "cooperation" OR theme = "creativity" (group activity) THEN
    IF age >= 7 THEN
        relationship = "group"
    ELSE
        relationship = "pair"

IF scene = "grandma-room" OR scene = "kitchen" + theme = "family" THEN
    relationship = "pair" (with grandma)
    auto_add_grandma()

IF scene = "kindergarten" AND age <= 6 THEN
    relationship = "pair" OR "group" (classroom context)

IF theme NOT IN ["friendship", "family", "kindness", "cooperation"] THEN
    relationship = "solo" (default)
```

---

## Integration with Existing Soul Elements

### Emotion Ã— Relationship

Different relationships naturally pair with different emotions:

| Emotion | Solo | Pair | Family | Group |
|---------|------|------|--------|-------|
| **Joyful** | âœ… Personal joy | âœ…âœ… Shared celebration | âœ…âœ… Family happiness | âœ…âœ… Group fun |
| **Calm** | âœ…âœ… Personal peace | âœ…âœ… Quiet companionship | âœ… Family tranquility | âš ï¸ Hard with group |
| **Curious** | âœ…âœ… Solo exploration | âœ…âœ… Discovering together | âœ… Family learning | âœ… Group investigation |
| **Brave** | âœ…âœ… Personal courage | âœ… Supporting friend | âœ… Family encouragement | âœ… Collective courage |
| **Warm** | âš ï¸ Limited alone | âœ…âœ… Caring for each other | âœ…âœ…âœ… Family warmth | âœ… Group care |
| **Wonder** | âœ… Personal awe | âœ…âœ… Shared amazement | âœ… Family wonder | âœ… Group discovery |
| **Reflective** | âœ…âœ… Personal thought | âœ… Sharing insights | âœ… Wisdom sharing | âš ï¸ Harder in group |

---

### Pacing Ã— Relationship

Relationship dynamics affect story rhythm:

| Pacing | Solo | Pair | Family | Group |
|--------|------|------|--------|-------|
| **Gentle** | âœ…âœ… Easy | âœ…âœ… Quiet companionship | âœ…âœ… Family calm | âš ï¸ Hard with many |
| **Lively** | âœ… Active solo | âœ…âœ… Energetic duo | âœ… Family activity | âœ…âœ…âœ… Group energy |
| **Building** | âœ…âœ… Personal journey | âœ…âœ… Joint challenge | âœ… Family challenge | âœ… Group escalation |
| **Varied** | âœ… Mood changes | âœ…âœ… Turn-taking | âœ…âœ… Family rhythm | âœ… Group dynamics |
| **Circular** | âœ…âœ… Personal routine | âœ… Shared routine | âœ…âœ…âœ… Family tradition | âœ… Group ritual |

---

## Prompt Assembly for Each Relationship Type

### Solo (Current Default)

**No changes needed** - existing prompt structure:
```
[Character Anchor] +
[Action/Pose] +
[Scene Elements] +
[Style] +
[Soul Elements] +
...
```

---

### Pair (New Structure)

**Primary-Secondary Model**:
```
[Primary Character Anchor - 150 words with emotion] +
[Primary Action/Pose - narrative appropriate] +
[Interaction Element - what they're doing together] +
[Secondary Character Anchor - 50 words with emotion] +
[Secondary Action/Pose] +
[Relationship Description - how they relate] +
[Scene Elements - theme influenced] +
[Style Keywords] +
[Color Mood palette] +
[Pacing visual cues] +
[Rendering Parameters] +
[Atmosphere - emotion driven, shared space] +
[No Watermark Directive]
```

**Example - Yueyue + Grandma (Kitchen, Family Theme)**:
```
A 5-year-old Chinese girl named Yueyue, round face and rosy cheeks, two pigtails with red ribbons, wearing yellow sweater and denim overalls, standing on small step stool at kitchen counter with focused concentrated expression learning to fold dumplings, small hands carefully pinching dumpling edges with determined effort showing growth and learning, beside her stands 65-year-old grandmother with silver hair in traditional bun, round old-fashioned glasses, burgundy Tang suit, gently guiding with patient teaching expression, grandmother's hands showing proper folding technique, warm intergenerational teaching moment showing family bond and skill transmission, traditional Chinese kitchen setting with bamboo steamer, flour-dusted counter, ingredients in small bowls, watercolor painting style with soft color blending, warm cozy color palette (golden yellows, warm browns, soft reds), gentle pacing with calm peaceful rhythm, soft natural lighting from window creating warm atmosphere, tender loving family mood showing warmth and patience, octane render, macro texture details on dumpling folds, 8k resolution, professional children's book quality, age-appropriate for 5-6 years, no watermark, clean image.
```

---

### Family (Extended Structure)

**Multi-Character Hierarchy**:
```
[Primary Character Anchor - 150 words] +
[Primary Action] +
[Secondary Character Anchor - 50 words] +
[Secondary Action] +
[Tertiary Character Anchor - 30 words] +
[Tertiary Action] +
[Family Interaction Description - collective activity] +
[Scene Elements] +
[Style] +
[Soul Elements] +
[Family Atmosphere - collective mood] +
...
```

**Length**: 250-300 words (longer than standard)

---

### Group (Simplified Multi-Character)

**Group Description Approach** (Recommended for 4+):
```
[Primary Character Anchor - 100 words] +
[Primary Action] +
[Group Description - "accompanied by 3 friends"] +
[Friends Brief Anchor - 40-60 words for 2-3 others] +
[Collective Action] +
[Group Dynamic Description] +
[Scene Elements] +
...
```

**Example Fragment**:
```
5-year-old Yueyue with two pigtails and red ribbons, wearing yellow sweater, leading group activity with excited expression, accompanied by three friends: 6-year-old Xiaoming in blue t-shirt with bright smile, 4-year-old Meimei in pink dress with ponytail, and another child in green shirt, all working together on building block tower in kindergarten, collaborative group dynamic showing teamwork and friendship, children reaching and handing blocks to each other...
```

---

## User Syntax

### Specifying Relationship

**Explicit Specification**:
```
/picture-book-wizard watercolor kitchen 6 3 yueyue with:grandma theme:family
```

**Implied by Theme** (Auto-Selection):
```
/picture-book-wizard watercolor meadow 7 theme:friendship
# System auto-selects: relationship=pair, suggests peer character
```

**Natural Language**:
```
"Create a story about Yueyue and her grandmother cooking together"
# System parses: pair relationship, Yueyue + Grandma, kitchen scene suggested
```

---

## Auto-Suggestion Workflow

### Step 1: Analyze Input
- Check theme, scene, age
- Determine if multi-character appropriate

### Step 2: Determine Relationship Type
- Based on theme and compatibility matrix
- Check age suitability

### Step 3: Suggest Supporting Character
- If pair: Suggest grandma/peer based on theme
- If family: Suggest grandma + parent
- If group: Offer peer group option

### Step 4: Notify User
```
ðŸ’¡ Suggestion: Based on your "family" theme selection, I recommend adding Grandma (å¥¶å¥¶) as a supporting character for a warm intergenerational story.

This will create a pair relationship dynamic with:
- Yueyue learning traditional skills from Grandma
- Warm family bond and cultural transmission
- Perfect for kitchen scene you selected

Would you like to proceed with Yueyue + Grandma pair? (Will be added automatically if you don't specify otherwise)
```

### Step 5: Apply or Allow Override
- User can accept, reject, or specify different character
- System proceeds with selected relationship configuration

---

## Special Considerations

### Age Appropriateness

**Ages 3-4**:
- **Solo**: âœ… Preferred for simplicity
- **Pair**: âš ï¸ Only with familiar family member (Grandma), simple interaction
- **Family**: âŒ Too many characters to track
- **Group**: âŒ Cognitively overwhelming

**Ages 5-6**:
- **Solo**: âœ… Good for personal growth stories
- **Pair**: âœ…âœ… Excellent, can understand friendship and family bonds
- **Family**: âœ… Simple configurations (3 characters)
- **Group**: âš ï¸ Limited, simple playground scenarios only

**Ages 7-8**:
- **Solo**: âœ… Good for independent challenges
- **Pair**: âœ…âœ… Excellent for friendship and cooperation
- **Family**: âœ…âœ… Excel at understanding family dynamics
- **Group**: âœ… Can handle 3-4 peer interactions

**Ages 9-12**:
- **All types**: âœ…âœ… Excellent across all relationship dynamics
- Can handle complex social interactions
- Understand nuanced relationships
- Can follow multiple character arcs

---

### Cognitive Load

**Token/Word Budget**:
- Solo: 150-250 words (standard)
- Pair: 200-300 words (extended)
- Family: 250-350 words (long)
- Group: 250-350 words (long, but simplified descriptions)

**Character Tracking Complexity**:
- Solo: 1 character (simple)
- Pair: 2 characters (moderate)
- Family: 3-4 characters (complex)
- Group: 3-5 characters (complex, needs simplification)

---

## Implementation Guidelines

### Phase 1 (MVP) - Current
- âœ… Solo (already implemented)
- âœ… Pair (implement with Grandma)

### Phase 2
- Family (3 character configurations)
- Add Mom and Dad

### Phase 3
- Peer pairs (protagonist + protagonist)

### Phase 4-5
- Group dynamics
- Community characters

---

## Testing Checklist

When using relationship dynamics, verify:

**Relationship Type Quality**:
- [ ] Relationship type appropriate for theme
- [ ] Character count matches age appropriateness
- [ ] Interaction dynamic clear and natural

**Character Quality**:
- [ ] All characters maintain signature features
- [ ] Primary/secondary role balance appropriate
- [ ] Interaction between characters visible

**Soul Integration**:
- [ ] Emotion expressed by all characters
- [ ] Theme supported by relationship dynamic
- [ ] Narrative structure suits relationship type
- [ ] Pacing appropriate for interaction level

**Technical Quality**:
- [ ] Prompt length appropriate (not too long)
- [ ] Character anchors properly sized
- [ ] Relationship description clear
- [ ] All VCP anchors maintained

---

## Version History

- **Version 3.0** (2026-01-10): Initial relationship dynamics system with 4 types (solo, pair, family, group)
- **Planned 3.1**: Expand pair configurations with peer interactions
- **Planned 3.2**: Full family dynamics (4 character configurations)
- **Planned 3.3**: Group dynamics optimization

---

**Status**: âœ… Phase 1 (MVP) - Solo and Pair relationship types ready for implementation
