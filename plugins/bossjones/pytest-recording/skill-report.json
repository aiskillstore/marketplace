{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-11T03:52:47.417Z",
    "slug": "bossjones-pytest-recording",
    "source_url": "https://github.com/bossjones/logging-lab/tree/main/.claude/skills/pytest-recording",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "c1127b43532bb615c7f34b25a182446394a3eb18c87975f55961482c6da4199e",
    "tree_hash": "f623926947dac8ddd53389b48b48016e1e73eaa614b03e3db8355173ab798ce8"
  },
  "skill": {
    "name": "pytest-recording",
    "description": "Work with pytest-recording (VCR.py) for recording and replaying HTTP interactions in tests. Use when writing VCR tests, managing cassettes, configuring VCR options, filtering sensitive data, or debugging recorded HTTP responses.",
    "summary": "Work with pytest-recording (VCR.py) for recording and replaying HTTP interactions in tests. Use when...",
    "icon": "ðŸŽ¬",
    "version": "1.0.0",
    "author": "bossjones",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "testing",
      "vcr",
      "http",
      "mocking",
      "pytest"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "network",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation-only skill file for pytest-recording (VCR.py), a legitimate Python testing library. All static analysis findings are false positives - the 'external commands' are documentation examples, 'hardcoded IPs' are localhost examples, and 'API keys' are actually showing how to filter sensitive data.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 194
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 90,
            "line_end": 90
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 84,
            "line_end": 84
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 204,
    "audit_model": "claude",
    "audited_at": "2026-01-11T03:52:47.417Z"
  },
  "content": {
    "user_title": "Record and replay HTTP interactions in Python tests",
    "value_statement": "Testing external APIs is unreliable and slow due to network dependencies and rate limits. pytest-recording captures HTTP interactions as reusable YAML cassettes for fast, deterministic tests.",
    "seo_keywords": [
      "pytest-recording",
      "VCR.py",
      "HTTP mocking",
      "Python testing",
      "API testing",
      "test cassettes",
      "Claude",
      "Claude Code",
      "pytest"
    ],
    "actual_capabilities": [
      "Record HTTP interactions as YAML cassettes",
      "Configure VCR options for filtering sensitive data",
      "Manage different recording modes (once, rewrite, new_episodes)",
      "Debug cassette mismatches and request matching issues",
      "Filter authentication headers for LLM providers"
    ],
    "limitations": [
      "Only works with pytest testing framework",
      "Requires understanding of HTTP request matching",
      "Cassettes may need periodic updates when APIs change",
      "Cannot record WebSocket or non-HTTP protocols"
    ],
    "use_cases": [
      {
        "target_user": "Python developers",
        "title": "Mock external API calls in tests",
        "description": "Replace live API calls with recorded responses for reliable, fast test execution without rate limits or network dependencies."
      },
      {
        "target_user": "Test engineers",
        "title": "Create deterministic test environments",
        "description": "Ensure tests produce consistent results by replaying exact HTTP responses, eliminating flaky tests caused by API changes."
      },
      {
        "target_user": "DevOps teams",
        "title": "Secure CI/CD pipeline testing",
        "description": "Run tests in CI/CD without exposing API credentials by filtering sensitive data from recorded cassettes."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic VCR test setup",
        "scenario": "Adding VCR to existing API test",
        "prompt": "Convert this test to use pytest-recording: [paste your test]. Show me the decorator and any needed imports."
      },
      {
        "title": "Filter sensitive headers",
        "scenario": "Securing API credentials in tests",
        "prompt": "Create a vcr_config fixture that filters authorization headers and API keys for OpenAI and Anthropic APIs."
      },
      {
        "title": "Debug cassette issues",
        "scenario": "Test fails with cassette not found",
        "prompt": "My test can't find the cassette file. Walk me through debugging steps including file paths and recording modes."
      },
      {
        "title": "Advanced VCR configuration",
        "scenario": "Custom request matching and response processing",
        "prompt": "Show me how to configure VCR to match requests by method and path only, and sanitize response headers before recording."
      }
    ],
    "output_examples": [
      {
        "input": "Create a VCR test for an API that requires Bearer token authentication",
        "output": [
          "Add @pytest.mark.vcr() decorator to your test function",
          "Create vcr_config fixture to filter authorization header",
          "Run test with --vcr-record=once to create initial cassette",
          "Verify cassette doesn't contain your token by checking the YAML file",
          "Future runs will use recorded response without making live API calls"
        ]
      }
    ],
    "best_practices": [
      "Always filter authentication headers and API keys before recording cassettes",
      "Use descriptive test names as they become cassette file names automatically",
      "Review cassette files in pull requests to ensure no secrets are committed",
      "Delete and re-record cassettes periodically to catch API changes early"
    ],
    "anti_patterns": [
      "Recording cassettes with real API credentials without filtering sensitive data",
      "Committing large cassette files with unnecessary HTTP interactions",
      "Using --vcr-record=all in CI/CD which overwrites working cassettes",
      "Ignoring cassette merge conflicts instead of re-recording properly"
    ],
    "faq": [
      {
        "question": "Why is my test still making live API calls?",
        "answer": "Check if VCR is disabled with --disable-recording flag or if cassette exists for your test name."
      },
      {
        "question": "How do I update cassettes when APIs change?",
        "answer": "Delete specific cassette files and re-run tests with --vcr-record=once or use --vcr-record=rewrite for all."
      },
      {
        "question": "Can I use VCR with async tests?",
        "answer": "Yes, pytest-recording works with both sync and async test functions using standard pytest-asyncio."
      },
      {
        "question": "Where are cassette files stored?",
        "answer": "By default in tests/cassettes/ organized by test module name. You can customize paths in vcr_config."
      },
      {
        "question": "How do I filter custom authentication headers?",
        "answer": "Add header names to filter_headers list in your vcr_config fixture, like 'x-custom-api-key'."
      },
      {
        "question": "What does 'request mismatch' error mean?",
        "answer": "VCR can't match the current request to any recorded interaction. Check match_on criteria in vcr_config."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
