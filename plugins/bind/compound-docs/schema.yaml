# compound-docs Solution Schema
#
# The agent MUST validate frontmatter against this schema before creating docs.
# The agent MAY add new values to enums as needed - this schema is meant to
# evolve with the project's needs.

required_fields:
  date:
    type: string
    pattern: '^\d{4}-\d{2}-\d{2}$'
    description: "Date when this problem was solved (YYYY-MM-DD)"

  category:
    type: enum
    values:
      - developer-experience
      - deployment
      - ui
      - integration
      - performance
      - testing
    description: "Problem category (add new values as needed)"

  symptoms:
    type: array[string]
    min_items: 1
    max_items: 5
    description: "Observable symptoms (error messages, behaviors)"

optional_fields:
  component:
    type: enum
    values: []
    description: "Part of system affected (add values as encountered)"

  root_cause:
    type: enum
    values: []
    description: "Fundamental cause of the problem (add values as encountered)"

  tags:
    type: array[string]
    max_items: 8
    description: "Searchable keywords (lowercase, hyphen-separated)"

  related:
    type: array[string]
    description: "Paths to related solution docs"

validation_rules:
  - "date must be in YYYY-MM-DD format"
  - "category must match enum values (or add new value to schema)"
  - "component must match enum values (or add new value to schema)"
  - "root_cause must match enum values (or add new value to schema)"
  - "symptoms must be specific and observable, not vague"
  - "tags should be lowercase, hyphen-separated"

# Example valid frontmatter:
# ---
# date: 2025-01-06
# category: deployment
# symptoms:
#   - Docker build failing with "layer not found" error
#   - Build succeeds locally but fails in CI
# component: docker
# root_cause: stale-cache
# tags: [docker, ci, cache]
# related: []
# ---
