{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-07T00:36:08.072Z",
    "slug": "davila7-anndata",
    "source_url": "https://github.com/davila7/claude-code-templates/tree/main/cli-tool/components/skills/scientific/anndata",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "0c32391ffce6e851505d36dff393c003fe105f770c2ea30dcdbe3741c7a8623c",
    "tree_hash": "2425cff4a17725e6d6091aef6383a95a4dd0a00efe7dca9838778411d3feed19"
  },
  "skill": {
    "name": "anndata",
    "description": "This skill should be used when working with annotated data matrices in Python, particularly for single-cell genomics analysis, managing experimental measurements with metadata, or handling large-scale biological datasets. Use when tasks involve AnnData objects, h5ad files, single-cell RNA-seq data, or integration with scanpy/scverse tools.",
    "summary": "This skill should be used when working with annotated data matrices in Python, particularly for sing...",
    "icon": "ðŸ§¬",
    "version": "1.0.0",
    "author": "davila7",
    "license": "MIT",
    "category": "data",
    "tags": [
      "bioinformatics",
      "single-cell",
      "genomics",
      "data-analysis",
      "python"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing markdown files. No executable code, scripts, network operations, or file system access. The content provides educational examples for using the AnnData Python library for bioinformatics workflows.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 6,
    "total_lines": 2555,
    "audit_model": "claude",
    "audited_at": "2026-01-07T00:36:08.072Z"
  },
  "content": {
    "user_title": "Work with AnnData for single-cell genomics",
    "value_statement": "Managing large annotated data matrices for single-cell genomics analysis is complex. This skill provides comprehensive documentation for the AnnData library, enabling efficient handling of h5ad files, metadata annotations, and integration with the scverse ecosystem.",
    "seo_keywords": [
      "anndata skill",
      "single-cell RNA-seq analysis",
      "annotated data matrices",
      "h5ad files",
      "scanpy tutorial",
      "scverse ecosystem",
      "Clara Code anndata",
      "genomics data",
      "single-cell analysis",
      "cell ranger data"
    ],
    "actual_capabilities": [
      "Create and manage AnnData objects with X matrix, obs, var, layers, obsm, varm, obsp, varp, and uns components",
      "Read and write data in multiple formats including h5ad, zarr, CSV, MTX, Loom, and 10X Genomics formats",
      "Concatenate multiple AnnData objects along observation or variable axes with flexible join strategies",
      "Subset, filter, and transform annotated data matrices including quality control and highly variable gene selection",
      "Optimize memory usage with sparse matrices, backed mode for large datasets, and categorical data types",
      "Integrate with scanpy, scvi-tools, muon, and PyTorch for comprehensive single-cell analysis workflows"
    ],
    "limitations": [
      "Does not perform actual bioinformatics analysis algorithms; provides documentation for library usage",
      "Requires users to install anndata and related Python packages separately",
      "Does not include pre-trained models or reference datasets; users must provide their own data",
      "Learning curve assumes basic familiarity with Python, pandas, and numpy"
    ],
    "use_cases": [
      {
        "target_user": "Bioinformatics researchers",
        "title": "Single-cell RNA-seq workflows",
        "description": "Load, process, and analyze single-cell gene expression data using AnnData as the core data structure for scanpy workflows"
      },
      {
        "target_user": "Data scientists",
        "title": "Large annotated datasets",
        "description": "Manage high-dimensional datasets with rich metadata annotations, embeddings, and multi-modal measurements efficiently"
      },
      {
        "target_user": "Computational biologists",
        "title": "Batch integration pipelines",
        "description": "Combine multiple experimental batches or modalities with proper metadata tracking and on-disk concatenation for large-scale studies"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create AnnData object",
        "scenario": "Setting up a new single-cell dataset",
        "prompt": "How do I create an AnnData object from a numpy array and pandas DataFrames for observation and variable metadata?"
      },
      {
        "title": "Read h5ad files",
        "scenario": "Loading preprocessed single-cell data",
        "prompt": "Show me how to read an h5ad file in backed mode for large datasets and access observation metadata without loading the full matrix"
      },
      {
        "title": "Concatenate batches",
        "scenario": "Combining experimental batches",
        "prompt": "How do I concatenate multiple AnnData objects from different experimental batches while tracking the batch source with labels?"
      },
      {
        "title": "Optimize memory",
        "scenario": "Working with large datasets",
        "prompt": "What are the best practices for memory-efficient handling of large AnnData objects including sparse matrices, backed mode, and categorical data types?"
      }
    ],
    "output_examples": [
      {
        "input": "How do I create an AnnData object with cell type annotations and gene metadata?",
        "output": [
          "Create the expression matrix (X) with shape (observations, variables)",
          "Create observation metadata DataFrame with cell-level annotations (cell_type, sample, condition)",
          "Create variable metadata DataFrame with gene-level information (gene_name, chromosome, highly_variable status)",
          "Pass all components to ad.AnnData constructor with X, obs, and var parameters",
          "Access n_obs and n_vars properties to verify dimensions match your metadata"
        ]
      }
    ],
    "best_practices": [
      "Use sparse matrices for sparse genomics data to achieve 10-100x memory reduction",
      "Store raw data before filtering using adata.raw = adata.copy() to preserve access to original measurements",
      "Use backed mode (backed='r') when working with datasets larger than available RAM to avoid out-of-memory errors"
    ],
    "anti_patterns": [
      "Modifying AnnData views without calling .copy() first can unintentionally modify the original data",
      "Loading entire large datasets into memory when backed mode would suffice causes unnecessary memory pressure",
      "Ignoring index alignment when adding external metadata can lead to misaligned data and incorrect results"
    ],
    "faq": [
      {
        "question": "What Python versions are supported by AnnData?",
        "answer": "AnnData supports Python 3.9 and newer. Check the official documentation for the latest compatibility requirements."
      },
      {
        "question": "What is the maximum file size AnnData can handle?",
        "answer": "AnnData can handle files larger than RAM when using backed mode. Practical limits depend on disk space and file system support."
      },
      {
        "question": "How do I integrate AnnData with scanpy for analysis?",
        "answer": "AnnData is the native data format for scanpy. Most scanpy functions accept AnnData objects directly and modify them in place."
      },
      {
        "question": "Is my data safe when using backed mode?",
        "answer": "Backed mode is read-only by default. Use backed='r+' mode for read-write access which saves changes directly to the file."
      },
      {
        "question": "Why is my file reading slowly?",
        "answer": "Use compression='gzip' when writing, convert strings to categoricals, and ensure chunk sizes match your access patterns for optimal I/O performance."
      },
      {
        "question": "How does AnnData compare to Seurat (R) for single-cell analysis?",
        "answer": "AnnData provides similar functionality to Seurat but in Python. AnnData objects can be converted using functions in the anndata2ri package for interoperability."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "best_practices.md",
          "type": "file",
          "path": "references/best_practices.md"
        },
        {
          "name": "concatenation.md",
          "type": "file",
          "path": "references/concatenation.md"
        },
        {
          "name": "data_structure.md",
          "type": "file",
          "path": "references/data_structure.md"
        },
        {
          "name": "io_operations.md",
          "type": "file",
          "path": "references/io_operations.md"
        },
        {
          "name": "manipulation.md",
          "type": "file",
          "path": "references/manipulation.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
