{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T17:48:00.062Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "hooks",
      "Claude Code",
      "automation",
      "validation",
      "plugins"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official skill from Anthropic source. Minimal audit performed as required. No security issues identified in the scanned files.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 11,
    "total_lines": 2770,
    "audit_model": "codex",
    "audited_at": "2025-12-31T17:48:00.061Z"
  },
  "content": {
    "user_title": "Build safe Claude Code hooks",
    "value_statement": "Hook configuration and scripts can fail without clear validation and testing. This skill provides templates, linters, and tests to build reliable Claude Code hooks.",
    "seo_keywords": [
      "Claude",
      "Claude Code",
      "Codex",
      "hook development",
      "Claude plugins",
      "hooks.json validation",
      "prompt hooks",
      "hook linter",
      "hook testing"
    ],
    "actual_capabilities": [
      "Validate hooks.json structure and event names with a schema checker",
      "Lint hook scripts for safety patterns and best practices",
      "Generate sample hook inputs for supported event types",
      "Test hook scripts with timeouts and environment variables",
      "Provide hook patterns and migration guidance for prompt hooks"
    ],
    "limitations": [
      "Does not execute hooks inside Claude Code itself",
      "Requires bash and jq for the utility scripts",
      "Prompt hook guidance is limited to supported events",
      "No automatic deployment or registration of hooks"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Validate a new hook",
        "description": "Check hooks.json and script quality before publishing a Claude Code plugin."
      },
      {
        "target_user": "Security reviewer",
        "title": "Harden tool usage",
        "description": "Add PreToolUse rules to block risky commands and unsafe file writes."
      },
      {
        "target_user": "Team lead",
        "title": "Standardize workflows",
        "description": "Enforce testing and build checks before a session can stop."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a first hook",
        "scenario": "New plugin with a PreToolUse rule",
        "prompt": "Create a PreToolUse prompt hook that blocks writes to /etc and .env files in hooks.json format for a plugin."
      },
      {
        "title": "Validate a hooks file",
        "scenario": "Check hooks.json for errors",
        "prompt": "Show how to run the hook schema validator on hooks/hooks.json and explain common warnings."
      },
      {
        "title": "Test a hook script",
        "scenario": "Run a hook with sample input",
        "prompt": "Generate sample input for PreToolUse and show how to run test-hook.sh with verbose output."
      },
      {
        "title": "Design layered checks",
        "scenario": "Combine command and prompt hooks",
        "prompt": "Propose a multi stage PreToolUse setup with a fast command check and a prompt analysis for Bash commands."
      }
    ],
    "output_examples": [
      {
        "input": "Check my hook scripts and configuration for common issues.",
        "output": [
          "hooks.json parses correctly and uses valid event names",
          "Hook script is missing set -euo pipefail",
          "Found unquoted variables that may allow injection",
          "Timeout values are within recommended ranges"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for plugin relative paths",
      "Validate JSON output and exit codes in test runs",
      "Keep hooks fast and add timeouts for safety"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths in hook commands",
      "Prompt hooks on unsupported events without warnings",
      "Long running scripts without timeouts"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes, it targets Claude Code hook events and formats described in the skill files."
      },
      {
        "question": "What are the limits of this skill?",
        "answer": "It provides guidance and scripts but does not deploy or run hooks inside Claude Code."
      },
      {
        "question": "How do I integrate it into my plugin?",
        "answer": "Use the hooks.json format and call the scripts from your plugin directory."
      },
      {
        "question": "Does it handle sensitive data safely?",
        "answer": "The examples encourage validation and do not store data beyond temporary files."
      },
      {
        "question": "What if validation scripts fail?",
        "answer": "Check jq availability, file paths, and script executability, then rerun with verbose output."
      },
      {
        "question": "How is this different from basic hooks?",
        "answer": "It emphasizes prompt based hooks, layered checks, and prebuilt validators and tests."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}