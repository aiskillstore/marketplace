{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-02T11:51:18.913Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "author": "Community",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "hooks",
      "Claude Code",
      "automation",
      "validation",
      "plugins"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official skill from an Anthropic source. Minimal audit performed as required. No security issues identified in scanned files.",
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 14,
    "total_lines": 3058,
    "audit_model": "codex",
    "audited_at": "2026-01-02T11:51:18.912Z"
  },
  "content": {
    "user_title": "Build reliable Claude Code hooks",
    "value_statement": "Hook configurations often fail without clear validation and testing. This skill provides patterns, scripts, and guidance to build safe and maintainable hooks.",
    "seo_keywords": [
      "Claude",
      "Claude Code",
      "Codex",
      "hook development",
      "PreToolUse",
      "PostToolUse",
      "hooks.json",
      "Claude plugins",
      "prompt hooks"
    ],
    "actual_capabilities": [
      "Validate hooks.json structure and hook fields with a schema script",
      "Lint hook shell scripts for safety and best practice issues",
      "Test hook scripts with generated sample inputs and timeouts",
      "Provide example hooks for Bash and file write validation",
      "Document hook patterns, migration steps, and advanced use cases"
    ],
    "limitations": [
      "Does not install hooks into a running Claude Code session",
      "Requires a Claude Code restart for configuration changes to load",
      "Prompt hooks are only supported for specific events",
      "Example scripts assume bash and jq are available"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Create a new hook set",
        "description": "Design prompt and command hooks for a plugin and validate them before release."
      },
      {
        "target_user": "Team lead",
        "title": "Enforce quality gates",
        "description": "Add Stop hooks that require tests and builds after code changes."
      },
      {
        "target_user": "Security engineer",
        "title": "Block risky tool use",
        "description": "Implement PreToolUse checks for destructive commands and sensitive file writes."
      }
    ],
    "prompt_templates": [
      {
        "title": "Starter hook plan",
        "scenario": "I want basic hook guidance",
        "prompt": "Explain which hook events I should use for write validation and task completion, and show a minimal prompt hook example."
      },
      {
        "title": "Write validation hook",
        "scenario": "I need to protect files",
        "prompt": "Create a PreToolUse hook that blocks path traversal and sensitive file writes, using prompt hooks in hooks.json."
      },
      {
        "title": "Test and lint scripts",
        "scenario": "I have a command hook",
        "prompt": "Show how to lint my hook script and test it with a sample PreToolUse input using the provided scripts."
      },
      {
        "title": "Advanced layered hooks",
        "scenario": "I want multi stage checks",
        "prompt": "Design a layered PreToolUse setup with a quick command check and a prompt hook, with timeouts and matcher guidance."
      }
    ],
    "output_examples": [
      {
        "input": "Help me design a hook to block dangerous Bash commands and explain how to test it.",
        "output": [
          "Recommend a PreToolUse prompt hook for Bash with clear deny criteria",
          "Add a small command hook for fast safe approvals",
          "Use test-hook.sh to run a sample input and confirm exit codes"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for all script paths",
      "Validate inputs and return structured JSON outputs",
      "Set timeouts to keep hooks fast and reliable"
    ],
    "anti_patterns": [
      "Relying on hook execution order across parallel hooks",
      "Hard coding absolute paths in hook commands",
      "Skipping input validation in command hooks"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes, it targets Claude Code hook events and formats described in the skill."
      },
      {
        "question": "What are the main limits of this skill?",
        "answer": "It provides guidance and scripts, but it does not apply changes inside your running session."
      },
      {
        "question": "How do I integrate this with my plugin?",
        "answer": "Add hooks to hooks.json and reference scripts with ${CLAUDE_PLUGIN_ROOT}."
      },
      {
        "question": "Does it access my data or secrets?",
        "answer": "No, it only provides local scripts and guidance. You control what hooks read or send."
      },
      {
        "question": "What should I do if a hook fails?",
        "answer": "Use claude --debug and test-hook.sh to inspect input, output, and exit codes."
      },
      {
        "question": "How does it compare to ad hoc scripts?",
        "answer": "It adds validated patterns, testing tools, and migration guidance for safer hook design."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "marketplace-entry.json",
      "type": "file",
      "path": "marketplace-entry.json"
    },
    {
      "name": "skill-report.json",
      "type": "file",
      "path": "skill-report.json"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
