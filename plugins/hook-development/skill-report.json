{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-04T13:12:58.877Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official",
    "content_hash": "271528377492e4c5d328c9851785c52bb6efefdbf17e89fe5be16c12fa4adea0",
    "tree_hash": "13a5e6beae55aaf89d2744bf34774969f4f6ce375cbc94fcd4ac10dcc4cd8ba7"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "author": "anthropics",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "hooks",
      "Claude Code",
      "automation",
      "validation",
      "plugins"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands",
      "env_access",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official skill from an Anthropic source, so only a minimal audit was required. The repository contains bash scripts for validation and testing. No security issues were found.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/validate-hook-schema.sh",
            "line_start": 1,
            "line_end": 5
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 187,
            "line_end": 190
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 170,
            "line_end": 173
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 236,
            "line_end": 240
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 14,
    "total_lines": 3103,
    "audit_model": "codex",
    "audited_at": "2026-01-04T13:12:58.877Z"
  },
  "content": {
    "user_title": "Build reliable Claude Code hooks",
    "value_statement": "Hook configuration errors and unsafe scripts can break workflows. This skill provides patterns and scripts to validate, lint, and test hooks before use.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "hook development",
      "hooks.json",
      "prompt hooks",
      "command hooks",
      "hook testing",
      "Claude plugins",
      "hook validation"
    ],
    "actual_capabilities": [
      "Validate hooks.json structure and event names with scripts/validate-hook-schema.sh",
      "Lint hook scripts for common issues using scripts/hook-linter.sh",
      "Generate sample hook inputs by event type with scripts/test-hook.sh",
      "Run hook scripts with timeouts and environment setup using scripts/test-hook.sh",
      "Provide example PreToolUse validation for Bash and file writes",
      "Provide a SessionStart example to load project context into the environment"
    ],
    "limitations": [
      "Does not deploy or register hooks inside Claude Code",
      "Requires bash and jq to run the helper scripts",
      "Prompt hooks are documented for specific supported events only",
      "Testing runs locally and does not simulate full Claude Code sessions"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Validate a new hook",
        "description": "Check hooks.json and hook scripts before you publish a plugin."
      },
      {
        "target_user": "Security reviewer",
        "title": "Block risky tool use",
        "description": "Add PreToolUse checks that deny destructive commands or unsafe writes."
      },
      {
        "target_user": "Team lead",
        "title": "Standardize hook quality",
        "description": "Apply the same lint and test workflow across multiple plugins."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create first hook",
        "scenario": "Simple PreToolUse safety check",
        "prompt": "Create a PreToolUse prompt hook that blocks writes to /etc and .env files. Use the plugin hooks.json wrapper format."
      },
      {
        "title": "Validate config",
        "scenario": "Check hooks.json for errors",
        "prompt": "Show the command to run scripts/validate-hook-schema.sh on hooks/hooks.json and explain the warnings it can produce."
      },
      {
        "title": "Test a hook",
        "scenario": "Run a hook with sample input",
        "prompt": "Generate sample input for PreToolUse and show how to run scripts/test-hook.sh with verbose output and a 30 second timeout."
      },
      {
        "title": "Layered checks",
        "scenario": "Combine command and prompt hooks",
        "prompt": "Design a PreToolUse setup for Bash with a fast command hook and a prompt review hook. Include matchers and timeouts."
      }
    ],
    "output_examples": [
      {
        "input": "Review my hooks.json and hook scripts for common problems.",
        "output": [
          "hooks.json parses correctly and uses valid event names",
          "Hook script is missing set -euo pipefail",
          "Found an unquoted variable that may allow injection",
          "Timeout values are within recommended ranges"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for portable script paths",
      "Validate JSON output and exit codes during tests",
      "Keep hooks fast and set explicit timeouts"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths in hook commands",
      "Prompt hooks on unsupported events without warnings",
      "Long running scripts without timeouts"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes. It targets Claude Code hook events and formats documented in the skill."
      },
      {
        "question": "What are the limits of this skill?",
        "answer": "It provides guidance and scripts but does not deploy or run hooks inside Claude Code."
      },
      {
        "question": "How do I integrate it into my plugin?",
        "answer": "Use the hooks.json plugin format and call the scripts from your plugin directory."
      },
      {
        "question": "Does it handle data safely?",
        "answer": "It does not send data over the network. Scripts operate on local files you provide."
      },
      {
        "question": "What if a hook test fails?",
        "answer": "Use verbose mode in scripts/test-hook.sh to inspect exit codes and JSON output."
      },
      {
        "question": "How does this compare to generic lint tools?",
        "answer": "It is tailored to Claude Code hook formats, events, and hook exit code rules."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
