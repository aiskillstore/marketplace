{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-04T11:08:16.075Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official",
    "content_hash": "271528377492e4c5d328c9851785c52bb6efefdbf17e89fe5be16c12fa4adea0",
    "tree_hash": "43858654e2f287e887844cfee0ec7e7db3bacc25d253815e2b1e9694d4c22b8e"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "author": "anthropics",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "hooks",
      "Claude Code",
      "automation",
      "validation",
      "plugins"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands",
      "env_access",
      "filesystem"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official skill from an Anthropic source, so only a minimal audit was required. The files include shell scripts for validation and testing. No security issues were found.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 1,
            "line_end": 5
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 187,
            "line_end": 191
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 170,
            "line_end": 173
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "scripts/test-hook.sh",
            "line_start": 236,
            "line_end": 240
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 13,
    "total_lines": 3087,
    "audit_model": "codex",
    "audited_at": "2026-01-04T11:08:16.075Z"
  },
  "content": {
    "user_title": "Build Claude Code hooks with confidence",
    "value_statement": "Hook setups often fail due to invalid schemas or weak checks. This skill provides validated patterns, scripts, and tests to build reliable hooks.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "hook development",
      "hooks.json",
      "prompt hooks",
      "command hooks",
      "hook testing",
      "Claude plugins"
    ],
    "actual_capabilities": [
      "Validate hooks.json structure and event names with scripts/validate-hook-schema.sh",
      "Lint hook scripts for common issues using scripts/hook-linter.sh",
      "Generate sample hook inputs for events with scripts/test-hook.sh",
      "Run hook scripts with timeouts and environment setup via scripts/test-hook.sh",
      "Provide example scripts for PreToolUse validation and SessionStart context loading"
    ],
    "limitations": [
      "Does not deploy or register hooks inside Claude Code",
      "Requires bash and jq for the helper scripts",
      "Hook changes require a Claude Code restart to load",
      "Prompt hooks are documented for specific events only"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Validate a new hook",
        "description": "Check hooks.json and script quality before you publish a Claude Code plugin."
      },
      {
        "target_user": "Security reviewer",
        "title": "Block risky tool use",
        "description": "Add PreToolUse rules that deny dangerous commands and unsafe writes."
      },
      {
        "target_user": "Team lead",
        "title": "Standardize hook quality",
        "description": "Apply consistent validation and tests across multiple plugins."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic PreToolUse hook",
        "scenario": "Create a simple safety check",
        "prompt": "Create a PreToolUse prompt hook that blocks writes to /etc and .env files. Provide the hooks.json wrapper format for a plugin."
      },
      {
        "title": "Validate hooks.json",
        "scenario": "Check configuration for errors",
        "prompt": "Show the command to run scripts/validate-hook-schema.sh on hooks/hooks.json and explain what warnings mean."
      },
      {
        "title": "Test a hook script",
        "scenario": "Run a hook with sample input",
        "prompt": "Generate sample input for PreToolUse and show how to run scripts/test-hook.sh with verbose output."
      },
      {
        "title": "Layered Bash checks",
        "scenario": "Combine command and prompt hooks",
        "prompt": "Design a PreToolUse setup for Bash with a fast command check and a prompt review. Use matchers and include timeouts."
      }
    ],
    "output_examples": [
      {
        "input": "Check my hook scripts and configuration for common issues.",
        "output": [
          "hooks.json parses correctly and uses valid event names",
          "Hook script is missing set -euo pipefail",
          "Found unquoted variables that may allow injection",
          "Timeout values are within recommended ranges"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for portable script paths",
      "Validate JSON output and exit codes during tests",
      "Keep hooks fast and set explicit timeouts"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths in hook commands",
      "Prompt hooks on unsupported events without warnings",
      "Long running scripts without timeouts"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes. It targets Claude Code hook events and formats documented in the skill."
      },
      {
        "question": "What are the limits of this skill?",
        "answer": "It provides guidance and scripts but does not deploy or run hooks inside Claude Code."
      },
      {
        "question": "How do I integrate it into my plugin?",
        "answer": "Use the hooks.json plugin format and call the scripts from your plugin directory."
      },
      {
        "question": "Does it handle data safely?",
        "answer": "Examples focus on validation and do not store data beyond temporary files."
      },
      {
        "question": "What should I do if a script fails?",
        "answer": "Check jq availability, file paths, and script permissions, then rerun with verbose output."
      },
      {
        "question": "How does this compare to basic hooks?",
        "answer": "It adds prompt hook guidance plus validators, linters, and test helpers."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
