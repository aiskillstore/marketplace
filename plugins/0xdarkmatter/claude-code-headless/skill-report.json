{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T08:42:53.197Z",
    "slug": "0xdarkmatter-claude-code-headless",
    "source_url": "https://github.com/0xDarkMatter/claude-mods/tree/main/skills/claude-code-headless",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "b053ba205afb763ef6728c1c5b9f4f8722f8a4e0e9caa5f919c3be514ae72757",
    "tree_hash": "86f5049fbbdbe1932d1ba09a9216861a1f4a21e15a109f778178db57ffb63096"
  },
  "skill": {
    "name": "claude-code-headless",
    "description": "Run Claude Code programmatically without interactive UI. Triggers on: headless, CLI automation, --print, output-format, stream-json, CI/CD, scripting.",
    "summary": "Run Claude Code programmatically without interactive UI. Triggers on: headless, CLI automation, --pr...",
    "icon": "▶️",
    "version": "1.0.0",
    "author": "0xDarkMatter",
    "license": "MIT",
    "category": "productivity",
    "tags": [
      "automation",
      "cli",
      "headless",
      "scripting",
      "ci-cd"
    ],
    "supported_tools": [
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a pure documentation skill containing only markdown files. It provides examples and documentation for using Claude Code CLI headless mode. No executable code, no file operations, no network calls, no command execution. The shell script examples are documentation only, not actual scripts.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 4,
    "total_lines": 914,
    "audit_model": "claude",
    "audited_at": "2026-01-10T08:42:53.197Z"
  },
  "content": {
    "user_title": "Run Claude Code in headless CLI mode",
    "value_statement": "Claude Code headless mode enables programmatic execution of Claude Code from shell scripts and CI/CD pipelines. This skill provides documentation and examples for non-interactive automation.",
    "seo_keywords": [
      "claude code headless",
      "claude code cli",
      "claude code automation",
      "claude code scripting",
      "ci cd integration",
      "headless mode",
      "claude code json output",
      "claude code stream",
      "claude code command line",
      "claude code non-interactive"
    ],
    "actual_capabilities": [
      "Run Claude Code from shell scripts without interactive prompts",
      "Generate structured JSON output for programmatic parsing",
      "Control tool access with --allowedTools and --disallowedTools flags",
      "Resume conversations using session IDs for multi-turn workflows",
      "Integrate with CI/CD systems like GitHub Actions and GitLab CI",
      "Stream real-time JSON output for live progress tracking"
    ],
    "limitations": [
      "Requires Claude Code CLI installation on the system",
      "Needs valid ANTHROPIC_API_KEY for API access",
      "Cannot modify system prompt beyond append/prepend options",
      "Limited to tools and permissions configured at runtime"
    ],
    "use_cases": [
      {
        "target_user": "DevOps Engineers",
        "title": "CI/CD Pipeline Review",
        "description": "Automate code review in GitHub Actions, GitLab CI, or Jenkins pipelines"
      },
      {
        "target_user": "Developers",
        "title": "Scripted Automation",
        "description": "Create shell scripts for batch processing and repeated tasks"
      },
      {
        "target_user": "Security Teams",
        "title": "Automated Auditing",
        "description": "Run security scans programmatically with restricted tool access"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Query",
        "scenario": "Simple headless query",
        "prompt": "claude -p \"Explain this code\" --output-format json"
      },
      {
        "title": "Restricted Tools",
        "scenario": "Read-only analysis",
        "prompt": "claude -p \"Analyze codebase\" --allowedTools \"Read,Grep,Glob\" --disallowedTools \"Write,Edit,Bash\""
      },
      {
        "title": "Multi-Turn Session",
        "scenario": "Continued conversation",
        "prompt": "claude -p \"Start analysis\" --output-format json | jq -r '.session_id' then claude --resume \"$session\" \"Continue analysis\""
      },
      {
        "title": "CI/CD Integration",
        "scenario": "Automated pipeline",
        "prompt": "claude -p \"Review PR diff\" --permission-mode acceptEdits --output-format json --append-system-prompt \"Focus on security\""
      }
    ],
    "output_examples": [
      {
        "input": "Run Claude in headless mode to analyze a file",
        "output": [
          "Claude returns structured JSON with result text, session ID, cost, and duration",
          "Session ID enables conversation resumption for multi-turn workflows",
          "Exit codes indicate success (0) or error (1/2) for script handling"
        ]
      }
    ],
    "best_practices": [
      "Use --output-format json for reliable programmatic parsing in scripts",
      "Restrict tool access with --allowedTools and --disallowedTools for security",
      "Handle session IDs and errors explicitly for robust automation"
    ],
    "anti_patterns": [
      "Using headless mode without tool restrictions in untrusted contexts",
      "Ignoring exit codes and error responses in automation scripts",
      "Hardcoding API keys in scripts instead of using environment variables"
    ],
    "faq": [
      {
        "question": "What tools does this skill support?",
        "answer": "This skill documents Claude Code CLI headless mode for claude-code tool. It enables automation through command-line flags."
      },
      {
        "question": "What are the rate limits for headless mode?",
        "answer": "Headless mode uses standard Claude API rate limits. Check your Anthropic API plan for specific quotas."
      },
      {
        "question": "How do I integrate with CI/CD systems?",
        "answer": "Use --output-format json and --permission-mode acceptEdits flags. Examples for GitHub Actions, GitLab CI, and Jenkins are provided."
      },
      {
        "question": "Is my data safe when using headless mode?",
        "answer": "Yes. Data handling follows Claude Code's standard policies. Use --allowedTools to restrict access to sensitive resources."
      },
      {
        "question": "Why is my headless command blocking?",
        "answer": "Default permission mode requires prompts. Use --permission-mode bypassPermissions or --permission-mode acceptEdits for non-interactive execution."
      },
      {
        "question": "How does this compare to interactive mode?",
        "answer": "Headless mode provides CLI access for scripting with structured JSON output. Interactive mode offers chat interface with real-time responses."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "cli-options.md",
          "type": "file",
          "path": "references/cli-options.md"
        },
        {
          "name": "integration-patterns.md",
          "type": "file",
          "path": "references/integration-patterns.md"
        },
        {
          "name": "output-formats.md",
          "type": "file",
          "path": "references/output-formats.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
