{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T05:50:32.358Z",
    "slug": "writing-hookify-rules",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/hookify/skills/writing-rules",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Writing Hookify Rules",
    "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
    "summary": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"confi...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "license": "MIT",
    "category": "automation",
    "tags": [
      "hookify",
      "rules",
      "configuration",
      "patterns",
      "regex",
      "automation",
      "guardrails",
      "validation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill that provides documentation and guidance for writing Hookify rules. It contains no executable code, only instructional markdown content with examples of rule syntax and regex patterns.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 375,
    "audit_model": "claude",
    "audited_at": "2025-12-31T05:50:32.358Z"
  },
  "content": {
    "user_title": "Hookify Rule Writing Assistant",
    "value_statement": "Learn to create custom Hookify rules that automatically warn or block Claude from performing dangerous operations, adding debug code, or modifying sensitive files.",
    "seo_keywords": [
      "hookify",
      "rules",
      "regex patterns",
      "code safety",
      "automation guards",
      "claude configuration",
      "development guardrails",
      "pattern matching"
    ],
    "actual_capabilities": [
      "Guides users through creating Hookify rule files with proper YAML frontmatter structure",
      "Explains event types (bash, file, stop, prompt) and when to use each",
      "Teaches regex pattern writing for matching commands and file content",
      "Demonstrates simple pattern matching and advanced multi-condition rules",
      "Provides examples for common use cases like blocking dangerous commands or warning about console.log",
      "Explains field operators (regex_match, contains, equals, starts_with, ends_with, not_contains)",
      "Shows how to write effective warning messages that explain issues and suggest alternatives"
    ],
    "limitations": [
      "Does not create or modify Hookify rule files directly - only provides guidance",
      "Cannot test or validate regex patterns - users must test separately",
      "Does not manage rule activation/deactivation - users must edit files manually",
      "Cannot access or analyze existing Hookify rules in the project"
    ],
    "use_cases": [
      {
        "title": "Prevent Dangerous Commands",
        "description": "Create rules that block or warn when Claude attempts to run destructive bash commands like 'rm -rf', 'chmod 777', or privilege escalation with 'sudo'.",
        "target_user": "DevOps engineers and system administrators who want to prevent accidental system damage"
      },
      {
        "title": "Enforce Code Quality",
        "description": "Set up rules to warn when debug code (console.log, debugger statements) is added to production files, or when security anti-patterns like eval() or innerHTML are used.",
        "target_user": "Frontend and backend developers maintaining code quality standards"
      },
      {
        "title": "Protect Sensitive Files",
        "description": "Create alerts when .env files, credentials, or API keys are being modified to ensure they're properly gitignored and not exposed.",
        "target_user": "Security-conscious developers handling sensitive configuration"
      },
      {
        "title": "Completion Checklists",
        "description": "Use stop event rules to remind Claude to run tests, update documentation, or verify builds before marking tasks complete.",
        "target_user": "Tech leads enforcing development workflows and quality gates"
      }
    ],
    "prompt_templates": [
      {
        "title": "Block Dangerous File Deletion",
        "prompt": "Create a hookify rule that blocks any 'rm -rf' commands that target directories outside of /tmp",
        "scenario": "Preventing accidental deletion of important project files or system directories"
      },
      {
        "title": "Warn on Console.log in TypeScript",
        "prompt": "Write a hookify rule that warns when console.log is added to .ts or .tsx files",
        "scenario": "Maintaining clean production code without debug statements"
      },
      {
        "title": "Require Tests Before Completion",
        "prompt": "Create a stop event rule that reminds Claude to run tests and check the build before finishing",
        "scenario": "Enforcing quality gates in development workflow"
      },
      {
        "title": "Protect Environment Files",
        "prompt": "Make a hookify rule that warns when .env files are modified and reminds to check .gitignore",
        "scenario": "Preventing accidental exposure of secrets and credentials"
      }
    ],
    "output_examples": [
      {
        "input": "Create a hookify rule that warns about console.log",
        "output": "I'll help you create a Hookify rule to warn about console.log statements.\n\nCreate this file: `.claude/hookify.console-log.local.md`\n\n```markdown\n---\nname: warn-console-log\nenabled: true\nevent: file\npattern: console\\.log\\(\n---\n\n‚ö†Ô∏è **Console.log detected!**\n\nYou're adding console.log to the code.\n\n**Why this matters:**\n- Debug logs shouldn't ship to production\n- Console.log can expose sensitive data\n- Impacts browser performance\n\n**Alternatives:**\n- Use a proper logging library\n- Remove before committing\n- Use conditional debug builds\n```\n\nThe rule will trigger whenever you try to add console.log() to any file."
      }
    ],
    "best_practices": [
      "Start with descriptive, action-oriented rule names using kebab-case (e.g., 'warn-dangerous-rm', 'block-console-log')",
      "Use unquoted YAML patterns to avoid double-backslash escaping issues with regex",
      "Write clear, helpful messages that explain what was detected, why it's problematic, and suggest alternatives",
      "Test regex patterns using Python's re module or online testers before adding to rules",
      "Use multi-condition rules when you need to match both file paths and content patterns",
      "Store rules in .claude/ directory with naming format: hookify.{descriptive-name}.local.md",
      "Add .claude/*.local.md to .gitignore to keep personal rules out of version control",
      "Use 'warn' action for guidance and 'block' action only for truly dangerous operations"
    ],
    "anti_patterns": [
      "Making patterns too broad (e.g., 'log' matches 'login', 'dialog', 'catalog')",
      "Making patterns too specific (e.g., matching exact file paths instead of patterns)",
      "Using generic rule names like 'rule1' or 'temp' that don't describe purpose",
      "Forgetting to escape regex special characters like dots, parens, and brackets",
      "Writing vague warning messages without explaining the issue or providing alternatives",
      "Blocking operations unnecessarily when warnings would be more appropriate"
    ],
    "faq": [
      {
        "question": "Where should Hookify rule files be stored?",
        "answer": "All Hookify rules should be stored in the .claude/ directory with the naming format: hookify.{descriptive-name}.local.md (e.g., .claude/hookify.dangerous-rm.local.md)"
      },
      {
        "question": "When do rule changes take effect?",
        "answer": "Rules are read dynamically, so changes take effect immediately on the next tool use. You don't need to restart Claude or reload anything."
      },
      {
        "question": "What's the difference between 'warn' and 'block' actions?",
        "answer": "'warn' shows the message but allows the operation to continue, while 'block' prevents the operation entirely. Use 'block' only for truly dangerous operations."
      },
      {
        "question": "Can I use multiple conditions in a single rule?",
        "answer": "Yes, use the 'conditions' array in the frontmatter to specify multiple field/operator/pattern combinations. All conditions must match for the rule to trigger."
      },
      {
        "question": "How do I test if my regex pattern is correct?",
        "answer": "Test patterns using Python: python3 -c \"import re; print(re.search(r'your_pattern', 'test text'))\" or use online regex testers like regex101.com with Python flavor."
      },
      {
        "question": "What events can Hookify rules respond to?",
        "answer": "Rules can trigger on: 'bash' (Bash commands), 'file' (Edit/Write operations), 'stop' (when Claude wants to finish), 'prompt' (user input), or 'all' (every event)."
      }
    ],
    "technical_requirements": {
      "dependencies": [],
      "permissions": [],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}