{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T05:48:53.736Z",
    "slug": "plugin-structure",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-structure",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Plugin Structure",
    "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
    "summary": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand ...",
    "icon": "ðŸ”Œ",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "Not specified",
    "category": "development",
    "tags": [
      "plugin-development",
      "architecture",
      "claude-code",
      "configuration",
      "best-practices",
      "file-structure"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill providing documentation and examples for plugin structure. No executable code, external network calls, or security risks detected. All content is educational and follows best practices.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 3146,
    "audit_model": "claude",
    "audited_at": "2025-12-31T05:48:53.735Z"
  },
  "content": {
    "user_title": "Claude Code Plugin Structure Guide",
    "value_statement": "Learn to build well-organized, maintainable Claude Code plugins with proper directory structure, manifest configuration, and component organization following official best practices.",
    "seo_keywords": [
      "claude code plugin",
      "plugin architecture",
      "plugin.json",
      "plugin development",
      "claude code extensions",
      "plugin structure",
      "claude code automation",
      "command development",
      "agent development",
      "skill development"
    ],
    "actual_capabilities": [
      "Provides comprehensive plugin directory structure patterns (minimal, standard, advanced)",
      "Explains plugin.json manifest configuration with all field references",
      "Details auto-discovery mechanism for commands, agents, skills, and hooks",
      "Teaches portable path references using ${CLAUDE_PLUGIN_ROOT}",
      "Covers component organization patterns (flat, categorized, hierarchical)",
      "Includes complete working examples for three complexity levels",
      "Explains MCP server integration within plugins",
      "Provides file naming conventions and best practices",
      "Documents hook configuration and event handling",
      "Offers troubleshooting guidance for common plugin issues"
    ],
    "limitations": [
      "Does not cover runtime plugin behavior or execution details",
      "Does not include MCP server implementation details (documentation only)",
      "Focuses on structure and organization, not specific command/agent logic",
      "Does not cover plugin marketplace publishing process",
      "Examples are illustrative and may need adaptation for specific use cases"
    ],
    "use_cases": [
      {
        "title": "Creating Your First Plugin",
        "description": "Start with the minimal plugin example to create a simple single-command plugin, then expand using the standard patterns as you add more functionality.",
        "target_user": "Developers new to Claude Code plugin development"
      },
      {
        "title": "Organizing Complex Enterprise Plugins",
        "description": "Use the advanced plugin example to structure large-scale plugins with multiple MCP servers, shared libraries, environment configurations, and security automation.",
        "target_user": "DevOps teams and enterprise developers building comprehensive automation"
      },
      {
        "title": "Migrating Plugins to Best Practices",
        "description": "Refactor existing plugins using the component organization patterns and portable path references to improve maintainability and portability.",
        "target_user": "Plugin maintainers improving existing codebases"
      },
      {
        "title": "Building Team Collaboration Tools",
        "description": "Structure plugins with proper hooks, skills, and agents to create cohesive workflows for code review, testing, and deployment automation.",
        "target_user": "Development teams standardizing workflows"
      }
    ],
    "prompt_templates": [
      {
        "title": "Scaffold a New Plugin",
        "prompt": "Create a new Claude Code plugin called [plugin-name] with [describe functionality]. Include commands for [list commands], and organize it following best practices.",
        "scenario": "Starting a new plugin project from scratch"
      },
      {
        "title": "Reorganize Plugin Structure",
        "prompt": "Help me reorganize my plugin to follow the standard plugin structure. Currently I have [describe current structure]. I want to add [new components] and improve organization.",
        "scenario": "Refactoring an existing plugin for better organization"
      },
      {
        "title": "Add Component to Existing Plugin",
        "prompt": "I have a plugin at [path]. Add a new [command/agent/skill] called [name] that [describe functionality]. Follow the plugin's existing conventions.",
        "scenario": "Extending an existing plugin with new capabilities"
      },
      {
        "title": "Configure Plugin Manifest",
        "prompt": "Update the plugin.json manifest for my plugin. Set version to [version], add [metadata fields], and configure custom paths for [components].",
        "scenario": "Configuring plugin metadata and discovery paths"
      },
      {
        "title": "Fix Path Resolution Issues",
        "prompt": "My plugin has path resolution errors when running [component]. Convert all hardcoded paths to use ${CLAUDE_PLUGIN_ROOT} and ensure portability.",
        "scenario": "Troubleshooting path-related plugin issues"
      }
    ],
    "output_examples": [
      {
        "input": "Create a minimal plugin called 'hello-world' with a single greeting command",
        "output": "Creates directory structure:\nhello-world/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json (with name: \"hello-world\")\nâ””â”€â”€ commands/\n    â””â”€â”€ hello.md (with greeting implementation)\n\nThe command will be available as /hello in Claude Code."
      },
      {
        "input": "Add a code reviewer agent to my existing code-quality plugin",
        "output": "Creates agents/code-reviewer.md with:\n- YAML frontmatter defining description and capabilities\n- Expertise in bug detection, security, performance, standards\n- Review process workflow\n- Integration with existing code-standards skill\n- Structured output format for review findings"
      }
    ],
    "best_practices": [
      "Always use ${CLAUDE_PLUGIN_ROOT} for portable path references, never hardcoded paths",
      "Start with minimal structure and add complexity only as needed",
      "Place plugin.json in .claude-plugin/ directory, components at root level",
      "Use kebab-case naming for all directories and files",
      "Rely on auto-discovery by using default directory names when possible",
      "Follow semantic versioning (MAJOR.MINOR.PATCH) for plugin versions",
      "Include comprehensive metadata in plugin.json for discoverability",
      "Organize complex plugins with categorized or hierarchical structures",
      "Keep SKILL.md files lean (1500-2000 words), use references/ for details",
      "Test plugins on multiple operating systems to verify portability",
      "Document custom paths and non-standard organization choices",
      "Use meaningful, descriptive names that indicate component purpose"
    ],
    "anti_patterns": [
      "Placing components inside .claude-plugin/ directory instead of plugin root",
      "Using absolute paths or paths without ./ prefix in manifest",
      "Hardcoding file paths instead of using ${CLAUDE_PLUGIN_ROOT}",
      "Creating deeply nested directory structures that slow discovery",
      "Omitting version numbers from plugin.json manifest",
      "Using inconsistent naming conventions across components",
      "Putting all content in SKILL.md instead of using references/",
      "Creating custom directory structures without documenting why",
      "Forgetting to test path resolution on different operating systems",
      "Using generic names like 'utils' or 'misc' for components"
    ],
    "faq": [
      {
        "question": "Where should I put my plugin.json file?",
        "answer": "The plugin.json file must be at .claude-plugin/plugin.json (inside a .claude-plugin directory at your plugin root). Component directories like commands/, agents/, and skills/ should be at the plugin root level, NOT inside .claude-plugin/."
      },
      {
        "question": "What's the difference between commands, agents, and skills?",
        "answer": "Commands are user-invoked slash commands (/command-name). Agents are specialized subagents that users can invoke or Claude Code selects automatically. Skills are auto-activating knowledge that Claude Code loads based on task context matching the skill description."
      },
      {
        "question": "When should I use custom paths in plugin.json vs. default directories?",
        "answer": "Use default directories (commands/, agents/, skills/, hooks/) when possible for simplicity. Only specify custom paths when you need multiple component locations, categorized organization, or integration with existing directory structures. Custom paths supplement defaults, they don't replace them."
      },
      {
        "question": "How do I make my plugin work on different operating systems?",
        "answer": "Always use ${CLAUDE_PLUGIN_ROOT} for path references instead of hardcoded paths. Use forward slashes (/) in paths even on Windows. Test on macOS, Linux, and Windows. Avoid OS-specific shell features in scripts."
      },
      {
        "question": "What's the difference between hooks.json and .mcp.json?",
        "answer": "hooks.json configures event handlers that execute in response to Claude Code events (PreToolUse, PostToolUse, etc.). .mcp.json configures MCP servers that provide external tool capabilities to Claude Code. Both can be inline in plugin.json or separate files."
      },
      {
        "question": "How do I organize a plugin with many components?",
        "answer": "For 15+ commands, use categorized structure with multiple directories. For 20+ commands, consider hierarchical organization. Group related components together (e.g., test-related commands, agents, and skills). Use the advanced-plugin.md example as reference for enterprise-scale organization."
      },
      {
        "question": "Can I have multiple skills in one plugin?",
        "answer": "Yes, create a subdirectory in skills/ for each skill, each with its own SKILL.md file. For example: skills/api-testing/SKILL.md and skills/database-ops/SKILL.md. Each skill can have its own references/, examples/, and scripts/ subdirectories."
      },
      {
        "question": "What happens if my plugin.json has invalid paths?",
        "answer": "Claude Code validates paths during plugin loading. Paths must be relative, start with ./, and point to existing files/directories. Invalid paths cause plugin loading errors. Check that referenced files exist and paths follow the required format."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "Claude Code CLI installed and configured",
        "Text editor for creating markdown and JSON files",
        "Understanding of YAML frontmatter syntax",
        "Basic knowledge of JSON for manifest configuration"
      ],
      "permissions": [
        "File system access to create plugin directories",
        "Ability to edit Claude Code plugin settings"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "advanced-plugin.md",
          "type": "file",
          "path": "examples/advanced-plugin.md"
        },
        {
          "name": "minimal-plugin.md",
          "type": "file",
          "path": "examples/minimal-plugin.md"
        },
        {
          "name": "standard-plugin.md",
          "type": "file",
          "path": "examples/standard-plugin.md"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "component-patterns.md",
          "type": "file",
          "path": "references/component-patterns.md"
        },
        {
          "name": "manifest-reference.md",
          "type": "file",
          "path": "references/manifest-reference.md"
        }
      ]
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}