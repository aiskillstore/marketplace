{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-04T16:36:26.138Z",
    "slug": "k-dense-ai-anndata",
    "source_url": "https://github.com/K-Dense-AI/claude-scientific-skills/tree/main/scientific-skills/anndata",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "889912120885641c2574373c6142b6ef409b3a3a9dab6e4992508a11a4352e5c",
    "tree_hash": "2d7354c80819472b582d33db6d8baadfde48c594ef3608f23826ca4edf49fa0f"
  },
  "skill": {
    "name": "anndata",
    "description": "This skill should be used when working with annotated data matrices in Python, particularly for single-cell genomics analysis, managing experimental measurements with metadata, or handling large-scale biological datasets. Use when tasks involve AnnData objects, h5ad files, single-cell RNA-seq data, or integration with scanpy/scverse tools.",
    "summary": "This skill should be used when working with annotated data matrices in Python, particularly for sing...",
    "icon": "ðŸ§¬",
    "version": "1.0.0",
    "author": "K-Dense Inc.",
    "license": "BSD-3-Clause license",
    "category": "research",
    "tags": [
      "anndata",
      "single-cell",
      "h5ad",
      "scverse",
      "data-io"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation and reference skill containing educational code examples for the AnnData Python library. No executable code, network calls, or filesystem access beyond standard library usage. All content is benign documentation for legitimate scientific computing.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 2415,
    "audit_model": "claude",
    "audited_at": "2026-01-04T16:36:26.138Z"
  },
  "content": {
    "user_title": "Work with AnnData matrices for single-cell analysis",
    "value_statement": "Handling annotated data matrices in Python requires understanding complex data structures and I/O operations. This skill provides comprehensive guidance for working with AnnData objects, h5ad files, and single-cell genomics data in Claude, Codex, and Claude Code.",
    "seo_keywords": [
      "anndata",
      "single-cell",
      "h5ad",
      "scverse",
      "scanpy",
      "data-io",
      "genomics",
      "RNA-seq",
      "Python",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Create and manage AnnData objects with X matrix, obs, var, and layers",
      "Read and write h5ad, zarr, CSV, MTX, Loom, and 10X Genomics formats",
      "Concatenate multiple datasets along observation or variable axes",
      "Subset, filter, and transform annotated data efficiently",
      "Optimize memory usage with sparse matrices and backed mode",
      "Integrate with scanpy, scvi-tools, muon, and PyTorch"
    ],
    "limitations": [
      "Does not install the anndata library - users must install separately",
      "Does not perform actual data analysis - provides guidance and examples",
      "Focused on data structure manipulation, not statistical methods",
      "Does not provide visualization capabilities"
    ],
    "use_cases": [
      {
        "target_user": "Computational Biologists",
        "title": "Analyze single-cell RNA-seq data",
        "description": "Load, filter, and process single-cell datasets with proper metadata management and memory efficiency"
      },
      {
        "target_user": "Data Scientists",
        "title": "Handle large annotated matrices",
        "description": "Work with datasets larger than RAM using backed mode and chunked processing strategies"
      },
      {
        "target_user": "Bioinformatics Developers",
        "title": "Build scverse pipeline integrations",
        "description": "Create workflows that integrate with scanpy, muon, and other ecosystem tools"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Reading",
        "scenario": "Load h5ad file",
        "prompt": "How do I read an h5ad file in AnnData with backed mode for large datasets?"
      },
      {
        "title": "Data Structure",
        "scenario": "Create AnnData object",
        "prompt": "Show me how to create an AnnData object with observation metadata and variable annotations from pandas DataFrames"
      },
      {
        "title": "Concatenation",
        "scenario": "Combine multiple datasets",
        "prompt": "How do I concatenate multiple AnnData objects from different experimental batches with batch labels?"
      },
      {
        "title": "Optimization",
        "scenario": "Memory efficient processing",
        "prompt": "What are the best practices for working with large AnnData files including sparse matrices, categoricals, and backed mode?"
      }
    ],
    "output_examples": [
      {
        "input": "How do I read an h5ad file and filter cells by quality score?",
        "output": [
          "Load the file: adata = ad.read_h5ad('data.h5ad', backed='r')",
          "Check metadata: print(adata.obs.columns)",
          "Filter cells: high_quality = adata[adata.obs['quality_score'] > 0.8]",
          "Load subset: adata_filtered = high_quality.to_memory()"
        ]
      }
    ],
    "best_practices": [
      "Use sparse matrices and convert strings to categoricals for memory efficiency",
      "Store raw data before filtering genes to preserve original information",
      "Use backed mode for datasets larger than available RAM",
      "Always create explicit copies when modifying subsets to avoid view issues"
    ],
    "anti_patterns": [
      "Loading entire large datasets into memory when backed mode would suffice",
      "Modifying views without creating copies, causing unintended changes to original data",
      "Forgetting to align indices when adding external metadata to AnnData objects",
      "Ignoring data sparsity and using dense matrices for sparse genomics data"
    ],
    "faq": [
      {
        "question": "What formats can AnnData read and write?",
        "answer": "AnnData supports h5ad (native), zarr, CSV, TSV, MTX, Loom, 10X Genomics h5 and MTX, Excel, UMI tools, and generic HDF5 formats."
      },
      {
        "question": "How large of a dataset can AnnData handle?",
        "answer": "With backed mode, AnnData can work with datasets larger than RAM. Use backed='r' for read-only access and backed='r+' for modifications."
      },
      {
        "question": "How does AnnData integrate with scanpy?",
        "answer": "AnnData is the native data structure for scanpy. Simply pass AnnData objects to scanpy functions like sc.pp.normalize_total() and sc.tl.umap()."
      },
      {
        "question": "Is my data safe when using AnnData?",
        "answer": "AnnData is a read-write library. It writes files only when you explicitly call write methods. Backed mode can modify files if opened with 'r+' mode."
      },
      {
        "question": "Why is my reading slow for large files?",
        "answer": "Use compression='gzip' when writing for faster reads, consider Zarr for cloud storage, and use backed mode to avoid loading entire datasets into memory."
      },
      {
        "question": "How does AnnData compare to plain pandas DataFrames?",
        "answer": "AnnData handles multi-dimensional annotations (obsm, varm), layers, and pairwise data that DataFrames cannot. It is optimized for sparse genomics data with efficient storage."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "best_practices.md",
          "type": "file",
          "path": "references/best_practices.md"
        },
        {
          "name": "concatenation.md",
          "type": "file",
          "path": "references/concatenation.md"
        },
        {
          "name": "data_structure.md",
          "type": "file",
          "path": "references/data_structure.md"
        },
        {
          "name": "io_operations.md",
          "type": "file",
          "path": "references/io_operations.md"
        },
        {
          "name": "manipulation.md",
          "type": "file",
          "path": "references/manipulation.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
