{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-04T17:17:58.894Z",
    "slug": "k-dense-ai-neuropixels-analysis",
    "source_url": "https://github.com/K-Dense-AI/claude-scientific-skills/tree/main/scientific-skills/neuropixels-analysis",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "26fa60ee1f285f421ceb3dffe9dc272be8589ce64857a000f213421af41da714",
    "tree_hash": "af2b710dc23388308caddd241fbdb8a0372b0c0058c5e0752d163ff2c03a5bc0"
  },
  "skill": {
    "name": "neuropixels-analysis",
    "description": "Neuropixels neural recording analysis. Load SpikeGLX/OpenEphys data, preprocess, motion correction, Kilosort4 spike sorting, quality metrics, Allen/IBL curation, AI-assisted visual analysis, for Neuropixels 1.0/2.0 extracellular electrophysiology. Use when working with neural recordings, spike sorting, extracellular electrophysiology, or when the user mentions Neuropixels, SpikeGLX, Open Ephys, Kilosort, quality metrics, or unit curation.",
    "summary": "Neuropixels neural recording analysis. Load SpikeGLX/OpenEphys data, preprocess, motion correction, ...",
    "icon": "ðŸ§ ",
    "version": "1.0.0",
    "author": "K-Dense Inc.",
    "license": "MIT license",
    "category": "research",
    "tags": [
      "neuropixels",
      "spike-sorting",
      "electrophysiology",
      "spikeinterface",
      "curation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a legitimate scientific computing toolkit for neurophysiology research. The code uses the SpikeInterface library to analyze neural recordings. No credential theft, data exfiltration, or malicious code execution patterns detected. Contains standard Python scripts for data processing.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/explore_recording.py",
            "line_start": 1,
            "line_end": 169
          },
          {
            "file": "scripts/run_sorting.py",
            "line_start": 1,
            "line_end": 99
          },
          {
            "file": "scripts/export_to_phy.py",
            "line_start": 1,
            "line_end": 80
          },
          {
            "file": "scripts/compute_metrics.py",
            "line_start": 1,
            "line_end": 179
          },
          {
            "file": "scripts/neuropixels_pipeline.py",
            "line_start": 1,
            "line_end": 433
          },
          {
            "file": "scripts/preprocess_recording.py",
            "line_start": 1,
            "line_end": 123
          },
          {
            "file": "assets/analysis_template.py",
            "line_start": 1,
            "line_end": 272
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/run_sorting.py",
            "line_start": 60,
            "line_end": 66
          },
          {
            "file": "scripts/neuropixels_pipeline.py",
            "line_start": 184,
            "line_end": 189
          },
          {
            "file": "scripts/neuropixels_pipeline.py",
            "line_start": 316,
            "line_end": 319
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 12,
    "total_lines": 2481,
    "audit_model": "claude",
    "audited_at": "2026-01-04T17:17:58.893Z"
  },
  "content": {
    "user_title": "Analyze Neuropixels neural recordings",
    "value_statement": "Process high-density Neuropixels electrophysiology data from raw recordings to curated spike-sorted units. This toolkit provides complete analysis pipelines following best practices from SpikeInterface, Allen Institute, and IBL.",
    "seo_keywords": [
      "neuropixels",
      "spike sorting",
      "electrophysiology",
      "spikeinterface",
      "kilosort",
      "Neural analysis",
      "Claude Code",
      "Codex",
      "extracellular recording"
    ],
    "actual_capabilities": [
      "Load SpikeGLX, OpenEphys, and NWB neural recording formats",
      "Preprocess recordings with filtering, phase shift, and bad channel detection",
      "Estimate and correct motion drift in long recordings",
      "Run Kilosort4, SpykingCircus2, and Mountainsort5 spike sorting algorithms",
      "Compute quality metrics: SNR, ISI violations, presence ratio, amplitude cutoff",
      "Export results to Phy for manual curation or NWB for data sharing"
    ],
    "limitations": [
      "Requires spikeinterface and GPU for Kilosort4 performance",
      "Does not include bundled neural data files for testing",
      "AI curation requires separate API key for Anthropic or OpenAI",
      "Motion correction preset selection requires domain knowledge"
    ],
    "use_cases": [
      {
        "target_user": "Neuroscience researchers",
        "title": "Process lab recordings",
        "description": "Convert raw Neuropixels data into curated unit classifications for publication and downstream analysis"
      },
      {
        "target_user": "Computational neuroscientists",
        "title": "Batch analysis workflows",
        "description": "Apply consistent preprocessing, sorting, and quality metrics across multiple recording sessions"
      },
      {
        "target_user": "AI integration developers",
        "title": "Visual curation assistance",
        "description": "Use vision-language models to analyze waveform plots and assist with unit quality assessment"
      }
    ],
    "prompt_templates": [
      {
        "title": "Load and explore",
        "scenario": "Quick data inspection",
        "prompt": "Load my Neuropixels recording from /path/to/data and show basic properties including channel count, duration, and sampling rate"
      },
      {
        "title": "Full pipeline",
        "scenario": "Complete analysis",
        "prompt": "Run the complete analysis pipeline on my SpikeGLX data including preprocessing, motion correction, Kilosort4 sorting, and quality metrics"
      },
      {
        "title": "Quality control",
        "scenario": "Unit curation",
        "prompt": "Compute quality metrics for my sorted units and apply Allen Institute curation criteria to identify good single units"
      },
      {
        "title": "Visual assessment",
        "scenario": "AI-assisted review",
        "prompt": "Generate waveform and autocorrelogram plots for units with SNR between 3 and 8, then analyze if they represent good single units, MUA, or noise"
      }
    ],
    "output_examples": [
      {
        "input": "Load my Neuropixels recording and run quality metrics",
        "output": [
          "Recording: 384 channels, 600.0 seconds (10.0 min), 30000 Hz sampling",
          "Preprocessed with 400 Hz highpass filter, phase shift, and common median reference",
          "Kilosort4 found 142 units",
          "Quality metrics computed: SNR (median=5.2), ISI violations (median=0.08), presence ratio (median=0.92)",
          "Allen curation: 78 good units, 45 MUA, 19 noise"
        ]
      }
    ],
    "best_practices": [
      "Always check drift before spike sorting - drift over 20um significantly impacts quality",
      "Save preprocessed data to disk to avoid recomputing between analysis iterations",
      "Review units with SNR between 3 and 8 manually or with AI assistance"
    ],
    "anti_patterns": [
      "Skipping motion correction on recordings with visible drift",
      "Using default curation thresholds without checking metric distributions",
      "Trusting automated curation for critical experiments without Phy review"
    ],
    "faq": [
      {
        "question": "Which Neuropixels probes are supported?",
        "answer": "Neuropixels 1.0 (960 electrodes), 2.0 single (1280 electrodes), and 2.0 4-shank (5120 electrodes)"
      },
      {
        "question": "What file formats can I load?",
        "answer": "SpikeGLX (.ap.bin, .lf.bin, .meta), Open Ephys (.continuous, .oebin), and NWB (.nwb) formats"
      },
      {
        "question": "Do I need a GPU?",
        "answer": "Kilosort4 requires CUDA GPU. CPU alternatives include SpykingCircus2 and Mountainsort5"
      },
      {
        "question": "Is my data sent to external servers?",
        "answer": "Only if you configure AI curation with Anthropic/OpenAI API calls. Standard processing is local only"
      },
      {
        "question": "Why are my results different from expected?",
        "answer": "Check motion correction, bad channel detection, and sorter parameters. Consider comparing multiple sorters"
      },
      {
        "question": "How does this compare to manual Phy curation?",
        "answer": "This toolkit provides automated starting point. For publication, export to Phy for human review of uncertain units"
      }
    ]
  },
  "file_structure": [
    {
      "name": "assets",
      "type": "dir",
      "path": "assets",
      "children": [
        {
          "name": "analysis_template.py",
          "type": "file",
          "path": "assets/analysis_template.py"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "AI_CURATION.md",
          "type": "file",
          "path": "references/AI_CURATION.md"
        },
        {
          "name": "ANALYSIS.md",
          "type": "file",
          "path": "references/ANALYSIS.md"
        },
        {
          "name": "api_reference.md",
          "type": "file",
          "path": "references/api_reference.md"
        },
        {
          "name": "AUTOMATED_CURATION.md",
          "type": "file",
          "path": "references/AUTOMATED_CURATION.md"
        },
        {
          "name": "MOTION_CORRECTION.md",
          "type": "file",
          "path": "references/MOTION_CORRECTION.md"
        },
        {
          "name": "plotting_guide.md",
          "type": "file",
          "path": "references/plotting_guide.md"
        },
        {
          "name": "PREPROCESSING.md",
          "type": "file",
          "path": "references/PREPROCESSING.md"
        },
        {
          "name": "QUALITY_METRICS.md",
          "type": "file",
          "path": "references/QUALITY_METRICS.md"
        },
        {
          "name": "SPIKE_SORTING.md",
          "type": "file",
          "path": "references/SPIKE_SORTING.md"
        },
        {
          "name": "standard_workflow.md",
          "type": "file",
          "path": "references/standard_workflow.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "compute_metrics.py",
          "type": "file",
          "path": "scripts/compute_metrics.py"
        },
        {
          "name": "explore_recording.py",
          "type": "file",
          "path": "scripts/explore_recording.py"
        },
        {
          "name": "export_to_phy.py",
          "type": "file",
          "path": "scripts/export_to_phy.py"
        },
        {
          "name": "neuropixels_pipeline.py",
          "type": "file",
          "path": "scripts/neuropixels_pipeline.py"
        },
        {
          "name": "preprocess_recording.py",
          "type": "file",
          "path": "scripts/preprocess_recording.py"
        },
        {
          "name": "run_sorting.py",
          "type": "file",
          "path": "scripts/run_sorting.py"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
