{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-04T16:36:18.749Z",
    "slug": "k-dense-ai-pysam",
    "source_url": "https://github.com/K-Dense-AI/claude-scientific-skills/tree/main/scientific-skills/pysam",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "5612cc9dad45f8ff0e570969a296f30caefc3e0824ee36167b85706a67f5cf31",
    "tree_hash": "0dd57191b392d9a7981c202009301c776fc7afc3884a8e4c4d4d0d01098b90a6"
  },
  "skill": {
    "name": "pysam",
    "description": "Genomic file toolkit. Read/write SAM/BAM/CRAM alignments, VCF/BCF variants, FASTA/FASTQ sequences, extract regions, calculate coverage, for NGS data processing pipelines.",
    "summary": "Genomic file toolkit. Read/write SAM/BAM/CRAM alignments, VCF/BCF variants, FASTA/FASTQ sequences, e...",
    "icon": "ðŸ§¬",
    "version": "1.0.0",
    "author": "K-Dense Inc.",
    "license": "MIT license",
    "category": "data",
    "tags": [
      "bioinformatics",
      "genomics",
      "pysam",
      "ngs",
      "variants"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill teaching pysam library usage for genomic file processing. Contains appropriate file operations and samtools/bcftools wrappers for bioinformatics workflows. No malicious patterns, obfuscation, or data exfiltration detected.",
    "risk_factor_evidence": [
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 38,
            "line_end": 44
          },
          {
            "file": "SKILL.md",
            "line_start": 59,
            "line_end": 62
          },
          {
            "file": "references/alignment_files.md",
            "line_start": 17,
            "line_end": 25
          },
          {
            "file": "references/variant_files.md",
            "line_start": 12,
            "line_end": 23
          },
          {
            "file": "references/sequence_files.md",
            "line_start": 14,
            "line_end": 18
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 215,
            "line_end": 237
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 2088,
    "audit_model": "claude",
    "audited_at": "2026-01-04T16:36:18.749Z"
  },
  "content": {
    "user_title": "Analyze genomic files with Pysam",
    "value_statement": "Process SAM, BAM, CRAM, VCF, BCF, FASTA, and FASTQ files for next-generation sequencing analysis. This skill provides guidance on reading alignments, querying regions, calculating coverage, and running samtools commands.",
    "seo_keywords": [
      "pysam",
      "genomics",
      "bioinformatics",
      "BAM",
      "VCF",
      "FASTA",
      "Claude",
      "Codex",
      "Claude Code",
      "NGS"
    ],
    "actual_capabilities": [
      "Read and write SAM, BAM, and CRAM alignment files with AlignmentFile",
      "Query genomic regions with fetch and count reads using coordinate systems",
      "Calculate per-base coverage and perform pileup analysis",
      "Read and write VCF or BCF variant files and access INFO and FORMAT fields",
      "Extract reference sequences from FASTA and process FASTQ reads",
      "Run samtools and bcftools commands through pysam wrappers"
    ],
    "limitations": [
      "Random access requires index files such as .bai, .crai, .tbi, or .fai",
      "Coordinate systems mix 0-based Python and 1-based region strings",
      "Streaming supports only stdin and stdout, not arbitrary Python file objects",
      "Thread safety is not fully validated for complex parallel usage"
    ],
    "use_cases": [
      {
        "target_user": "Bioinformatician",
        "title": "Region-based BAM analysis",
        "description": "Fetch reads from specific loci, compute coverage, and summarize alignment quality for validation."
      },
      {
        "target_user": "Genetics analyst",
        "title": "Variant file filtering",
        "description": "Inspect VCF records, filter by quality and depth, and extract sample genotypes for reporting."
      },
      {
        "target_user": "Pipeline engineer",
        "title": "Sequence extraction tasks",
        "description": "Pull FASTA regions or FASTQ reads to feed downstream tools, validation, and automated reports."
      }
    ],
    "prompt_templates": [
      {
        "title": "Read a BAM region",
        "scenario": "Beginner region query",
        "prompt": "Show me how to open a BAM file and fetch reads from chr1:1000-2000 using pysam."
      },
      {
        "title": "Compute coverage",
        "scenario": "Intermediate coverage summary",
        "prompt": "Provide a pysam example to compute per-base coverage on chr2:5000-5200 and summarize A C G T counts."
      },
      {
        "title": "Filter VCF variants",
        "scenario": "Intermediate variant filtering",
        "prompt": "Write a pysam snippet that reads a VCF and outputs variants with QUAL above 30 and at least one sample GT."
      },
      {
        "title": "Integrate BAM and VCF",
        "scenario": "Advanced validation workflow",
        "prompt": "Outline a workflow that validates VCF variants against BAM read support and reports low support sites."
      }
    ],
    "output_examples": [
      {
        "input": "How do I fetch reads from a BAM file and calculate coverage?",
        "output": [
          "Open the BAM file using AlignmentFile in read binary mode ('rb')",
          "Use fetch() to retrieve reads overlapping your target region",
          "Call count_coverage() to get per-base A, C, G, T coverage arrays",
          "Call pileup() for column-wise analysis with read details",
          "Close the file with close() to release system resources"
        ]
      }
    ],
    "best_practices": [
      "Create required index files before random access queries using pysam.index() or pysam.faidx()",
      "Use pileup() or count_coverage() for base-level metrics instead of iterating manually",
      "Close files explicitly to release resources and avoid file handle leaks"
    ],
    "anti_patterns": [
      "Assuming fetch() uses 1-based coordinates for integer argumentsâ€”it uses 0-based",
      "Iterating the entire file to count reads when count() provides optimized counting",
      "Using Python file objects for streaming instead of stdin (-) or stdout (-)"
    ],
    "faq": [
      {
        "question": "Is this compatible with BAM, CRAM, VCF, and FASTA files?",
        "answer": "Yes, the skill covers pysam usage for SAM, BAM, CRAM, VCF, BCF, FASTA, and FASTQ formats with their index files."
      },
      {
        "question": "What are the limits to random access operations?",
        "answer": "Random access requires index files (.bai for BAM, .tbi for compressed VCF, .fai for FASTA). Without indices, use until_eof=True."
      },
      {
        "question": "Can I integrate this with samtools or bcftools?",
        "answer": "Yes, pysam provides samtools and bcftools command wrappers through pysam.samtools.* and pysam.bcftools.* interfaces."
      },
      {
        "question": "Does this skill access my data or send information externally?",
        "answer": "No, this skill provides local code examples and documentation only. All operations occur on files you specify."
      },
      {
        "question": "Why does fetch return unexpected reads?",
        "answer": "Fetch returns reads that overlap the region boundaries. Verify coordinate systems and implement explicit filtering if needed."
      },
      {
        "question": "How does this compare to using htslib directly?",
        "answer": "Pysam provides a Pythonic interface to htslib, making genomic file operations more accessible without requiring C programming."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "alignment_files.md",
          "type": "file",
          "path": "references/alignment_files.md"
        },
        {
          "name": "common_workflows.md",
          "type": "file",
          "path": "references/common_workflows.md"
        },
        {
          "name": "sequence_files.md",
          "type": "file",
          "path": "references/sequence_files.md"
        },
        {
          "name": "variant_files.md",
          "type": "file",
          "path": "references/variant_files.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
