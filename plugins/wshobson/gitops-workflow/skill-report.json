{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-02T00:25:39.880Z",
    "slug": "wshobson-gitops-workflow",
    "source_url": "https://github.com/wshobson/agents/tree/main/plugins/kubernetes-operations/skills/gitops-workflow",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "community"
  },
  "skill": {
    "name": "gitops-workflow",
    "description": "Implement GitOps workflows with ArgoCD and Flux for automated, declarative Kubernetes deployments with continuous reconciliation. Use when implementing GitOps practices, automating Kubernetes deployments, or setting up declarative infrastructure management.",
    "summary": "Implement GitOps workflows with ArgoCD and Flux for automated, declarative Kubernetes deployments wi...",
    "icon": "☸️",
    "version": "1.0.0",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "gitops",
      "kubernetes",
      "argocd",
      "flux",
      "ci-cd"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "critical",
    "is_blocked": true,
    "safe_to_publish": false,
    "summary": "The skill contains a download-and-execute command that pipes a remote script into a privileged shell. This matches a cri shell. This matches a critical payload download and execute pattern.",
    "risk_factors": [
      "network"
    ],
    "critical_findings": [
      {
        "title": "Remote script piped to sudo bash",
        "description": "Found a download-and-execute pattern: \"curl -s https://fluxcd.io/install..",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 120,
            "line_end": 120
          }
        ]
      }
    ],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [
      {
        "title": "Download and execute via shell pipe",
        "description": "Command pipes remote script to shell with sudo: \"curl -s https://fluxcd.io/install.sh | sudo bash\".",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 120,
            "line_end": 120
          }
        ]
      }
    ],
    "files_scanned": 3,
    "total_lines": 553,
    "audit_model": "codex",
    "audited_at": "2026-01-02T00:25:39.879Z"
  },
  "content": {
    "user_title": "Implement GitOps delivery for Kubernetes",
    "value_statement": "You need consistent, auditable Kubernetes deployments across environments. This skill guides GitOps setup with ArgoCD or Flux and clear sync policies.",
    "seo_keywords": [
      "GitOps",
      "Kubernetes",
      "ArgoCD",
      "Flux CD",
      "Claude",
      "Codex",
      "Claude Code",
      "CI/CD",
      "declarative delivery",
      "Kustomization"
    ],
    "actual_capabilities": [
      "Explain ArgoCD installation and initial setup steps",
      "Provide Flux bootstrap commands for Git repositories",
      "Show ArgoCD Application and app-of-apps manifests",
      "Detail ArgoCD and Flux sync policy configuration",
      "Outline progressive delivery patterns like canary and blue-green",
      "Describe secret management options for GitOps workflows"
    ],
    "limitations": [
      "Does not execute commands or validate cluster state",
      "Does not create or manage real secrets",
      "Requires you to have Git repository access and Kubernetes credentials",
      "Does not provide runtime monitoring or alerting"
    ],
    "use_cases": [
      {
        "target_user": "Platform engineer",
        "title": "Standardize GitOps setup",
        "description": "Set up ArgoCD or Flux with a consistent repo structure and sync policies."
      },
      {
        "target_user": "DevOps lead",
        "title": "Enable progressive delivery",
        "description": "Define canary or blue-green rollout patterns for safer production releases."
      },
      {
        "target_user": "SRE",
        "title": "Harden sync behavior",
        "description": "Configure retries, sync windows, and self-heal settings for reliability."
      }
    ],
    "prompt_templates": [
      {
        "title": "Start GitOps basics",
        "scenario": "New cluster needs GitOps",
        "prompt": "Create a simple GitOps plan for one Kubernetes cluster using ArgoCD, including repo layout and an example application."
      },
      {
        "title": "Add auto-sync policies",
        "scenario": "Automate reconciliation",
        "prompt": "Show an ArgoCD Application manifest with automated sync, pruning, and self-heal for a production app."
      },
      {
        "title": "Set up Flux bootstrap",
        "scenario": "Flux for GitHub repo",
        "prompt": "Provide Flux bootstrap commands and a GitRepository plus Kustomization example for a repo named gitops-repo."
      },
      {
        "title": "Design rollout strategy",
        "scenario": "Progressive delivery needed",
        "prompt": "Recommend a canary rollout plan using ArgoCD Rollouts and list the key configuration steps."
      }
    ],
    "output_examples": [
      {
        "input": "Set up ArgoCD auto-sync and app of apps structure for staging and production.",
        "output": [
          "Define a repo layout with separate staging and production folders under apps/",
          "Create a root Application that targets argocd/applications",
          "Enable automated sync with prune and self-heal",
          "Set CreateNamespace sync option for environment namespaces",
          "Add one Application per environment path"
        ]
      }
    ],
    "best_practices": [
      "Use separate environments and approval gates for production",
      "Keep secrets out of Git with external secret stores",
      "Enable sync health checks and alerts"
    ],
    "anti_patterns": [
      "Piping remote scripts to sudo without review",
      "Using one Git branch for all environments",
      "Disabling pruning and leaving drift unmanaged"
    ],
    "faq": [
      {
        "question": "Is this compatible with both ArgoCD and Flux",
        "answer": "Yes. It includes setup and sync policy guidance for both tools."
      },
      {
        "question": "What are the limits of this skill",
        "answer": "It provides guidance only and cannot run commands or verify cluster state."
      },
      {
        "question": "Can it integrate with my existing Git repo",
        "answer": "Yes. It assumes you already have access to the repo and can structure it."
      },
      {
        "question": "Does it handle sensitive data safely",
        "answer": "It recommends external secret stores and avoids placing secrets in Git."
      },
      {
        "question": "What if sync keeps failing",
        "answer": "Use the troubleshooting commands and review sync policies and health checks."
      },
      {
        "question": "How does it compare to manual kubectl workflows",
        "answer": "GitOps provides versioned desired state and continuous reconciliation."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "argocd-setup.md",
          "type": "file",
          "path": "references/argocd-setup.md"
        },
        {
          "name": "sync-policies.md",
          "type": "file",
          "path": "references/sync-policies.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}