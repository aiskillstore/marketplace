{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-02T00:01:54.608Z",
    "slug": "wshobson-bats-testing-patterns",
    "source_url": "https://github.com/wshobson/agents/tree/main/plugins/shell-scripting/skills/bats-testing-patterns",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "e89d87d22ded41adad20bb53004574f8867ab4d360ff84e1c35fd7576579aeb5",
    "tree_hash": "21ced565e29bb86a36e8c9f202df138e841e76416d76c7eb0764d667c0f4dec7"
  },
  "skill": {
    "name": "bats-testing-patterns",
    "description": "Master Bash Automated Testing System (Bats) for comprehensive shell script testing. Use when writing tests for shell scripts, CI/CD pipelines, or requiring test-driven development of shell utilities.",
    "summary": "Master Bash Automated Testing System (Bats) for comprehensive shell script testing. Use when writing...",
    "icon": "ðŸ§ª",
    "version": "1.0.0",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "bats",
      "shell-testing",
      "tdd",
      "ci-cd",
      "bash"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "The skill contains only instructional examples for Bats testing patterns. No file exfiltration, network beacons, or malicious execution logic is present.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 630,
    "audit_model": "codex",
    "audited_at": "2026-01-02T00:01:54.607Z"
  },
  "content": {
    "user_title": "Build Bats tests for shell scripts",
    "value_statement": "Shell scripts break when tests are missing or unclear. This skill gives ready patterns for Bats tests, fixtures, mocks, and CI usage.",
    "seo_keywords": [
      "Bats testing",
      "bash unit tests",
      "shell script testing",
      "CI test patterns",
      "TDD for scripts",
      "Claude",
      "Codex",
      "Claude Code",
      "Bats fixtures",
      "Bash mocks"
    ],
    "actual_capabilities": [
      "Explains Bats test structure with setup and teardown",
      "Provides exit code and output assertion patterns",
      "Shows fixture creation and file comparison workflows",
      "Demonstrates mocking and command stubbing in tests",
      "Includes CI examples for GitHub Actions and Makefile"
    ],
    "limitations": [
      "Does not install Bats or dependencies for you",
      "Does not run tests or validate your outputs",
      "Examples require adaptation to your project paths",
      "No coverage reporting setup is included"
    ],
    "use_cases": [
      {
        "target_user": "QA engineer",
        "title": "Standardize shell tests",
        "description": "Create consistent Bats tests and fixtures across scripts."
      },
      {
        "target_user": "DevOps engineer",
        "title": "Harden CI pipelines",
        "description": "Add reliable shell tests to CI with TAP output and parallel runs."
      },
      {
        "target_user": "SRE",
        "title": "Validate utilities",
        "description": "Test edge cases and error handling for operational scripts."
      }
    ],
    "prompt_templates": [
      {
        "title": "First Bats test",
        "scenario": "Start testing a small script",
        "prompt": "Write a Bats test file for a shell script that returns 0 on success and prints a single line output."
      },
      {
        "title": "Fixture based test",
        "scenario": "Compare file outputs",
        "prompt": "Create a Bats test using fixtures to compare expected output for my script that processes input.txt."
      },
      {
        "title": "Mock external tool",
        "scenario": "Isolate dependencies",
        "prompt": "Show how to stub curl in Bats and assert the script behavior with mocked output."
      },
      {
        "title": "CI integration",
        "scenario": "Run tests in pipeline",
        "prompt": "Provide a GitHub Actions workflow snippet that installs Bats and runs all tests with TAP output."
      }
    ],
    "output_examples": [
      {
        "input": "Create a Bats test plan for a script that parses JSON and handles errors.",
        "output": [
          "Outline setup to check for jq and skip if missing",
          "Add tests for valid JSON and invalid input",
          "Include assertions on exit codes and error messages"
        ]
      }
    ],
    "best_practices": [
      "Keep tests focused on one behavior per test",
      "Clean temporary files in teardown",
      "Mock external commands to isolate unit behavior"
    ],
    "anti_patterns": [
      "Relying on network calls inside unit tests",
      "Skipping error path tests",
      "Writing brittle tests that depend on system state"
    ],
    "faq": [
      {
        "question": "Is this compatible with bash and sh?",
        "answer": "Yes. The patterns include bash and POSIX sh examples and note dash support."
      },
      {
        "question": "What are the limits of this skill?",
        "answer": "It provides guidance and examples but does not execute tests or install tools."
      },
      {
        "question": "Can it integrate with CI tools?",
        "answer": "Yes. It includes GitHub Actions and Makefile examples for Bats runs."
      },
      {
        "question": "Does it access my data or secrets?",
        "answer": "No. The content is static documentation with no data access or exfiltration."
      },
      {
        "question": "What if my tests fail unexpectedly?",
        "answer": "Check fixtures, mocked commands, and environment setup for mismatches."
      },
      {
        "question": "How does it compare to generic testing tips?",
        "answer": "It is specific to Bats syntax, fixtures, and shell testing patterns."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
