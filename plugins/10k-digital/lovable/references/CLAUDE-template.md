# CLAUDE.md - Lovable Project Context

> This file is generated by `/init-lovable`. Edit to match your project.

## Project Overview

- **Name**: [PROJECT_NAME]
- **Production URL**: [PRODUCTION_URL]
- **Lovable Project URL**: [LOVABLE_PROJECT_URL]
- **GitHub**: [GITHUB_URL]
- **Backend**: [Lovable Cloud / Own Supabase]
- **Supabase Ref**: [SUPABASE_REF] (if own Supabase)

## Project Structure Map

> Quick navigation guide - run `/lovable:map --update` to refresh

### Directory Layout
```
src/
‚îú‚îÄ‚îÄ components/    # [COMPONENT_PATTERN] ([COMPONENT_COUNT] components)
‚îÇ   ‚îî‚îÄ‚îÄ ui/        # shadcn/ui primitives
‚îú‚îÄ‚îÄ pages/         # Route pages ([PAGE_COUNT] pages)
‚îú‚îÄ‚îÄ hooks/         # Custom React hooks ([HOOK_COUNT] hooks)
‚îú‚îÄ‚îÄ lib/           # Utilities and helpers
‚îú‚îÄ‚îÄ integrations/  # External integrations
‚îÇ   ‚îî‚îÄ‚îÄ supabase/  # Supabase client and generated types
[ADDITIONAL_DIRS]

supabase/
‚îú‚îÄ‚îÄ functions/     # Edge Functions ([FUNCTION_COUNT] functions)
‚îî‚îÄ‚îÄ migrations/    # Database migrations ([MIGRATION_COUNT] migrations)
```

### Key Files
| File | Purpose |
|------|---------|
| `src/App.tsx` | Main app entry, routing |
| `src/lib/utils.ts` | Shared utilities |
| `src/integrations/supabase/client.ts` | Supabase client |
[ADDITIONAL_KEY_FILES]

### Patterns
- **Components**: [COMPONENT_PATTERN_DESC]
- **State**: [STATE_MANAGEMENT]
- **Data Flow**: Pages ‚Üí Hooks ‚Üí Supabase Client ‚Üí Edge Functions

### Quick Lookup
| Looking for... | Check here |
|----------------|------------|
| UI components | `src/components/ui/` |
| Page routes | `src/pages/` or `src/App.tsx` |
| API calls | `src/hooks/` or `src/integrations/` |
| Types | `src/integrations/supabase/types.ts` |
| Edge functions | `supabase/functions/[name]/index.ts` |

*Map generated: [MAP_TIMESTAMP]*

---

## üö® IMPORTANT: Always Commit and Push to GitHub

**This is critical:** Lovable syncs changes FROM GitHub. If you don't commit and push your changes, they won't sync back to Lovable!

### ‚úÖ ALWAYS do this:
1. Make changes to your code
2. **Commit changes**: `git add . && git commit -m "description"`
3. **Push to main**: `git push origin main`
4. Wait 1-2 minutes for Lovable to sync
5. Verify changes in Lovable

**Without pushing to GitHub, your changes are stuck in Claude Code and won't reach Lovable or your team.**

### üîÑ GitHub ‚Üí Lovable Sync Flow

```
Your changes in Claude Code
    ‚Üì
git add . && git commit -m "Your message"
    ‚Üì
git push origin main  ‚Üê REQUIRED!
    ‚Üì
Lovable automatically syncs (1-2 minutes)
    ‚Üì
Changes live in Lovable
```

---

## Workflow Rules

### ‚úÖ Safe to edit and push to `main`:
- All files in `src/` (components, pages, hooks, utils)
- Config files (vite.config.ts, tailwind.config.js)
- Package.json dependencies
- Edge Function **code** in `supabase/functions/`
- Migration **files** in `supabase/migrations/`

### ‚ö†Ô∏è After editing, provide Lovable prompt:
- **Edge Functions**: `"Deploy the [name] edge function"`
- **Migrations**: `"Apply pending Supabase migrations"`

### ‚ùå Must go through Lovable:
- Create/modify database tables
- Set up RLS policies
- Add secrets (Cloud ‚Üí Secrets UI)
- Create storage buckets
- Deploy Edge Functions

## Secrets

| Name | Purpose | Status | Used In |
|------|---------|--------|---------|
| OPENAI_API_KEY | AI features | ‚ö†Ô∏è Not configured | chat-completion |
| STRIPE_SECRET_KEY | Payments | ‚ö†Ô∏è Not configured | process-payment |
| RESEND_API_KEY | Emails | ‚úÖ In Lovable Cloud | send-email, send-welcome |

**Legend:**
- ‚úÖ In Lovable Cloud - Secret already configured
- ‚ö†Ô∏è Not configured - Needs setup in Cloud ‚Üí Secrets

**To add secrets:**
1. Go to Cloud ‚Üí Secrets in Lovable
2. Click "Add secret"
3. Enter name and value
4. Run: `"Redeploy edge functions to pick up new secrets"`

## Edge Functions

| Function | Purpose | Required Secrets | Status |
|----------|---------|------------------|--------|
| send-email | Send transactional emails | RESEND_API_KEY | ‚úÖ Secret configured |
| process-payment | Handle Stripe webhooks | STRIPE_SECRET_KEY | ‚ö†Ô∏è Secret not configured |

**Warning:** Functions marked with ‚ö†Ô∏è will fail until secrets are added in Cloud ‚Üí Secrets.

## Database Tables

| Table | Purpose |
|-------|---------|
| profiles | User profiles |
| projects | User projects |

## Project Conventions

- Use shadcn/ui components
- Follow existing naming patterns
- Don't modify auth logic without discussion

## Yolo Mode Configuration (Beta)

> ‚ö†Ô∏è Beta feature - uses browser automation to auto-submit Lovable prompts and run tests

- **Status**: [on / off]
- **Auto-Deploy**: [on / off]  # Auto-deploy to Lovable after git push (no manual command needed)
- **Deployment Testing**: [on / off]  # Run verification tests after Lovable deployments
- **Auto-run Tests**: [on / off]  # Run project tests after every git push
- **Debug Mode**: [on / off]  # Verbose logging of automation steps
- **Last Updated**: [timestamp]
- **Operations Covered**:
  - Automatic deployment detection after git push
  - Edge function deployment with verification
  - Migration application with verification
  - Automated code testing after every git push

**Configure:** Run `/lovable:yolo on/off [--auto-deploy|--no-auto-deploy] [--testing|--no-testing] [--auto-tests|--no-auto-tests] [--debug]`

**How it works:**
- When yolo mode is on, I'll automatically navigate to Lovable and submit prompts
- **Auto-Deploy** (NEW): Automatically deploys backend changes after git push - no need to run `/deploy-edge`
- Deployment testing verifies deployments (3 levels: basic, console errors, functional)
- Auto-run tests execute your project's test suite after every successful git push to main
- Debug mode shows detailed browser automation logs
- Always has manual fallback if automation fails
- Test failures don't block deployments (manual review available)

**Auto-Deploy Flow:**
```
git push origin main ‚Üí Claude detects backend changes ‚Üí Automatic deployment starts
```

## Quick Prompts Reference

| Task | Lovable Prompt |
|------|----------------|
| Deploy all functions | `"Deploy all edge functions"` |
| Deploy specific | `"Deploy the [name] edge function"` |
| Apply migrations | `"Apply pending Supabase migrations"` |
| Check logs | `"Show logs for [name] edge function"` |
| Fix function | `"The [name] edge function returns [error]. Fix it"` |
| Create table | `"Create a [name] table with columns: [list]"` |
| Add RLS | `"Enable RLS on [table] allowing [who] to [what]"` |
| Add secret | ‚ö†Ô∏è Manual: Cloud ‚Üí Secrets |

## Branch Rules

- **Only `main` syncs** with Lovable
- Feature branches don't deploy until merged
- Lovable syncs within 1-2 minutes of push

---
*Template from lovable-integration plugin. Run `/init-lovable` to customize.*
