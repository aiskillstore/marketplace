{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-06T01:24:48.070Z",
    "slug": "labring-workflow-stop-design",
    "source_url": "https://github.com/labring/FastGPT/tree/main/.claude/skills/core/app/workflow/stop",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "9a79330c875e63a85e739ab7e1be3072faa8452d5d0acb90c454b4fe06f783b3",
    "tree_hash": "e0cec4378f1f8a3d77a13454c52b49cea0516b2322dfe54bc9b5687b14832e88"
  },
  "skill": {
    "name": "workflow-stop-design",
    "description": "å·¥ä½œæµæš‚åœé€»è¾‘è®¾è®¡æ–¹æ¡ˆ",
    "summary": "å·¥ä½œæµæš‚åœé€»è¾‘è®¾è®¡æ–¹æ¡ˆ",
    "icon": "ğŸ›‘",
    "version": "1.0.0",
    "author": "labring",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "workflow",
      "redis",
      "api-design",
      "fastgpt"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "è¿™æ˜¯ä¸€ä¸ªçº¯æ–‡æ¡£æ–‡ä»¶ï¼ˆSKILL.mdï¼‰ï¼Œä»…åŒ…å«å·¥ä½œæµåœæ­¢æœºåˆ¶çš„è®¾è®¡è¯´æ˜å’Œ TypeScript ä»£ç ç¤ºä¾‹ã€‚æ²¡æœ‰å¯æ‰§è¡Œä»£ç ã€ç½‘ç»œè°ƒç”¨ã€æ–‡ä»¶ç³»ç»Ÿè®¿é—®æˆ–å¤–éƒ¨å‘½ä»¤æ‰§è¡Œã€‚æ‰€æœ‰ä»£ç ç‰‡æ®µå‡ä¸ºè¯´æ˜æ€§å†…å®¹ï¼Œç”¨äºè§£é‡Š Redis çŠ¶æ€ç®¡ç†å’Œ API è®¾è®¡æ¨¡å¼ã€‚",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 673,
    "audit_model": "claude",
    "audited_at": "2026-01-06T01:24:48.070Z"
  },
  "content": {
    "user_title": "è®¾è®¡ FastGPT å·¥ä½œæµåœæ­¢æœºåˆ¶",
    "value_statement": "FastGPT çš„ AI Agent å·¥ä½œæµéœ€è¦ä¸€ä¸ªä¼˜é›…çš„åœæ­¢æœºåˆ¶æ¥å“åº”ç”¨æˆ·çš„ä¸­æ–­è¯·æ±‚ã€‚æœ¬è®¾è®¡æ–¹æ¡ˆæä¾›äº†åŸºäº Redis çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œæ”¯æŒåœ¨ 100ms å†…æ£€æµ‹åœæ­¢æ ‡å¿—ï¼Œå®ç°å¹³æ»‘ç»ˆæ­¢å·¥ä½œæµæ‰§è¡Œã€‚",
    "seo_keywords": [
      "FastGPT workflow stop",
      "Claude Code workflow design",
      "Redis state management",
      "AI agent interruption",
      "workflow termination",
      "API design document",
      "FastGPT documentation",
      "Claude workflow control"
    ],
    "actual_capabilities": [
      "ä½¿ç”¨ Redis SETEX å®ç°å·¥ä½œæµåœæ­¢æ ‡å¿—çš„è®¾ç½®å’Œè‡ªåŠ¨è¿‡æœŸ",
      "é€šè¿‡ 100ms å®šæ—¶å™¨è½®è¯¢æ£€æµ‹åœæ­¢çŠ¶æ€",
      "è®¾è®¡ /api/v2/chat/stop API æ¥å£æ”¯æŒä¼˜é›…åœæ­¢",
      "å¤„ç†å¹¶å‘åœæ­¢è¯·æ±‚å’Œé”™è¯¯é™çº§ç­–ç•¥",
      "å·¥ä½œæµå®Œæˆåè‡ªåŠ¨æ¸…ç† Redis çŠ¶æ€è®°å½•",
      "æ”¯æŒ LLM æµå¼è¾“å‡ºçš„ç«‹å³ä¸­æ–­"
    ],
    "limitations": [
      "HTTP è¯·æ±‚èŠ‚ç‚¹å¯èƒ½éœ€è¦ç­‰å¾…è¯·æ±‚å®Œæˆåæ‰èƒ½åœæ­¢",
      "è®¾è®¡æ–‡æ¡£ä¸åŒ…å«å¯éƒ¨ç½²çš„ä»£ç å®ç°",
      "ä»…é€‚ç”¨äº FastGPT v2 ç‰ˆæœ¬å·¥ä½œæµ"
    ],
    "use_cases": [
      {
        "target_user": "FastGPT å¼€å‘è€…",
        "title": "å®ç°å·¥ä½œæµä¸­æ–­åŠŸèƒ½",
        "description": "ä¸º AI Agent æ·»åŠ ç”¨æˆ·å¯ä¸­æ–­çš„èƒ½åŠ›ï¼Œæå‡äº¤äº’ä½“éªŒå’Œèµ„æºæ§åˆ¶"
      },
      {
        "target_user": "åç«¯æ¶æ„å¸ˆ",
        "title": "è®¾è®¡çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ",
        "description": "ä½¿ç”¨ Redis å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å·¥ä½œæµçŠ¶æ€åŒæ­¥å’Œåœæ­¢ä¿¡å·ä¼ é€’"
      },
      {
        "target_user": "API è®¾è®¡å¸ˆ",
        "title": "è§„èŒƒåœæ­¢æ¥å£è®¾è®¡",
        "description": "å®šä¹‰ /api/v2/chat/stop æ¥å£çš„è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼å’Œé”™è¯¯å¤„ç†ç­–ç•¥"
      }
    ],
    "prompt_templates": [
      {
        "title": "ç†è§£åœæ­¢æœºåˆ¶",
        "scenario": "å­¦ä¹ å·¥ä½œæµåœæ­¢çš„åŸºæœ¬åŸç†",
        "prompt": "Explain how the Redis-based workflow stop mechanism works in FastGPT, including the key design patterns for state management"
      },
      {
        "title": "å®ç°åœæ­¢åŠŸèƒ½",
        "scenario": "åœ¨é¡¹ç›®ä¸­é›†æˆå·¥ä½œæµåœæ­¢",
        "prompt": "How do I implement the setAgentRuntimeStop and shouldWorkflowStop functions for a workflow stop feature?"
      },
      {
        "title": "è®¾è®¡ API æ¥å£",
        "scenario": "åˆ›å»ºå·¥ä½œæµåœæ­¢ API",
        "prompt": "Design a REST API endpoint /api/v2/chat/stop with authentication, timeout handling, and proper error responses"
      },
      {
        "title": "ä¼˜åŒ–åœæ­¢æµç¨‹",
        "scenario": "æå‡åœæ­¢æœºåˆ¶çš„æ€§èƒ½",
        "prompt": "How to optimize the 100ms polling interval and 5s timeout strategy for better workflow stop performance?"
      }
    ],
    "output_examples": [
      {
        "input": "Explain how the Redis-based workflow stop mechanism works",
        "output": [
          "Redis key structure: agent_runtime_stopping:{appId}:{chatId}",
          "Stop flag set with SETEX and 60s TTL for automatic cleanup",
          "Backend timer polls Redis every 100ms to check stop status",
          "When stopping is detected, current node execution stops gracefully",
          "Workflow completion triggers automatic deletion of Redis key"
        ]
      }
    ],
    "best_practices": [
      "ä½¿ç”¨ 60 ç§’ TTL é˜²æ­¢ Redis é”®æ³„æ¼ï¼Œå³ä½¿å¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½è‡ªåŠ¨æ¸…ç†",
      "è®¾ç½® 5 ç§’è¶…æ—¶æœºåˆ¶é¿å…å‰ç«¯é•¿æ—¶é—´ç­‰å¾…ï¼Œæå‡ç”¨æˆ·ä½“éªŒ",
      "å®ç°é”™è¯¯é™çº§ç­–ç•¥ï¼ŒRedis å¼‚å¸¸æ—¶ä¸é˜»å¡å·¥ä½œæµç»§ç»­æ‰§è¡Œ"
    ],
    "anti_patterns": [
      "ä¸ä½¿ç”¨ TTL å¯èƒ½å¯¼è‡´ Redis é”®æ— é™æœŸå †ç§¯",
      "æ²¡æœ‰è¶…æ—¶æœºåˆ¶çš„åœæ­¢è¯·æ±‚å¯èƒ½å¯¼è‡´å‰ç«¯æ— é™ç­‰å¾…",
      "å¿½ç•¥ Redis æ“ä½œé”™è¯¯çš„å¤„ç†å¯èƒ½é€ æˆå·¥ä½œæµå¼‚å¸¸"
    ],
    "faq": [
      {
        "question": "è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆé€‚ç”¨äºå“ªä¸ªç‰ˆæœ¬çš„ FastGPTï¼Ÿ",
        "answer": "æœ¬è®¾è®¡ä¸“ä¸º FastGPT v2 ç‰ˆæœ¬å·¥ä½œæµè®¾è®¡ï¼Œv1 ç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„åœæ­¢æ£€æµ‹æœºåˆ¶ã€‚"
      },
      {
        "question": "åœæ­¢æ“ä½œä¼šå½±å“æ­£åœ¨è¿è¡Œçš„ HTTP è¯·æ±‚èŠ‚ç‚¹å—ï¼Ÿ",
        "answer": "HTTP è¯·æ±‚èŠ‚ç‚¹ä¼šç­‰å¾…å½“å‰è¯·æ±‚å®Œæˆåæ‰åœæ­¢ï¼Œæ— æ³•ç«‹å³ä¸­æ–­é•¿æ—¶è¯·æ±‚ã€‚"
      },
      {
        "question": "Redis æ“ä½œå¤±è´¥æ—¶å¦‚ä½•å¤„ç†ï¼Ÿ",
        "answer": "æ‰€æœ‰ Redis æ“ä½œéƒ½åŒ…å«é”™è¯¯é™çº§ï¼Œå¤±è´¥æ—¶å·¥ä½œæµä¼šç»§ç»­æ‰§è¡Œè€Œéé˜»å¡ã€‚"
      },
      {
        "question": "æ˜¯å¦å¯ä»¥åœ¨å…¶ä»– AI å¹³å°ä½¿ç”¨è¿™ä¸ªè®¾è®¡ï¼Ÿ",
        "answer": "æ ¸å¿ƒæ€è·¯å¯ä»¥å¤ç”¨ï¼Œä½†éœ€è¦æ ¹æ®å…·ä½“å¹³å°çš„ API å’ŒçŠ¶æ€ç®¡ç†æ–¹å¼è°ƒæ•´ã€‚"
      },
      {
        "question": "å¦‚ä½•æµ‹è¯•åœæ­¢æœºåˆ¶çš„å¯é æ€§ï¼Ÿ",
        "answer": "é¡¹ç›®åŒ…å«å®Œæ•´çš„ Vitest æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–åŸºæœ¬åŠŸèƒ½ã€å¹¶å‘æ“ä½œå’Œè¶…æ—¶åœºæ™¯ã€‚"
      },
      {
        "question": "ä¸ä¼ ç»Ÿçš„ AbortController ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ",
        "answer": "åŸºäº Redis çš„è®¾è®¡æ”¯æŒåˆ†å¸ƒå¼ç¯å¢ƒï¼Œå¯ä»¥è·¨å¤šä¸ªæœåŠ¡å®ä¾‹åè°ƒåœæ­¢ä¿¡å·ã€‚"
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
