{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-06T07:41:23.793Z",
    "slug": "obra-writing-skills",
    "source_url": "https://github.com/obra/superpowers/tree/main/skills/writing-skills",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "f5442553d2e9cc79a428f7587eaf538a5c22eddd250bd2c1f03d78d60f0bc848",
    "tree_hash": "5f8313c9d85ecfde1473418e6d29d4fc118d8b2382aa823dabb66a09967c8bed"
  },
  "skill": {
    "name": "writing-skills",
    "description": "Use when creating new skills, editing existing skills, or verifying skills work before deployment",
    "summary": "Use when creating new skills, editing existing skills, or verifying skills work before deployment",
    "icon": "üìù",
    "version": "1.0.0",
    "author": "obra",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "skill-authoring",
      "test-driven-development",
      "documentation",
      "methodology",
      "best-practices"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation and methodology skill for creating AI skills using TDD. Contains one utility script (render-graphs.js) that renders GraphViz diagrams to SVG. All file access is limited to the skill's own directory or user-specified skill directories. No network access, no credential access, no data exfiltration. The only external command executed is the graphviz 'dot' command which is explicitly required and documented.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "render-graphs.js",
            "line_start": 1,
            "line_end": 169
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "render-graphs.js",
            "line_start": 16,
            "line_end": 18
          },
          {
            "file": "render-graphs.js",
            "line_start": 105,
            "line_end": 108
          },
          {
            "file": "render-graphs.js",
            "line_start": 120,
            "line_end": 120
          },
          {
            "file": "render-graphs.js",
            "line_start": 131,
            "line_end": 133
          },
          {
            "file": "render-graphs.js",
            "line_start": 141,
            "line_end": 141
          },
          {
            "file": "render-graphs.js",
            "line_start": 156,
            "line_end": 157
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "render-graphs.js",
            "line_start": 18,
            "line_end": 18
          },
          {
            "file": "render-graphs.js",
            "line_start": 72,
            "line_end": 76
          },
          {
            "file": "render-graphs.js",
            "line_start": 112,
            "line_end": 112
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "External command execution in render-graphs.js",
        "description": "The render-graphs.js script uses execSync to execute the 'dot' command from GraphViz. The command is constructed as a literal string 'dot -Tsvg' on line 72, not using any user input, making it safe. This is the expected functionality for a diagram rendering tool.",
        "locations": [
          {
            "file": "render-graphs.js",
            "line_start": 72,
            "line_end": 76
          }
        ]
      },
      {
        "title": "Filesystem access in render-graphs.js",
        "description": "The script reads and writes files using fs.readFileSync and fs.writeFileSync. Access is limited to the specified skill directory and its 'diagrams' subdirectory. The skill directory path is resolved using path.resolve on user-provided input, but only creates directories and writes files within the target skill directory, limiting scope.",
        "locations": [
          {
            "file": "render-graphs.js",
            "line_start": 101,
            "line_end": 108
          }
        ]
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 2421,
    "audit_model": "claude",
    "audited_at": "2026-01-06T07:41:23.792Z"
  },
  "content": {
    "user_title": "Create skills with test-driven development",
    "value_statement": "Skills often fail under pressure because they are not tested. This skill teaches you to write and test skills using TDD methodology, creating bulletproof documentation that resists rationalization and ensures consistent agent behavior.",
    "seo_keywords": [
      "skill authoring",
      "test-driven development",
      "Claude skills",
      "skill creation",
      "AI documentation",
      "Claude Code skills",
      "process documentation",
      "skill testing",
      "TDD for AI",
      "writing skills"
    ],
    "actual_capabilities": [
      "Apply TDD methodology to skill creation (RED-GREEN-REFACTOR cycle)",
      "Write pressure scenarios to test skill compliance under stress",
      "Identify and counter agent rationalizations with explicit rules",
      "Structure skills for optimal AI discoverability (CSO)",
      "Use persuasion principles to reinforce discipline-enforcing skills",
      "Render GraphViz flowcharts from SKILL.md to SVG format"
    ],
    "limitations": [
      "Requires graphviz installed for diagram rendering",
      "Cannot enforce skills - only provides guidance for agents to follow",
      "Does not automatically test skills - you must run subagent tests manually",
      "Effectiveness depends on quality of pressure scenarios you create"
    ],
    "use_cases": [
      {
        "target_user": "Skill Authors",
        "title": "Create reusable skills",
        "description": "Write skills that other agents can discover and follow consistently across sessions"
      },
      {
        "target_user": "Documentation Leads",
        "title": "Document processes",
        "description": "Convert institutional knowledge into AI-parseable documentation that survives context limits"
      },
      {
        "target_user": "AI Engineers",
        "title": "Improve agent reliability",
        "description": "Create skills that enforce best practices even when agents face pressure to cut corners"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create basic skill",
        "scenario": "Writing a new skill",
        "prompt": "Create a skill called 'using-skills' that teaches agents to check ~/.claude/skills/ before working on tasks. Use TDD methodology."
      },
      {
        "title": "Test existing skill",
        "scenario": "Validating skill effectiveness",
        "prompt": "Run pressure tests on my skill about TDD to see if agents follow it when tired and under time pressure."
      },
      {
        "title": "Counter rationalization",
        "scenario": "Improving skill robustness",
        "prompt": "Agents keep finding loopholes in my skill. Help me write explicit counters for rationalizations like 'I'm following the spirit not the letter'."
      },
      {
        "title": "Design persuasion",
        "scenario": "Reinforcing discipline skills",
        "prompt": "Apply persuasion principles (authority, commitment, social proof) to make a skill about writing tests first more resistant to pressure."
      }
    ],
    "output_examples": [
      {
        "input": "I need to create a skill that ensures agents always write tests before code",
        "output": [
          "Start by running baseline scenarios WITHOUT the skill",
          "Document exact rationalizations agents use to skip tests",
          "Write skill with explicit counters for each rationalization",
          "Re-test under combined pressures (time, sunk cost, exhaustion)",
          "Iterate until no new loopholes emerge"
        ]
      }
    ],
    "best_practices": [
      "Always run baseline tests BEFORE writing the skill - you must see how agents fail naturally",
      "Combine 3+ pressures in test scenarios (time, sunk cost, authority, exhaustion)",
      "Use authority language (YOU MUST, Never, Always) for discipline-enforcing skills",
      "Add explicit negations for every rationalization agents actually use"
    ],
    "anti_patterns": [
      "Writing skills without testing them first (skipping RED phase)",
      "Using soft language like 'consider' or 'should' for critical rules",
      "Testing with single pressure instead of combined pressures",
      "Not capturing exact rationalizations verbatim from agent failures"
    ],
    "faq": [
      {
        "question": "Which AI tools support this skill?",
        "answer": "Works with Claude, Codex, and Claude Code. Test with all models you plan to use since effectiveness varies."
      },
      {
        "question": "How long should a skill be?",
        "answer": "Keep SKILL.md under 500 lines. Move heavy reference material to separate files linked from main document."
      },
      {
        "question": "How do I integrate with existing workflows?",
        "answer": "Reference other skills explicitly. Use format: 'REQUIRED SUB-SKILL: skill-name' rather than @ file links."
      },
      {
        "question": "Is my data safe when using this skill?",
        "answer": "Yes. This is a documentation-only skill. The render-graphs.js script only accesses local skill files you specify."
      },
      {
        "question": "Why do agents ignore my skills?",
        "answer": "Skills likely lack pressure testing. Run scenarios with time pressure, sunk cost, and authority to find loopholes."
      },
      {
        "question": "How is this different from regular documentation?",
        "answer": "TDD for skills ensures bulletproof documentation. You test under pressure before writing, close every loophole found, and verify compliance."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "CLAUDE_MD_TESTING.md",
          "type": "file",
          "path": "examples/CLAUDE_MD_TESTING.md"
        }
      ]
    },
    {
      "name": "anthropic-best-practices.md",
      "type": "file",
      "path": "anthropic-best-practices.md"
    },
    {
      "name": "graphviz-conventions.dot",
      "type": "file",
      "path": "graphviz-conventions.dot"
    },
    {
      "name": "persuasion-principles.md",
      "type": "file",
      "path": "persuasion-principles.md"
    },
    {
      "name": "render-graphs.js",
      "type": "file",
      "path": "render-graphs.js"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    },
    {
      "name": "testing-skills-with-subagents.md",
      "type": "file",
      "path": "testing-skills-with-subagents.md"
    }
  ]
}
