{
  "skill": {
    "name": "pysam",
    "description": "Genomic file toolkit. Read/write SAM/BAM/CRAM alignments, VCF/BCF variants, FASTA/FASTQ sequences, extract regions, calculate coverage, for NGS data processing pipelines.",
    "summary": "Read, write, and analyze genomic sequencing files (SAM/BAM/VCF/FASTQ) with Python interface to htslib",
    "icon": "ðŸ§¬",
    "version": "1.0",
    "author": "K-Dense Inc.",
    "license": "MIT license",
    "category": "data",
    "tags": ["genomics", "bioinformatics", "dna-sequencing", "htslib", "next-generation-sequencing"],
    "supported_tools": ["claude", "codex", "claude-code"]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All static findings are FALSE POSITIVES caused by bioinformatics terminology being misinterpreted as security-relevant patterns. The skill contains only documentation and code examples for legitimate genomic data processing. No actual malicious code, command injection, credential access, or network exfiltration patterns exist.",
    "static_findings_evaluation": [
      {
        "finding": "[CRITICAL] sensitive: Windows SAM database",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner detects 'SAM' and incorrectly flags as Windows Security Accounts Manager database. In this bioinformatics context, SAM stands for 'Sequence Alignment/Map' - a standard file format for DNA sequence alignment data. Evidence: SKILL.md describes 'SAM/BAM/CRAM alignment files' as genomic data formats. No Windows system files or credential databases are accessed."
      },
      {
        "finding": "[CRITICAL] obfuscation: DANGEROUS COMBINATION - Code execution + Network + Credential access",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Heuristic flags combination of fetch() calls and samtools commands as suspicious. However, fetch() is a genomics method for retrieving reads from local BAM files (file I/O), and samtools/bcftools are legitimate bioinformatics command-line tools for genomic file processing. No credential access or exfiltration patterns exist."
      },
      {
        "finding": "[HIGH] blocker: Weak cryptographic algorithm",
        "verdict": "false_positive",
        "confidence": "medium",
        "reasoning": "Scanner flags weak crypto patterns across multiple files. Likely detecting mentions of hash functions or encoding patterns used in bioinformatics data processing (e.g., MD5 checksums for file integrity verification). No cryptographic operations for security purposes are implemented - these are standard bioinformatics data handling patterns."
      },
      {
        "finding": "[HIGH] blocker: Network scanning tools",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner flags 'samtools' and 'bcftools' as network scanning tools. These are legitimate bioinformatics command-line tools (samtools, bcftools) for processing genomic files, not network scanning tools. Evidence: SKILL.md:215-228 shows these tools used for BAM sorting, indexing, and VCF conversion - standard genomic operations."
      },
      {
        "finding": "[MEDIUM] external_commands: Ruby/shell backtick execution",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner detects backticks in documentation and flags as command execution. These are code formatting backticks in markdown documentation showing Python and shell command examples. All references are in documentation files (references/*.md) showing legitimate examples like 'pysam.samtools.sort()' and 'pysam.bcftools.view()'. No dynamic command execution with user input exists."
      },
      {
        "finding": "[LOW] network: Fetch API call",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner flags fetch() calls as network requests. In pysam context, fetch() is a method for retrieving genomic reads from indexed BAM files by genomic region coordinates. Evidence: alignment_files.md:56-72 shows 'samfile.fetch()' operates on local files with genomic coordinates like 'chr1:1000-2000'. This is local file I/O, not network access."
      },
      {
        "finding": "[LOW] blocker: System reconnaissance",
        "verdict": "false_positive",
        "confidence": "medium",
        "reasoning": "Scanner flags file property access and header reading as reconnaissance. These are legitimate operations for reading genomic file metadata (chromosome names, lengths, alignment counts). Evidence: common_workflows.md:10-55 shows 'calculate_bam_stats()' function that counts reads and bases - standard bioinformatics quality control."
      },
      {
        "finding": "[MEDIUM] filesystem: Hidden file access / Python file write/append",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner flags index file access (.bai, .fai, .tbi) and file writing as suspicious. Index files are standard in genomics for random access to large BAM/VCF files. File writing is for creating output genomic files. Evidence: sequence_files.md:20-30 shows '.fai' index creation, alignment_files.md:256-264 shows '.bai' index creation - standard bioinformatics operations."
      },
      {
        "finding": "[LOW] network: Hardcoded URL",
        "verdict": "false_positive",
        "confidence": "high",
        "reasoning": "Scanner detects URL at SKILL.md:262 pointing to pysam.readthedocs.io. This is a legitimate documentation reference to the official PySAM library documentation. No external data retrieval or API calls to this URL occur in the skill code."
      }
    ],
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 5,
    "total_lines": 1841
  },
  "content": {
    "user_title": "Work with genomic sequencing files",
    "value_statement": "Process and analyze DNA sequencing data with tools for reading BAM, VCF, and FASTQ files. Extract genomic regions, calculate coverage statistics, and integrate multiple file types for comprehensive variant analysis.",
    "seo_keywords": ["pysam", "genomic sequencing", "BAM files", "VCF variant files", "FASTA FASTQ", "bioinformatics", "DNA analysis", "NGS data", "samtools", "Claude Code"],
    "actual_capabilities": [
      "Read and write SAM/BAM/CRAM alignment files with region-based queries",
      "Process VCF/BCF variant files and extract genotype information",
      "Extract reference sequences from FASTA files using genomic coordinates",
      "Read FASTQ files for raw sequencing read processing",
      "Calculate coverage statistics and perform pileup analysis",
      "Execute samtools and bcftools commands through Python interface"
    ],
    "limitations": [
      "Does not perform variant calling algorithms - requires external tools",
      "Coordinate system differences between VCF (1-based) and pysam (0-based) require careful handling",
      "Random access requires index files (.bai, .fai, .tbi) for BAM, FASTA, and compressed VCF",
      "FASTQ files support only sequential reading, not random access by region"
    ],
    "use_cases": [
      {
        "target_user": "Bioinformatics researchers",
        "title": "Variant analysis workflow",
        "description": "Extract and filter genetic variants from VCF files, annotate with read coverage from BAM files"
      },
      {
        "target_user": "Genomic data scientists",
        "title": "Coverage analysis",
        "description": "Calculate per-base coverage, identify low-coverage regions, generate coverage tracks for visualization"
      },
      {
        "target_user": "Clinical geneticists",
        "title": "Quality control pipeline",
        "description": "Validate sequencing data, check reference consistency, filter reads by quality thresholds"
      }
    ],
    "prompt_templates": [
      {
        "title": "Read alignment data",
        "scenario": "Fetch reads from a BAM file",
        "prompt": "Use pysam to open example.bam and print all reads overlapping chr1 positions 1000-2000"
      },
      {
        "title": "Process variants",
        "scenario": "Extract variants from VCF",
        "prompt": "Open variants.vcf and print all variants on chr2 with quality score above 30"
      },
      {
        "title": "Calculate coverage",
        "scenario": "Get coverage statistics",
        "prompt": "Calculate per-base coverage for chromosome 1 positions 100000-200000 using pileup analysis"
      },
      {
        "title": "Extract sequences",
        "scenario": "Get reference sequence regions",
        "prompt": "Open reference.fasta and extract the sequence for gene ABC on chr5 from position 10000 to 11000"
      }
    ],
    "output_examples": [
      {
        "input": "Open a BAM file and show coverage statistics for chromosome 1",
        "output": [
          "Chromosome 1 statistics:",
          "Total reads: 1,245,678",
          "Mapped reads: 1,198,432 (96.2%)",
          "Mean coverage: 32.4x",
          "Regions below 10x coverage: 5,234 positions"
        ]
      }
    ],
    "best_practices": [
      "Always use indexed BAM files for random access operations to improve performance",
      "Remember pysam uses 0-based coordinates while VCF files use 1-based coordinates",
      "Use pileup() for column-wise coverage analysis instead of repeated fetch() calls"
    ],
    "anti_patterns": [
      "Loading entire BAM files into memory instead of using iterator-based processing",
      "Ignoring coordinate system differences between pysam and VCF file formats",
      "Processing large files without creating index files for random access"
    ],
    "faq": [
      {
        "question": "What is the difference between SAM and BAM files?",
        "answer": "SAM is a human-readable text format for alignment data. BAM is the compressed binary version that enables efficient random access and smaller file sizes."
      },
      {
        "question": "Do I need to install samtools separately?",
        "answer": "No, pysam includes bindings to samtools and bcftools commands. The underlying htslib library is included with pysam."
      },
      {
        "question": "How do I create an index for my BAM file?",
        "answer": "Use pysam.index('your_file.bam') to create the .bai index file. This enables fast region-based queries."
      },
      {
        "question": "Can pysam filter reads by mapping quality?",
        "answer": "Yes, use the quality parameter in fetch() or filter reads manually using the mapping_quality attribute of AlignedSegment objects."
      },
      {
        "question": "What coordinate system does pysam use?",
        "answer": "Pysam uses 0-based, half-open coordinates for programmatic access. However, region strings in fetch() use 1-based coordinates to match samtools convention."
      },
      {
        "question": "How do I extract variants overlapping a specific gene?",
        "answer": "Use pysam.TabixFile to open a BED file with gene coordinates, then use vcf.fetch() with those coordinates to get overlapping variants."
      }
    ]
  }
}
