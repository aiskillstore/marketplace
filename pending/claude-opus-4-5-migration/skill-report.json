{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T10:26:15.965Z",
    "slug": "claude-opus-4-5-migration",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "claude-opus-4-5-migration",
    "description": "Migrate prompts and code from Claude Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Use when the user wants to update their codebase, prompts, or API calls to use Opus 4.5. Handles model string updates and prompt adjustments for known Opus 4.5 behavioral differences. Does NOT migrate Haiku 4.5.",
    "summary": "Migrate prompts and code from Claude Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Use when the u...",
    "icon": "ðŸ”„",
    "version": "1.0.0",
    "author": "Anthropic",
    "license": "MIT",
    "category": "development",
    "tags": [
      "migration",
      "claude",
      "opus",
      "api",
      "model-upgrade",
      "automation",
      "prompts"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official Anthropic skill containing only documentation and reference materials. No executable code, API calls, or security concerns detected. All content is educational guidance for model migration.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 3,
    "total_lines": 284,
    "audit_model": "claude",
    "audited_at": "2025-12-30T10:26:15.965Z"
  },
  "content": {
    "user_title": "Opus 4.5 Migration Assistant",
    "value_statement": "Automatically upgrades your codebase from Claude Sonnet 4.0/4.5 or Opus 4.1 to Opus 4.5 by updating model strings, adding effort parameters, and optionally adjusting prompts for known behavioral differences.",
    "seo_keywords": [
      "claude opus 4.5",
      "model migration",
      "claude api upgrade",
      "anthropic migration",
      "opus 4.5 prompts",
      "claude sonnet to opus",
      "effort parameter",
      "thinking budget"
    ],
    "actual_capabilities": [
      "Searches codebase for Claude model strings across all major platforms (Anthropic API, AWS Bedrock, Google Vertex AI, Azure AI Foundry)",
      "Updates model identifiers from Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5",
      "Adds effort parameter configuration set to 'high' for optimal performance",
      "Removes unsupported beta headers (context-1m-2025-08-07)",
      "Provides targeted prompt adjustments for tool overtriggering issues",
      "Includes fixes for over-engineering prevention",
      "Offers code exploration behavior improvements",
      "Contains frontend design quality enhancements",
      "Handles 'thinking' keyword sensitivity issues when extended thinking is disabled"
    ],
    "limitations": [
      "Does not migrate Haiku 4.5 models",
      "Prompt adjustments only applied when user explicitly requests or reports specific issues",
      "Cannot automatically detect which prompt fixes are needed without user feedback",
      "Does not migrate beta features not yet supported in Opus 4.5 (e.g., 1M context)",
      "Requires manual review of changes before deployment"
    ],
    "use_cases": [
      {
        "title": "API Codebase Upgrade",
        "description": "Update an existing application using Claude Sonnet 4.5 API calls to use the newer Opus 4.5 model with optimal configuration",
        "target_user": "Backend developers maintaining Claude-powered applications"
      },
      {
        "title": "Multi-Platform Migration",
        "description": "Migrate Claude model strings across AWS Bedrock, Google Vertex AI, and Azure deployments to Opus 4.5 in a single operation",
        "target_user": "DevOps engineers managing multi-cloud AI deployments"
      },
      {
        "title": "Prompt Optimization",
        "description": "Fix tool overtriggering or over-engineering issues after upgrading to Opus 4.5 by applying targeted prompt adjustments",
        "target_user": "Prompt engineers experiencing behavioral differences with Opus 4.5"
      },
      {
        "title": "Frontend AI Tool Migration",
        "description": "Update a frontend application using Claude for UI generation to Opus 4.5 with enhanced design quality prompts",
        "target_user": "Frontend developers using Claude for design generation"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Migration",
        "prompt": "Migrate my codebase from Claude Sonnet 4.5 to Opus 4.5",
        "scenario": "Standard model upgrade without behavioral issues"
      },
      {
        "title": "Migration with Tool Overtriggering Fix",
        "prompt": "Migrate to Opus 4.5 and fix the issue where my tools are being called too frequently",
        "scenario": "User experiencing excessive tool calls after upgrade"
      },
      {
        "title": "Migration with Over-Engineering Prevention",
        "prompt": "Upgrade to Opus 4.5 and prevent the model from creating unnecessary files and abstractions",
        "scenario": "User wants cleaner, more focused outputs"
      },
      {
        "title": "Multi-Platform Migration",
        "prompt": "Migrate all my AWS Bedrock and Vertex AI Claude calls to Opus 4.5",
        "scenario": "Multi-cloud deployment upgrade"
      },
      {
        "title": "Frontend-Focused Migration",
        "prompt": "Migrate to Opus 4.5 and improve frontend design quality to avoid generic AI aesthetics",
        "scenario": "Frontend application experiencing 'AI slop' design outputs"
      }
    ],
    "output_examples": [
      {
        "input": "Migrate my Python codebase from Sonnet 4.5 to Opus 4.5",
        "output": "Found and updated 3 model strings from 'claude-sonnet-4-5-20250929' to 'claude-opus-4-5-20251101'. Added effort parameter set to 'high' in all API calls. Removed unsupported context-1m beta header from 2 locations. Summary: Updated src/api/client.py (lines 45, 67), src/utils/llm.py (line 23). If you encounter any issues with Opus 4.5, let me know and I can help adjust your prompts."
      },
      {
        "input": "Upgrade to Opus 4.5 and fix tool overtriggering issues",
        "output": "Migration complete: Updated 5 model strings to Opus 4.5, added effort='high' configuration. Applied tool overtriggering fixes: softened 8 instances of 'MUST', 'CRITICAL', and 'ALWAYS' in system prompts across src/prompts/system.py and config/agent_prompt.txt. Changes should reduce unnecessary tool calls while maintaining functionality."
      }
    ],
    "best_practices": [
      "Run migration on a separate branch and test thoroughly before merging to production",
      "Only apply prompt adjustments when you observe specific behavioral issues, not preemptively",
      "Start with model string updates only, then add prompt fixes incrementally as needed",
      "Use effort='high' for best performance unless you have specific cost/latency constraints",
      "Review all softened language in prompts to ensure tool triggering still works as intended",
      "Keep the 1M context beta header removal comment so team members know it's unavailable",
      "Test each platform migration separately (Bedrock, Vertex AI, etc.) to catch platform-specific issues",
      "Integrate prompt snippets thoughtfully using XML tags that match existing prompt structure"
    ],
    "anti_patterns": [
      "Applying all prompt adjustments at once without identifying which issues actually exist",
      "Removing all emphasis from prompts (only soften tool-triggering instructions)",
      "Migrating Haiku models to Opus (different use cases and cost profiles)",
      "Appending prompt snippets without integrating them into existing structure",
      "Skipping the effort parameter configuration (default behavior may not be optimal)",
      "Ignoring platform-specific model string formats (will cause API errors)",
      "Assuming all 'think' references need replacement (only when extended thinking is disabled and issues occur)"
    ],
    "faq": [
      {
        "question": "Should I migrate all my models to Opus 4.5?",
        "answer": "No. Only migrate Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Do NOT migrate Haiku models, as they serve different use cases with different cost/performance trade-offs."
      },
      {
        "question": "Do I need to apply all the prompt adjustments?",
        "answer": "No. By default, only update model strings and add the effort parameter. Only apply prompt adjustments if you explicitly encounter the specific issues they address (tool overtriggering, over-engineering, etc.)."
      },
      {
        "question": "What is the effort parameter and why set it to 'high'?",
        "answer": "The effort parameter controls how eagerly Claude spends tokens for reasoning. 'high' provides best performance with deep reasoning and is the recommended default for Opus 4.5. It requires the beta flag 'effort-2025-11-24' in API calls."
      },
      {
        "question": "Will my 1M context beta header work with Opus 4.5?",
        "answer": "No. The context-1m-2025-08-07 beta header is not yet supported with Opus 4.5. The migration removes it and adds a comment noting this limitation."
      },
      {
        "question": "How do I know which platform my codebase uses?",
        "answer": "The skill searches for model strings and identifies the platform automatically based on the format (standard Anthropic API, AWS Bedrock ARN format, Vertex AI @ notation, or Azure format)."
      },
      {
        "question": "What should I do if I have tool overtriggering issues?",
        "answer": "Ask the skill to apply the tool overtriggering fix. It will soften aggressive language like 'MUST', 'CRITICAL', and 'ALWAYS' in tool-triggering instructions while preserving other emphasis."
      },
      {
        "question": "Can I use different effort levels?",
        "answer": "Yes. While 'high' is recommended for best performance, you can use 'medium' for balanced cost/latency or 'low' for simple, high-volume queries. See references/effort.md for details."
      }
    ],
    "technical_requirements": {
      "dependencies": [],
      "permissions": [
        "Read access to codebase files containing Claude API calls",
        "Write access to modify model strings and configuration"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "effort.md",
          "type": "file",
          "path": "references/effort.md"
        },
        {
          "name": "prompt-snippets.md",
          "type": "file",
          "path": "references/prompt-snippets.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}