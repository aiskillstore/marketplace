{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T11:37:14.895Z",
    "slug": "brendanshields-creating-hooks",
    "source_url": "https://github.com/BrendanShields/spec-flow/tree/main/plugins/spec/skills/creating-hooks",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "661443979952a481b32b9fd6cdff6da6da47fc71d63db07a0929d2c9a8a68aec",
    "tree_hash": "3570bb925bd30d7128d133bbaa08ec17fd7dd3f4a00cd4197d91673b8f320789"
  },
  "skill": {
    "name": "creating-hooks",
    "description": "Creates Claude Code hooks for automation and workflow customization.\nGuides through hook events, configuration, and script creation.\nUse when user wants to create a hook, automate Claude Code, or asks about hook events.\n",
    "summary": "Creates Claude Code hooks for automation and workflow customization.\nGuides through hook events, con...",
    "icon": "ü™ù",
    "version": "1.0.0",
    "author": "BrendanShields",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "hooks",
      "automation",
      "workflow",
      "claude-code",
      "customization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is a documentation and template skill that guides users in creating Claude Code hooks. It provides shell script templates and documentation for legitimate automation purposes. All templates require explicit user configuration and operate only within the Claude project directory. No network access or credential handling detected.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "templates/basic.sh",
            "line_start": 1,
            "line_end": 42
          },
          {
            "file": "templates/file-protector.sh",
            "line_start": 1,
            "line_end": 69
          },
          {
            "file": "templates/context-injector.sh",
            "line_start": 1,
            "line_end": 60
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "templates/file-protector.sh",
            "line_start": 22,
            "line_end": 55
          },
          {
            "file": "templates/context-injector.sh",
            "line_start": 26,
            "line_end": 52
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "templates/basic.sh",
            "line_start": 24,
            "line_end": 25
          },
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 151
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "templates/file-protector.sh",
            "line_start": 21,
            "line_end": 21
          },
          {
            "file": "templates/context-injector.sh",
            "line_start": 36,
            "line_end": 48
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [
      {
        "title": "Shell script templates provided",
        "description": "The skill includes shell script templates that users can customize and execute. Shell scripts with 'set -euo pipefail' and JSON parsing via jq are standard practices. Templates require manual configuration in settings.json before activation. Users must explicitly configure and enable these hooks.",
        "locations": [
          {
            "file": "templates/basic.sh",
            "line_start": 18,
            "line_end": 41
          },
          {
            "file": "templates/file-protector.sh",
            "line_start": 18,
            "line_end": 68
          },
          {
            "file": "templates/context-injector.sh",
            "line_start": 17,
            "line_end": 59
          }
        ]
      },
      {
        "title": "Filesystem access in templates",
        "description": "The context-injector.sh template reads project files to inject context at session start. It checks for package.json, Cargo.toml, go.mod, and git branch. This is appropriate for project context injection and limited to the Claude project directory.",
        "locations": [
          {
            "file": "templates/context-injector.sh",
            "line_start": 26,
            "line_end": 52
          }
        ]
      },
      {
        "title": "Environment variable usage",
        "description": "Templates use standard Claude Code environment variables including CLAUDE_PROJECT_DIR and extract data from JSON input. These are documented, expected variables for hook development.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 143,
            "line_end": 151
          }
        ]
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 5,
    "total_lines": 682,
    "audit_model": "claude",
    "audited_at": "2026-01-10T11:37:14.895Z"
  },
  "content": {
    "user_title": "Create Claude Code hooks for automation",
    "value_statement": "Claude Code hooks enable workflow automation and customization. This skill guides you through creating hooks for tool validation, context injection, and automated workflows.",
    "seo_keywords": [
      "Claude Code hooks",
      "claude-code hooks automation",
      "create hooks",
      "workflow automation",
      "Claude automation",
      "tool validation hooks",
      "context injection",
      "Claude Code customization"
    ],
    "actual_capabilities": [
      "Guides hook creation workflow with step-by-step instructions",
      "Provides templates for PreToolUse, PostToolUse, SessionStart, and other events",
      "Documents hook configuration in settings.json",
      "Shows matcher patterns for filtering tool triggers",
      "Includes file protection hook to block sensitive file edits",
      "Provides context injection hook for session startup"
    ],
    "limitations": [
      "Requires manual configuration in settings.json to activate hooks",
      "Hooks must be written as shell scripts (bash)",
      "Does not provide pre-built hooks for specific frameworks or tools"
    ],
    "use_cases": [
      {
        "target_user": "Security-conscious developers",
        "title": "Protect sensitive files",
        "description": "Block edits to .env, credentials, and other sensitive files automatically"
      },
      {
        "target_user": "Project maintainers",
        "title": "Inject project context",
        "description": "Provide Claude with project type and current feature at session start"
      },
      {
        "target_user": "Workflow automators",
        "title": "Validate tool usage",
        "description": "Log or validate tool calls before and after execution"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a basic hook",
        "scenario": "User wants to start using hooks",
        "prompt": "Help me create a Claude Code hook that logs all tool usage to a file"
      },
      {
        "title": "Block file edits",
        "scenario": "Protecting sensitive files",
        "prompt": "Create a hook that prevents Claude from editing .env files or files containing 'secret' in the name"
      },
      {
        "title": "Inject context",
        "scenario": "Session startup context",
        "prompt": "Create a SessionStart hook that tells Claude what programming language this project uses"
      },
      {
        "title": "Configure hook",
        "scenario": "Hook activation",
        "prompt": "Show me how to configure a hook in settings.json to trigger on Write tool use"
      }
    ],
    "output_examples": [
      {
        "input": "Create a hook that blocks editing .env files",
        "output": [
          "I will create a file-protector hook for you.",
          "The hook will intercept Write and Edit tool calls and block any attempts to modify files matching .env patterns.",
          "File: .claude/hooks/file-protector.sh",
          "To activate, add this to .claude/settings.json:"
        ]
      }
    ],
    "best_practices": [
      "Always quote variables in shell scripts to prevent injection attacks",
      "Use absolute paths with $CLAUDE_PROJECT_DIR to avoid path traversal issues",
      "Set timeouts on hooks to prevent runaway scripts from hanging Claude Code"
    ],
    "anti_patterns": [
      "Do not use unquoted variables in hook scripts",
      "Do not skip input validation on file paths and user data",
      "Do not omit timeouts for hooks that perform network or file operations"
    ],
    "faq": [
      {
        "question": "What hook events are available?",
        "answer": "PreToolUse, PostToolUse, UserPromptSubmit, SessionStart, SessionEnd, Stop, SubagentStop, PermissionRequest, Notification, and PreCompact."
      },
      {
        "question": "Where do I configure hooks?",
        "answer": "Add hook configurations to .claude/settings.json under the 'hooks' key. Local settings override project and user settings."
      },
      {
        "question": "What exit codes do hooks use?",
        "answer": "Exit 0 means success and continue. Exit 2 blocks the action. Other codes log a non-blocking error."
      },
      {
        "question": "Is my data safe with hooks?",
        "answer": "Hooks run locally in your project directory. They cannot access files outside CLAUDE_PROJECT_DIR unless explicitly configured."
      },
      {
        "question": "Why is my hook not triggering?",
        "answer": "Check that your settings.json is valid JSON, the matcher pattern matches the tool name, and the hook script has execute permissions."
      },
      {
        "question": "How do hooks differ from agents?",
        "answer": "Hooks run automatically on specific events without prompting. Agents are called explicitly. Hooks are faster but have limited context."
      }
    ]
  },
  "file_structure": [
    {
      "name": "templates",
      "type": "dir",
      "path": "templates",
      "children": [
        {
          "name": "basic.sh",
          "type": "file",
          "path": "templates/basic.sh"
        },
        {
          "name": "context-injector.sh",
          "type": "file",
          "path": "templates/context-injector.sh"
        },
        {
          "name": "file-protector.sh",
          "type": "file",
          "path": "templates/file-protector.sh"
        }
      ]
    },
    {
      "name": "reference.md",
      "type": "file",
      "path": "reference.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
