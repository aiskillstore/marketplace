{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T12:40:26.296Z",
    "slug": "consiliency-spawn-agent",
    "source_url": "https://github.com/Consiliency/treesitter-chunker/tree/main/.ai-dev-kit/skills/spawn/agent",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "a1702fb5303a9b16fc801803e92b8461ca285282e6b54dfee373559b84c8d723",
    "tree_hash": "181af096885f1de2ed56e7a0fc7bd353de30da297b71e0622004e76f01fbaca3"
  },
  "skill": {
    "name": "spawn:agent",
    "description": "Spawn an AI coding agent in a new terminal (Claude, Codex, Gemini, Cursor, OpenCode, Copilot). Defaults to Claude Code if unspecified.",
    "summary": "Spawn an AI coding agent in a new terminal (Claude, Codex, Gemini, Cursor, OpenCode, Copilot). Defau...",
    "icon": "ðŸš€",
    "version": "1.0.0",
    "author": "Consiliency",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "terminal",
      "agents",
      "claude-code",
      "multi-platform",
      "ai-coding"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "filesystem",
      "env_access",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "medium",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "The skill spawns AI agents in new terminals using subprocess execution. Capabilities align with purpose. Subprocess shell execution and command concatenation patterns present risk. Authentication bypass flags (--dangerously-skip-permissions, --dangerously-bypass-approvals-and-sandbox, --yolo, --force, --allow-all-tools) are used by design for agentic tools. No credential theft, network exfiltration, or stealth mechanisms detected.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "fork_terminal.py",
            "line_start": 1,
            "line_end": 340
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "fork_terminal.py",
            "line_start": 36,
            "line_end": 36
          },
          {
            "file": "fork_terminal.py",
            "line_start": 157,
            "line_end": 159
          },
          {
            "file": "fork_terminal.py",
            "line_start": 338,
            "line_end": 339
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "fork_terminal.py",
            "line_start": 96,
            "line_end": 96
          },
          {
            "file": "SKILL.md",
            "line_start": 11,
            "line_end": 25
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "fork_terminal.py",
            "line_start": 58,
            "line_end": 61
          },
          {
            "file": "fork_terminal.py",
            "line_start": 89,
            "line_end": 93
          },
          {
            "file": "fork_terminal.py",
            "line_start": 176,
            "line_end": 176
          },
          {
            "file": "fork_terminal.py",
            "line_start": 216,
            "line_end": 227
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [
      {
        "title": "Shell command concatenation risk",
        "description": "Commands are constructed via string concatenation and passed to subprocess with shell=True. While consistent with spawning AI agents, this pattern could be misused if untrusted input flows to the command parameter.\n\nCode at fork_terminal.py:46: `shell_cmd = f\"cd {cwd}; {command} | tee {agent_output_file}\"`\n\nAn attacker controlling the 'command' parameter could inject additional shell commands. The skill documentation indicates command comes from the AI agent following cookbook instructions, reducing immediate risk.",
        "locations": [
          {
            "file": "fork_terminal.py",
            "line_start": 46,
            "line_end": 50
          },
          {
            "file": "fork_terminal.py",
            "line_start": 83,
            "line_end": 87
          },
          {
            "file": "fork_terminal.py",
            "line_start": 139,
            "line_end": 155
          }
        ]
      }
    ],
    "low_findings": [
      {
        "title": "Write to /tmp directory",
        "description": "The skill writes output files to /tmp with predictable patterns (/tmp/fork-agent-*.json, /tmp/fork-debug-*.txt). While not inherently malicious, these files are created with world-readable permissions and contain agent output.\n\nLocation: fork_terminal.py:41-43, 134-136, 210-212",
        "locations": [
          {
            "file": "fork_terminal.py",
            "line_start": 41,
            "line_end": 43
          }
        ]
      },
      {
        "title": "Process spawning without sandbox",
        "description": "The skill spawns AI agent processes with authentication bypass flags (--dangerously-skip-permissions, --dangerously-bypass-approvals-and-sandbox, --yolo, --force, --allow-all-tools). These are documented design choices for agentic CLI tools to function without user approval prompts. Users should understand that spawned agents will have elevated permissions.",
        "locations": [
          {
            "file": "cookbook/claude-code.md",
            "line_start": 21,
            "line_end": 21
          },
          {
            "file": "cookbook/codex-cli.md",
            "line_start": 45,
            "line_end": 46
          },
          {
            "file": "cookbook/gemini-cli.md",
            "line_start": 49,
            "line_end": 50
          }
        ]
      }
    ],
    "dangerous_patterns": [],
    "files_scanned": 9,
    "total_lines": 1229,
    "audit_model": "claude",
    "audited_at": "2026-01-10T12:40:26.295Z"
  },
  "content": {
    "user_title": "Spawn AI agents in new terminals",
    "value_statement": "Managing multiple AI coding agents requires switching between different CLI tools. This skill launches Claude Code, Codex, Gemini, Cursor, OpenCode, or Copilot in a new terminal window with proper command construction and output capture.",
    "seo_keywords": [
      "Claude Code",
      "Codex CLI",
      "Gemini CLI",
      "Cursor CLI",
      "Copilot CLI",
      "OpenCode CLI",
      "AI agent launcher",
      "terminal spawn",
      "multi-agent",
      "Claude Code skill"
    ],
    "actual_capabilities": [
      "Spawn Claude Code agent in new terminal with --dangerously-skip-permissions",
      "Spawn OpenAI Codex agent in new terminal with proper sandbox flags",
      "Spawn Google Gemini agent in new terminal with auto-approval",
      "Spawn Cursor agent in new terminal with force mode",
      "Spawn GitHub Copilot agent in new terminal with tool permissions",
      "Spawn OpenCode agent in new terminal with model selection",
      "Capture agent output to JSON files in /tmp"
    ],
    "limitations": [
      "Requires AI CLI tools to be installed and authenticated separately",
      "Output capture requires LOG_AGENT_OUTPUT enabled (default true)",
      "Platform support varies: macOS Terminal, Windows Terminal, WSL, tmux",
      "Does not install or configure AI tools - assumes pre-existing setup"
    ],
    "use_cases": [
      {
        "target_user": "Developers",
        "title": "Parallel Development Tasks",
        "description": "Run multiple AI coding agents simultaneously in separate terminals for different subtasks"
      },
      {
        "target_user": "DevOps Engineers",
        "title": "Multi-Provider Testing",
        "description": "Compare AI coding outputs from different providers on the same task"
      },
      {
        "target_user": "AI Enthusiasts",
        "title": "Interactive Agent Sessions",
        "description": "Launch full interactive AI sessions for complex development work"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic Spawn",
        "scenario": "Launch default agent",
        "prompt": "Spawn an agent to analyze this codebase and identify performance bottlenecks"
      },
      {
        "title": "With Claude Code",
        "scenario": "Launch Claude Code specifically",
        "prompt": "Spawn agent use claude code to refactor this module with sonnet model and skip permissions"
      },
      {
        "title": "With Summary",
        "scenario": "Pass conversation context",
        "prompt": "Spawn agent use claude code with a summary to continue working on the authentication flow"
      },
      {
        "title": "Multi-Agent",
        "scenario": "Compare multiple providers",
        "prompt": "Spawn codex and gemini agents in parallel to implement the same feature, then compare results"
      }
    ],
    "output_examples": [
      {
        "input": "Spawn agent use claude code to create a REST API endpoint",
        "output": [
          "Terminal opened with Claude Code agent",
          "Agent will create the API endpoint",
          "Output captured to /tmp/fork-agent-[uuid].json"
        ]
      }
    ],
    "best_practices": [
      "Run --help on each CLI tool before first use to verify command syntax",
      "Use LOG_AGENT_OUTPUT=true for clean JSON capture without terminal noise",
      "Enable only the AI providers you use via ENABLED_*_CLI variables",
      "Review cookbooks for correct command patterns and permission flags"
    ],
    "anti_patterns": [
      "Skipping the cookbook --help step because the command seems simple",
      "Spawning agents without specifying model when defaults may not match your use case",
      "Assuming all AI CLIs behave the same way for interactive mode",
      "Not reviewing output capture settings before long-running tasks"
    ],
    "faq": [
      {
        "question": "Which AI providers are supported?",
        "answer": "Claude Code, OpenAI Codex, Google Gemini, Cursor, GitHub Copilot, and OpenCode CLI tools are supported."
      },
      {
        "question": "What output formats are available?",
        "answer": "Full terminal output (debug), clean JSON agent response, or no output depending on log_to_file and log_agent_output flags."
      },
      {
        "question": "How do I integrate with Claude Code?",
        "answer": "Set DEFAULT_AGENT=claude-code. The skill reads cookbook/claude-code.md and constructs commands with --dangerously-skip-permissions."
      },
      {
        "question": "Is my data safe?",
        "answer": "The skill runs locally and writes output to /tmp. No data is sent to external servers. Review spawned agent permissions separately."
      },
      {
        "question": "Why is output not capturing?",
        "answer": "Ensure LOG_AGENT_OUTPUT=true (default) and wait for the .done file to appear. Check /tmp/fork-agent-*.json for results."
      },
      {
        "question": "How does this compare to native Task agents?",
        "answer": "This skill spawns external CLI tools in a new terminal. Native Task agents run within Claude Code. Use fork_terminal for full interactive sessions."
      }
    ]
  },
  "file_structure": [
    {
      "name": "cookbook",
      "type": "dir",
      "path": "cookbook",
      "children": [
        {
          "name": "claude-code.md",
          "type": "file",
          "path": "cookbook/claude-code.md"
        },
        {
          "name": "codex-cli.md",
          "type": "file",
          "path": "cookbook/codex-cli.md"
        },
        {
          "name": "copilot-cli.md",
          "type": "file",
          "path": "cookbook/copilot-cli.md"
        },
        {
          "name": "cursor-cli.md",
          "type": "file",
          "path": "cookbook/cursor-cli.md"
        },
        {
          "name": "gemini-cli.md",
          "type": "file",
          "path": "cookbook/gemini-cli.md"
        },
        {
          "name": "opencode-cli.md",
          "type": "file",
          "path": "cookbook/opencode-cli.md"
        }
      ]
    },
    {
      "name": "prompts",
      "type": "dir",
      "path": "prompts",
      "children": [
        {
          "name": "fork-summary-user-prompt.md",
          "type": "file",
          "path": "prompts/fork-summary-user-prompt.md"
        }
      ]
    },
    {
      "name": "fork_terminal.py",
      "type": "file",
      "path": "fork_terminal.py"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
