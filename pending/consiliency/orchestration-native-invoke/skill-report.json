{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T12:37:33.803Z",
    "slug": "consiliency-orchestration-native-invoke",
    "source_url": "https://github.com/Consiliency/treesitter-chunker/tree/main/.ai-dev-kit/skills/orchestration/native-invoke",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "ea8b3eed4d39639b7be28f85a24095ea61bbc929631b30301e2b66b24cdb2d42",
    "tree_hash": "7b939c1b074bd7ee9511a944bf561d1d9478dad1c3cb871f395fa23818dbb29e"
  },
  "skill": {
    "name": "orchestration:native-invoke",
    "description": "Invoke external AI CLIs via native Task agents (Claude, Codex, Gemini, Cursor). Primary mode for multi-provider orchestration with fork-terminal fallback for auth.",
    "summary": "Invoke external AI CLIs via native Task agents (Claude, Codex, Gemini, Cursor). Primary mode for mul...",
    "icon": "ðŸ”„",
    "version": "1.0.0",
    "author": "Consiliency",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "orchestration",
      "multi-provider",
      "ai-agents",
      "task-execution"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing markdown guides. No executable code, network calls, file system access, or environment variable reading. Purely informational content for routing tasks to external AI providers.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 517,
    "audit_model": "claude",
    "audited_at": "2026-01-10T12:37:33.803Z"
  },
  "content": {
    "user_title": "Route AI tasks to external providers",
    "value_statement": "Users need guidance on invoking external AI coding tools. This skill provides documented patterns and workflows for using Claude Code Task agents to call Codex, Gemini, and Cursor with proper authentication and read-only controls.",
    "seo_keywords": [
      "Claude Code native invoke",
      "AI provider orchestration",
      "multi-agent routing",
      "Claude Codex Gemini Cursor",
      "Task agent execution",
      "AI CLI integration",
      "provider routing",
      "external AI agents"
    ],
    "actual_capabilities": [
      "Guide Task agent configuration for external AI providers",
      "Document read-only vs write mode patterns per provider",
      "Explain authentication recovery with fork-terminal fallback",
      "Provide parallel invocation patterns for multiple providers",
      "Show worktree isolation for safe agent file modifications"
    ],
    "limitations": [
      "Contains documentation only, does not execute any code itself",
      "Requires Claude Code native Task tool to use these patterns",
      "CLI permissions must be configured separately in .claude/settings.json"
    ],
    "use_cases": [
      {
        "target_user": "AI engineers",
        "title": "Orchestrate multiple AI providers",
        "description": "Route complex tasks to the best provider based on context size, sandbox needs, or reasoning requirements."
      },
      {
        "target_user": "DevOps teams",
        "title": "Automate external CLI invocations",
        "description": "Set up automated workflows that invoke Codex, Gemini, or Cursor agents via Task tool calls."
      },
      {
        "target_user": "Security-conscious developers",
        "title": "Maintain isolation and audit trails",
        "description": "Use worktree isolation and read-only modes to safely let external agents analyze codebases."
      }
    ],
    "prompt_templates": [
      {
        "title": "Route to Codex",
        "scenario": "Sandboxed code execution needed",
        "prompt": "Use the orchestration:native-invoke skill. Invoke Codex in sandboxed read-only mode: codex exec --sandbox read-only --full-auto --model gpt-5.2-codex '<security audit this repository>'"
      },
      {
        "title": "Route to Gemini",
        "scenario": "Large context analysis",
        "prompt": "Use orchestration:native-invoke. Route this 150k token codebase to Gemini: gemini --model gemini-3-pro --sandbox --yolo '<analyze architecture patterns>'"
      },
      {
        "title": "Parallel routing",
        "scenario": "Multi-provider comparison",
        "prompt": "Use orchestration:native-invoke with parallel execution. Launch Task agents for Codex, Gemini, and Cursor simultaneously with the same prompt: '<implement a REST API endpoint>'"
      },
      {
        "title": "IDE-integrated edits",
        "scenario": "Cursor multi-file changes",
        "prompt": "Use orchestration:native-invoke. Invoke Cursor Agent for IDE-integrated refactoring: cursor-agent --model claude-sonnet-4.5 --force -p '<refactor these 5 components>'"
      }
    ],
    "output_examples": [
      {
        "input": "Route this security audit to Codex in sandboxed mode",
        "output": [
          "âœ“ Codex agent invoked with sandbox read-only flags",
          "âœ“ Agent executed in background task",
          "âœ“ Results collected via TaskOutput",
          "âœ“ No files modified in main workspace"
        ]
      }
    ],
    "best_practices": [
      "Always run CLI --help before constructing commands to verify available flags",
      "Use read-only mode with sandbox flags for analysis tasks to prevent accidental modifications",
      "Configure worktree isolation for write-mode operations to keep changes isolated"
    ],
    "anti_patterns": [
      "Skipping the cookbook read step and running CLI commands without verification",
      "Using interactive flags in non-interactive contexts where TTY input is unavailable",
      "Running agents without read-only constraints when only analysis is needed"
    ],
    "faq": [
      {
        "question": "Which AI providers are supported?",
        "answer": "OpenAI Codex, Google Gemini, and Cursor Agent. Claude Code is the orchestrator using native Task agents."
      },
      {
        "question": "What are the context limits per provider?",
        "answer": "Claude Opus: 200k tokens, Gemini 3 Pro: 2M tokens, Codex: 32k tokens. Choose based on codebase size."
      },
      {
        "question": "How do I configure CLI permissions?",
        "answer": "Add Bash permissions in .claude/settings.json for each provider. Run /ai-dev-kit:setup for automatic configuration."
      },
      {
        "question": "Is my data sent to external providers?",
        "answer": "Yes. When using external providers like Codex, Gemini, or Cursor, your code and prompts are sent to their respective services per their privacy policies."
      },
      {
        "question": "What happens if authentication fails?",
        "answer": "The skill detects auth errors and triggers fork-terminal fallback. Interactive login commands run, then native agent invocation is retried."
      },
      {
        "question": "How is this different from fork-terminal?",
        "answer": "Native Task agents support parallel execution and clean result collection via TaskOutput. Fork-terminal handles interactive logins and streaming output."
      }
    ]
  },
  "file_structure": [
    {
      "name": "cookbook",
      "type": "dir",
      "path": "cookbook",
      "children": [
        {
          "name": "provider-routing.md",
          "type": "file",
          "path": "cookbook/provider-routing.md"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
