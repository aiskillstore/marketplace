{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T10:53:46.424Z",
    "slug": "automattic-wp-wpcli-and-ops",
    "source_url": "https://github.com/Automattic/agent-skills/tree/trunk/skills/wp-wpcli-and-ops",
    "source_ref": "trunk",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "3f76c8fce78a1db1ed2dcb0273bba9b30b0231ce191bd63279a289151af3e726",
    "tree_hash": "9050021895e45352b9588d4855ad1ab7b798939032fc819d05bf7e24a701193d"
  },
  "skill": {
    "name": "wp-wpcli-and-ops",
    "description": "Use when working with WP-CLI (wp) for WordPress operations: safe search-replace, db export/import, plugin/theme/user/content management, cron, cache flushing, multisite, and scripting/automation with wp-cli.yml.",
    "summary": "Use when working with WP-CLI (wp) for WordPress operations: safe search-replace, db export/import, p...",
    "icon": "âš“",
    "version": "1.0.0",
    "author": "Automattic",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "wordpress",
      "wp-cli",
      "database",
      "automation"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "medium",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill enables WordPress site management via WP-CLI. The core script executes external WP-CLI commands using spawnSync which is necessary for its purpose. The skill includes safety documentation and guardrails for production environments. Risk level is medium due to command execution capability but is appropriate for its stated devops purpose.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "scripts/wpcli_inspect.mjs",
            "line_start": 1,
            "line_end": 91
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "scripts/wpcli_inspect.mjs",
            "line_start": 22,
            "line_end": 22
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [
      {
        "title": "External command execution via spawnSync",
        "description": "The script uses Node.js spawnSync to execute WP-CLI commands. This is necessary for the skill's purpose but enables arbitrary command execution.\n\nCode location: scripts/wpcli_inspect.mjs:22\n```\nconst out = spawnSync(\"wp\", args, { encoding: \"utf8\" });\n```\n\nAn attacker with control over arguments could potentially execute WP-CLI commands on the target WordPress installation. The skill is designed for devops use cases where this capability is intentional.",
        "locations": [
          {
            "file": "scripts/wpcli_inspect.mjs",
            "line_start": 22,
            "line_end": 22
          }
        ]
      }
    ],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 9,
    "total_lines": 406,
    "audit_model": "claude",
    "audited_at": "2026-01-10T10:53:46.424Z"
  },
  "content": {
    "user_title": "Manage WordPress sites with WP-CLI",
    "value_statement": "WordPress site operations require multiple commands and safety checks. This skill provides structured workflows for database migrations, plugin updates, and site maintenance through WP-CLI with built-in guardrails to prevent production mistakes.",
    "seo_keywords": [
      "WordPress",
      "WP-CLI",
      "Claude",
      "Codex",
      "Claude Code",
      "database migration",
      "plugin management",
      "site maintenance",
      "search-replace",
      "multisite"
    ],
    "actual_capabilities": [
      "Inspect WordPress installation and WP-CLI availability",
      "Execute safe search-replace for domain migrations",
      "Export and import WordPress databases",
      "Manage plugins and themes with activation and updates",
      "Run cron events and flush caches",
      "Operate on multisite networks with proper targeting"
    ],
    "limitations": [
      "Requires WP-CLI to be installed in the execution environment",
      "Cannot install WP-CLI if not already available",
      "Does not provide hosting-specific migration tools",
      "Only supports WordPress 6.9+ with PHP 7.2.24+"
    ],
    "use_cases": [
      {
        "target_user": "Site administrators",
        "title": "Migrate WordPress domains",
        "description": "Safely change URLs across database during domain or protocol migrations with dry-run verification."
      },
      {
        "target_user": "DevOps engineers",
        "title": "Automate site maintenance",
        "description": "Create repeatable scripts for plugin updates, cache flushing, and health checks."
      },
      {
        "target_user": "WordPress developers",
        "title": "Debug site issues",
        "description": "Inspect cron events, check multisite configuration, and diagnose installation problems."
      }
    ],
    "prompt_templates": [
      {
        "title": "Check WordPress status",
        "scenario": "Inspect site installation",
        "prompt": "Run the WP-CLI inspector to check if WordPress is installed at --path=/var/www/wordpress and report the core version and multisite status."
      },
      {
        "title": "Domain migration",
        "scenario": "Prepare URL change",
        "prompt": "Help me perform a safe search-replace from https://old-domain.com to https://new-domain.com. Export a backup first, then run dry-run to show what will change."
      },
      {
        "title": "Update all plugins",
        "scenario": "Maintenance operation",
        "prompt": "List all installed plugins, then update them on staging. Use a maintenance window flag if available. Flush caches afterward."
      },
      {
        "title": "Multisite operation",
        "scenario": "Network-wide changes",
        "prompt": "Run a command across all sites in the network. List all sites first, then show how to iterate through them safely for cache flushing."
      }
    ],
    "output_examples": [
      {
        "input": "Check if WordPress is installed at /var/www/site and report the version and multisite status.",
        "output": [
          "WP-CLI version: 2.11.0",
          "WordPress version: 6.9",
          "Installation found: Yes",
          "Multisite: No",
          "Site URL: https://example.com",
          "Home: https://example.com"
        ]
      }
    ],
    "best_practices": [
      "Always use --dry-run before search-replace operations to preview changes",
      "Create database backups with wp db export before any write operations",
      "Confirm environment (dev/staging/prod) before running destructive commands",
      "Use --path and --url flags to ensure correct site targeting in multisite"
    ],
    "anti_patterns": [
      "Running wp db reset on production without explicit confirmation",
      "Using search-replace without --dry-run on live databases",
      "Executing bulk updates without checking for maintenance window requirements",
      "Ignoring multisite context when operating on network installations"
    ],
    "faq": [
      {
        "question": "Does this skill work with managed WordPress hosting?",
        "answer": "Most managed hosts do not provide WP-CLI access. This skill requires WP-CLI installed in the execution environment."
      },
      {
        "question": "What WordPress versions are supported?",
        "answer": "Target WordPress 6.9+ with PHP 7.2.24+. Older versions may work but are not tested."
      },
      {
        "question": "Can I use this skill without WP-CLI installed?",
        "answer": "The skill will report WP-CLI is unavailable. You must install WP-CLI first through your project tooling or container."
      },
      {
        "question": "Is data safe during search-replace operations?",
        "answer": "The skill includes safety documentation. Always run --dry-run first and backup with wp db export before proceeding."
      },
      {
        "question": "Why am I getting 'not a WordPress installation' error?",
        "answer": "Check your --path argument points to the directory containing wp-config.php. For multisite, also provide --url."
      },
      {
        "question": "How does this compare to other WordPress migration tools?",
        "answer": "This skill uses native WP-CLI commands. It is safer than manual SQL queries but less automated than migration plugins."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "automation.md",
          "type": "file",
          "path": "references/automation.md"
        },
        {
          "name": "cron-and-cache.md",
          "type": "file",
          "path": "references/cron-and-cache.md"
        },
        {
          "name": "debugging.md",
          "type": "file",
          "path": "references/debugging.md"
        },
        {
          "name": "multisite.md",
          "type": "file",
          "path": "references/multisite.md"
        },
        {
          "name": "packages-and-updates.md",
          "type": "file",
          "path": "references/packages-and-updates.md"
        },
        {
          "name": "safety.md",
          "type": "file",
          "path": "references/safety.md"
        },
        {
          "name": "search-replace.md",
          "type": "file",
          "path": "references/search-replace.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "wpcli_inspect.mjs",
          "type": "file",
          "path": "scripts/wpcli_inspect.mjs"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
