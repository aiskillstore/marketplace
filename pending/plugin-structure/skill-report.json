{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:10:32.366Z",
    "slug": "plugin-structure",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-structure",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Plugin Structure",
    "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
    "summary": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand ...",
    "icon": "ðŸ”Œ",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "Not specified",
    "category": "development",
    "tags": [
      "plugin-development",
      "architecture",
      "claude-code",
      "configuration",
      "best-practices",
      "scaffolding",
      "component-organization"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill providing documentation and guidance on plugin structure. Contains no executable code, only markdown documentation and examples. No security concerns identified.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 3146,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:10:32.366Z"
  },
  "content": {
    "user_title": "Claude Code Plugin Development Guide",
    "value_statement": "Learn how to build well-structured, maintainable Claude Code plugins with proper directory organization, manifest configuration, and component architecture following official best practices.",
    "seo_keywords": [
      "claude code plugins",
      "plugin development",
      "plugin architecture",
      "plugin.json configuration",
      "component organization",
      "claude code scaffolding",
      "plugin best practices",
      "claude extensibility"
    ],
    "actual_capabilities": [
      "Guides users through creating plugin directory structures",
      "Explains plugin.json manifest configuration with all field options",
      "Documents component organization patterns (commands, agents, skills, hooks)",
      "Provides portable path reference guidance using ${CLAUDE_PLUGIN_ROOT}",
      "Explains auto-discovery mechanisms for plugin components",
      "Offers three complete plugin examples (minimal, standard, advanced)",
      "Details file naming conventions and best practices",
      "Covers MCP server integration within plugins",
      "Explains hook system configuration and event handling",
      "Provides troubleshooting guidance for common plugin issues"
    ],
    "limitations": [
      "Documentation-only skill - does not automatically scaffold plugins",
      "Requires manual implementation of plugin components",
      "Does not validate plugin configurations automatically",
      "Does not include runtime testing or debugging capabilities",
      "Focused on structure/architecture, not specific plugin functionality"
    ],
    "use_cases": [
      {
        "title": "Create Your First Plugin",
        "description": "Use this skill to understand the minimal requirements for a working plugin and scaffold a simple hello-world style plugin with proper structure.",
        "target_user": "Developers new to Claude Code plugin development"
      },
      {
        "title": "Organize Complex Enterprise Plugins",
        "description": "Learn advanced organization patterns for large-scale plugins with multiple components, MCP integrations, shared libraries, and configuration management.",
        "target_user": "Teams building production-grade plugin ecosystems"
      },
      {
        "title": "Configure Plugin Components",
        "description": "Understand how to properly configure commands, agents, skills, and hooks with correct path references and auto-discovery setup.",
        "target_user": "Plugin developers adding new functionality"
      },
      {
        "title": "Migrate to Standard Structure",
        "description": "Refactor existing plugins to follow best practices for naming, organization, and portability across different systems.",
        "target_user": "Maintainers of legacy plugins"
      },
      {
        "title": "Integrate MCP Servers",
        "description": "Learn how to properly configure and integrate Model Context Protocol servers within your plugin architecture.",
        "target_user": "Developers building plugins with external integrations"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create Minimal Plugin",
        "prompt": "Help me create a minimal plugin called 'hello-world' with a single command that prints a greeting",
        "scenario": "Getting started with plugin development"
      },
      {
        "title": "Scaffold Standard Plugin",
        "prompt": "Create a code quality plugin with lint, test, and review commands, plus a code-reviewer agent and testing-patterns skill",
        "scenario": "Building a production-ready plugin"
      },
      {
        "title": "Configure Plugin Manifest",
        "prompt": "Help me configure plugin.json for my 'devops-automation' plugin with proper metadata, custom paths, and MCP server configuration",
        "scenario": "Setting up complex plugin configuration"
      },
      {
        "title": "Organize Plugin Components",
        "prompt": "I have 20+ commands and need to organize them by category. Show me how to structure the directories and configure the manifest",
        "scenario": "Refactoring plugin structure for scalability"
      },
      {
        "title": "Fix Path References",
        "prompt": "My plugin hooks are failing with path errors. Help me convert all paths to use ${CLAUDE_PLUGIN_ROOT} properly",
        "scenario": "Troubleshooting portability issues"
      },
      {
        "title": "Add Skill to Plugin",
        "prompt": "Add a 'kubernetes-operations' skill to my DevOps plugin with references, examples, and scripts organized properly",
        "scenario": "Extending plugin with new knowledge domain"
      }
    ],
    "output_examples": [
      {
        "input": "Create a minimal plugin structure for 'hello-world'",
        "output": "Directory structure:\n```\nhello-world/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json\nâ””â”€â”€ commands/\n    â””â”€â”€ hello.md\n```\n\nWith plugin.json:\n```json\n{\n  \"name\": \"hello-world\"\n}\n```\n\nAnd commands/hello.md with greeting implementation."
      },
      {
        "input": "How do I reference scripts from hooks?",
        "output": "Always use ${CLAUDE_PLUGIN_ROOT}:\n```json\n{\n  \"hooks\": {\n    \"PreToolUse\": [{\n      \"matcher\": \"Write\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate.sh\"\n      }]\n    }]\n  }\n}\n```\nThis ensures portability across different installation locations."
      }
    ],
    "best_practices": [
      "Use kebab-case for all file and directory names",
      "Always reference paths with ${CLAUDE_PLUGIN_ROOT} for portability",
      "Keep plugin.json minimal - only specify custom paths when necessary",
      "Rely on auto-discovery for standard directory layouts",
      "Follow semantic versioning (MAJOR.MINOR.PATCH) for plugin versions",
      "Include complete metadata (author, description, license) for distribution",
      "Organize components logically by function or category",
      "Document plugin structure and component organization in README",
      "Use progressive disclosure in skills (core content + references + examples)",
      "Test plugins on multiple systems before publishing",
      "Keep manifest configuration under 100 lines - use external files for complex configs"
    ],
    "anti_patterns": [
      "Hardcoding absolute paths instead of using ${CLAUDE_PLUGIN_ROOT}",
      "Placing component directories inside .claude-plugin/ directory",
      "Using absolute paths or ../ navigation in manifest path fields",
      "Omitting ./ prefix on relative paths in manifest",
      "Creating deeply nested directory structures (>4 levels)",
      "Using inconsistent naming conventions across components",
      "Inline configuration for complex hooks or MCP setups (>50 lines)",
      "Skipping version field in plugin.json for distributed plugins",
      "Creating README.md in skills/ instead of SKILL.md",
      "Forgetting to update version when making breaking changes"
    ],
    "faq": [
      {
        "question": "Where should I put my plugin.json file?",
        "answer": "The plugin.json manifest MUST be in the .claude-plugin/ directory at your plugin root. Component directories (commands, agents, skills) must be at the plugin root level, not inside .claude-plugin/."
      },
      {
        "question": "What's the difference between custom paths and default directories?",
        "answer": "Custom paths in plugin.json supplement default directories, they don't replace them. Components in both locations will load. Use custom paths to add additional component locations, not to override defaults."
      },
      {
        "question": "How do I make my plugin work on different operating systems?",
        "answer": "Always use ${CLAUDE_PLUGIN_ROOT} for intra-plugin path references. Use forward slashes in paths (even on Windows). Test on multiple platforms before distributing."
      },
      {
        "question": "When should I use inline vs. external configuration for hooks/MCP?",
        "answer": "Use inline for simple configurations (<20 lines). Use external JSON files for complex setups, multiple servers, or when configuration exceeds 50 lines. External files are easier to maintain."
      },
      {
        "question": "How does component auto-discovery work?",
        "answer": "Claude Code automatically scans default directories (commands/, agents/, skills/) for .md files and SKILL.md files when your plugin enables. Custom paths in plugin.json add additional scan locations."
      },
      {
        "question": "What's the minimum required for a working plugin?",
        "answer": "Just .claude-plugin/plugin.json with a name field, plus at least one component (command, agent, or skill). The simplest plugin is 2 files: plugin.json and one command.md."
      },
      {
        "question": "How do I organize a plugin with 50+ components?",
        "answer": "Use hierarchical organization with custom paths for categories. Separate components by function (ci/, deployment/, monitoring/), specify each path in the manifest's commands or agents array, and document the structure in README."
      },
      {
        "question": "Can I nest component directories multiple levels deep?",
        "answer": "Claude Code doesn't automatically discover nested directories. You must specify each nested path explicitly in plugin.json. Avoid deep nesting (>2-3 levels) for performance and maintainability."
      }
    ],
    "technical_requirements": {
      "dependencies": [],
      "permissions": [],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "advanced-plugin.md",
          "type": "file",
          "path": "examples/advanced-plugin.md"
        },
        {
          "name": "minimal-plugin.md",
          "type": "file",
          "path": "examples/minimal-plugin.md"
        },
        {
          "name": "standard-plugin.md",
          "type": "file",
          "path": "examples/standard-plugin.md"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "component-patterns.md",
          "type": "file",
          "path": "references/component-patterns.md"
        },
        {
          "name": "manifest-reference.md",
          "type": "file",
          "path": "references/manifest-reference.md"
        }
      ]
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}