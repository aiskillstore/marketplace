{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:28:14.713Z",
    "slug": "plugin-structure",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-structure",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Plugin Structure",
    "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
    "summary": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand ...",
    "icon": "ðŸ”Œ",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "Not specified",
    "category": "development",
    "tags": [
      "plugin-development",
      "architecture",
      "claude-code",
      "scaffolding",
      "configuration",
      "developer-tools"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill containing only documentation and examples. No executable code or security concerns detected.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 3146,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:28:14.712Z"
  },
  "content": {
    "user_title": "Claude Code Plugin Structure Guide",
    "value_statement": "This skill teaches you how to architect, organize, and build well-structured Claude Code plugins using best practices for directory layout, component organization, and manifest configuration.",
    "seo_keywords": [
      "claude code plugin",
      "plugin development",
      "plugin architecture",
      "plugin.json",
      "plugin structure",
      "component organization",
      "claude plugin manifest",
      "auto-discovery",
      "plugin scaffolding"
    ],
    "actual_capabilities": [
      "Explains Claude Code plugin directory structure and organization patterns",
      "Provides comprehensive plugin.json manifest reference with all fields",
      "Teaches component organization for commands, agents, skills, hooks, and MCP servers",
      "Demonstrates portable path references using ${CLAUDE_PLUGIN_ROOT}",
      "Covers auto-discovery mechanisms for plugin components",
      "Includes three complete plugin examples: minimal, standard, and advanced",
      "Explains file naming conventions and best practices",
      "Provides troubleshooting guidance for common plugin issues"
    ],
    "limitations": [
      "Documentation-only skill - does not automatically generate plugin scaffolds",
      "Requires manual application of patterns and examples",
      "Does not validate plugin.json syntax automatically",
      "Examples are illustrative and may need customization for specific use cases"
    ],
    "use_cases": [
      {
        "title": "Create a New Plugin from Scratch",
        "description": "Use this skill to understand the required directory structure, create a valid plugin.json manifest, and organize components following Claude Code conventions.",
        "target_user": "Plugin developers starting a new Claude Code plugin"
      },
      {
        "title": "Refactor an Existing Plugin",
        "description": "Learn advanced organization patterns to restructure a growing plugin with better component separation and scalability.",
        "target_user": "Developers maintaining complex plugins that have outgrown simple flat structures"
      },
      {
        "title": "Understand Plugin Architecture",
        "description": "Deep dive into how Claude Code discovers and loads plugin components, path resolution, and auto-discovery mechanisms.",
        "target_user": "Developers wanting to understand the plugin system internals"
      },
      {
        "title": "Configure Advanced Plugin Features",
        "description": "Learn how to set up hooks, MCP servers, custom component paths, and multi-directory organization for enterprise plugins.",
        "target_user": "Advanced plugin developers building feature-rich integrations"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a Minimal Plugin",
        "prompt": "Help me create a minimal Claude Code plugin called [plugin-name] that provides a single command to [describe functionality].",
        "scenario": "When you need to quickly prototype a simple plugin with one command"
      },
      {
        "title": "Scaffold a Standard Plugin",
        "prompt": "I want to create a Claude Code plugin for [purpose] with commands for [list commands], an agent that [agent capability], and a skill about [topic]. Help me set up the directory structure and plugin.json.",
        "scenario": "When building a full-featured plugin for distribution"
      },
      {
        "title": "Organize Plugin Components",
        "prompt": "My plugin has grown to include [number] commands and [number] skills. How should I organize these components for better maintainability?",
        "scenario": "When refactoring a growing plugin"
      },
      {
        "title": "Configure Hooks and MCP Servers",
        "prompt": "I need to add hooks that [hook purpose] and integrate an MCP server for [integration purpose]. Show me how to configure these in my plugin.",
        "scenario": "When adding advanced features to an existing plugin"
      },
      {
        "title": "Troubleshoot Component Discovery",
        "prompt": "My [component type] isn't being discovered by Claude Code. The file is at [path]. Help me debug this.",
        "scenario": "When components aren't loading properly"
      }
    ],
    "output_examples": [
      {
        "input": "Help me create a minimal plugin called 'hello-world' with one greeting command",
        "output": "Creates directory structure:\nhello-world/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json (with name: \"hello-world\")\nâ””â”€â”€ commands/\n    â””â”€â”€ hello.md (with command frontmatter and greeting logic)"
      },
      {
        "input": "How do I reference a script from my hook configuration?",
        "output": "Explains ${CLAUDE_PLUGIN_ROOT} usage:\n\"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate.sh\"\nThis ensures the path works regardless of where the plugin is installed."
      },
      {
        "input": "What fields should I include in plugin.json for marketplace distribution?",
        "output": "Provides recommended manifest with: name, version, description, author (name/email/url), homepage, repository, license, and keywords array for discovery."
      }
    ],
    "best_practices": [
      "Always use ${CLAUDE_PLUGIN_ROOT} for intra-plugin path references to ensure portability",
      "Start with flat structure and reorganize when complexity requires it",
      "Keep plugin.json minimal and rely on auto-discovery for standard layouts",
      "Use semantic versioning (MAJOR.MINOR.PATCH) for the version field",
      "Name plugins, files, and directories using kebab-case consistently",
      "Place .claude-plugin/plugin.json at plugin root (not components inside .claude-plugin/)",
      "Document custom paths and non-standard organization in README",
      "Test plugins on multiple platforms to ensure path portability",
      "Use descriptive names that clearly indicate component purpose",
      "Include comprehensive metadata (author, homepage, license) for distributed plugins"
    ],
    "anti_patterns": [
      "Hardcoding absolute paths instead of using ${CLAUDE_PLUGIN_ROOT}",
      "Placing component directories inside .claude-plugin/ folder",
      "Using spaces or special characters in plugin names",
      "Creating deep nested hierarchies that impact discovery performance",
      "Omitting version numbers from distributed plugins",
      "Using inconsistent naming conventions across components",
      "Specifying custom paths in manifest when default directories would work",
      "Forgetting the ./ prefix for relative paths in plugin.json",
      "Using SKILL.md alternatives like README.md for skill definitions",
      "Creating plugins without description or keywords for marketplace discovery"
    ],
    "faq": [
      {
        "question": "Where should plugin.json be located?",
        "answer": "The plugin.json manifest MUST be at .claude-plugin/plugin.json relative to the plugin root. This is a required location that Claude Code looks for."
      },
      {
        "question": "Can I organize commands into subdirectories?",
        "answer": "Yes, but Claude Code doesn't auto-discover nested commands. You must specify each subdirectory explicitly in the 'commands' array in plugin.json, e.g., [\"./commands/ci\", \"./commands/admin\"]."
      },
      {
        "question": "What's the difference between agents and skills?",
        "answer": "Agents are invocable entities (manually or auto-selected) that perform tasks. Skills are knowledge modules that auto-activate based on context to enhance Claude's capabilities for specific topics."
      },
      {
        "question": "When should I use custom component paths?",
        "answer": "Use custom paths when you need to organize components in non-default locations, separate stable from experimental features, or load components from multiple directories. Otherwise, rely on auto-discovery from default directories."
      },
      {
        "question": "How do hooks.json and .mcp.json relate to plugin.json?",
        "answer": "hooks.json and .mcp.json can be separate files (default: ./hooks/hooks.json and ./.mcp.json) or inlined directly in plugin.json. Use separate files for complex configurations, inline for simple ones."
      },
      {
        "question": "What happens if two plugins have the same name?",
        "answer": "Plugin names must be unique across installed plugins. Name conflicts will cause errors during installation or enable. Use descriptive, namespaced names to avoid collisions."
      },
      {
        "question": "Can I use npm packages or external dependencies in my plugin?",
        "answer": "Yes, install dependencies in your plugin directory. Reference them using ${CLAUDE_PLUGIN_ROOT} for portable paths. Document required dependencies in your README."
      },
      {
        "question": "How do I test my plugin during development?",
        "answer": "Enable your plugin in Claude Code settings, then test each component (commands via slash commands, agents by invoking them, skills by triggering their context). Check logs for discovery and loading errors."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "Claude Code (plugin system host)"
      ],
      "permissions": [
        "File system access to plugin directory",
        "Ability to execute scripts if using hooks or MCP servers"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "advanced-plugin.md",
          "type": "file",
          "path": "examples/advanced-plugin.md"
        },
        {
          "name": "minimal-plugin.md",
          "type": "file",
          "path": "examples/minimal-plugin.md"
        },
        {
          "name": "standard-plugin.md",
          "type": "file",
          "path": "examples/standard-plugin.md"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "component-patterns.md",
          "type": "file",
          "path": "references/component-patterns.md"
        },
        {
          "name": "manifest-reference.md",
          "type": "file",
          "path": "references/manifest-reference.md"
        }
      ]
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}