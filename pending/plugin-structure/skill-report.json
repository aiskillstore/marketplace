{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:56:49.221Z",
    "slug": "plugin-structure",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-structure",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Plugin Structure",
    "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
    "summary": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand ...",
    "icon": "ðŸ”Œ",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "Not specified",
    "category": "development",
    "tags": [
      "plugin-development",
      "architecture",
      "claude-code",
      "configuration",
      "best-practices",
      "scaffolding"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill providing documentation and examples for plugin development. Contains no executable code, only markdown documentation and examples. No security concerns identified.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 3146,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:56:49.220Z"
  },
  "content": {
    "user_title": "Claude Code Plugin Structure Guide",
    "value_statement": "Learn to build well-architected Claude Code plugins with proper directory structure, manifest configuration, and component organization following official best practices.",
    "seo_keywords": [
      "claude code plugin development",
      "plugin architecture",
      "plugin.json configuration",
      "command creation",
      "agent development",
      "skill organization",
      "hook setup",
      "MCP integration",
      "plugin scaffolding",
      "auto-discovery"
    ],
    "actual_capabilities": [
      "Explains complete plugin directory structure and conventions",
      "Provides detailed plugin.json manifest reference with all fields",
      "Demonstrates component organization patterns (commands, agents, skills, hooks)",
      "Shows portable path references using ${CLAUDE_PLUGIN_ROOT}",
      "Includes three complete plugin examples (minimal, standard, advanced)",
      "Documents auto-discovery mechanism for components",
      "Covers file naming conventions and best practices",
      "Explains MCP server integration",
      "Provides troubleshooting guidance for common issues"
    ],
    "limitations": [
      "Does not execute or scaffold plugins automatically - provides documentation only",
      "Does not validate existing plugin structures programmatically",
      "Does not cover runtime behavior or debugging of plugins in detail",
      "Focused on structure and organization, not on implementing specific plugin functionality"
    ],
    "use_cases": [
      {
        "title": "Creating Your First Plugin",
        "description": "Use this skill when starting plugin development to understand the required directory structure, minimal manifest requirements, and where to place different component types.",
        "target_user": "Developers new to Claude Code plugin development"
      },
      {
        "title": "Organizing Complex Plugins",
        "description": "Learn advanced organization patterns for enterprise-grade plugins with multiple commands, agents, skills, hooks, and MCP servers including shared libraries and configuration management.",
        "target_user": "Experienced developers building production plugins"
      },
      {
        "title": "Configuring Plugin Manifest",
        "description": "Get comprehensive reference for all plugin.json fields including metadata, component paths, versioning, and licensing when preparing plugins for distribution.",
        "target_user": "Plugin authors preparing for marketplace publication"
      },
      {
        "title": "Debugging Plugin Discovery Issues",
        "description": "Troubleshoot why components aren't loading, resolve path reference errors, and fix auto-discovery problems using the detailed troubleshooting section.",
        "target_user": "Developers experiencing plugin loading issues"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create Minimal Plugin Structure",
        "prompt": "Help me create a minimal Claude Code plugin called [plugin-name] with a single command that [does-what]. What's the simplest structure I need?",
        "scenario": "Quick prototyping or learning plugin basics"
      },
      {
        "title": "Set Up Production Plugin",
        "prompt": "I want to create a production-ready plugin for [purpose] with commands for [list-commands], an agent for [agent-role], and hooks for [hook-purposes]. What's the recommended structure and manifest configuration?",
        "scenario": "Building a complete plugin for distribution"
      },
      {
        "title": "Organize Existing Plugin",
        "prompt": "I have a plugin with [number] commands and [number] agents that's becoming hard to maintain. How should I reorganize it using best practices?",
        "scenario": "Refactoring a growing plugin"
      },
      {
        "title": "Fix Path Reference Issues",
        "prompt": "My plugin hooks are failing with path errors. The hook command is [command]. How do I make paths portable using ${CLAUDE_PLUGIN_ROOT}?",
        "scenario": "Resolving path resolution errors"
      },
      {
        "title": "Configure MCP Server Integration",
        "prompt": "I want to add an MCP server to my plugin that [server-purpose]. Where should I place the server code and how do I configure it in the manifest?",
        "scenario": "Adding external integrations via MCP"
      }
    ],
    "output_examples": [
      {
        "input": "Show me the minimal plugin structure",
        "output": "The simplest plugin requires:\n\nplugin-name/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json    (containing just {\"name\": \"plugin-name\"})\nâ””â”€â”€ commands/\n    â””â”€â”€ hello.md       (your command file)\n\nThat's it! Claude Code will auto-discover the command in the commands/ directory."
      },
      {
        "input": "What metadata should I include in plugin.json for marketplace distribution?",
        "output": "For marketplace-ready plugins, include:\n\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Clear explanation of plugin purpose\",\n  \"author\": {\"name\": \"Your Name\", \"email\": \"you@example.com\"},\n  \"homepage\": \"https://docs.yoursite.com\",\n  \"repository\": \"https://github.com/you/plugin-name\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"relevant\", \"tags\", \"for\", \"discovery\"]\n}\n\nThis provides users with proper attribution, documentation links, and helps with plugin discovery."
      }
    ],
    "best_practices": [
      "Always use ${CLAUDE_PLUGIN_ROOT} for intra-plugin path references to ensure portability",
      "Keep plugin.json minimal - rely on auto-discovery for standard directory layouts",
      "Use kebab-case consistently for all file and directory names",
      "Follow semantic versioning (MAJOR.MINOR.PATCH) for version field",
      "Place manifest in .claude-plugin/plugin.json, components at plugin root level",
      "Start with simple flat structure, reorganize into hierarchies only when needed",
      "Include descriptive metadata (description, author, keywords) for discoverability",
      "Document custom directory structures in README when deviating from defaults",
      "Test plugins on multiple systems to verify path portability",
      "Use progressive disclosure in skills: lean SKILL.md with detailed references/"
    ],
    "anti_patterns": [
      "Hardcoding absolute paths instead of using ${CLAUDE_PLUGIN_ROOT}",
      "Placing components inside .claude-plugin/ directory (should be at root)",
      "Using spaces or underscores in names instead of kebab-case",
      "Specifying custom paths in manifest when default directories would work",
      "Creating deeply nested directory structures prematurely",
      "Omitting version field making it hard to track changes",
      "Using vague names like 'utils' or 'misc' for components",
      "Mixing component types in single directory",
      "Forgetting SKILL.md filename requirement for skills (not README.md)",
      "Using relative paths without ./ prefix in manifest configuration"
    ],
    "faq": [
      {
        "question": "Where exactly should plugin.json be located?",
        "answer": "The manifest MUST be at .claude-plugin/plugin.json (relative to plugin root). This is the only location Claude Code recognizes. Components like commands/, agents/, skills/ go at the plugin root, NOT inside .claude-plugin/."
      },
      {
        "question": "Do I need to list all my commands in plugin.json?",
        "answer": "No! Claude Code auto-discovers all .md files in the commands/ directory. Only specify custom paths in the manifest if you're using non-standard locations in addition to the defaults."
      },
      {
        "question": "What's the difference between ${CLAUDE_PLUGIN_ROOT} and relative paths?",
        "answer": "${CLAUDE_PLUGIN_ROOT} is an environment variable that resolves to the plugin's installation directory at runtime. Use it for paths in hook commands, MCP args, and script references. In the manifest itself, use relative paths starting with ./ for component directories."
      },
      {
        "question": "Can I organize commands into subdirectories?",
        "answer": "Yes, but you need to explicitly list subdirectories in the manifest's commands field. Auto-discovery only works for .md files directly in commands/, not nested subdirectories."
      },
      {
        "question": "How do skills differ from agents?",
        "answer": "Skills are knowledge that Claude Code auto-activates based on task context. Agents are specialized subagents that users can invoke manually or Claude Code selects for specific tasks. Skills provide domain knowledge, agents provide specialized behaviors."
      },
      {
        "question": "What happens if two plugins have commands with the same name?",
        "answer": "Name conflicts cause errors. Use unique, descriptive names or consider command prefixes related to your plugin name to avoid collisions."
      },
      {
        "question": "Do I need all the directories (commands, agents, skills, hooks)?",
        "answer": "No! Only create directories for components your plugin actually uses. A minimal plugin might only have commands/. Add other directories as needed."
      },
      {
        "question": "How do I update my plugin after changes?",
        "answer": "Update the version field in plugin.json following semantic versioning. Changes take effect in the next Claude Code session - no restart required. For breaking changes, increment the major version."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "Claude Code installation",
        "Understanding of markdown and YAML frontmatter",
        "Basic JSON knowledge for manifest configuration",
        "Familiarity with command-line tools for testing"
      ],
      "permissions": [
        "File system write access to create plugin directories",
        "Ability to enable plugins in Claude Code settings"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "advanced-plugin.md",
          "type": "file",
          "path": "examples/advanced-plugin.md"
        },
        {
          "name": "minimal-plugin.md",
          "type": "file",
          "path": "examples/minimal-plugin.md"
        },
        {
          "name": "standard-plugin.md",
          "type": "file",
          "path": "examples/standard-plugin.md"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "component-patterns.md",
          "type": "file",
          "path": "references/component-patterns.md"
        },
        {
          "name": "manifest-reference.md",
          "type": "file",
          "path": "references/manifest-reference.md"
        }
      ]
    },
    {
      "name": "README.md",
      "type": "file",
      "path": "README.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}