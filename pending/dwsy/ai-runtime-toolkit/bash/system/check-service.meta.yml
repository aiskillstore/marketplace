tool_id: SERVICE-CHECK-001
tool_name: "服务健康检查器"

基本信息:
  语言: bash
  文件: check-service.sh
  复杂度: level-1
  创建日期: 2025-11-14
  作者: CodeConscious

用途分类:
  - MONITOR  # 监控诊断

功能描述:
  简介: "检查服务健康状态（HTTP/数据库/Redis）"
  详细: |
    支持多种服务类型的健康检查：
    - HTTP服务：检查 /health 端点
    - 数据库：PostgreSQL连接检查
    - Redis：连接和ping测试

使用场景:
  - "部署后验证服务是否正常启动"
  - "诊断服务不可访问问题"
  - "CI/CD流程中的健康检查"
  - "定期监控服务状态"

使用方法:
  命令: "bash check-service.sh [服务名] [检查类型] [超时时间]"
  参数:
    服务名: "要检查的服务名称（用于显示）"
    检查类型:
      - http: "HTTP健康检查"
      - db/database: "数据库连接检查"
      - redis: "Redis连接检查"
    超时时间: "秒（默认：5秒）"
  示例:
    - "检查HTTP服务: bash check-service.sh auth-service http"
    - "检查数据库: bash check-service.sh db-service db"
    - "检查Redis: bash check-service.sh cache redis"

依赖要求:
  系统命令:
    - curl: "HTTP客户端"
    - jq: "JSON解析（可选）"
    - pg_isready: "PostgreSQL客户端"
    - redis-cli: "Redis客户端"
  环境变量:
    - DB_HOST: "数据库主机（默认：localhost）"
    - DB_PORT: "数据库端口（默认：5432）"
    - DB_NAME: "数据库名"
    - DB_USER: "数据库用户"
    - REDIS_HOST: "Redis主机（默认：localhost）"
    - REDIS_PORT: "Redis端口（默认：6379）"

输入输出:
  输入:
    - 无（从环境变量读取配置）
  输出:
    - stdout: "人类可读的检查结果"
    - 退出码:
        - 0: 所有检查通过
        - 1: 检查失败
        - 其他: 参数错误

上次使用:
  时间: 2025-11-14 16:45:00
  用途: "验证auth-service修复后状态"
  结果: "服务健康，响应时间45ms"
  满意度: 0.9

相关工具:
  - 前置工具: 无
  - 互补工具:
      - toolkit/python/analysis/analyze_logs.py（详细日志分析）
      - toolkit/bash/system/check-disk.sh（磁盘空间检查）

维护记录:
  2025-11-14:
    - 初始创建
