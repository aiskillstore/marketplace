{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T08:36:32.294Z",
    "slug": "writing-hookify-rules",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/hookify/skills/writing-rules",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Writing Hookify Rules",
    "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
    "summary": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"confi...",
    "icon": "⚙️",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "MIT",
    "category": "development",
    "tags": [
      "hookify",
      "rules",
      "configuration",
      "monitoring",
      "patterns",
      "regex",
      "automation",
      "security",
      "best-practices"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill providing documentation and guidance for writing Hookify rules. Contains no executable code, only educational content about rule syntax and patterns.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 375,
    "audit_model": "claude",
    "audited_at": "2025-12-30T08:36:32.294Z"
  },
  "content": {
    "user_title": "Hookify Rule Writing Guide",
    "value_statement": "Learn to create custom Hookify rules that automatically monitor and control Claude Code's behavior by detecting patterns in commands, file edits, and user prompts.",
    "seo_keywords": [
      "hookify",
      "rules",
      "claude code",
      "automation",
      "monitoring",
      "regex patterns",
      "bash hooks",
      "file hooks",
      "security rules",
      "best practices"
    ],
    "actual_capabilities": [
      "Teaches YAML frontmatter structure for Hookify rules",
      "Explains event types: bash, file, stop, prompt, and all",
      "Provides regex pattern writing guidance with examples",
      "Documents condition operators: regex_match, contains, equals, not_contains, starts_with, ends_with",
      "Shows how to create warn vs block actions",
      "Includes complete working examples for common scenarios",
      "Explains file organization and naming conventions",
      "Provides testing and debugging tips for regex patterns"
    ],
    "limitations": [
      "Documentation only - does not create rules automatically",
      "Requires user to understand basic regex syntax",
      "Does not validate rule syntax or test patterns",
      "Assumes familiarity with YAML format",
      "Does not provide project-specific rule recommendations"
    ],
    "use_cases": [
      {
        "title": "Prevent Dangerous Commands",
        "description": "Create rules that block or warn about dangerous bash commands like 'rm -rf', 'chmod 777', or 'sudo' operations before they execute",
        "target_user": "DevOps engineers and security-conscious developers"
      },
      {
        "title": "Enforce Code Quality",
        "description": "Set up rules to detect and warn about problematic code patterns like console.log, eval(), or innerHTML in production code",
        "target_user": "Development teams maintaining code quality standards"
      },
      {
        "title": "Protect Sensitive Files",
        "description": "Configure alerts when editing sensitive files like .env, credentials, or SSH keys to prevent accidental commits",
        "target_user": "Security teams and individual developers"
      },
      {
        "title": "Completion Checklists",
        "description": "Create stop event rules that remind Claude to verify tests, builds, and documentation before completing tasks",
        "target_user": "Teams enforcing development workflows"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a dangerous command blocker",
        "prompt": "Help me create a hookify rule that blocks dangerous rm commands",
        "scenario": "When you want to prevent accidental deletion of important files"
      },
      {
        "title": "Warn about console.log",
        "prompt": "Create a hookify rule to warn me when adding console.log to TypeScript files",
        "scenario": "When enforcing clean code practices in a TypeScript project"
      },
      {
        "title": "Protect environment files",
        "prompt": "Write a hookify rule that warns when editing .env files with API keys",
        "scenario": "When preventing accidental commits of sensitive credentials"
      },
      {
        "title": "Require test completion",
        "prompt": "Add a hookify rule that reminds Claude to run tests before stopping",
        "scenario": "When enforcing test-driven development practices"
      }
    ],
    "output_examples": [
      {
        "input": "User asks: 'Help me create a hookify rule that blocks dangerous rm commands'",
        "output": "The skill provides step-by-step guidance to create a `.claude/hookify.dangerous-rm.local.md` file with appropriate YAML frontmatter (event: bash, pattern: rm\\s+-rf, action: block) and a descriptive warning message explaining why the command is dangerous"
      },
      {
        "input": "User asks: 'How do I write a hookify rule for multiple conditions?'",
        "output": "The skill explains the advanced format using the conditions array, showing how to combine multiple field checks (like file_path and new_text) that all must match for the rule to trigger"
      }
    ],
    "best_practices": [
      "Use kebab-case naming starting with action verbs (warn-dangerous-rm)",
      "Store rules in .claude/ directory with .local.md suffix",
      "Add .claude/*.local.md to .gitignore for local-only rules",
      "Test regex patterns using Python or online tools before deployment",
      "Write clear, actionable messages that explain why something is problematic and suggest alternatives",
      "Use unquoted YAML patterns to avoid double-escaping backslashes",
      "Start with simple pattern format before moving to complex conditions",
      "Set enabled: false instead of deleting rules to temporarily disable them"
    ],
    "anti_patterns": [
      "Using overly broad patterns that match unintended content (e.g., 'log' matching 'login', 'dialog')",
      "Creating overly specific patterns that miss common variations",
      "Forgetting to escape special regex characters like dots and parentheses",
      "Using non-descriptive rule names like 'rule1' or 'test'",
      "Putting rules outside the .claude/ directory",
      "Using double backslashes in unquoted YAML patterns",
      "Writing vague warning messages without actionable guidance"
    ],
    "faq": [
      {
        "question": "Where should I store Hookify rules?",
        "answer": "All rules should be stored in the .claude/ directory with the naming pattern hookify.{descriptive-name}.local.md. Add .claude/*.local.md to your .gitignore to keep them local."
      },
      {
        "question": "What's the difference between warn and block actions?",
        "answer": "The 'warn' action shows a message but allows the operation to proceed, while 'block' prevents the operation entirely (for PreToolUse events) or stops the session (for Stop events)."
      },
      {
        "question": "How do I test my regex patterns?",
        "answer": "Use Python's regex module (python3 -c \"import re; print(re.search(r'pattern', 'text'))\") or online regex testers like regex101.com with Python flavor selected."
      },
      {
        "question": "When do rule changes take effect?",
        "answer": "Rules are read dynamically, so changes take effect on the next tool use. No restart required."
      },
      {
        "question": "Can I have multiple conditions in a rule?",
        "answer": "Yes, use the conditions array format with field, operator, and pattern for each condition. All conditions must match for the rule to trigger."
      },
      {
        "question": "What event types are available?",
        "answer": "Five event types: 'bash' for commands, 'file' for edits, 'stop' for completion checks, 'prompt' for user input, and 'all' for all events."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "Hookify plugin installed in Claude Code"
      ],
      "permissions": [
        "File system write access to .claude/ directory"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}