{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-23T07:06:53.288Z",
    "slug": "expo-expo-api-routes",
    "source_url": "https://github.com/expo/skills/tree/main/plugins/expo-app-design/skills/expo-api-routes/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "4b0bf5c1861534b07e4718cd4096cc4f6f5d9a3de7f2c89c09d3df6a2ddb0e0f",
    "tree_hash": "8b4ce4d0ab40f0633dfc202c2b91bcf4c6d318393634a37960c37b1c2f9d7893"
  },
  "skill": {
    "name": "expo-api-routes",
    "description": "Guidelines for creating API routes in Expo Router with EAS Hosting",
    "summary": "Create server-side API endpoints for Expo apps using Expo Router and EAS Hosting",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "expo",
    "license": "MIT",
    "tags": [
      "expo",
      "api-routes",
      "eas-hosting",
      "cloudflare-workers",
      "serverless"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "low",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All static findings are FALSE POSITIVES. The skill is educational documentation teaching secure API route development patterns. Detected patterns (environment variable access for secrets, network calls to external APIs, file paths) are legitimate documentation examples demonstrating proper security practices.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 139,
            "line_end": 153
          },
          {
            "file": "SKILL.md",
            "line_start": 264,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 352,
            "line_end": 357
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 132,
            "line_end": 143
          },
          {
            "file": "SKILL.md",
            "line_start": 289,
            "line_end": 292
          },
          {
            "file": "SKILL.md",
            "line_start": 353,
            "line_end": 353
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 369,
    "audit_model": "claude",
    "audited_at": "2026-01-23T07:06:53.288Z",
    "risk_factors": [
      "network",
      "env_access"
    ]
  },
  "content": {
    "user_title": "Create API Routes for Expo Apps",
    "value_statement": "Expo apps need server-side endpoints to securely handle API keys, database operations, and third-party API proxies. This skill provides guidelines for creating API routes in Expo Router with EAS Hosting on Cloudflare Workers.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "Expo API routes",
      "Expo Router",
      "EAS Hosting",
      "Cloudflare Workers",
      "serverless API",
      "Expo server-side",
      "API endpoints"
    ],
    "actual_capabilities": [
      "Create API routes with GET, POST, PUT, DELETE methods in Expo Router",
      "Handle dynamic route parameters and query strings",
      "Manage server-side environment variables for API keys and secrets",
      "Implement CORS headers and authentication middleware",
      "Deploy API routes to EAS Hosting on Cloudflare Workers",
      "Call external APIs from server-side endpoints with proper secret handling"
    ],
    "limitations": [
      "No Node.js filesystem access on EAS Hosting (Cloudflare Workers limitation)",
      "Limited execution time (30 second timeout for CPU-intensive tasks)",
      "No native Node modules - must use Web APIs or polyfills",
      "WebSockets require Durable Objects configuration"
    ],
    "use_cases": [
      {
        "title": "Build a proxy for OpenAI API",
        "description": "Create a server-side endpoint that holds the OpenAI API key securely and forwards requests, keeping credentials away from mobile clients.",
        "target_user": "Mobile developers building AI-powered apps"
      },
      {
        "title": "Create a user authentication endpoint",
        "description": "Build API routes that validate tokens, check permissions, and return user data from a database, exposing only what the client needs.",
        "target_user": "Full-stack mobile developers"
      },
      {
        "title": "Set up webhook handlers",
        "description": "Create endpoints to receive callbacks from services like Stripe for payment processing or GitHub for repository events.",
        "target_user": "Developers integrating payment or event-driven features"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic API route creation",
        "prompt": "Create an API route at /api/users that returns a list of users and accepts POST requests to create new users. Use TypeScript and follow Expo Router conventions.",
        "scenario": "Need to add user management endpoints"
      },
      {
        "title": "API route with authentication",
        "prompt": "Create a protected API route at /api/profile that requires a Bearer token in the Authorization header and returns the authenticated user's profile data.",
        "scenario": "Adding authentication to API endpoints"
      },
      {
        "title": "External API proxy",
        "prompt": "Create an API route that calls the OpenAI API using an environment variable for the API key. The route should accept a prompt and return the AI response.",
        "scenario": "Proxying external API calls with secret protection"
      },
      {
        "title": "Database integration",
        "prompt": "Create an API route that connects to Turso (libSQL) database using environment variables for TURSO_URL and TURSO_AUTH_TOKEN. Implement a GET /api/items endpoint that queries items table.",
        "scenario": "Connecting to edge databases"
      }
    ],
    "output_examples": [
      {
        "input": "Create a hello world API route",
        "output": "```ts\n// app/api/hello+api.ts\nexport function GET(request: Request) {\n  return Response.json({ message: \"Hello from Expo!\" });\n}\n```"
      },
      {
        "input": "Create an API route that uses environment variables",
        "output": "```ts\n// app/api/data+api.ts\nexport async function GET(request: Request) {\n  const apiKey = process.env.API_KEY;\n  const response = await fetch(\"https://api.example.com/data\", {\n    headers: { Authorization: `Bearer ${apiKey}` }\n  });\n  return Response.json(await response.json());\n}\n```"
      }
    ],
    "best_practices": [
      "Never expose API keys or secrets in client code - always use server-side environment variables",
      "Validate and sanitize all user input before processing or database operations",
      "Use proper HTTP status codes (200, 201, 400, 401, 404, 500) for clear error communication"
    ],
    "anti_patterns": [
      "Hardcoding API keys or secrets directly in source code",
      "Returning raw database errors to clients - always sanitize error messages",
      "Creating catch-all endpoints that handle too many unrelated operations"
    ],
    "faq": [
      {
        "question": "How do API routes differ from regular fetch calls?",
        "answer": "API routes run server-side on Cloudflare Workers, giving you access to environment variables and secrets that clients cannot see. Use them when you need to hide API keys or perform privileged operations."
      },
      {
        "question": "Can I use any Node.js module in API routes?",
        "answer": "No. EAS Hosting runs on Cloudflare Workers which uses Web APIs instead of Node.js. Use fetch instead of node-fetch, crypto.subtle instead of Node crypto, and cloud databases instead of local files."
      },
      {
        "question": "How do I test API routes locally?",
        "answer": "Run 'npx expo serve' to start a local development server with full API route support. Test endpoints using curl or Postman at http://localhost:8081/api/your-route."
      },
      {
        "question": "How do I deploy API routes to production?",
        "answer": "Run 'eas deploy' to build and deploy your API routes to EAS Hosting. Set production environment variables using 'eas env:create' or the Expo dashboard."
      },
      {
        "question": "What databases work with EAS Hosting?",
        "answer": "Use cloud databases like Cloudflare D1, Turso, PlanetScale, Supabase, or Neon. The filesystem is unavailable on Cloudflare Workers, so local SQLite files will not work."
      },
      {
        "question": "How do I handle CORS in API routes?",
        "answer": "Add Access-Control headers to your responses. Include an OPTIONS handler for preflight requests. Be specific with allowed origins instead of using wildcards when possible."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 369
    }
  ]
}
