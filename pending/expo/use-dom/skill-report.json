{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-23T08:08:53.438Z",
    "slug": "expo-use-dom",
    "source_url": "https://github.com/expo/skills/tree/main/plugins/expo-app-design/skills/use-dom/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "bf32c08340f22f581c4b01e73d0960eff3d3d4278c68b91b8751c2b55df01407",
    "tree_hash": "77b56e964db680ac3efc8e11bba139d199285b08ecc5d94a6c433069537251d3"
  },
  "skill": {
    "name": "use-dom",
    "description": "Use Expo DOM components to run web code in a webview on native and as-is on web. Migrate web code to native incrementally.",
    "summary": "Run web code in Expo webviews and render as-is on web. Migrate existing React web components to native apps.",
    "icon": "üåê",
    "version": "1.0.0",
    "author": "expo",
    "license": "MIT",
    "tags": [
      "expo",
      "react-native",
      "webview",
      "dom",
      "web-components"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "All 63 static findings are false positives. Detected patterns are markdown formatting (backticks for inline code) and TypeScript type annotations (import() for type references) in documentation examples. No executable code with security implications present.",
    "risk_factor_evidence": [
      {
        "factor": "scripts",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 43,
            "line_end": 43
          },
          {
            "file": "SKILL.md",
            "line_start": 75,
            "line_end": 75
          },
          {
            "file": "SKILL.md",
            "line_start": 140,
            "line_end": 140
          },
          {
            "file": "SKILL.md",
            "line_start": 168,
            "line_end": 168
          },
          {
            "file": "SKILL.md",
            "line_start": 195,
            "line_end": 195
          },
          {
            "file": "SKILL.md",
            "line_start": 224,
            "line_end": 224
          },
          {
            "file": "SKILL.md",
            "line_start": 253,
            "line_end": 253
          },
          {
            "file": "SKILL.md",
            "line_start": 275,
            "line_end": 275
          },
          {
            "file": "SKILL.md",
            "line_start": 321,
            "line_end": 321
          },
          {
            "file": "SKILL.md",
            "line_start": 346,
            "line_end": 346
          },
          {
            "file": "SKILL.md",
            "line_start": 365,
            "line_end": 365
          }
        ]
      },
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 10,
            "line_end": 10
          },
          {
            "file": "SKILL.md",
            "line_start": 29,
            "line_end": 29
          },
          {
            "file": "SKILL.md",
            "line_start": 33,
            "line_end": 33
          },
          {
            "file": "SKILL.md",
            "line_start": 35,
            "line_end": 56
          },
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 60
          },
          {
            "file": "SKILL.md",
            "line_start": 60,
            "line_end": 66
          },
          {
            "file": "SKILL.md",
            "line_start": 66,
            "line_end": 68
          },
          {
            "file": "SKILL.md",
            "line_start": 68,
            "line_end": 70
          },
          {
            "file": "SKILL.md",
            "line_start": 70,
            "line_end": 81
          },
          {
            "file": "SKILL.md",
            "line_start": 81,
            "line_end": 83
          },
          {
            "file": "SKILL.md",
            "line_start": 83,
            "line_end": 85
          },
          {
            "file": "SKILL.md",
            "line_start": 85,
            "line_end": 103
          },
          {
            "file": "SKILL.md",
            "line_start": 103,
            "line_end": 109
          },
          {
            "file": "SKILL.md",
            "line_start": 109,
            "line_end": 128
          },
          {
            "file": "SKILL.md",
            "line_start": 128,
            "line_end": 130
          },
          {
            "file": "SKILL.md",
            "line_start": 130,
            "line_end": 152
          },
          {
            "file": "SKILL.md",
            "line_start": 152,
            "line_end": 158
          },
          {
            "file": "SKILL.md",
            "line_start": 158,
            "line_end": 178
          },
          {
            "file": "SKILL.md",
            "line_start": 178,
            "line_end": 180
          },
          {
            "file": "SKILL.md",
            "line_start": 180,
            "line_end": 209
          },
          {
            "file": "SKILL.md",
            "line_start": 209,
            "line_end": 215
          },
          {
            "file": "SKILL.md",
            "line_start": 215,
            "line_end": 232
          },
          {
            "file": "SKILL.md",
            "line_start": 232,
            "line_end": 236
          },
          {
            "file": "SKILL.md",
            "line_start": 236,
            "line_end": 261
          },
          {
            "file": "SKILL.md",
            "line_start": 261,
            "line_end": 265
          },
          {
            "file": "SKILL.md",
            "line_start": 265,
            "line_end": 267
          },
          {
            "file": "SKILL.md",
            "line_start": 267,
            "line_end": 286
          },
          {
            "file": "SKILL.md",
            "line_start": 286,
            "line_end": 292
          },
          {
            "file": "SKILL.md",
            "line_start": 292,
            "line_end": 293
          },
          {
            "file": "SKILL.md",
            "line_start": 293,
            "line_end": 294
          },
          {
            "file": "SKILL.md",
            "line_start": 294,
            "line_end": 295
          },
          {
            "file": "SKILL.md",
            "line_start": 295,
            "line_end": 296
          },
          {
            "file": "SKILL.md",
            "line_start": 296,
            "line_end": 297
          },
          {
            "file": "SKILL.md",
            "line_start": 297,
            "line_end": 301
          },
          {
            "file": "SKILL.md",
            "line_start": 301,
            "line_end": 312
          },
          {
            "file": "SKILL.md",
            "line_start": 312,
            "line_end": 314
          },
          {
            "file": "SKILL.md",
            "line_start": 314,
            "line_end": 332
          },
          {
            "file": "SKILL.md",
            "line_start": 332,
            "line_end": 338
          },
          {
            "file": "SKILL.md",
            "line_start": 338,
            "line_end": 350
          },
          {
            "file": "SKILL.md",
            "line_start": 350,
            "line_end": 356
          },
          {
            "file": "SKILL.md",
            "line_start": 356,
            "line_end": 369
          },
          {
            "file": "SKILL.md",
            "line_start": 369,
            "line_end": 375
          },
          {
            "file": "SKILL.md",
            "line_start": 375,
            "line_end": 398
          },
          {
            "file": "SKILL.md",
            "line_start": 398,
            "line_end": 408
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 360,
            "line_end": 360
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 418,
    "audit_model": "claude",
    "audited_at": "2026-01-23T08:08:53.438Z",
    "risk_factors": []
  },
  "content": {
    "user_title": "Run Web Code in Expo Webviews",
    "value_statement": "Web-only React libraries like charts, syntax highlighters, and rich text editors cannot run directly in React Native. This skill provides the Expo DOM component pattern to run web code in a webview on native devices while rendering as-is on web, enabling incremental migration from web to native.",
    "seo_keywords": [
      "Expo DOM components",
      "React Native webview",
      "Expo web code",
      "web libraries in Expo",
      "Claude",
      "Codex",
      "Claude Code",
      "expo-router",
      "React web to native",
      "webview in Expo"
    ],
    "actual_capabilities": [
      "Create DOM components with the 'use dom' directive",
      "Use web-only libraries like recharts and react-syntax-highlighter",
      "Pass native functions as props to webview components",
      "Configure webview behavior with the dom prop",
      "Handle CSS styling in isolated webview context",
      "Integrate Expo Router inside DOM components"
    ],
    "limitations": [
      "Webviews add overhead - not suitable for performance-critical native UI",
      "Layout route files cannot use DOM components",
      "Router hooks requiring synchronous access must be passed as props",
      "Webview has isolated JavaScript context - cannot share state with native"
    ],
    "use_cases": [
      {
        "title": "Add Charts and Data Visualization",
        "description": "Use charting libraries like recharts or chart.js to display data visualizations that require DOM APIs not available in React Native.",
        "target_user": " Developers building data-heavy Expo apps"
      },
      {
        "title": "Migrate React Web Components",
        "description": "Bring existing React components from a web project into an Expo app without rewriting, running them in a webview on native.",
        "target_user": "Teams migrating web apps to mobile"
      },
      {
        "title": "Display Syntax-Highlighted Code",
        "description": "Show code blocks with syntax highlighting using libraries like react-syntax-highlighter that depend on DOM rendering.",
        "target_user": "Documentation and learning app developers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic DOM Component",
        "prompt": "Create a DOM component called 'Chart' that uses recharts to display a line chart. The component should accept a 'data' prop with an array of { name: string; value: number } objects. Include proper TypeScript typing for the dom prop.",
        "scenario": "Creating a simple DOM component with web library"
      },
      {
        "title": "Native-Web Communication",
        "prompt": "Create a DOM component that can call native functions. The component should have a 'onSubmit' prop that is an async function taking a string and returning a boolean. Show how to pass this from the native parent.",
        "scenario": "Building a form in webview that communicates with native code"
      },
      {
        "title": "CSS Styling in DOM",
        "prompt": "Create a DOM component that uses CSS for styling. Show how to import a CSS file and apply styles to elements. Also show how to use inline styles as an alternative.",
        "scenario": "Applying CSS styles to DOM components"
      },
      {
        "title": "Router Integration",
        "prompt": "Create a DOM component that uses expo-router for navigation. Show how to pass route parameters from the native parent since useLocalSearchParams does not work directly in DOM components.",
        "scenario": "Adding navigation to DOM components"
      }
    ],
    "output_examples": [
      {
        "input": "Create a DOM component that displays a chart using recharts",
        "output": [
          "// components/Chart.tsx",
          "\"use dom\";",
          "",
          "import { LineChart, Line, XAxis, YAxis, Tooltip } from 'recharts';",
          "",
          "interface Props {",
          "  data: Array<{ name: string; value: number }>;",
          "  dom?: import('expo/dom').DOMProps;",
          "}",
          "",
          "export default function Chart({ data }: Props) {",
          "  return (",
          "    <LineChart width={400} height={300} data={data}>",
          "      <XAxis dataKey=\"name\" />",
          "      <YAxis />",
          "      <Tooltip />",
          "      <Line type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" />",
          "    </LineChart>",
          "  );",
          "}"
        ]
      },
      {
        "input": "How do I pass data from native to a DOM component?",
        "output": "Pass data as serializable props (strings, numbers, booleans, arrays, plain objects). The DOM component receives these props and can use them directly. For functions, pass async functions as props to enable communication back to native."
      },
      {
        "input": "What is the dom prop for?",
        "output": "The dom prop configures the webview behavior. Common options include: scrollEnabled (disable body scrolling), contentInsetAdjustmentBehavior (control safe area insets), and style (set explicit dimensions). On web, this prop is ignored."
      }
    ],
    "best_practices": [
      "Keep DOM components focused on specific functionality rather than building entire screens",
      "Use native components for navigation chrome and pass route params as props to DOM components",
      "Bundle assets with require() instead of using the public directory for better bundling",
      "Test DOM components on all target platforms since web and native webviews may render slightly differently"
    ],
    "anti_patterns": [
      "Putting entire app screens inside webviews - this defeats the purpose of React Native",
      "Forgetting the 'use dom' directive - the component will not work without it",
      "Using local module APIs inside DOM components - router hooks like useLocalSearchParams require native access",
      "Sharing state between native and webview - they have isolated JavaScript contexts"
    ],
    "faq": [
      {
        "question": "What is the 'use dom' directive?",
        "answer": "The 'use dom' directive at the top of a file tells Expo to treat that component as a DOM component. It must be the first statement in the file and the component must be in its own file."
      },
      {
        "question": "Can I use any npm package in a DOM component?",
        "answer": "Most npm packages work if they are compatible with the browser environment. Packages that depend on Node.js APIs or native modules will not work. Libraries like recharts, react-syntax-highlighter, and moment work well."
      },
      {
        "question": "How do I communicate between the DOM component and native code?",
        "answer": "Pass async functions as props to the DOM component. The webview can call these functions to trigger native behavior like showing alerts, saving data, or navigating."
      },
      {
        "question": "What is the difference between web and native rendering?",
        "answer": "On native (iOS/Android), the component renders inside a webview. On web, it renders directly without a webview wrapper. The dom prop is ignored on web."
      },
      {
        "question": "Can I use React Native components alongside DOM components?",
        "answer": "Yes. Import and use DOM components like any other component. They can be mixed freely with View, Text, and other React Native components in the same screen."
      },
      {
        "question": "Why is the dom prop required?",
        "answer": "The dom prop provides type information for the webview configuration and is required for TypeScript support. Even if you do not use any options, you must type the prop for proper IDE support."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 418
    }
  ]
}
