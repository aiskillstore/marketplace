{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:58:36.993Z",
    "slug": "writing-hookify-rules",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/hookify/skills/writing-rules",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Writing Hookify Rules",
    "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
    "summary": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"confi...",
    "icon": "⚠️",
    "version": "0.1.0",
    "author": null,
    "license": "MIT",
    "category": "automation",
    "tags": [
      "hookify",
      "rules",
      "safety",
      "monitoring",
      "regex",
      "patterns",
      "guardrails",
      "tooling"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Anthropic skill that provides documentation and guidance for writing Hookify rules. It contains no executable code, only markdown documentation with examples and patterns.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 375,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:58:36.992Z"
  },
  "content": {
    "user_title": "Writing Hookify Rules",
    "value_statement": "Learn to create custom Hookify rules that monitor Claude Code's behavior and enforce project-specific safety guardrails through pattern matching and automated warnings.",
    "seo_keywords": [
      "hookify",
      "rules",
      "claude code safety",
      "regex patterns",
      "tool monitoring",
      "bash guards",
      "file editing rules",
      "code safety",
      "guardrails",
      "pattern matching"
    ],
    "actual_capabilities": [
      "Teaches how to create Hookify rule files with YAML frontmatter and markdown messages",
      "Explains event types: bash, file, stop, prompt, and all",
      "Documents pattern matching with regex and multiple conditions",
      "Provides examples for common use cases like dangerous commands and console.log detection",
      "Covers action types: warn and block",
      "Explains how to test and refine rules dynamically"
    ],
    "limitations": [
      "Documentation only - does not create or execute rules automatically",
      "Requires understanding of regex patterns for advanced rules",
      "Users must manually create .local.md files in .claude/ directory",
      "Rules apply only to Claude Code tool usage, not general code execution"
    ],
    "use_cases": [
      {
        "title": "Prevent Dangerous Commands",
        "description": "Block destructive bash commands like rm -rf or chmod 777 before they execute",
        "target_user": "Developers working with sensitive systems or production environments"
      },
      {
        "title": "Enforce Code Quality",
        "description": "Warn when console.log, debugger, or other debugging code is added to files",
        "target_user": "Teams maintaining production codebases with quality standards"
      },
      {
        "title": "Protect Sensitive Files",
        "description": "Alert when .env files, credentials, or API keys are being modified",
        "target_user": "Security-conscious developers handling secrets and configurations"
      },
      {
        "title": "Completion Checklists",
        "description": "Remind Claude to run tests, update docs, or verify builds before stopping",
        "target_user": "Teams with required pre-completion steps and processes"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a Dangerous Command Rule",
        "prompt": "Create a hookify rule that blocks dangerous rm commands with -rf flags",
        "scenario": "When you want to prevent accidental deletion of important files"
      },
      {
        "title": "Warn About Debug Code",
        "prompt": "Write a hookify rule to warn me when console.log is added to TypeScript files",
        "scenario": "When maintaining code quality standards in production code"
      },
      {
        "title": "Protect Environment Files",
        "prompt": "Add a hookify rule that warns when .env files are edited and reminds me to check .gitignore",
        "scenario": "When working with sensitive configuration files"
      },
      {
        "title": "Pre-Completion Checklist",
        "prompt": "Create a hookify rule that shows a checklist before Claude stops, reminding to run tests and update docs",
        "scenario": "When you have required steps before completing tasks"
      }
    ],
    "output_examples": [
      {
        "input": "Create a hookify rule that blocks rm -rf commands",
        "output": "Creates .claude/hookify.dangerous-rm.local.md with:\n---\nname: dangerous-rm\nenabled: true\nevent: bash\naction: block\npattern: rm\\s+-rf\n---\n⚠️ **Dangerous rm command blocked!**\n\nThe command contains `rm -rf` which can permanently delete files.\n\n**Safer alternatives:**\n- Review files first with `ls`\n- Use trash/recycle bin utilities\n- Remove specific files individually"
      },
      {
        "input": "Write a hookify rule to warn about console.log in JavaScript files",
        "output": "Creates .claude/hookify.console-log.local.md with:\n---\nname: console-log-warning\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.(js|ts)x?$\n  - field: new_text\n    operator: contains\n    pattern: console.log\n---\n⚠️ **Console.log detected!**\n\nYou're adding console.log to production code. Consider using a proper logging library or removing before committing."
      }
    ],
    "best_practices": [
      "Use descriptive, action-oriented rule names with kebab-case (warn-dangerous-rm, block-console-log)",
      "Store all rules in .claude/ directory with .local.md extension",
      "Add .claude/*.local.md to .gitignore to keep rules local to your machine",
      "Test regex patterns using Python's re module or online regex testers before deploying",
      "Use unquoted YAML patterns to avoid double-backslash escaping issues",
      "Write clear, helpful messages explaining what was detected, why it matters, and alternatives",
      "Start with warn action, only use block for truly dangerous operations",
      "Use conditions array for complex multi-field matching",
      "Test rules immediately after creation - they take effect on next tool use"
    ],
    "anti_patterns": [
      "Creating overly broad patterns that match unintended content (e.g., 'log' matching 'login', 'dialog')",
      "Using overly specific patterns that miss variations (e.g., exact paths instead of flexible patterns)",
      "Forgetting to escape special regex characters like . ( ) [ ]",
      "Using double-backslashes in unquoted YAML (only needed in quoted strings)",
      "Creating generic rule names like 'rule1' or 'check' instead of descriptive names",
      "Blocking too many operations without providing helpful alternatives",
      "Forgetting to set enabled: true when creating new rules",
      "Not organizing rules by purpose or category in file names"
    ],
    "faq": [
      {
        "question": "Where should I create Hookify rule files?",
        "answer": "Create all rule files in the .claude/ directory at your project root, using the naming pattern hookify.{descriptive-name}.local.md"
      },
      {
        "question": "Do I need to restart Claude Code after creating a rule?",
        "answer": "No, rules are read dynamically on each tool use. Changes take effect immediately on the next matching tool invocation."
      },
      {
        "question": "What's the difference between warn and block actions?",
        "answer": "warn shows the message but allows the operation to continue, while block prevents the operation entirely for PreToolUse events or stops the session for Stop events."
      },
      {
        "question": "Can I use multiple conditions in a rule?",
        "answer": "Yes, use the conditions array instead of a single pattern. All conditions must match for the rule to trigger."
      },
      {
        "question": "How do I test my regex pattern before deploying?",
        "answer": "Use Python's re module: python3 -c \"import re; print(re.search(r'your_pattern', 'test text'))\" or online regex testers like regex101.com with Python flavor."
      },
      {
        "question": "What fields can I match against for file events?",
        "answer": "For file events you can match against: file_path, new_text, old_text, and content fields using conditions."
      },
      {
        "question": "Should I commit Hookify rules to version control?",
        "answer": "Rules ending in .local.md are intended to be local to your machine. Add .claude/*.local.md to .gitignore. Share team-wide rules without the .local suffix if desired."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "hookify plugin",
        "claude-code"
      ],
      "permissions": [
        "file system read access to .claude/ directory"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}