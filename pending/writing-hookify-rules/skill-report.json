{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:12:22.780Z",
    "slug": "writing-hookify-rules",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/hookify/skills/writing-rules",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Writing Hookify Rules",
    "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
    "summary": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"confi...",
    "icon": "⚙️",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "MIT",
    "category": "development",
    "tags": [
      "hookify",
      "rules",
      "patterns",
      "automation",
      "validation",
      "security",
      "code-quality",
      "configuration"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Educational documentation skill from Anthropic with no code execution. Provides comprehensive guidance on writing Hookify rules for Claude Code.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 375,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:12:22.780Z"
  },
  "content": {
    "user_title": "Hookify Rule Writing Guide",
    "value_statement": "Learn to create custom Hookify rules that monitor and control Claude Code's behavior with pattern matching and automated checks.",
    "seo_keywords": [
      "hookify",
      "claude code rules",
      "pattern matching",
      "code validation",
      "automation rules",
      "regex patterns",
      "hook configuration",
      "tool monitoring"
    ],
    "actual_capabilities": [
      "Comprehensive guide to Hookify rule syntax and structure",
      "Explains YAML frontmatter configuration for rules",
      "Covers all event types: bash, file, stop, prompt, and all",
      "Provides regex pattern writing tips and common patterns",
      "Includes advanced multi-condition rule syntax",
      "Documents all operators: regex_match, contains, equals, not_contains, starts_with, ends_with",
      "Shows how to match different fields: command, file_path, new_text, old_text, content, user_prompt",
      "Explains warn vs block actions for rule enforcement",
      "Provides file organization and naming conventions",
      "Includes real-world examples for dangerous commands, console.log, sensitive files"
    ],
    "limitations": [
      "Documentation only - does not create rules automatically",
      "Requires manual rule file creation in .claude/ directory",
      "Regex patterns must be tested separately",
      "Limited to Hookify's supported event types and operators",
      "Rules only work within Claude Code environment"
    ],
    "use_cases": [
      {
        "title": "Prevent Dangerous Commands",
        "description": "Create rules to block or warn about dangerous bash commands like rm -rf, chmod 777, or sudo operations before they execute",
        "target_user": "DevOps engineers and system administrators"
      },
      {
        "title": "Code Quality Enforcement",
        "description": "Set up rules to detect and warn about problematic code patterns like console.log, eval(), innerHTML, or debugger statements in production code",
        "target_user": "Software developers and team leads"
      },
      {
        "title": "Sensitive File Protection",
        "description": "Monitor edits to sensitive files like .env, credentials, or API keys to ensure they're handled securely and not committed",
        "target_user": "Security engineers and developers"
      },
      {
        "title": "Completion Checklists",
        "description": "Create stop event rules that remind Claude to run tests, build the project, or update documentation before completing tasks",
        "target_user": "Project managers and quality assurance teams"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create Dangerous Command Blocker",
        "prompt": "Create a hookify rule that blocks dangerous rm -rf commands and warns me before they execute",
        "scenario": "When you want to prevent accidental file deletion"
      },
      {
        "title": "Console.log Warning",
        "prompt": "Write a hookify rule to warn me whenever console.log is added to TypeScript files",
        "scenario": "When maintaining code quality standards"
      },
      {
        "title": "Environment File Protection",
        "prompt": "Add a hookify rule to warn when editing .env files and remind me to check .gitignore",
        "scenario": "When protecting sensitive configuration data"
      },
      {
        "title": "Pre-completion Checklist",
        "prompt": "Create a hookify rule that shows a checklist before Claude stops, reminding to run tests and update docs",
        "scenario": "When enforcing development workflows"
      }
    ],
    "output_examples": [
      {
        "input": "Create a hookify rule that blocks dangerous rm commands",
        "output": "Creates .claude/hookify.dangerous-rm.local.md with:\n---\nname: dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\naction: block\n---\n\n⚠️ **Dangerous rm -rf command detected!**\n\nThis command can permanently delete files.\n\n**Alternatives:**\n- Use rm without -rf for safer deletion\n- Verify paths carefully\n- Use trash/recycle bin tools"
      },
      {
        "input": "Write a rule to warn about console.log in JavaScript files",
        "output": "Creates .claude/hookify.console-log.local.md with multi-condition pattern matching file_path (*.js) and new_text (console.log) with warning message about debug logs in production"
      }
    ],
    "best_practices": [
      "Use descriptive, action-oriented rule names with kebab-case (warn-dangerous-rm, block-console-log)",
      "Store rules in .claude/ directory with naming pattern: hookify.{name}.local.md",
      "Add .claude/*.local.md to .gitignore to keep rules local",
      "Test regex patterns before deploying using Python or online testers",
      "Use unquoted patterns in YAML to avoid double-backslash escaping issues",
      "Write clear, actionable messages that explain the issue and suggest alternatives",
      "Start with warn action, only use block for truly dangerous operations",
      "Use multi-condition rules for precise matching (e.g., file type + content pattern)",
      "Leverage specific fields (file_path, new_text) rather than overly broad patterns",
      "Set enabled: false to temporarily disable rules without deleting them"
    ],
    "anti_patterns": [
      "Using overly broad patterns that match unintended content (e.g., 'log' matching 'dialog')",
      "Creating rules without testing regex patterns first",
      "Using generic names like 'rule1' instead of descriptive identifiers",
      "Forgetting to escape special regex characters like dots, parentheses, brackets",
      "Blocking too aggressively - use warn first, block only when necessary",
      "Not providing actionable alternatives in rule messages",
      "Storing rules outside .claude/ directory or with incorrect naming",
      "Using overly specific patterns that miss variations (e.g., exact paths instead of patterns)"
    ],
    "faq": [
      {
        "question": "Where should I store Hookify rule files?",
        "answer": "All rules should be stored in the .claude/ directory in your project root with the naming pattern: hookify.{descriptive-name}.local.md. Add .claude/*.local.md to your .gitignore to keep rules local."
      },
      {
        "question": "What's the difference between warn and block actions?",
        "answer": "The 'warn' action shows a message to Claude but allows the operation to proceed (default behavior). The 'block' action prevents the operation entirely for PreToolUse events or stops the session for Stop events. Use warn for guidance, block for enforcement."
      },
      {
        "question": "When do rule changes take effect?",
        "answer": "Rules are read dynamically, so changes take effect immediately on the next tool use. You don't need to restart Claude Code when creating, editing, or disabling rules."
      },
      {
        "question": "How do I write patterns that match multiple conditions?",
        "answer": "Use the advanced format with a 'conditions' array. Each condition specifies a field, operator, and pattern. All conditions must match for the rule to trigger. Example: match both file_path ending in .ts AND new_text containing console.log."
      },
      {
        "question": "What regex flavor does Hookify use?",
        "answer": "Hookify uses Python regex syntax. You can test patterns using Python's re module or online regex testers with Python flavor enabled (like regex101.com)."
      },
      {
        "question": "Can I temporarily disable a rule without deleting it?",
        "answer": "Yes, set 'enabled: false' in the rule's YAML frontmatter. This disables the rule without deleting the file, allowing you to re-enable it later by changing it back to 'enabled: true'."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "Hookify plugin for Claude Code",
        "Basic understanding of YAML syntax",
        "Familiarity with regex patterns (recommended)"
      ],
      "permissions": [
        "Write access to .claude/ directory in project root",
        "Ability to create .md files"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}