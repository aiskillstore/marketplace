# 探宝轮盘活动测试点清单
**游戏名称**：满月活动新增钻石活跃卡池
**活动名称**：探宝轮盘
**版本**：v1.0
**生成时间**：2026-01-27

---

## 模块：探宝轮盘抽奖系统

### 功能点：轮盘抽奖核心功能

#### 🟢 核心测试点（正常场景）

- [ ] 消耗1张探宝券，点击抽奖按钮，轮盘开始旋转并停止在对应奖项位置
- [ ] 抽中特等奖后，弹窗展示"钻石大奖"和"T0伙伴自选"二选一选项
- [ ] 选择"钻石大奖"，按当前奖池3%-8%比例发放钻石，钻石到账
- [ ] 选择"T0伙伴自选"，跳转伙伴选择界面，选择后伙伴到账
- [ ] 抽中一等奖/二等奖/三等奖，奖励直接发放至背包
- [ ] 抽奖后轮盘奖项正确显示（特等奖、一等奖、二等奖、三等奖）

#### 🟡 边界测试点

- [ ] 探宝券数量为0时，抽奖按钮置灰不可点击
- [ ] 探宝券数量为1时，可正常抽奖，抽奖后数量变为0
- [ ] 探宝券数量为999（上限）时，可正常抽奖
- [ ] 钻石奖池数量为初始值时，瓜分比例按初始值计算
- [ ] 钻石奖池数量接近0时，仍能正常计算瓜分奖励
- [ ] 活动开始前0秒尝试抽奖，提示"活动未开始"
- [ ] 活动结束后1秒尝试抽奖，提示"活动已结束"

#### 🔴 异常测试点

- [ ] 抽奖过程中断网，提示"网络连接失败"，探宝券未扣除
- [ ] 抽奖请求超时，提示"请求超时，请重试"，探宝券未扣除
- [ ] 服务器维护中，提示"服务器维护中"，禁止抽奖
- [ ] 抽奖时背包已满，提示"背包已满，请先清理"
- [ ] 同一账号在不同设备同时抽奖，按先到先得处理
- [ ] 抽奖动画播放中点击快速跳过，奖励正常发放
- [ ] 连续快速点击抽奖按钮（防重复提交测试）

---

### 功能点：探宝券获取途径

#### 🟢 核心测试点（正常场景）

- [ ] 完成日常活跃达到25活跃度，进度奖励栏显示并可领取1张探宝券
- [ ] 活跃度达到160时，触发10%概率判定，若成功则弹出惊喜弹窗获得探宝券
- [ ] 接取橙色及橙色品质以上游历任务并完成，50%概率额外产出探宝券
- [ ] 挂机满1小时，触发5%概率判定N个探宝券（挂机每日最多3张）
- [ ] 领取挂机宝箱奖励时，附带探宝券产出

#### 🟡 边界测试点

- [ ] 活跃度达到24时，探宝券未产出
- [ ] 活跃度达到25时（临界值），探宝券正常产出
- [ ] 活跃度达到161时，概率事件仍正常触发
- [ ] 游历任务当天完成N次（配置上限），探宝券产出达上限后不再产出
- [ ] 挂机时长刚好1小时，概率判定正常触发
- [ ] 挂机时长72小时（超过48小时上限），仍按72小时计算产出次数
- [ ] 活动开始前获得的活跃度，活动开始后不计入探宝券产出
- [ ] 活动结束后继续做任务，不再产出探宝券

#### 🔴 异常测试点

- [ ] 活跃度达到160但概率未触发，不产出探宝券（正常概率机制）
- [ ] 游历任务完成但概率未触发，不产出探宝券（正常概率机制）
- [ ] 挂机时长计算异常（如服务器时间回调），系统自动修正
- [ ] 玩家注册时间晚于活动开始时间，从注册时间开始计算挂机产出
- [ ] 上次领取挂机宝箱时间为13:20，本次16:10领取，仅计算2次概率判定
- [ ] 挂机收益达到48小时上限，但探宝券产出不受此限制（按实际挂机时长）

---

### 功能点：大奖机制与钻石奖池

#### 🟢 核心测试点（正常场景）

- [ ] 玩家抽中特等奖（钻石大奖），全服在线玩家收到传闻提示"恭喜XXX在探宝轮盘中了特等奖"
- [ ] 同服在线玩家主城界面飘落钻石雨特效（未上线玩家不会收到）
- [ ] 中奖名单界面显示中奖玩家信息：昵称、获得钻石数量、中奖时间
- [ ] 钻石奖池显示当前奖池总量，随服务器实时刷新
- [ ] 消耗1张探宝券，钻石奖池增加N个钻石（可配置）
- [ ] 玩家首次登录弹出提示，告知可选择核心奖励（钻石大奖或其他道具）

#### 🟡 边界测试点

- [ ] 全服累计抽X次（保底次数），必定产出大奖
- [ ] 大奖产出后，立即计算3天CD时间
- [ ] 大奖CD重置按每日5点时间节点执行
- [ ] CD重置后，按保底抽数的整倍数作为出大奖的次数（如保底1000次，累计3500次，则4000次时产大奖）
- [ ] 可在保底抽数前提前产出大奖，产出后立刻计算天数CD
- [ ] 第一个玩家中奖瓜分：（基础奖池钻石数 + 当前本服抽奖次数 * 探宝券兑换钻石数）* 瓜分百分比（向上取整）
- [ ] 第二个玩家中奖时，奖池扣除第一个玩家瓜分的钻石后再计算
- [ ] 钻石奖池数量为0时，界面显示为0（不显示负数）

#### 🔴 异常测试点

- [ ] 大奖CD为3天内，仍可正常抽奖但不会产出大奖
- [ ] 两个玩家几乎同时抽中大奖，按服务器时间戳先后顺序处理
- [ ] 中奖名单数据超过显示上限，采用轮播展示（2秒轮播一次）
- [ ] 钻石雨特效播放时切换场景，特效停止播放
- [ ] 玩家选择核心奖励后网络中断，再次登录时仍可修改选择

---

### 功能点：界面显示与数值刷新

#### 🟢 核心测试点（正常场景）

- [ ] 探宝轮盘界面显示：轮盘、抽奖按钮、探宝券数量、钻石奖池数量
- [ ] 钻石奖池数值服务端实时刷新
- [ ] 客户端每X秒（可配置）请求钻石数量并在界面刷新显示
- [ ] 玩家主动抽奖时，服务端推送主协议刷新钻石奖池数值
- [ ] 中奖名单显示：玩家昵称、奖项类型、钻石数量（仅特等奖和瓜分1%、3%显示）
- [ ] 有探宝券可抽奖时，入口图标显示红点提示

#### 🟡 边界测试点

- [ ] 钻石奖池数值为4位数时，正常显示
- [ ] 钻石奖池数值为5位数时，显示为"X.X万"
- [ ] 钻石奖池数值为7位数时，显示为"XXX.X万"
- [ ] 探宝券数量为0时，红点消失
- [ ] 探宝券数量>0时，红点显示
- [ ] 中奖名单为空时，显示"暂无中奖记录"
- [ ] 中奖名单超过100条，仅显示最近100条

#### 🔴 异常测试点

- [ ] 网络延迟导致钻石奖池数值刷新滞后，玩家抽奖时以服务端实时数据为准
- [ ] 客户端与服务端数值不一致，玩家抽奖后强制同步服务端数据
- [ ] 界面卡顿导致数值显示异常，关闭重新打开界面恢复正常
- [ ] 玩家昵称包含特殊字符（如表情符号），中奖名单正常显示或过滤

---

## ⚡ 性能测试点

- [ ] 100人同时抽奖，服务器响应时间 ≤ 500ms，无崩溃
- [ ] 1000人在线，钻石奖池数值刷新不卡顿
- [ ] 轮盘旋转动画播放流畅，帧率 ≥ 30fps
- [ ] 钻石雨特效播放时，客户端内存占用 ≤ 512MB
- [ ] 中奖名单数据加载时间 ≤ 1秒

## 🔒 安全测试点

- [ ] 防刷机制：探宝券扣除与奖励发放原子性操作（不可重复抽奖）
- [ ] 防作弊：客户端修改钻石奖池数值无效，以服务端数据为准
- [ ] 防注入：探宝券数量异常时（如负数），系统自动修正为0
- [ ] 概率公平性：大奖概率机制透明，日志可追溯
- [ ] 数据一致性：钻石奖池增减有完整日志记录

## 📱 兼容性测试点

- [ ] iOS 14/15/16/17 系统轮盘动画正常播放
- [ ] Android 10/11/12/13 系统轮盘动画正常播放
- [ ] 不同分辨率设备（1080p/2K/4K）界面UI适配正常
- [ ] 横屏/竖屏模式切换，界面自动适配
- [ ] 低配置设备（如iPhone 8），轮盘动画可正常播放（可降低特效质量）

## 🎨 UI测试点

- [ ] 探宝轮盘入口图标位于"大富翁"界面，按轮盘样式结合大富翁色调设计
- [ ] 探宝券图标：使用游戏内任意抽奖券修改样式
- [ ] 轮盘界面背景符合游戏主题风格
- [ ] 抽奖按钮位于轮盘中央下方，明显可点击
- [ ] 钻石雨特效：当有玩家中了大奖，主城飘落钻石雨特效
- [ ] 中奖名单界面：展示特等奖、钻石瓜分3%、钻石瓜分1%的玩家信息
- [ ] 4.7优化：中奖名单轮播展示，2秒轮播一次

---

## ❓ 待确认项

### 问题1：探宝券价值范围未明确
- **当前状态**：需求提到"探宝券价值100~200钻左右"，未明确具体数值
- **影响范围**：影响奖池计算的测试数据准备
- **推荐方案**：明确探宝券价值为150钻（中间值）
- **备选方案**：采用随机值100-200钻

### 问题2：钻石奖池初始数量未明确
- **当前状态**：需求提到"钻石奖池初始包含钻石数量可配置"，未给出具体值
- **影响范围**：影响首次大奖产出的测试预期结果
- **推荐方案**：初始奖池设置为1000钻石（参考案例）
- **备选方案**：由策划根据经济系统确定初始值

### 问题3：游历任务每日产出上限N未明确
- **当前状态**：需求提到"每天最多产出N次"，未给出N的具体值
- **影响范围**：影响探宝券获取途径的边界测试
- **推荐方案**：每日游历任务最多产出3次探宝券
- **备选方案**：每日游历任务最多产出5次探宝券

### 问题4：挂机产出概率触发次数N未明确
- **当前状态**：需求提到"5%概率产出N个探宝券"，N未明确
- **影响范围**：影响挂机产出的测试标准
- **推荐方案**：每次触发产出1个探宝券
- **备选方案**：每次触发产出1-2个探宝券（随机）

### 问题5：瓜分百分比具体数值未明确
- **当前状态**：需求提到"按照百分比可配置"，未给出具体百分比
- **影响范围**：影响钻石大奖瓜分机制的测试用例
- **推荐方案**：特等奖瓜分5%，其他等级按3%、1%递减
- **备选方案**：由策划根据经济平衡确定百分比

### 问题6：活动具体开启时间未确定
- **当前状态**：需求显示"待定"
- **影响范围**：影响活动时间相关的测试计划安排
- **推荐方案**：确定具体上线日期后补充
- **备选方案**：使用测试服提前验证，待上线日期确定后调整

### 问题7：客户端刷新钻石奖池的时间间隔X未明确
- **当前状态**：需求提到"每X秒请求"，未给出具体秒数
- **影响范围**：影响性能测试的指标
- **推荐方案**：每10秒刷新一次（平衡实时性与性能）
- **备选方案**：每5秒刷新一次（更实时但增加服务器压力）

---

## 📊 测试点统计

- **核心测试点**：26 个
- **边界测试点**：28 个
- **异常测试点**：20 个
- **性能测试点**：5 个
- **安全测试点**：5 个
- **兼容性测试点**：5 个
- **UI测试点**：7 个
- **待确认项**：7 个

**总计**：103 个测试点

---

## 📝 备注

- 本模块涉及全服奖池机制，测试前需准备完整的服务器环境
- 概率机制需要大量数据验证，建议使用自动化测试工具模拟抽奖
- 钻石雨特效需要在多人在线环境下测试，验证性能表现
- 大奖CD机制需要跨天测试，注意时间节点（每日5点）
- 测试账号需准备不同活跃度、不同探宝券数量的状态
- 中奖名单轮播功能需在有多条中奖记录时测试
- 挂机产出需要长时间挂机测试，建议使用加速工具

---

## 🔗 相关模块

- **前置模块**：日常活跃系统 - 探宝券产出依赖活跃度
- **前置模块**：游历任务系统 - 游历任务完成产出探宝券
- **前置模块**：挂机系统 - 挂机时长产出探宝券
- **关联模块**：背包系统 - 奖励发放至背包
- **关联模块**：伙伴系统 - T0伙伴自选功能
- **关联模块**：传闻系统 - 大奖中奖传闻推送
- **关联模块**：经济系统 - 钻石奖池与游戏经济平衡

---

## 💼 UI/特效/图标需求清单

### 特效需求（优先级A）
- **钻石雨特效**：当有玩家抽中大奖时，本服在线用户主城会下钻石雨特效
- **提交时间**：3月18日
- **需求状态**：需求已有，待处理
- **跟进人员**：李金临

### UI需求（优先级A）
- **探宝轮盘界面**：探宝轮盘界面设计
- **提交时间**：3月18日
- **需求状态**：需求已有，待处理
- **跟进人员**：李金临

### 图标需求（优先级A）
- **探宝轮盘入口图标**：按照轮盘样式，结合大富翁的色调进行调整
- **探宝券道具图标**：用游戏内任意抽奖券修改即可
- **提交时间**：3月18日
- **需求状态**：需求已有，待处理
- **跟进人员**：李金临
