{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T09:18:53.089Z",
    "slug": "7nohe-core-development",
    "source_url": "https://github.com/7nohe/figram/tree/main/.claude/skills/core-development",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "210ce41bad9ad014d6fcda2cd9939264e20220e611aa9dd1d4ddf0df109d397c",
    "tree_hash": "93a2f5549fb49d0553dfde4e5720ffe0dcb1029b2689d51a5f6497ebca2a8572"
  },
  "skill": {
    "name": "core-development",
    "description": "Work on the core package (types, validation, normalization, diff). Use when modifying DSL processing logic or data flow.",
    "summary": "Work on the core package (types, validation, normalization, diff). Use when modifying DSL processing...",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "7nohe",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "typescript",
      "dsl",
      "architecture-diagrams",
      "figjam",
      "aws"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill is purely documentation-based with no executable code, scripts, or network capabilities. It provides guidance for working with TypeScript type definitions, validation, normalization, and diff algorithms in a DSL processing pipeline.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 144,
    "audit_model": "claude",
    "audited_at": "2026-01-10T09:18:53.089Z"
  },
  "content": {
    "user_title": "Develop Figram core DSL processing package",
    "value_statement": "The Figram core package requires careful coordination across types, validation, normalization, and diff logic. This skill provides a structured workflow for extending DSL processing with type safety and consistent data flow patterns.",
    "seo_keywords": [
      "Figram core development",
      "DSL type definitions",
      "TypeScript validation",
      "IR normalization",
      "diff algorithm",
      "Claude Code",
      "Codex",
      "Claude Code SDK",
      "architecture diagrams",
      "FigJam plugin"
    ],
    "actual_capabilities": [
      "Define and extend TypeScript types for DSL and IR representations",
      "Implement validation rules for YAML DSL input",
      "Build normalization logic for DSL to IR conversion",
      "Create diff algorithms for incremental patch generation",
      "Add and run co-located tests with bun:test",
      "Follow data flow: DSL â†’ validate â†’ normalize â†’ IR â†’ diff â†’ Patch"
    ],
    "limitations": [
      "Requires TypeScript/JavaScript environment",
      "No built-in code generation for target languages",
      "Does not include runtime interpretation of DSL",
      "No native diagram rendering or visualization"
    ],
    "use_cases": [
      {
        "target_user": "Maintainers",
        "title": "Extend core package types",
        "description": "Add new node or edge properties to the DSL with proper validation and normalization support."
      },
      {
        "target_user": "Contributors",
        "title": "Fix validation bugs",
        "description": "Diagnose and fix edge cases in YAML validation that cause incorrect error messages."
      },
      {
        "target_user": "Plugin developers",
        "title": "Add patch operations",
        "description": "Implement new patch operation types for enhanced synchronization between CLI and FigJam plugin."
      }
    ],
    "prompt_templates": [
      {
        "title": "Add node property",
        "scenario": "Extending DSL with new node fields",
        "prompt": "Add a new 'color' property to DSLNode and IRNode in types.ts. Then update validate.ts to ensure color is a valid hex string, normalize.ts to set a default value, and diff.ts to handle color changes in equality checks."
      },
      {
        "title": "Add validation rule",
        "scenario": "Creating new validation constraints",
        "prompt": "Add a validation rule in validate.ts that ensures all node IDs in the nodes array are unique within the document. Add a test case for duplicate ID detection."
      },
      {
        "title": "Debug diff output",
        "scenario": "Investigating patch generation",
        "prompt": "Review the diff.ts implementation. When comparing two IRDocuments where only node labels changed, explain how the diff algorithm determines which nodes need upsertNode vs removeNode+upsertNode operations."
      },
      {
        "title": "Update WebSocket protocol",
        "scenario": "Extending communication between CLI and plugin",
        "prompt": "Add a new 'sync' message type to the WebSocket protocol for requesting partial document synchronization. Update the appropriate interfaces in types.ts and document the expected message flow."
      }
    ],
    "output_examples": [
      {
        "input": "Add a 'healthCheck' property to nodes that can be 'healthy', 'warning', or 'critical'",
        "output": [
          "â€¢ Added DSLNode.healthCheck and IRNode.healthCheck to types.ts",
          "â€¢ Updated validate.ts: healthCheck must be one of ['healthy', 'warning', 'critical']",
          "â€¢ Updated normalize.ts: default healthCheck to 'healthy' when undefined",
          "â€¢ Updated diff.ts: nodes with same ID but different healthCheck trigger upsertNode",
          "â€¢ Added tests in validate.test.ts for valid/invalid healthCheck values",
          "â€¢ Added tests in normalize.test.ts for default value handling"
        ]
      }
    ],
    "best_practices": [
      "Keep types, validation, normalization, and diff logic synchronized when adding new properties",
      "Add test cases for validation errors, normalization defaults, and diff edge cases",
      "Follow the documented data flow to trace issues through the processing pipeline"
    ],
    "anti_patterns": [
      "Adding properties to IR without corresponding DSL types and normalization logic",
      "Skipping validation when adding new fields, leading to runtime errors",
      "Modifying diff logic without updating equality checks in normalization"
    ],
    "faq": [
      {
        "question": "What file handles YAML validation?",
        "answer": "validate.ts in packages/core/src/ contains all validation logic for DSL input with descriptive error messages."
      },
      {
        "question": "How are new properties added to the DSL?",
        "answer": "Update types.ts, validate.ts, normalize.ts, and diff.ts in sequence. Add tests for each layer."
      },
      {
        "question": "What generates incremental updates?",
        "answer": "diff.ts calculates the difference between two IRDocuments and produces Patch operations for efficient updates."
      },
      {
        "question": "Is data safe to process?",
        "answer": "Yes. The core package is dependency-free and processes data in memory without network access or file system writes."
      },
      {
        "question": "How are test failures diagnosed?",
        "answer": "Run bun test packages/core/ to see which layer fails. Trace through the data flow to identify the source issue."
      },
      {
        "question": "How does this compare to other DSL tools?",
        "answer": "Figram focuses specifically on architecture diagrams with a minimal, type-safe pipeline for YAML to FigJam conversion."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
