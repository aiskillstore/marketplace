{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T12:17:46.370Z",
    "slug": "cleanexpo-testing-patterns",
    "source_url": "https://github.com/CleanExpo/Unite-Hub/tree/main/.claude/skills/testing-patterns",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "12704f3f030acea96af9429c502e9774b3ca837bff72c55438bdb36aa9169b41",
    "tree_hash": "0ed81f797b5a73898ae59d2b99dbb60145bd35bf9f435ac0219a49702a876999"
  },
  "skill": {
    "name": "Testing Patterns Skill",
    "description": "**When to Use**: Writing tests for new features, agents, API routes",
    "summary": "**When to Use**: Writing tests for new features, agents, API routes",
    "icon": "ðŸ§ª",
    "version": "1.0.0",
    "author": "CleanExpo",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "testing",
      "vitest",
      "typescript",
      "unit-tests",
      "patterns"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill containing only markdown documentation with example TypeScript test patterns. No executable code, no scripts, no network calls, no filesystem access beyond reading the file itself.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 141,
    "audit_model": "claude",
    "audited_at": "2026-01-10T12:17:46.370Z"
  },
  "content": {
    "user_title": "Apply testing patterns with Vitest",
    "value_statement": "Writing tests for new features, agents, and API routes requires consistent patterns. This skill provides ready-to-use Vitest patterns for unit tests, agent tests, and API tests with Supabase mocking.",
    "seo_keywords": [
      "vitest testing patterns",
      "typescript unit tests",
      "claude code testing",
      "api route testing",
      "supabase mocking",
      "testing best practices",
      "claude testing",
      "codex testing",
      "agent testing patterns"
    ],
    "actual_capabilities": [
      "Write unit tests for services and utilities using Vitest",
      "Test AI agents with mocked Supabase clients",
      "Test API routes including authentication and validation",
      "Mock Supabase database interactions",
      "Apply coverage requirements for unit, integration, and E2E tests",
      "Structure tests with beforeEach and mock cleanup"
    ],
    "limitations": [
      "Does not execute tests or generate test files automatically",
      "Does not configure Vitest or test environment",
      "Does not provide Playwright E2E test patterns",
      "Does not integrate with CI/CD pipelines"
    ],
    "use_cases": [
      {
        "target_user": "Frontend developers",
        "title": "Unit test services",
        "description": "Create unit tests for new services and utilities using the standard describe-it-expect pattern."
      },
      {
        "target_user": "AI agent developers",
        "title": "Test agent logic",
        "description": "Write tests for AI agent processTask methods with mocked Supabase client."
      },
      {
        "target_user": "Backend developers",
        "title": "Validate API routes",
        "description": "Test API endpoints including authentication, validation, and response handling."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create unit test",
        "scenario": "Writing a unit test for a new service",
        "prompt": "Write a Vitest unit test for MyService that tests data processing and error handling. Use beforeEach for setup and vi.clearAllMocks."
      },
      {
        "title": "Test agent",
        "scenario": "Testing an AI agent",
        "prompt": "Write a Vitest test for MyAgent.processTask with mocked Supabase. Include test task with workspace_id, task_type, and payload."
      },
      {
        "title": "API test",
        "scenario": "Testing an API route",
        "prompt": "Write a Vitest test for GET /api/my-endpoint that verifies workspace_id authentication is required. Expect 400 status on missing parameter."
      },
      {
        "title": "Mock Supabase",
        "scenario": "Creating database mocks",
        "prompt": "Show me how to mock Supabase client in Vitest with mockFrom, mockSelect, mockEq functions that return test data."
      }
    ],
    "output_examples": [
      {
        "input": "Write a Vitest test for UserService that tests user creation and validates input.",
        "output": [
          "Create describe block for UserService",
          "Set up beforeEach with vi.clearAllMocks()",
          "Test user creation with valid input",
          "Test error handling for invalid input",
          "Mock Supabase from() and insert() methods"
        ]
      }
    ],
    "best_practices": [
      "Use vi.clearAllMocks() in beforeEach to reset mock state between tests",
      "Mock Supabase at the module level with vi.mock before describe blocks",
      "Test authentication and validation first for API routes",
      "Maintain 100% pass rate for all test suites"
    ],
    "anti_patterns": [
      "Skipping test cleanup with beforeEach causing test pollution",
      "Not mocking external dependencies like Supabase",
      "Writing tests without assertions for error cases",
      "Mixing integration and unit test patterns inappropriately"
    ],
    "faq": [
      {
        "question": "What test framework does this skill use?",
        "answer": "Vitest. Run tests with npm run test in the tests/ directory."
      },
      {
        "question": "What coverage targets are required?",
        "answer": "100% pass rate required for all tests. Coverage includes unit, integration, and E2E tests."
      },
      {
        "question": "How do I mock Supabase in tests?",
        "answer": "Use vi.mock('@supabase/supabase-js') with createClient returning mocked from() with select/eq/insert."
      },
      {
        "question": "Is my data safe when running tests?",
        "answer": "Yes. Tests use mocked dependencies and never connect to real databases or external services."
      },
      {
        "question": "Why are my tests failing with timeout errors?",
        "answer": "Ensure async tests return promises. Check mock implementations use mockResolvedValue for async methods."
      },
      {
        "question": "How does this compare to Jest?",
        "answer": "Vitest shares Jest API but is faster and integrates with Vite. Syntax and patterns are nearly identical."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
