{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T10:09:58.718Z",
    "slug": "aayushbaniya2006-stripe-handler",
    "source_url": "https://github.com/AayushBaniya2006/blinkfund/tree/main/.claude/skills/stripe-handler",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "d7660a1442493b67ce73d67ad79cbedfb9c0ccde86472f78b6262abe02f81eb1",
    "tree_hash": "c6b5a43f2014290f96eb4c33d5a051e90ed6f4e5959602cc569e3603b7f93b99"
  },
  "skill": {
    "name": "Stripe Handler",
    "description": "Handle Stripe payments, custom checkouts, and webhook fulfillment outside of standard plans/credits.",
    "summary": "Handle Stripe payments, custom checkouts, and webhook fulfillment outside of standard plans/credits.",
    "icon": "ðŸ’³",
    "version": "1.0.0",
    "author": "AayushBaniya2006",
    "license": "MIT",
    "category": "data",
    "tags": [
      "stripe",
      "payments",
      "checkout",
      "webhooks"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Pure documentation skill providing guidance for Stripe integration patterns. Contains no executable code, scripts, network calls, or file system access beyond reading its own markdown files.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 2,
    "total_lines": 249,
    "audit_model": "claude",
    "audited_at": "2026-01-10T10:09:58.718Z"
  },
  "content": {
    "user_title": "Implement custom Stripe payments and webhooks",
    "value_statement": "Stripe payments for non-standard products require careful implementation to handle webhooks correctly. This skill provides proven patterns for checkout sessions, background processing, and idempotent fulfillment.",
    "seo_keywords": [
      "Stripe payments",
      "Stripe checkout",
      "Stripe webhooks",
      "custom payments",
      "AI coding assistant",
      "Claude",
      "Codex",
      "Claude Code"
    ],
    "actual_capabilities": [
      "Guide creating Stripe Checkout sessions with proper metadata",
      "Implement webhook handlers for checkout.session.completed events",
      "Design background payment processing with Inngest",
      "Ensure idempotent webhook fulfillment to prevent duplicate orders",
      "Configure environment variables for Stripe API keys",
      "Test webhooks locally using Stripe CLI"
    ],
    "limitations": [
      "Does not execute actual Stripe API calls - provides guidance only",
      "Does not handle subscription plan management (use plans-handler)",
      "Does not manage credit package purchases (use credits-handler)",
      "Requires existing Stripe account and configured API keys"
    ],
    "use_cases": [
      {
        "target_user": "SaaS developers",
        "title": "Sell digital products",
        "description": "Implement one-time payment flows for courses, ebooks, or digital downloads outside standard subscriptions."
      },
      {
        "target_user": "Freelancers",
        "title": "Process service payments",
        "description": "Create custom payment handling for consulting services or project-based billing with webhook fulfillment."
      },
      {
        "target_user": "E-commerce builders",
        "title": "Build marketplace payments",
        "description": "Handle complex payment scenarios with custom metadata and background order fulfillment processing."
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic checkout flow",
        "scenario": "Create payment endpoint",
        "prompt": "Use stripe-handler to create a checkout session API route for selling a custom digital product. Include proper metadata for webhook identification."
      },
      {
        "title": "Webhook handler",
        "scenario": "Process payment events",
        "prompt": "Use stripe-handler to implement webhook handling for checkout.session.completed. Add idempotency checks and Inngest background processing."
      },
      {
        "title": "Background fulfillment",
        "scenario": "Handle heavy processing",
        "prompt": "Use stripe-handler to design an Inngest function for processing payments that involve multiple database operations or external API calls."
      },
      {
        "title": "Multi-product types",
        "scenario": "Distinguish payment types",
        "prompt": "Use stripe-handler to structure webhook logic that routes different payment types (products, services, credits) to appropriate fulfillment handlers."
      }
    ],
    "output_examples": [
      {
        "input": "Create a checkout session for a $49 course purchase",
        "output": [
          "â€¢ Create API route at src/app/api/courses/buy/route.ts",
          "â€¢ Import stripe from @/lib/stripe",
          "â€¢ Set mode: 'payment' with inline price data ($49.00 USD)",
          "â€¢ Add metadata: { type: 'course_purchase', courseId: 'course_123', userId: user.id }",
          "â€¢ Return checkoutSession.url to redirect user to Stripe"
        ]
      }
    ],
    "best_practices": [
      "Always attach metadata to checkout sessions to identify purchase type in webhooks",
      "Use Inngest for any fulfillment logic that could exceed Stripe webhook timeout (3 seconds)",
      "Implement idempotency checks to handle duplicate webhook events gracefully"
    ],
    "anti_patterns": [
      "Processing webhooks synchronously when fulfillment requires multiple database calls",
      "Relying solely on product IDs instead of metadata for routing payment logic",
      "Skipping user resolution from Stripe payload before database operations"
    ],
    "faq": [
      {
        "question": "What is the difference between this and plans-handler?",
        "answer": "plans-handler handles standard SaaS subscriptions. Use this skill for custom one-time products or services."
      },
      {
        "question": "How long do I have to respond to Stripe webhooks?",
        "answer": "Stripe requires webhook responses within 3 seconds. Use Inngest for any processing that takes longer."
      },
      {
        "question": "Does this skill access my Stripe account?",
        "answer": "No. This is documentation-only. You provide the code based on the patterns shown."
      },
      {
        "question": "How do I test webhooks locally?",
        "answer": "Use Stripe CLI: run 'stripe listen --forward-to localhost:3000/api/webhooks/stripe' to forward events."
      },
      {
        "question": "Can I use this for subscription products?",
        "answer": "Yes, set mode to 'subscription' in checkout session. But use plans-handler for standard SaaS subscriptions."
      },
      {
        "question": "What happens if a webhook fires twice?",
        "answer": "Implement idempotency by checking if the order already exists before fulfillment. This skill provides patterns for this."
      }
    ]
  },
  "file_structure": [
    {
      "name": "reference.md",
      "type": "file",
      "path": "reference.md"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
