{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-23T02:12:40.530Z",
    "slug": "emz1998-hooks-management",
    "source_url": "https://github.com/Emz1998/nexly-notes/tree/main/.claude/skills/hooks-management",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "db0344503d3b9911715b179ca4d72826661d8e9cb263cc36fdc5d6cad006676f",
    "tree_hash": "7f6395881b1dfbbe2d4c1ef94189fa2a0f3492fdd69e39b621ea9ae27c595943"
  },
  "skill": {
    "name": "hooks-management",
    "description": "Use PROACTIVELY when you need to create, update, configure, or validate Claude hooks for various events and integrations",
    "summary": "Create, update, configure, or troubleshoot Claude Code hook scripts with guided workflows and documentation",
    "icon": "ü™ù",
    "version": "1.0.0",
    "author": "Emz1998",
    "license": "MIT",
    "tags": [
      "hooks",
      "claude-code",
      "automation",
      "workflow",
      "event-driven"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem",
      "env_access"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Static scanner flagged patterns in documentation markdown files. After manual review, all findings are FALSE POSITIVES. The skill contains only documentation, task workflows, and reference materials for legitimate Claude Code hooks. No actual malicious code or exploit patterns exist.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 7,
    "total_lines": 1731,
    "audit_model": "claude",
    "audited_at": "2026-01-23T03:30:00.000Z",
    "risk_factors": [
      "external_commands",
      "filesystem",
      "env_access"
    ],
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "references/hooks.md",
            "line_start": 13,
            "line_end": 13
          },
          {
            "file": "references/architecture-pattern.md",
            "line_start": 5,
            "line_end": 5
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "references/hooks.md",
            "line_start": 470,
            "line_end": 470
          },
          {
            "file": "references/hooks.md",
            "line_start": 543,
            "line_end": 543
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "references/hooks.md",
            "line_start": 398,
            "line_end": 398
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Create and Manage Claude Code Hooks",
    "value_statement": "Managing Claude Code hooks requires understanding event-driven automation patterns. This skill provides guided workflows and comprehensive documentation for creating, updating, configuring, and troubleshooting hooks for any event type.",
    "seo_keywords": [
      "Claude Code hooks",
      "Claude hooks management",
      "Claude Code automation",
      "Claude Codex hooks",
      "event-driven hooks",
      "hook scripting",
      "Claude Code event handlers",
      "Claude automation workflows",
      "hook configuration",
      "Claude Code extensibility"
    ],
    "actual_capabilities": [
      "Create new hook scripts following Claude Code conventions and best practices",
      "Update existing hooks with new functionality or bug fixes",
      "Troubleshoot hook issues using diagnostic workflows",
      "Configure hooks in settings.local.json for proper event linkage",
      "Test hooks without creating temporary test files using echo piping",
      "Validate hook security and performance before deployment"
    ],
    "limitations": [
      "Does not execute hooks directly - only creates configuration and code",
      "Requires understanding of JSON stdin/stdout communication patterns",
      "Cannot modify system-level files or global Claude Code settings",
      "Does not provide pre-built hook implementations for specific use cases"
    ],
    "use_cases": [
      {
        "title": "Build Custom Event Handlers",
        "description": "Create hooks that respond to specific Claude Code events like PreToolUse, PostToolUse, Stop, or UserPromptSubmit. Automate validation, logging, or enforcement of project policies.",
        "target_user": "Developers building project-specific automation"
      },
      {
        "title": "Implement Security and Validation Hooks",
        "description": "Create hooks that validate commands before execution, block dangerous operations, log security events, and enforce project security policies automatically.",
        "target_user": "Security-conscious teams and DevOps engineers"
      },
      {
        "title": "Enforce Development Workflows",
        "description": "Build hooks that enforce TDD workflows, track phase completion, validate plans before implementation, and ensure consistent development practices across teams.",
        "target_user": "Team leads and quality assurance engineers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a Simple Hook",
        "prompt": "Create a new Claude Code hook that runs on the Stop event. The hook should validate that all tasks in the plan are complete before allowing Claude to stop.",
        "scenario": "When you need to create a basic hook for a specific event"
      },
      {
        "title": "Update an Existing Hook",
        "prompt": "Update the session_start.py hook to also load user preferences from a config file and set them in the shared cache.",
        "scenario": "When modifying or extending an existing hook's functionality"
      },
      {
        "title": "Debug Hook Issues",
        "prompt": "The post_tool_use hook is not executing correctly. Test it using the echo method to diagnose the issue.",
        "scenario": "When troubleshooting hook execution problems"
      },
      {
        "title": "Add Security Validation",
        "prompt": "Add a security validation module to the pre_tool_use hook that blocks commands containing dangerous patterns like rm -rf or direct path access to /etc.",
        "scenario": "When enhancing hooks with security checks"
      }
    ],
    "output_examples": [
      {
        "input": "Create a new hook that validates JSON input on the PreToolUse event",
        "output": [
          "Hook created at: .claude/hooks/validate-json.py",
          "Configuration to add to .claude/settings.local.json:",
          "{",
          "  \"hooks\": {",
          "    \"PreToolUse\": [",
          "      {",
          "        \"matcher\": \"*\",",
          "        \"hooks\": [",
          "          { \"type\": \"command\", \"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/validate-json.py\" }",
          "        ]",
          "      }",
          "    ]",
          "  }",
          "}",
          "Test command: echo '{\"tool_name\": \"Write\", \"tool_input\": {}}' | python .claude/hooks/validate-json.py"
        ]
      },
      {
        "input": "Why is my hook not executing on the UserPromptSubmit event?",
        "output": [
          "Checking hook configuration...",
          "1. Verify the hook is registered in .claude/settings.local.json",
          "2. Ensure the event name matches exactly: \"UserPromptSubmit\"",
          "3. Test with echo: echo '{\"prompt\": \"/test\"}' | python .claude/hooks/your-hook.py",
          "4. Check that the script has execute permissions",
          "5. Verify exit code is 0 for successful execution"
        ]
      }
    ],
    "best_practices": [
      "Always test hooks using echo piped to stdin before deployment - never create temporary test files",
      "Use Python over shell scripts when possible for better error handling and cross-platform compatibility",
      "Implement idempotent operations so running hooks multiple times produces the same result",
      "Return appropriate exit codes: 0 to allow, 2 to block, other non-zero for non-blocking errors"
    ],
    "anti_patterns": [
      "Never hardcode credentials or secrets in hook scripts",
      "Never create hooks that can cause infinite loops or hang indefinitely",
      "Never bypass security validations or access controls",
      "Never write complex logic in hooks - keep them simple and focused on single responsibilities"
    ],
    "faq": [
      {
        "question": "What events can I create hooks for in Claude Code?",
        "answer": "Claude Code supports hooks for SessionStart, SessionEnd, PreToolUse, PostToolUse, Stop, SubagentStop, UserPromptSubmit, PermissionRequest, PreCompact, and Notification events. Each event has specific input schemas and response conventions."
      },
      {
        "question": "How do I test a hook without creating test files?",
        "answer": "Use the echo command to pipe JSON input directly to your hook script. For example: echo '{\"session_id\": \"test\", \"tool\": \"Read\"}' | python .claude/hooks/your-hook.py. This tests stdin parsing and output without creating temporary files."
      },
      {
        "question": "What exit codes should my hook return?",
        "answer": "Exit code 0 means the hook succeeded and the action should proceed. Exit code 2 means the hook blocked the action. Other non-zero codes indicate an error but allow the action to continue. The hook communicates decisions via JSON on stdout."
      },
      {
        "question": "Where do I register my hooks?",
        "answer": "Add hook configurations to .claude/settings.local.json (local project settings) or ~/.claude/settings.json (user settings). Use the \"hooks\" object with event names as keys, and specify matchers and commands for each event."
      },
      {
        "question": "Can I use environment variables in hooks?",
        "answer": "Yes, SessionStart hooks have access to CLAUDE_ENV_FILE for persisting environment variables. All hooks have access to CLAUDE_PROJECT_DIR which points to the project root directory. Standard environment variables are also available."
      },
      {
        "question": "How do hooks communicate with Claude Code?",
        "answer": "Hooks receive JSON input via stdin and send JSON output via stdout. The output format depends on the event type - allow/block decisions, additional context, or suppressOutput flags. Errors and debug info go to stderr using the log() utility."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "architecture-pattern.md",
          "type": "file",
          "path": "references/architecture-pattern.md",
          "lines": 308
        },
        {
          "name": "hooks-status.md",
          "type": "file",
          "path": "references/hooks-status.md",
          "lines": 134
        },
        {
          "name": "hooks.md",
          "type": "file",
          "path": "references/hooks.md",
          "lines": 1130
        }
      ]
    },
    {
      "name": "tasks",
      "type": "dir",
      "path": "tasks",
      "children": [
        {
          "name": "create-new-hook.md",
          "type": "file",
          "path": "tasks/create-new-hook.md",
          "lines": 21
        },
        {
          "name": "troubleshooting.md",
          "type": "file",
          "path": "tasks/troubleshooting.md",
          "lines": 36
        },
        {
          "name": "update-hook.md",
          "type": "file",
          "path": "tasks/update-hook.md",
          "lines": 21
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 81
    }
  ]
}
