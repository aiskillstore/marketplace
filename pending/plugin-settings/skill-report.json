{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T16:37:42.660Z",
    "slug": "anthropics-plugin-settings",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-settings",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Plugin Settings",
    "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
    "summary": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", ...",
    "icon": "⚙️",
    "version": "0.1.0",
    "license": "MIT",
    "category": "documentation",
    "tags": [
      "plugin settings",
      "YAML frontmatter",
      "Claude Code",
      "hooks",
      "configuration"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official skill and is pre-reviewed. A minimal audit found no security issues in the examples or scripts.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 1970,
    "audit_model": "codex",
    "audited_at": "2025-12-31T16:37:42.660Z"
  },
  "content": {
    "user_title": "Configure plugin settings per project",
    "value_statement": "Teams need per-project plugin configuration that is readable and not committed. This skill shows how to store settings in .claude/*.local.md and parse YAML frontmatter safely.",
    "seo_keywords": [
      "plugin settings",
      "YAML frontmatter",
      "Claude",
      "Codex",
      "Claude Code",
      "hooks",
      "per-project config",
      "local state file",
      "plugin configuration",
      "bash parsing"
    ],
    "actual_capabilities": [
      "Describe the .claude/plugin-name.local.md structure with YAML frontmatter and markdown body",
      "Provide a hook example that reads settings and enforces path and size checks",
      "Provide a command template to create a settings file using AskUserQuestion and Write",
      "Provide scripts to parse frontmatter and validate settings file structure",
      "Document parsing techniques and atomic update patterns"
    ],
    "limitations": [
      "Examples are in bash and assume standard Unix tools",
      "Simple sed and grep parsing may not handle complex YAML without yq",
      "Settings changes require restarting Claude Code",
      "Focuses on local .claude/*.local.md files only"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Add project settings",
        "description": "Store per-project configuration for a custom plugin without committing it to git."
      },
      {
        "target_user": "Team lead",
        "title": "Coordinate agent work",
        "description": "Track agent assignments and status in a shared local settings file."
      },
      {
        "target_user": "Security engineer",
        "title": "Gate hook behavior",
        "description": "Enable strict validation rules from a settings file for sensitive projects."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create settings file",
        "scenario": "New plugin needs per-project settings",
        "prompt": "Create a .claude/my-plugin.local.md template with enabled, mode, and max_file_size fields and a short markdown body."
      },
      {
        "title": "Read settings in hook",
        "scenario": "Hook should respect enabled flag",
        "prompt": "Show a bash hook snippet that reads .claude/my-plugin.local.md and exits when enabled is false."
      },
      {
        "title": "Validate settings file",
        "scenario": "Check file structure before use",
        "prompt": "Provide a bash routine to validate frontmatter markers and report missing fields."
      },
      {
        "title": "Atomic update pattern",
        "scenario": "Update a field safely",
        "prompt": "Show how to update the pr_number field in a .claude/*.local.md file using a temp file and atomic move."
      }
    ],
    "output_examples": [
      {
        "input": "Show me how to read a plugin settings file in a hook",
        "output": [
          "Check for .claude/my-plugin.local.md and exit if missing",
          "Extract frontmatter between --- markers",
          "Read enabled and strict_mode fields and apply conditional logic"
        ]
      }
    ],
    "best_practices": [
      "Use an enabled flag to allow quick disable without deleting the file",
      "Exit early when the settings file does not exist",
      "Update fields with a temp file and atomic move"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths for settings files",
      "Unquoted variables when reading field values",
      "In place edits that can corrupt the file"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code plugins",
        "answer": "Yes, it documents the .claude/*.local.md pattern used by Claude Code plugins."
      },
      {
        "question": "What are the limits of the YAML parsing",
        "answer": "The examples use sed and grep, so complex YAML may require yq."
      },
      {
        "question": "How do I integrate it into a hook",
        "answer": "Read the settings file in the hook and apply enabled and mode checks."
      },
      {
        "question": "Is my data safe in the settings file",
        "answer": "The files are local and should be gitignored to avoid commits."
      },
      {
        "question": "What if the settings file is missing or invalid",
        "answer": "Exit early or validate frontmatter and fall back to defaults."
      },
      {
        "question": "How does this compare to JSON settings",
        "answer": "Markdown frontmatter is human readable and can include a freeform body."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "create-settings-command.md",
          "type": "file",
          "path": "examples/create-settings-command.md"
        },
        {
          "name": "example-settings.md",
          "type": "file",
          "path": "examples/example-settings.md"
        },
        {
          "name": "read-settings-hook.sh",
          "type": "file",
          "path": "examples/read-settings-hook.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "parsing-techniques.md",
          "type": "file",
          "path": "references/parsing-techniques.md"
        },
        {
          "name": "real-world-examples.md",
          "type": "file",
          "path": "references/real-world-examples.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "parse-frontmatter.sh",
          "type": "file",
          "path": "scripts/parse-frontmatter.sh"
        },
        {
          "name": "validate-settings.sh",
          "type": "file",
          "path": "scripts/validate-settings.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}