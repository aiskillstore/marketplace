{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-30T09:09:36.459Z",
    "slug": "plugin-settings",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-settings",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "trust_level": "official"
  },
  "skill": {
    "name": "Plugin Settings",
    "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
    "summary": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", ...",
    "icon": "⚙️",
    "version": "0.1.0",
    "author": "Anthropic",
    "license": "Not specified",
    "category": "development",
    "tags": [
      "plugin-development",
      "configuration",
      "yaml",
      "settings",
      "state-management",
      "hooks",
      "frontmatter"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official Anthropic skill providing documentation and utilities for plugin configuration. No executable code beyond safe parsing utilities. All bash scripts are read-only helpers with proper validation.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 1978,
    "audit_model": "claude",
    "audited_at": "2025-12-30T09:09:36.458Z"
  },
  "content": {
    "user_title": "Plugin Settings Manager",
    "value_statement": "Learn how to create user-configurable Claude Code plugins using the .claude/plugin-name.local.md pattern with YAML frontmatter for structured settings and markdown for additional context.",
    "seo_keywords": [
      "plugin settings",
      "claude code configuration",
      "yaml frontmatter",
      "plugin state",
      "per-project settings",
      "bash parsing",
      "local configuration"
    ],
    "actual_capabilities": [
      "Document the .claude/plugin-name.local.md configuration pattern",
      "Provide bash utilities for parsing YAML frontmatter from settings files",
      "Demonstrate reading plugin settings from hooks, commands, and agents",
      "Validate settings file structure and field values",
      "Extract frontmatter fields and markdown body content",
      "Show real-world examples from multi-agent-swarm and ralph-wiggum plugins",
      "Guide creation of user-configurable plugins with per-project settings"
    ],
    "limitations": [
      "Settings changes require Claude Code restart to take effect",
      "Hooks cannot be hot-swapped within a session",
      "Parsing examples are bash-specific (not cross-platform)",
      "Complex YAML structures require external tools like yq",
      "No automatic schema validation or type checking"
    ],
    "use_cases": [
      {
        "title": "Plugin Developer Creating Configurable Behavior",
        "description": "Learn how to add user-configurable settings to your Claude Code plugin using YAML frontmatter in .local.md files that users can customize per-project",
        "target_user": "Plugin developers building reusable tools"
      },
      {
        "title": "Multi-Agent State Coordination",
        "description": "Store agent-specific state like task assignments, PR numbers, and coordinator session info for swarm coordination patterns",
        "target_user": "Teams using multi-agent workflows"
      },
      {
        "title": "Temporary Hook Activation",
        "description": "Enable/disable hooks dynamically via settings files without editing hooks.json, useful for project-specific validations",
        "target_user": "Users who need conditional hook behavior"
      },
      {
        "title": "Loop State Management",
        "description": "Track iteration counts, completion promises, and prompts for autonomous loop patterns like ralph-wiggum",
        "target_user": "Developers building autonomous agent patterns"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create Plugin Settings File",
        "prompt": "Create a settings file at .claude/my-plugin.local.md with enabled: true, validation_mode: strict, and max_file_size: 1000000. Add configuration instructions in the markdown body.",
        "scenario": "Setting up plugin configuration for a new project"
      },
      {
        "title": "Parse Settings in Hook",
        "prompt": "Show me how to read the .claude/security-scan.local.md file in a bash hook and extract the 'enabled' and 'strict_mode' fields from the frontmatter",
        "scenario": "Implementing configuration-driven hook behavior"
      },
      {
        "title": "Validate Settings File",
        "prompt": "Validate the structure of .claude/my-plugin.local.md and check that all required fields are present with valid values",
        "scenario": "Debugging plugin configuration issues"
      }
    ],
    "output_examples": [
      {
        "input": "Parse the 'enabled' field from .claude/my-plugin.local.md frontmatter",
        "output": "FRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \".claude/my-plugin.local.md\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')"
      },
      {
        "input": "Create a basic plugin settings file",
        "output": "---\nenabled: true\nmode: standard\nmax_file_size: 1000000\n---\n\n# Plugin Configuration\n\nYour plugin is configured with standard validation mode."
      }
    ],
    "best_practices": [
      "Always use quick-exit pattern: check file existence before parsing to avoid errors",
      "Add .claude/*.local.md to .gitignore to prevent committing user-specific settings",
      "Provide sensible defaults when settings file doesn't exist",
      "Use atomic updates with temp file + mv for modifying settings",
      "Validate field values and handle missing/corrupt files gracefully",
      "Quote all bash variables to handle special characters safely",
      "Document that settings changes require Claude Code restart",
      "Strip surrounding quotes from YAML values to handle both quoted and unquoted formats",
      "Use 'enabled' flag for explicit on/off control without deleting files"
    ],
    "anti_patterns": [
      "Hardcoding absolute file paths instead of using relative .claude/ paths",
      "Using sed -i for in-place edits (non-atomic, can corrupt files)",
      "Not providing default values when fields are missing",
      "Assuming exactly 2 --- markers (breaks if --- appears in body)",
      "Not quoting bash variables when using them",
      "Creating settings files without adding to .gitignore",
      "Making settings changes without documenting restart requirement"
    ],
    "faq": [
      {
        "question": "Why use .local.md files instead of JSON?",
        "answer": "The .local.md pattern combines YAML frontmatter for structured config with markdown body for human-readable context, prompts, or documentation. The .local suffix clearly indicates user-local files that shouldn't be committed."
      },
      {
        "question": "Do settings changes take effect immediately?",
        "answer": "No, settings changes require restarting Claude Code. Hooks are loaded at startup and cannot be hot-swapped during a session."
      },
      {
        "question": "How do I parse complex YAML structures like lists?",
        "answer": "For simple checks, use grep with wildcards. For proper list parsing, use yq (YAML processor) or convert to JSON with jq. The references/parsing-techniques.md file shows both approaches."
      },
      {
        "question": "Should settings files be committed to git?",
        "answer": "No, .claude/*.local.md files are user-local configuration and should be added to .gitignore. Provide template files in documentation instead."
      },
      {
        "question": "How do I handle missing settings files?",
        "answer": "Use the quick-exit pattern: if [[ ! -f \"$STATE_FILE\" ]]; then exit 0; fi at the start of hooks. Provide sensible defaults when file doesn't exist."
      }
    ],
    "technical_requirements": {
      "dependencies": [
        "bash",
        "sed",
        "grep",
        "awk",
        "jq (optional)",
        "yq (optional for complex YAML)"
      ],
      "permissions": [
        "Read access to .claude/ directory",
        "Write access for creating/updating settings files"
      ],
      "complexity": "intermediate"
    }
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "create-settings-command.md",
          "type": "file",
          "path": "examples/create-settings-command.md"
        },
        {
          "name": "example-settings.md",
          "type": "file",
          "path": "examples/example-settings.md"
        },
        {
          "name": "read-settings-hook.sh",
          "type": "file",
          "path": "examples/read-settings-hook.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "parsing-techniques.md",
          "type": "file",
          "path": "references/parsing-techniques.md"
        },
        {
          "name": "real-world-examples.md",
          "type": "file",
          "path": "references/real-world-examples.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "parse-frontmatter.sh",
          "type": "file",
          "path": "scripts/parse-frontmatter.sh"
        },
        {
          "name": "validate-settings.sh",
          "type": "file",
          "path": "scripts/validate-settings.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}