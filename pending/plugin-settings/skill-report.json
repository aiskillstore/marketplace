{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T07:21:00.597Z",
    "slug": "plugin-settings",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/plugin-settings",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Plugin Settings",
    "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
    "summary": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", ...",
    "icon": "ðŸ§©",
    "version": "0.1.0",
    "license": "NOASSERTION",
    "category": "documentation",
    "tags": [
      "plugin-settings",
      "claude-code",
      "yaml-frontmatter",
      "configuration",
      "hooks"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official Anthropic skill. Minimal audit performed per policy. No security issues found in the reviewed text and scripts.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 8,
    "total_lines": 1970,
    "audit_model": "codex",
    "audited_at": "2025-12-31T07:21:00.596Z"
  },
  "content": {
    "user_title": "Configure plugin settings with local Markdown files",
    "value_statement": "You need a consistent way to store per-project plugin configuration and state. This skill shows the .claude local file pattern and safe parsing steps.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "plugin settings",
      "YAML frontmatter",
      "local settings file",
      "hook configuration",
      "agent state",
      "plugin configuration"
    ],
    "actual_capabilities": [
      "Explains the .claude/plugin-name.local.md file structure with YAML frontmatter and markdown body",
      "Provides bash parsing patterns using sed, grep, and awk to read frontmatter and body",
      "Includes a frontmatter parsing utility script for extracting all fields or a single field",
      "Includes a settings validator script that checks markers, readability, and common fields",
      "Shows an example hook that reads settings and enforces configurable checks"
    ],
    "limitations": [
      "Does not provide a dedicated YAML parser beyond simple bash patterns",
      "Requires restart of Claude Code for settings changes to take effect",
      "Relies on user-managed files that are not committed to git",
      "Complex YAML structures may need yq which is not included"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Add per-project configuration",
        "description": "Define a local settings file and read it in hooks or commands to adjust behavior by project."
      },
      {
        "target_user": "Team lead",
        "title": "Coordinate agent workflows",
        "description": "Store task state and coordination fields in local files for agent hooks and status updates."
      },
      {
        "target_user": "Security engineer",
        "title": "Gate risky operations",
        "description": "Use enabled flags and strict modes to block sensitive paths or large files in hooks."
      }
    ],
    "prompt_templates": [
      {
        "title": "Start simple settings",
        "scenario": "I need a basic local config file",
        "prompt": "Create a minimal .claude/my-plugin.local.md example with enabled and mode fields and a short markdown body."
      },
      {
        "title": "Parse frontmatter",
        "scenario": "I need bash to read settings",
        "prompt": "Show a bash snippet that extracts enabled and strict_mode from YAML frontmatter and exits when disabled."
      },
      {
        "title": "Validate settings file",
        "scenario": "I want to check file structure",
        "prompt": "Provide steps to validate a settings file for markers, readability, and required fields."
      },
      {
        "title": "Advanced hook control",
        "scenario": "I need strict checks driven by config",
        "prompt": "Design a hook flow that blocks sensitive paths in strict mode and enforces a max file size from settings."
      }
    ],
    "output_examples": [
      {
        "input": "Explain how to store plugin settings in .claude and read them in a hook.",
        "output": [
          "Use .claude/my-plugin.local.md with YAML frontmatter and a markdown body",
          "Parse frontmatter with sed between the --- markers",
          "Read enabled and mode fields, exit early when disabled",
          "Use awk to extract the markdown body when needed"
        ]
      }
    ],
    "best_practices": [
      "Use quick exit when the settings file does not exist",
      "Parse frontmatter once and reuse it for multiple fields",
      "Update settings atomically with a temp file and mv"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths to settings files",
      "Unquoted variables when echoing parsed values",
      "Non-atomic in-place edits that can corrupt files"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code plugins?",
        "answer": "Yes. It documents the .claude plugin settings pattern used by Claude Code plugins."
      },
      {
        "question": "What are the limits of the parsing approach?",
        "answer": "It targets simple YAML fields. Complex structures need yq or a full YAML parser."
      },
      {
        "question": "How does this integrate with hooks and commands?",
        "answer": "Read the settings file in hooks or commands and apply the extracted fields to control behavior."
      },
      {
        "question": "Is my data safe in these settings files?",
        "answer": "Files are local and gitignored, but you should avoid storing secrets and set strict access checks."
      },
      {
        "question": "What if my settings file is not detected?",
        "answer": "Verify the file path and markers, then restart Claude Code so changes take effect."
      },
      {
        "question": "How does this compare to JSON config files?",
        "answer": "It combines YAML for structured fields with markdown for prompts, which JSON does not provide."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "create-settings-command.md",
          "type": "file",
          "path": "examples/create-settings-command.md"
        },
        {
          "name": "example-settings.md",
          "type": "file",
          "path": "examples/example-settings.md"
        },
        {
          "name": "read-settings-hook.sh",
          "type": "file",
          "path": "examples/read-settings-hook.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "parsing-techniques.md",
          "type": "file",
          "path": "references/parsing-techniques.md"
        },
        {
          "name": "real-world-examples.md",
          "type": "file",
          "path": "references/real-world-examples.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "parse-frontmatter.sh",
          "type": "file",
          "path": "scripts/parse-frontmatter.sh"
        },
        {
          "name": "validate-settings.sh",
          "type": "file",
          "path": "scripts/validate-settings.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}