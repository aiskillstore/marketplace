{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-10T10:17:01.255Z",
    "slug": "allra-fintech-allra-database-schema",
    "source_url": "https://github.com/Allra-Fintech/allra-ai-skills/tree/main/backend-plugin/skills/database-schema",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "2.0.0",
    "source_type": "community",
    "content_hash": "e9ba83add7da5afc3f0af6415f64694d3ba664718f86760b064c49284acce143",
    "tree_hash": "f6600e04f63ec9cc241bc0ee07d535916d9aba2c0cecb903124504fdad18cc70"
  },
  "skill": {
    "name": "allra-database-schema",
    "description": "Allra Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑ§Í≥Ñ Î∞è QueryDSL ÏÇ¨Ïö© Í∑úÏπô. Use when creating JPA entities, writing QueryDSL queries, or adding @Transactional annotations.",
    "summary": "Allra Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑ§Í≥Ñ Î∞è QueryDSL ÏÇ¨Ïö© Í∑úÏπô. Use when creating JPA entities, writing QueryDSL queries, or addin...",
    "icon": "üóÑÔ∏è",
    "version": "1.0.0",
    "author": "Allra-Fintech",
    "license": "MIT",
    "category": "coding",
    "tags": [
      "database",
      "jpa",
      "querydsl",
      "spring-boot",
      "java"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Documentation-only skill containing coding standards and guidelines for Java/Spring Boot database development. No executable code, no file access, no network calls, no system modifications.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 1,
    "total_lines": 309,
    "audit_model": "claude",
    "audited_at": "2026-01-10T10:17:01.255Z"
  },
  "content": {
    "user_title": "Apply database design standards",
    "value_statement": "Inconsistent database code causes bugs and maintenance issues. This skill provides Allra backend coding standards for JPA entities, QueryDSL queries, and transaction management to ensure consistency.",
    "seo_keywords": [
      "database schema",
      "JPA entity",
      "QueryDSL",
      "Spring Boot",
      "Java",
      "Claude",
      "Codex",
      "Claude Code",
      "transaction management",
      "backend standards"
    ],
    "actual_capabilities": [
      "Provides JPA entity design guidelines with annotations and naming conventions",
      "Defines QueryDSL repository patterns with Support interface structure",
      "Specifies @Transactional usage with readOnly optimization",
      "Establishes DTO projection rules using @QueryProjection",
      "Includes code review checklist for database-related code"
    ],
    "limitations": [
      "Does not generate actual database schema code",
      "Does not execute or validate database queries",
      "Specific to Allra backend conventions - may require adaptation",
      "Does not cover database migration or schema evolution"
    ],
    "use_cases": [
      {
        "target_user": "Backend developers",
        "title": "Create database entities",
        "description": "Generate JPA entities following Allra naming conventions and annotation patterns"
      },
      {
        "target_user": "Code reviewers",
        "title": "Review database code",
        "description": "Validate QueryDSL queries and transaction annotations against team standards"
      },
      {
        "target_user": "New team members",
        "title": "Learn team conventions",
        "description": "Understand Allra backend database patterns and best practices quickly"
      }
    ],
    "prompt_templates": [
      {
        "title": "Create JPA entity",
        "scenario": "Generate a new entity",
        "prompt": "Create a JPA entity for [entity_name] with fields [field_list] following Allra database schema conventions. Include proper @Table, @Column annotations, @CreatedDate, @LastModifiedDate, and use @QueryProjection for DTOs."
      },
      {
        "title": "Write QueryDSL query",
        "scenario": "Build a query with QueryDSL",
        "prompt": "Write a QueryDSL query using the Support pattern to fetch [data_requirements] from [entity]. Follow Allra conventions: @QueryProjection for DTOs, proper repository structure, and From clause placement."
      },
      {
        "title": "Add transaction support",
        "scenario": "Annotate service methods",
        "prompt": "Add @Transactional annotations to this service class. Use readOnly=true for pure read operations and regular @Transactional for methods with writes or modifications."
      },
      {
        "title": "Review database code",
        "scenario": "Audit existing code",
        "prompt": "Review this repository or service code against Allra database schema standards. Check: JPA entity annotations, QueryDSL usage, transaction annotations, lazy loading, and naming conventions. Report any violations."
      }
    ],
    "output_examples": [
      {
        "input": "Create a User JPA entity with email, name, and status fields",
        "output": [
          "Generated User entity with @Entity, @Table, @Id, @GeneratedValue annotations",
          "Added @Column with nullable, unique, length constraints",
          "Included @Enumerated(EnumType.STRING) for status field",
          "Applied @CreatedDate and @LastModifiedDate for audit fields",
          "Used @NoArgsConstructor(access = AccessLevel.PROTECTED)",
          "Note: Add @QueryProjection to DTO for QueryDSL support"
        ]
      }
    ],
    "best_practices": [
      "Use lazy loading (FetchType.LAZY) for all entity relationships",
      "Apply @QueryProjection to DTOs used with QueryDSL queries",
      "Place QueryDSL implementations in the entity's repository following the Support pattern",
      "Annotate all service methods explicitly with @Transactional"
    ],
    "anti_patterns": [
      "Avoid direct injection of RepositorySupport implementation classes",
      "Do not use eager loading (FetchType.EAGER) by default",
      "Do not omit @Transactional on service methods",
      "Avoid putting query logic in the wrong repository based on FROM clause"
    ],
    "faq": [
      {
        "question": "Which tools work with this skill?",
        "answer": "Claude, Codex, and Claude Code. The skill provides guidelines that work with any Java/Spring Boot development."
      },
      {
        "question": "What versions are supported?",
        "answer": "Java 17+, Spring Boot 3.2+, JPA/Hibernate, and QueryDSL. Testcontainers is optional."
      },
      {
        "question": "Does it generate code?",
        "answer": "No. This skill provides standards and conventions. You use the prompts to request code generation."
      },
      {
        "question": "Is this mandatory or flexible?",
        "answer": "Core rules are mandatory for Allra projects. Guidelines marked as optional can be adapted per project needs."
      },
      {
        "question": "Can I use this for non-Allra projects?",
        "answer": "Yes. The patterns are general Java/Spring Boot best practices but reflect Allra-specific conventions."
      },
      {
        "question": "What databases are supported?",
        "answer": "MariaDB, PostgreSQL, MySQL, and other JPA-compatible databases. The skill includes MariaDB compatibility notes."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
