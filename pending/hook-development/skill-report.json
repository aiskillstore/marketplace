{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T07:16:48.974Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "author": "unknown",
    "license": "unknown",
    "category": "devops",
    "tags": [
      "hooks",
      "automation",
      "validation",
      "claude-code"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official skill with pre-reviewed source. A minimal audit was performed and no issues were flagged. Content appears consistent with safe hook development guidance.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 11,
    "total_lines": 2770,
    "audit_model": "codex",
    "audited_at": "2025-12-31T07:16:48.973Z"
  },
  "content": {
    "user_title": "Build secure Claude Code hooks",
    "value_statement": "You need reliable hook automation without security mistakes. This skill shows safe patterns, validation steps, and testing workflows for hooks.",
    "seo_keywords": [
      "Claude",
      "Codex",
      "Claude Code",
      "hook development",
      "PreToolUse",
      "PostToolUse",
      "hook validation",
      "prompt hooks",
      "plugin automation",
      "hook testing"
    ],
    "actual_capabilities": [
      "Validate hooks.json structure, events, and timeouts with a schema script",
      "Lint hook scripts for shebang, input handling, quoting, and hardcoded paths",
      "Generate sample inputs and test hooks with timeout and exit code reporting",
      "Provide example PreToolUse validators for file writes and bash commands",
      "Provide a SessionStart script to load project context into env vars"
    ],
    "limitations": [
      "Requires bash and jq for the provided scripts",
      "Hook changes require a Claude Code restart to load",
      "Prompt hooks are best supported on specific events only",
      "Scripts assume Unix style paths and tools"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Ship safe hook rules",
        "description": "Create PreToolUse checks that block risky writes and validate commands before release."
      },
      {
        "target_user": "Security lead",
        "title": "Enforce guardrails",
        "description": "Add prompt hooks that review tool usage and require approval for risky operations."
      },
      {
        "target_user": "Team lead",
        "title": "Standardize workflows",
        "description": "Use SessionStart hooks to load project context and set shared environment variables."
      }
    ],
    "prompt_templates": [
      {
        "title": "Create a basic PreToolUse hook",
        "scenario": "Beginner wants to block risky writes",
        "prompt": "Create a PreToolUse hook that denies writes to .env files and path traversal. Use prompt based hooks and show hooks.json."
      },
      {
        "title": "Add a bash command validator",
        "scenario": "Intermediate needs command safety checks",
        "prompt": "Write a command hook script that blocks rm -rf and mkfs, asks on sudo, and returns proper JSON decisions."
      },
      {
        "title": "Set up SessionStart context loading",
        "scenario": "Intermediate wants project detection",
        "prompt": "Provide a SessionStart command hook that detects Node, Python, or Go and sets env vars using CLAUDE_ENV_FILE."
      },
      {
        "title": "Design a multi stage policy",
        "scenario": "Advanced needs layered validation",
        "prompt": "Design a PreToolUse policy with a fast command check and a prompt review. Include matchers and timeouts."
      }
    ],
    "output_examples": [
      {
        "input": "Create a hook that blocks writes to secrets and explains why.",
        "output": [
          "PreToolUse matcher for Write and Edit",
          "Prompt text that checks for .env and credential patterns",
          "Decision output with deny and a clear system message"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for portable paths",
      "Validate inputs and quote all variables in scripts",
      "Set short timeouts and keep hooks fast"
    ],
    "anti_patterns": [
      "Hardcoded absolute paths in hook commands",
      "Unquoted variables that allow injection",
      "Long running hooks that block sessions"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes. It targets the Claude Code hook events and formats described in the skill."
      },
      {
        "question": "What are the main limits?",
        "answer": "Hooks load at session start and prompt hooks are best on specific events only."
      },
      {
        "question": "How do I integrate with my plugin?",
        "answer": "Add hooks to hooks.json and reference scripts with ${CLAUDE_PLUGIN_ROOT}."
      },
      {
        "question": "Does it send my data anywhere?",
        "answer": "No. The scripts run locally and use stdin inputs provided by Claude Code."
      },
      {
        "question": "What if a hook fails?",
        "answer": "Use the test and linter scripts to find errors and validate JSON output."
      },
      {
        "question": "How does this compare to manual checks?",
        "answer": "Hooks automate checks consistently and can block or ask before risky actions."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}