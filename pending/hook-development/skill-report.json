{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2025-12-31T08:59:21.197Z",
    "slug": "hook-development",
    "source_url": "https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev/skills/hook-development",
    "source_ref": "main",
    "model": "codex",
    "analysis_version": "2.0.0",
    "source_type": "official"
  },
  "skill": {
    "name": "Hook Development",
    "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
    "summary": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop ...",
    "icon": "ü™ù",
    "version": "0.1.0",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "hooks",
      "automation",
      "claude-code",
      "plugins"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "scripts",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Official source reviewed with minimal audit. No security issues identified in the provided scripts and references.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 11,
    "total_lines": 2770,
    "audit_model": "codex",
    "audited_at": "2025-12-31T08:59:21.197Z"
  },
  "content": {
    "user_title": "Build Claude Code hooks safely",
    "value_statement": "You need reliable hook behavior without fragile scripts. This skill provides tested patterns, validation, and testing tools for Claude Code hooks.",
    "seo_keywords": [
      "Claude hooks",
      "Claude Code",
      "Codex skills",
      "Claude Code plugins",
      "hook validation",
      "prompt hooks",
      "command hooks",
      "hook testing",
      "hook linting"
    ],
    "actual_capabilities": [
      "Explain hook events, matchers, and input and output formats",
      "Provide prompt and command hook configuration examples",
      "Validate hooks.json structure with a schema check script",
      "Test hook scripts with generated sample inputs",
      "Lint hook scripts for safety and best practice issues",
      "Provide example scripts for write and bash validation and session context"
    ],
    "limitations": [
      "Works only with the Claude Code hook system and its formats",
      "Does not install or execute hooks automatically",
      "Command hook examples require bash, jq, and timeout",
      "Hook changes require a Claude Code session restart"
    ],
    "use_cases": [
      {
        "target_user": "Plugin developer",
        "title": "Create new hooks",
        "description": "Set up PreToolUse and Stop hooks with prompt or command logic for a new plugin."
      },
      {
        "target_user": "Security engineer",
        "title": "Block risky actions",
        "description": "Design hook rules to deny dangerous file writes and destructive commands."
      },
      {
        "target_user": "Team lead",
        "title": "Enforce quality",
        "description": "Require tests and builds before allowing the agent to stop work."
      }
    ],
    "prompt_templates": [
      {
        "title": "Add a PreToolUse hook",
        "scenario": "Beginner needs a safe write check",
        "prompt": "Create a PreToolUse prompt hook that blocks writes to /etc and .env files and returns allow or deny."
      },
      {
        "title": "Test a hook script",
        "scenario": "Run a script with sample input",
        "prompt": "Show how to use test-hook.sh to generate PreToolUse input and test my validate-write.sh script."
      },
      {
        "title": "Validate hooks.json",
        "scenario": "Check configuration before deploy",
        "prompt": "Explain how to run validate-hook-schema.sh on hooks/hooks.json and what it validates."
      },
      {
        "title": "Design multi stage checks",
        "scenario": "Advanced layered validation",
        "prompt": "Draft a PreToolUse configuration that runs a fast command check and then a prompt check for Bash safety."
      }
    ],
    "output_examples": [
      {
        "input": "Create a PreToolUse hook that blocks writing to /etc and .env files.",
        "output": [
          "Use PreToolUse with matcher Write or Edit",
          "Prompt checks system paths and sensitive files",
          "Return deny with a clear reason when blocked"
        ]
      }
    ],
    "best_practices": [
      "Use ${CLAUDE_PLUGIN_ROOT} for portable command paths",
      "Validate inputs and quote all shell variables",
      "Set timeouts and test hooks with sample input"
    ],
    "anti_patterns": [
      "Hardcode absolute paths in hook commands",
      "Assume hooks run in a specific order",
      "Skip input validation in command hooks"
    ],
    "faq": [
      {
        "question": "Is this compatible with Claude Code hooks?",
        "answer": "Yes. It targets Claude Code hook events and formats."
      },
      {
        "question": "What limits should I expect?",
        "answer": "It documents supported events, but behavior depends on your Claude Code version."
      },
      {
        "question": "Can I integrate external tools?",
        "answer": "Yes. Command hooks can call external tools with bash."
      },
      {
        "question": "Does it send data externally?",
        "answer": "No. The guidance and scripts are local unless you add network calls."
      },
      {
        "question": "What if my hook does not run?",
        "answer": "Check executable permissions, paths, and restart Claude Code."
      },
      {
        "question": "Prompt hooks or command hooks?",
        "answer": "Prompt hooks are flexible. Command hooks are deterministic and fast."
      }
    ]
  },
  "file_structure": [
    {
      "name": "examples",
      "type": "dir",
      "path": "examples",
      "children": [
        {
          "name": "load-context.sh",
          "type": "file",
          "path": "examples/load-context.sh"
        },
        {
          "name": "validate-bash.sh",
          "type": "file",
          "path": "examples/validate-bash.sh"
        },
        {
          "name": "validate-write.sh",
          "type": "file",
          "path": "examples/validate-write.sh"
        }
      ]
    },
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "advanced.md",
          "type": "file",
          "path": "references/advanced.md"
        },
        {
          "name": "migration.md",
          "type": "file",
          "path": "references/migration.md"
        },
        {
          "name": "patterns.md",
          "type": "file",
          "path": "references/patterns.md"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "hook-linter.sh",
          "type": "file",
          "path": "scripts/hook-linter.sh"
        },
        {
          "name": "README.md",
          "type": "file",
          "path": "scripts/README.md"
        },
        {
          "name": "test-hook.sh",
          "type": "file",
          "path": "scripts/test-hook.sh"
        },
        {
          "name": "validate-hook-schema.sh",
          "type": "file",
          "path": "scripts/validate-hook-schema.sh"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}