{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-21T10:59:30.506Z",
    "slug": "microsoft-capacity",
    "source_url": "https://github.com/microsoft/github-copilot-for-azure/tree/main/plugin/skills/microsoft-foundry/models/deploy-model/capacity",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "e61a87bf9cc5e91a92f728f0d167f5ceb87a65b8076b5043e328e3e064613d90",
    "tree_hash": "2e5bec152014aebd32e61fce603e99c2518581fddcace88ff2a24ffc47493249"
  },
  "skill": {
    "name": "capacity",
    "description": "Discovers available Azure OpenAI model capacity across regions and projects. Analyzes quota limits, compares availability, and recommends optimal deployment locations based on capacity requirements. USE FOR: find capacity, check quota, where can I deploy, capacity discovery, best region for capacity, multi-project capacity search, quota analysis, model availability, region comparison, check TPM availability. DO NOT USE FOR: actual deployment (hand off to preset or customize after discovery), quota increase requests (direct user to Azure Portal), listing existing deployments.",
    "summary": "Finds available Azure OpenAI model capacity across regions and projects to help users identify where to deploy AI models.",
    "icon": "üîç",
    "version": "1.0.0",
    "author": "microsoft",
    "license": "MIT",
    "category": "data",
    "tags": [
      "azure",
      "openai",
      "capacity",
      "quota",
      "deployment"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "Verified as legitimate Microsoft Azure skill. Static scanner flagged Azure CLI commands, management URLs, and documentation paths as potential issues, but evaluation confirms these are standard Azure operations. No malicious intent, no data exfiltration, read-only capacity queries only.",
    "risk_factor_evidence": [],
    "critical_findings": [],
    "high_findings": [
      {
        "title": "False Positive: PowerShell Sort Expression Flagged as Weak Crypto",
        "description": "Static scanner incorrectly flagged PowerShell comparison operators (-eq) at lines 98-101 in discover_and_rank.ps1 as 'weak cryptographic algorithm'. These are boolean sort expressions, not cryptographic code.",
        "locations": [
          {
            "file": "scripts/discover_and_rank.ps1",
            "line_start": 98,
            "line_end": 101
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Code clearly shows sort expressions comparing boolean values, not cryptographic operations"
      },
      {
        "title": "False Positive: Azure CLI Commands Flagged as External Commands",
        "description": "Static scanner flagged Azure CLI commands (az account, az rest, az cognitiveservices) as 'external_commands'. These are standard Azure operations for resource queries, not malicious execution.",
        "locations": [
          {
            "file": "scripts/discover_and_rank.ps1",
            "line_start": 22,
            "line_end": 28
          },
          {
            "file": "scripts/discover_and_rank.sh",
            "line_start": 17,
            "line_end": 42
          },
          {
            "file": "scripts/query_capacity.ps1",
            "line_start": 25,
            "line_end": 31
          },
          {
            "file": "scripts/query_capacity.sh",
            "line_start": 20,
            "line_end": 64
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.92,
        "confidence_reasoning": "Azure CLI commands are expected and required for Azure resource management; legitimate tool usage"
      },
      {
        "title": "False Positive: Azure Management URLs Flagged as Hardcoded URLs",
        "description": "Static scanner flagged Azure Resource Manager endpoints as 'hardcoded URLs'. These are legitimate Microsoft Azure infrastructure URLs for capacity and quota queries.",
        "locations": [
          {
            "file": "scripts/discover_and_rank.ps1",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "scripts/discover_and_rank.ps1",
            "line_start": 32,
            "line_end": 32
          },
          {
            "file": "scripts/discover_and_rank.sh",
            "line_start": 21,
            "line_end": 27
          },
          {
            "file": "scripts/query_capacity.ps1",
            "line_start": 41,
            "line_end": 43
          },
          {
            "file": "scripts/query_capacity.sh",
            "line_start": 34,
            "line_end": 36
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "URLs point to official Azure management.azure.com endpoints; expected for Azure administration"
      },
      {
        "title": "False Positive: Documentation Links Flagged as Path Traversal",
        "description": "Static scanner flagged relative paths in SKILL.md (like ../preset/SKILL.md) as 'path traversal'. These are legitimate documentation links to related skills.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 31,
            "line_end": 31
          },
          {
            "file": "SKILL.md",
            "line_start": 115,
            "line_end": 145
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "Documentation links to sibling skill files; no user-controlled path manipulation"
      },
      {
        "title": "False Positive: System Reconnaissance Flagged",
        "description": "Static scanner flagged 'az account show' as 'system reconnaissance'. This is standard Azure CLI to retrieve current subscription information for authentication.",
        "locations": [
          {
            "file": "scripts/discover_and_rank.ps1",
            "line_start": 22,
            "line_end": 22
          },
          {
            "file": "scripts/discover_and_rank.sh",
            "line_start": 17,
            "line_end": 17
          },
          {
            "file": "scripts/query_capacity.ps1",
            "line_start": 25,
            "line_end": 25
          },
          {
            "file": "scripts/query_capacity.sh",
            "line_start": 20,
            "line_end": 20
          }
        ],
        "verdict": "FALSE_POSITIVE",
        "confidence": 0.95,
        "confidence_reasoning": "az account show is required for Azure authentication; standard practice for Azure tools"
      }
    ],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 5,
    "total_lines": 531,
    "audit_model": "claude",
    "audited_at": "2026-02-21T10:59:30.506Z",
    "risk_factors": []
  },
  "content": {
    "user_title": "Discover Azure OpenAI Capacity",
    "value_statement": "Find available Azure OpenAI model capacity across regions and projects to identify optimal deployment locations based on your capacity requirements.",
    "seo_keywords": [
      "azure openai capacity",
      "azure ai capacity discovery",
      "claude code azure",
      "codex azure openai",
      "find model capacity azure",
      "quota availability azure openai",
      "tpm capacity azure",
      "azure deployment region",
      "azure ai model availability",
      "claude azure integration"
    ],
    "actual_capabilities": [
      "Discover available Azure OpenAI model capacity across all accessible regions",
      "Query subscription quota limits and usage per region",
      "Cross-reference capacity with existing AI Services projects",
      "Rank regions by capacity, quota availability, and project count",
      "Provide recommended deployment locations based on capacity targets",
      "Validate that subscription has available quota before deployment"
    ],
    "limitations": [
      "Does not perform actual deployments - only discovers and recommends",
      "Does not modify Azure resources or quotas",
      "Requires Azure CLI authentication (az login)",
      "Only works with Azure OpenAI models, not other AI providers"
    ],
    "use_cases": [
      {
        "title": "Find Deployment Location for New Model",
        "description": "User wants to deploy GPT-4o but received a quota error. Use this skill to find regions with available capacity and quota.",
        "target_user": "Azure AI developers who encounter quota limits"
      },
      {
        "title": "Compare Regional Capacity",
        "description": "User wants to compare available capacity across regions to choose the best location for a high-traffic AI application.",
        "target_user": "Solutions architects planning AI deployments"
      },
      {
        "title": "Pre-deployment Capacity Check",
        "description": "User wants to verify capacity is available before starting a deployment workflow to avoid failures.",
        "target_user": "DevOps engineers automating AI deployments"
      }
    ],
    "prompt_templates": [
      {
        "title": "Find capacity for specific model",
        "prompt": "Find available Azure OpenAI capacity for gpt-4o in the eastus region with at least 10K TPM capacity.",
        "scenario": "Basic capacity discovery with region and capacity target"
      },
      {
        "title": "Find capacity across all regions",
        "prompt": "Discover all regions where I can deploy o3-mini with the latest version and at least 200K TPM capacity.",
        "scenario": "Multi-region capacity search with high capacity requirement"
      },
      {
        "title": "Find capacity with project match",
        "prompt": "Find Azure OpenAI capacity for gpt-4o-mini in regions where I already have AI Services projects, sorted by available quota.",
        "scenario": "Capacity discovery with existing project matching"
      },
      {
        "title": "Compare capacity across models",
        "prompt": "Compare available capacity for both gpt-4o and gpt-4o-mini across all regions to determine which model has better availability.",
        "scenario": "Multi-model capacity comparison for deployment planning"
      }
    ],
    "output_examples": [
      {
        "input": "Find available capacity for gpt-4o with at least 50K TPM",
        "output": "Model: gpt-4o v2024-08-06 | SKU: GlobalStandard | Min Capacity: 50K TPM\nRegions with capacity: 12 | Meets target: 5 | With quota: 3 | With projects: 2\n\nRegion                Available    Meets Target   Quota        Projects  Sample Project\n----------------------------------------------------------------------------------------------------\neastus2               120K         YES            80K          3         ai-project-001\nwestus3               90K          YES            0 (none)     1         ai-project-002\nswedencentral         100K         YES            100K        0         (none)\nnorwayeast            60K          YES            60K         0         (none)\nsoutheastasia         55K          YES            45K         0         (none)"
      },
      {
        "input": "Find where I can deploy gpt-4o-mini with 200K TPM",
        "output": "Model: gpt-4o-mini v2024-11-20 | SKU: GlobalStandard | Min Capacity: 200K TPM\nRegions with capacity: 8 | Meets target: 2 | With quota: 2 | With projects: 1\n\nRegion                Available    Meets Target   Quota        Projects  Sample Project\n----------------------------------------------------------------------------------------------------\neastus2               250K         YES            200K         3         ai-prod-eastus\nwesteurope            220K         YES            150K         1         ai-prod-weur"
      }
    ],
    "best_practices": [
      "Always validate quota availability after capacity discovery since capacity shows platform limits but quota shows subscription limits",
      "Run discovery before starting deployment to avoid failures due to capacity or quota constraints",
      "Use the ranked output to identify regions that meet both capacity and quota requirements"
    ],
    "anti_patterns": [
      "Using this skill to request quota increases (route to quota skill instead)",
      "Attempting to deploy directly from discovery results (hand off to preset or customize)",
      "Ignoring the quota validation step and deploying to regions without available subscription quota"
    ],
    "faq": [
      {
        "question": "What is the difference between capacity and quota?",
        "answer": "Capacity is the total available capacity in an Azure region for a model. Quota is your subscription-specific limit in that region. You need both to be available to deploy."
      },
      {
        "question": "Does this skill deploy the model?",
        "answer": "No, this skill only discovers and recommends deployment locations. After finding capacity, route to the preset or customize skill for actual deployment."
      },
      {
        "question": "Why do some regions show capacity but no quota?",
        "answer": "The platform has capacity, but your subscription may not have quota allocated for that region. Check the quota skill to request quota increases."
      },
      {
        "question": "What does the 'Meets Target' column mean?",
        "answer": "It indicates whether the available capacity meets your minimum capacity target (MinCapacity parameter). YES means it meets the requirement."
      },
      {
        "question": "Can I use this skill without Azure CLI installed?",
        "answer": "No, this skill requires Azure CLI (az login) for authentication to query Azure resources."
      },
      {
        "question": "What happens if no regions have available capacity?",
        "answer": "If no regions meet your capacity target, the skill will show all available regions. For troubleshooting, route to the quota skill for capacity increase requests."
      }
    ]
  },
  "file_structure": [
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "discover_and_rank.ps1",
          "type": "file",
          "path": "scripts/discover_and_rank.ps1",
          "lines": 114
        },
        {
          "name": "discover_and_rank.sh",
          "type": "file",
          "path": "scripts/discover_and_rank.sh",
          "lines": 114
        },
        {
          "name": "query_capacity.ps1",
          "type": "file",
          "path": "scripts/query_capacity.ps1",
          "lines": 81
        },
        {
          "name": "query_capacity.sh",
          "type": "file",
          "path": "scripts/query_capacity.sh",
          "lines": 76
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 146
    }
  ]
}
