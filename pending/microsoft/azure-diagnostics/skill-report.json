{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-20T08:51:47.072Z",
    "slug": "microsoft-azure-diagnostics",
    "source_url": "https://github.com/microsoft/github-copilot-for-azure/tree/main/plugin/skills/azure-diagnostics/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "e3fdb6b3358c307bf1520c77c446245e3746689c812a0d77c8366a6a421742a0",
    "tree_hash": "210ff5485fa44bb12ba267dddee7b107823381050cb820a5cb3548b7639b85ce"
  },
  "skill": {
    "name": "azure-diagnostics",
    "description": "Debug and troubleshoot production issues on Azure. Covers Container Apps diagnostics, log analysis with KQL, health checks, and common issue resolution for image pulls, cold starts, and health probes.\nUSE FOR: debug production issues, troubleshoot container apps, analyze logs with KQL, fix image pull failures, resolve cold start issues, investigate health probe failures, check resource health, view application logs, find root cause of errors\nDO NOT USE FOR: deploying applications (use azure-deploy), creating new resources (use azure-prepare), setting up monitoring (use azure-observability), cost optimization (use azure-cost-optimization)\n",
    "summary": "Debug and troubleshoot production issues on Azure. Covers Container Apps diagnostics, log analysis w...",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "microsoft",
    "license": "MIT",
    "category": "devops",
    "tags": [
      "azure",
      "diagnostics",
      "troubleshooting",
      "container-apps",
      "kql"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": []
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This skill contains only documentation with example Azure CLI commands and KQL queries. Static scanner flagged 70 instances of 'external_commands' but these are markdown code blocks showing example commands, not executable code. Network findings are documentation URLs. Env access findings reference standard Azure Container Apps environment variables. All high/critical findings are false positives - the skill is safe for publication.",
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 120
          },
          {
            "file": "references/azure-resource-graph.md",
            "line_start": 3,
            "line_end": 93
          },
          {
            "file": "references/container-apps/README.md",
            "line_start": 7,
            "line_end": 105
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 14,
            "line_end": 60
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "references/container-apps/README.md",
            "line_start": 62,
            "line_end": 62
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 64,
            "line_end": 65
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "references/container-apps/README.md",
            "line_start": 81,
            "line_end": 81
          }
        ]
      }
    ],
    "critical_findings": [
      {
        "title": "False Positive: Dangerous Combination Heuristic",
        "description": "Scanner flagged 'Code execution + Network + Credential access' pattern. This is a documentation skill with no executable code. The 'external_commands' findings are Azure CLI examples in markdown code blocks. Network findings are documentation URLs. No credential access exists.",
        "locations": [
          {
            "file": "multiple",
            "line_start": 1,
            "line_end": 1
          }
        ],
        "confidence": 0.95,
        "confidence_reasoning": "Confirmed false positive - skill contains only markdown documentation with example commands, no executable code"
      }
    ],
    "high_findings": [
      {
        "title": "False Positive: Weak Cryptographic Algorithm",
        "description": "Scanner flagged 'Weak cryptographic algorithm' in KQL query files. This is a false positive - the scanner misinterprets KQL keywords like 'where', 'state' as cryptographic terms. These are Kusto Query Language queries for log analysis.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 3,
            "line_end": 3
          },
          {
            "file": "SKILL.md",
            "line_start": 45,
            "line_end": 45
          },
          {
            "file": "SKILL.md",
            "line_start": 78,
            "line_end": 78
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 19,
            "line_end": 19
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 41,
            "line_end": 41
          }
        ],
        "confidence": 0.92,
        "confidence_reasoning": "KQL queries use 'where' and 'state' as data filtering terms, not cryptographic algorithms"
      }
    ],
    "medium_findings": [
      {
        "title": "False Positive: External Commands in Documentation",
        "description": "Scanner flagged 70 instances of 'Ruby/shell backtick execution'. These are Azure CLI commands shown in markdown code blocks as documentation examples. The skill is a documentation reference - it shows users example commands but does not execute them.",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 57,
            "line_end": 120
          },
          {
            "file": "references/azure-resource-graph.md",
            "line_start": 3,
            "line_end": 93
          },
          {
            "file": "references/container-apps/README.md",
            "line_start": 7,
            "line_end": 105
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 14,
            "line_end": 60
          }
        ],
        "confidence": 0.93,
        "confidence_reasoning": "Markdown backticks are for code formatting, not execution - skill contains example commands only"
      },
      {
        "title": "False Positive: Hardcoded URLs",
        "description": "Scanner flagged 3 hardcoded URLs. These are legitimate Microsoft Learn documentation links and example curl commands for health check endpoints.",
        "locations": [
          {
            "file": "references/container-apps/README.md",
            "line_start": 62,
            "line_end": 62
          },
          {
            "file": "references/kql-queries.md",
            "line_start": 64,
            "line_end": 65
          }
        ],
        "confidence": 0.88,
        "confidence_reasoning": "URLs point to Azure documentation and example health check endpoints - no malicious network behavior"
      },
      {
        "title": "False Positive: Environment Variable Access",
        "description": "Scanner flagged 'process.env.PORT' as sensitive. This is standard Azure Container Apps documentation showing how to read the container port from environment variables.",
        "locations": [
          {
            "file": "references/container-apps/README.md",
            "line_start": 81,
            "line_end": 81
          }
        ],
        "confidence": 0.9,
        "confidence_reasoning": "process.env.PORT is a standard Azure environment variable - documented best practice, not a security issue"
      }
    ],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 4,
    "total_lines": 393,
    "audit_model": "claude",
    "audited_at": "2026-02-20T08:51:47.072Z"
  },
  "content": {
    "user_title": "Debug Azure Production Issues",
    "value_statement": "This skill helps developers diagnose and troubleshoot production issues in Azure by providing structured debugging workflows, diagnostic commands, and KQL queries for Container Apps.",
    "seo_keywords": [
      "Azure diagnostics",
      "Azure troubleshooting",
      "Azure Container Apps debug",
      "KQL queries",
      "Azure log analysis",
      "Azure health checks",
      "Claude Codex Azure",
      "Claude Code Azure debugging"
    ],
    "actual_capabilities": [
      "Diagnose Azure Container Apps issues including image pull failures, cold starts, and health probe failures",
      "Provide systematic debugging workflows with health checks, log analysis, and metrics review",
      "Generate KQL queries for Application Insights log analysis",
      "Query Azure Resource Graph for resource health status",
      "Use AppLens MCP for AI-powered diagnostics",
      "Reference Azure CLI commands for common diagnostic tasks"
    ],
    "limitations": [
      "Does not execute Azure CLI commands - provides documentation and examples only",
      "Cannot access your Azure subscription directly",
      "Only covers Container Apps diagnostics - other Azure services not included",
      "Does not fix issues - only provides guidance and troubleshooting steps"
    ],
    "use_cases": [
      {
        "title": "Debug Container App image pull failures",
        "description": "Diagnose why a container image fails to pull from Azure Container Registry and get step-by-step fix commands",
        "target_user": "Developers running containers on Azure"
      },
      {
        "title": "Analyze application logs with KQL",
        "description": "Query Application Insights to find recent errors, failed requests, and slow performance issues",
        "target_user": "DevOps engineers investigating application issues"
      },
      {
        "title": "Fix cold start timeout issues",
        "description": "Identify and resolve slow first-request issues in Azure Container Apps by adjusting replica settings",
        "target_user": "Backend developers using serverless containers"
      }
    ],
    "prompt_templates": [
      {
        "title": "Basic diagnostic request",
        "prompt": "My Azure Container App is failing to start. Help me diagnose the issue using the azure-diagnostics skill.",
        "scenario": "User reports container app deployment failure"
      },
      {
        "title": "Image pull failure troubleshooting",
        "prompt": "I keep getting image pull errors in my Container App. How do I fix ACR authentication issues?",
        "scenario": "User cannot pull container images"
      },
      {
        "title": "Log analysis with KQL",
        "prompt": "Help me write KQL queries to find errors in my Application Insights logs from the last hour.",
        "scenario": "User wants to analyze application logs"
      },
      {
        "title": "Health probe investigation",
        "prompt": "My container keeps restarting due to health probe failures. What should I check?",
        "scenario": "Container app instability due to health checks"
      }
    ],
    "output_examples": [
      {
        "input": "My Container App shows status 'Running' but returns 502 errors",
        "output": [
          "Check the ingress targetPort configuration matches your app's listening port",
          "Verify the health endpoint returns HTTP 200",
          "Review container startup logs for errors",
          "Ensure Dockerfile EXPOSE matches ingress configuration"
        ]
      },
      {
        "input": "Write a KQL query to find failed requests",
        "output": [
          "AppRequests",
          "| where Success == false",
          "| where TimeGenerated > ago(1h)",
          "| summarize count() by Name, ResultCode",
          "| order by count_ desc"
        ]
      }
    ],
    "best_practices": [
      "Start with resource health checks before diving into detailed logs",
      "Use systematic diagnosis flow: symptoms -> health -> logs -> metrics -> changes",
      "Leverage AppLens MCP for AI-powered root cause analysis when available",
      "Document all attempted remediation steps for future reference"
    ],
    "anti_patterns": [
      "Do not skip health checks when investigating container restarts",
      "Do not assume Azure service health without checking HealthResources first",
      "Do not ignore provisioning state failures - these indicate deployment issues"
    ],
    "faq": [
      {
        "question": "What does this skill actually do?",
        "answer": "This skill provides troubleshooting guides, diagnostic commands, and KQL queries for Azure Container Apps. It does not execute commands but teaches you how to diagnose issues."
      },
      {
        "question": "Can this skill fix my Azure issues?",
        "answer": "No. This skill provides guidance and commands you can run. You must execute the Azure CLI commands yourself using Azure credentials."
      },
      {
        "question": "What Azure services are supported?",
        "answer": "Currently covers Azure Container Apps diagnostics including image pull, cold start, and health probe issues. More services coming soon."
      },
      {
        "question": "Do I need Azure CLI installed?",
        "answer": "Yes, you need Azure CLI installed to run the diagnostic commands shown. The skill provides the commands but you must have az CLI configured."
      },
      {
        "question": "What is AppLens?",
        "answer": "AppLens is an Azure MCP tool that provides AI-powered diagnostics. It can automatically detect issues and suggest remediation steps."
      },
      {
        "question": "How do I query Azure Resource Graph?",
        "answer": "Use the extension_cli_generate MCP tool with intent 'query Azure Resource Graph' or construct az graph query commands with KQL."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "container-apps",
          "type": "dir",
          "path": "references/container-apps",
          "children": [
            {
              "name": "README.md",
              "type": "file",
              "path": "references/container-apps/README.md",
              "lines": 106
            }
          ]
        },
        {
          "name": "azure-resource-graph.md",
          "type": "file",
          "path": "references/azure-resource-graph.md",
          "lines": 94
        },
        {
          "name": "kql-queries.md",
          "type": "file",
          "path": "references/kql-queries.md",
          "lines": 66
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 127
    }
  ]
}
