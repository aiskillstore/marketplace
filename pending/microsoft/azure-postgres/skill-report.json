{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-02-21T08:39:29.657Z",
    "slug": "microsoft-azure-postgres",
    "source_url": "https://github.com/microsoft/github-copilot-for-azure/tree/main/plugin/skills/azure-postgres/",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "8b8a21bed230124b7d177b4bc5c4912494cb2b1c966c59e1f22b6ecb188eff97",
    "tree_hash": "d0454cfebc9af09e059ead912e63e7d7c7117c4483f555ec19c14d5a250e741f"
  },
  "skill": {
    "name": "azure-postgres",
    "description": "Create new Azure Database for PostgreSQL Flexible Server instances and configure passwordless authentication with Microsoft Entra ID. Set up developer access, managed identities for apps, group-based permissions, and migrate from password-based to Entra ID authentication. Trigger phrases include \"passwordless for postgres\", \"entra id postgres\", \"azure ad postgres authentication\", \"postgres managed identity\", \"migrate postgres to passwordless\".",
    "summary": "Configure passwordless Entra ID authentication for Azure PostgreSQL Flexible Server with managed identities and group-based access control",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "microsoft",
    "license": "MIT",
    "tags": [
      "azure",
      "postgresql",
      "entra-id",
      "passwordless",
      "managed-identity"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "external_commands",
      "filesystem",
      "env_access",
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "safe",
    "is_blocked": false,
    "safe_to_publish": true,
    "summary": "This is an official Microsoft skill providing Azure PostgreSQL documentation. All static findings are false positives: the detected patterns are Azure CLI commands and SQL code examples in markdown documentation, not executable code. The 'Windows SAM database' alerts are triggered by PostgreSQL SECURITY LABEL syntax. No malicious intent detected.",
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [],
    "files_scanned": 15,
    "total_lines": 1983,
    "audit_model": "claude",
    "audited_at": "2026-02-21T08:39:29.657Z",
    "risk_factors": [
      "scripts",
      "network",
      "filesystem",
      "env_access",
      "external_commands"
    ],
    "risk_factor_evidence": [
      {
        "factor": "external_commands",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 22,
            "line_end": 110
          }
        ]
      },
      {
        "factor": "filesystem",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 62
          }
        ]
      },
      {
        "factor": "env_access",
        "evidence": [
          {
            "file": "references/sdk/azure-postgres-ts.md",
            "line_start": 14,
            "line_end": 14
          }
        ]
      },
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 56,
            "line_end": 62
          }
        ]
      }
    ]
  },
  "content": {
    "user_title": "Configure Azure PostgreSQL Passwordless Authentication",
    "value_statement": "Set up Microsoft Entra ID authentication for Azure PostgreSQL Flexible Server to eliminate password-based access and enable secure, passwordless connections for applications and developers.",
    "seo_keywords": [
      "Azure PostgreSQL",
      "passwordless authentication",
      "Entra ID postgres",
      "Microsoft Entra PostgreSQL",
      "Azure AD authentication",
      "postgres managed identity",
      "Claude Codex postgres",
      "claude-code azure postgres",
      "Azure flexible server postgres",
      "postgresql entra id setup"
    ],
    "actual_capabilities": [
      "Configure Entra ID authentication for existing Azure PostgreSQL Flexible Server instances",
      "Set up managed identity access for Azure-hosted applications",
      "Create user and group-based permissions using Microsoft Entra ID",
      "Migrate existing password-based authentication to passwordless Entra ID",
      "Execute SQL queries and manage database roles through Azure MCP tools or CLI",
      "Troubleshoot Entra ID authentication issues with diagnostic commands"
    ],
    "limitations": [
      "Does not create new PostgreSQL servers - focuses on configuring authentication for existing servers",
      "Requires Azure subscription with existing PostgreSQL Flexible Server",
      "Entra ID admin must be set up on the server before other users can be configured",
      "Does not manage PostgreSQL server provisioning or infrastructure"
    ],
    "use_cases": [
      {
        "title": "Enable Passwordless Authentication for Development Team",
        "description": "Configure Azure PostgreSQL to use Microsoft Entra ID so developers can connect without storing database passwords",
        "target_user": "Development team leads and DevOps engineers"
      },
      {
        "title": "Set Up Application Managed Identity Access",
        "description": "Configure Azure-hosted applications to authenticate to PostgreSQL using managed identities instead of credentials",
        "target_user": "Application developers and cloud architects"
      },
      {
        "title": "Migrate from Password to Entra ID Authentication",
        "description": "Move existing PostgreSQL users and applications from password-based auth to Microsoft Entra ID",
        "target_user": "Database administrators and security teams"
      }
    ],
    "prompt_templates": [
      {
        "title": "List PostgreSQL Servers",
        "prompt": "List all Azure Database for PostgreSQL Flexible Server instances in my subscription using the azure__postgres MCP tool",
        "scenario": "Quick inventory check"
      },
      {
        "title": "Configure Entra ID Admin",
        "prompt": "Set up Microsoft Entra ID as the authentication method for my Azure PostgreSQL server named {server-name} in resource group {rg-name}",
        "scenario": "Initial Entra ID setup"
      },
      {
        "title": "Create User with Entra ID",
        "prompt": "Create a new database user in Azure PostgreSQL for Entra ID user {user-email} with read-only access to database {db-name}",
        "scenario": "Adding new team member"
      },
      {
        "title": "Migrate to Passwordless Auth",
        "prompt": "Help me migrate my Azure PostgreSQL database from password authentication to Microsoft Entra ID passwordless authentication. Current server is {server-name} in {resource-group}",
        "scenario": "Authentication migration"
      }
    ],
    "output_examples": [
      {
        "input": "Configure Entra ID authentication for my Azure PostgreSQL server",
        "output": "I can help you set up Microsoft Entra ID authentication for Azure PostgreSQL. Here are the steps:\n\n1. Set Entra ID admin on your server:\n   az postgres flexible-server ad-admin create \\\n     --server-name YOUR_SERVER \\\n     --resource-group YOUR_RG \\\n     --display-name YOUR_ADMIN \\\n     --object-id ADMIN_OBJECT_ID\n\n2. Create database users from Entra identities:\n   SELECT * FROM pgaadauth_create_principal('user@domain.com', false, false);\n\nWould you like me to help with any specific step?"
      },
      {
        "input": "Set up managed identity for my app to access PostgreSQL",
        "output": "To configure managed identity access:\n\n1. Enable managed identity on your Azure app service:\n   az webapp identity assign --name APP_NAME --resource-group RG\n\n2. Create a database role for the managed identity:\n   SELECT * FROM pgaadauth_create_principal_with_oid(\n     'app-name',\n     'MANAGED-IDENTITY-OBJECT-ID',\n     'service',\n     false,\n     false\n   );\n\n3. Grant database permissions:\n   GRANT CONNECT ON DATABASE yourdb TO \"app-name\";\n   GRANT USAGE ON SCHEMA public TO \"app-name\";\n   GRANT SELECT ON ALL TABLES IN SCHEMA public TO \"app-name\";"
      }
    ],
    "best_practices": [
      "Always use Microsoft Entra ID authentication instead of password-based access for production databases",
      "Enable managed identities for Azure-hosted applications to avoid storing credentials",
      "Use group-based access control in Entra ID to manage PostgreSQL permissions centrally",
      "Configure MFA requirements in Entra ID for additional security on database access"
    ],
    "anti_patterns": [
      "Do not use password-based authentication in production - it exposes credentials in connection strings",
      "Avoid creating individual database users for each application - use managed identities instead",
      "Do not grant excessive privileges like azure_pg_admin to application service principals",
      "Avoid hardcoding database credentials in application code - always use Entra ID or managed identities"
    ],
    "faq": [
      {
        "question": "What is Entra ID authentication for Azure PostgreSQL?",
        "answer": "Entra ID authentication is Microsoft's passwordless authentication method that allows users and applications to connect to Azure PostgreSQL using Azure AD identities instead of database passwords."
      },
      {
        "question": "How do I enable Entra ID on my PostgreSQL server?",
        "answer": "Use Azure CLI to create an Entra ID admin: az postgres flexible-server ad-admin create --server-name SERVER --resource-group RG --display-name ADMIN --object-id OBJECT_ID"
      },
      {
        "question": "What are managed identities and why use them?",
        "answer": "Managed identities are Azure-provided identities for Azure resources. They eliminate the need to store credentials in application code and automatically rotate, improving security."
      },
      {
        "question": "Can I migrate existing password users to Entra ID?",
        "answer": "Yes, you can map existing PostgreSQL roles to Entra identities using SECURITY LABEL commands, then drop the password authentication method."
      },
      {
        "question": "What MCP tools are available for Azure PostgreSQL?",
        "answer": "The azure__postgres MCP tool provides: postgres_server_list, postgres_database_list, postgres_database_query, postgres_server_param_get, and postgres_server_param_set."
      },
      {
        "question": "Does this skill create new PostgreSQL servers?",
        "answer": "No, this skill focuses on configuring authentication for existing Azure PostgreSQL Flexible Server instances. Server creation is handled separately."
      }
    ]
  },
  "file_structure": [
    {
      "name": "references",
      "type": "dir",
      "path": "references",
      "children": [
        {
          "name": "sdk",
          "type": "dir",
          "path": "references/sdk",
          "children": [
            {
              "name": "azure-identity-py.md",
              "type": "file",
              "path": "references/sdk/azure-identity-py.md",
              "lines": 26
            },
            {
              "name": "azure-identity-ts.md",
              "type": "file",
              "path": "references/sdk/azure-identity-ts.md",
              "lines": 23
            },
            {
              "name": "azure-postgres-ts.md",
              "type": "file",
              "path": "references/sdk/azure-postgres-ts.md",
              "lines": 28
            },
            {
              "name": "azure-resource-manager-postgresql-dotnet.md",
              "type": "file",
              "path": "references/sdk/azure-resource-manager-postgresql-dotnet.md",
              "lines": 29
            }
          ]
        },
        {
          "name": "entra-rbac-overview.md",
          "type": "file",
          "path": "references/entra-rbac-overview.md",
          "lines": 172
        },
        {
          "name": "group-sync.md",
          "type": "file",
          "path": "references/group-sync.md",
          "lines": 256
        },
        {
          "name": "permission-templates.md",
          "type": "file",
          "path": "references/permission-templates.md",
          "lines": 205
        },
        {
          "name": "sql-functions.md",
          "type": "file",
          "path": "references/sql-functions.md",
          "lines": 82
        },
        {
          "name": "troubleshooting.md",
          "type": "file",
          "path": "references/troubleshooting.md",
          "lines": 301
        }
      ]
    },
    {
      "name": "scripts",
      "type": "dir",
      "path": "scripts",
      "children": [
        {
          "name": "az-commands.sh",
          "type": "file",
          "path": "scripts/az-commands.sh",
          "lines": 122
        },
        {
          "name": "migrate-to-entra.sh",
          "type": "file",
          "path": "scripts/migrate-to-entra.sh",
          "lines": 126
        },
        {
          "name": "setup-group.sh",
          "type": "file",
          "path": "scripts/setup-group.sh",
          "lines": 194
        },
        {
          "name": "setup-managed-identity.sh",
          "type": "file",
          "path": "scripts/setup-managed-identity.sh",
          "lines": 158
        },
        {
          "name": "setup-user.sh",
          "type": "file",
          "path": "scripts/setup-user.sh",
          "lines": 136
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md",
      "lines": 125
    }
  ]
}
